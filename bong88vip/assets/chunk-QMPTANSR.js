import{a as Pt,b as K,c as At,d as O,e as $t,f as J,g as N,h as u,i as p,j as Ut,k as f,l as T,m as g,n as x,o as Xt}from"./chunk-YTIDJAM7.js";import{Aa as Vt,E as Et,H as Z,J as _,L as ht,Q as Y,T as dt,e as Nt,g as E,i as V,ja as Gt,la as lt,oa as $,s as qt,sa as ct,x as rt,xa as pt,ya as Lt,z as G,za as jt}from"./chunk-LOMIDAH7.js";import{a as X,b as Ot,g as k}from"./chunk-MON7YFGF.js";var d={calHistory:{i:1e3,percent:{top:10,left:2106}},table:{i:1},dealer:{i:1e3,n:"dealer"},plate:{i:200,a:2e3},bettingSpot:{i:100,n:"spotsContainer",spot:{n:a=>"spot"+a.toString()},spot1:{actionIndex:1},spot2:{actionIndex:2},spot3:{actionIndex:3},spot4:{actionIndex:7},spot5:{actionIndex:4},spot6:{actionIndex:5},spot7:{actionIndex:6},spotArea:{n:a=>"spotArea"+a.toString()}},tableHistory:{i:110},player:{i:1e3,n:"playerContainer",other:{n:"otherPlayer"},o:{avatar:{container:{n:"avatarContainer"},n:"avatar"},balance:{background:{n:"balanceBackground"}}}},denomination:{i:120,n:"denominationsContainer",mask:{n:"denominationsMaskWrapper",wrapper:{n:"denominationsWrapper"}},item:{n:a=>"denomination"+a.toString(),active:{n:"denominationActive"},icon:{n:"icon"}}},listCoinBet:{i:900},coinTossWinAnimation:{i:1e3,n:"winAnimationContainer"}};var mt=class{destroy(){this.plate01?.destroy(),this.plate02?.destroy(),this.plateContainer?.destroy(),this.plate01=null,this.plate02=null,this.plateContainer=null}constructor(t){this.container=t,this.plateContainer=new u,this.plate01Width=172,this.plate01Height=165,this.plate01Ratio=this.plate01Width/this.plate01Height,this.plate02Width=186,this.plate02Height=180,this.plate02Ratio=this.plate02Width/this.plate02Height,this.assets=x.getInstance(),this.containerHeight=649,this.containerWidth=553,this.coinContainer=new u,this.coinContainerWidth=260,this.coinContainerHeight=260,this.shakeAmplitude=10,this.shakeFrequency=.8,this.shakeTime=0,this.plateContainer.sortableChildren=!0,this.plateContainer.width=this.containerWidth,this.plateContainer.height=this.containerHeight,this.plate01=new p(this.assets.gameAssets.coinToss.plate01),this.plate02=new p(this.assets.gameAssets.coinToss.plate02),this.plate01.zIndex=20,this.plateContainer.zIndex=d.plate.i,this.plate02.zIndex=1,this.plate02.width=417,this.plate02.height=this.plate02.width/this.plate02Ratio,this.plate02.x=23,this.plate02.y=this.containerHeight-this.plate02.height-23,this.plate01.width=370,this.plate01.height=this.plate01.width/this.plate01Ratio,this.plate01.x=this.plate02.x+26,this.plate01.y=this.plate02.y+20,this.plateContainer.addChild(this.plate02),this.plateContainer.addChild(this.plate01),this.plateContainer.x=1540,this.plateContainer.y=443,this.container.addChild(this.plateContainer)}addCoin(t,n){this.coinContainer.sortableChildren=!0,this.coinContainer.zIndex=10,this.coinContainer.width=this.coinContainerWidth,this.coinContainer.height=this.coinContainerHeight,this.coinContainer.x=100,this.coinContainer.y=290;let e=[];for(let i=0;i<t;i++){let s=new p(this.assets.gameAssets.coinToss.coin01);s.width=87,s.height=87;let o;do o=this.getRandomPosition(s.width,s.height,this.coinContainerWidth,this.coinContainerHeight);while(this.isOverlap(o,e));e.push(o),s.x=o.x,s.y=o.y,this.coinContainer.addChild(s)}for(let i=0;i<n;i++){let s=new p(this.assets.gameAssets.coinToss.coin02);s.width=87,s.height=87;let o;do o=this.getRandomPosition(s.width,s.height,this.coinContainerWidth,this.coinContainerHeight);while(this.isOverlap(o,e));e.push(o),s.x=o.x,s.y=o.y,this.coinContainer.addChild(s)}this.plateContainer?.addChild(this.coinContainer)}getRandomPosition(t,n,e,i){let s=Math.random()*(e-t),o=Math.random()*(i-n);return{x:s,y:o}}isOverlap(t,n){for(let e of n)if(Math.abs(e.x-t.x)<87&&Math.abs(e.y-t.y)<87)return!0;return!1}removeCoin(){this.coinContainer?.destroy(),this.coinContainer=null}shake(){return new Promise(t=>{this.assets.gameAssets.coinToss.soundPlateShake.play({loop:!0,singleInstance:!0});let n=this.plateContainer.position.x,e=this.plateContainer.position.y,i,s=()=>{this.plateContainer&&(this.shakeTime+=this.shakeFrequency,this.plateContainer.position.x=n+Math.sin(this.shakeTime)*this.shakeAmplitude,this.plateContainer.position.y=e+Math.cos(this.shakeTime)*this.shakeAmplitude,i=requestAnimationFrame(s))};s(),setTimeout(()=>{cancelAnimationFrame(i),this.assets.gameAssets.coinToss.soundPlateShake.stop(),t(!0)},1500)})}reset(){return new Promise(t=>{this.assets.gameAssets.coinToss.soundPlateReset.play({loop:!1,singleInstance:!0});let n=this.plate01.position.x,e=this.plate01.position.y,i=this.plate02.x+26,s=this.plate02.y+20,o=i-n,r=s-e,l=o/60,h=r/60,c=()=>{if(!this.plate01)return t(!0);this.plate01.position.x+=l,this.plate01.position.y+=h,l>0&&this.plate01.position.x<i||l<0&&this.plate01.position.x>i||h>0&&this.plate01.position.y<s||h<0&&this.plate01.position.y>s?requestAnimationFrame(c):(this.plate01.position.x=i,this.plate01.position.y=s,t(!0))};c()})}reveal(){return new Promise(t=>{this.assets.gameAssets.coinToss.soundPlateReveal.play({loop:!1,singleInstance:!0});let n=this.plate01.position.x,e=this.plate01.position.y,i=161-n,s=0-e,o=i/60,r=s/60,l=()=>{this.plate01&&(this.plate01.position.x+=o,this.plate01.position.y+=r,o>0&&this.plate01.position.x<161||o<0&&this.plate01.position.x>161||r>0&&this.plate01.position.y<0||r<0&&this.plate01.position.y>0?requestAnimationFrame(l):(this.plate01.position.x=161,this.plate01.position.y=0,t(!0)))};l()})}showPlate01(){return new Promise(t=>{let n=.03333333333333333,e=()=>{this.plate01&&(this.plate01.alpha+=n,this.plate01.alpha<1?requestAnimationFrame(e):(this.plate01.alpha=1,t(!0)))};e()})}hidePlate01(){return new Promise(t=>{let n=.03333333333333333,e=()=>{this.plate01&&(this.plate01.alpha-=n,this.plate01.alpha>0?requestAnimationFrame(e):(this.plate01.alpha=0,t(!0)))};e()})}};var Q={1:{top:{x:300,y:60},width:730,height:400},2:{top:{x:120,y:60},width:680,height:400},3:{top:{x:210,y:60},width:350,height:280},4:{top:{x:110,y:60},width:300,height:280},5:{top:{x:110,y:60},width:300,height:280},6:{top:{x:110,y:60},width:300,height:280},7:{top:{x:110,y:60},width:300,height:280}},yt=class{constructor(t,n){this.container=t,this.clickSpotAction=n,this.spotsContainer=new u,this.spotsContainerWidth=2735,this.spotsContainerHeight=925,this.assets=x.getInstance(),this.spot01Width=1093,this.spot01Height=497,this.spot03Width=606,this.spot03Height=391,this.spot05Width=455,this.textStyle=new T({fontFamily:this.assets.gameAssets.coinToss.notoSerif.family,fontSize:77,fill:"#f3e9e9",dropShadow:!0,dropShadowColor:"#f3e9e9",dropShadowBlur:10,dropShadowAlpha:.8,dropShadowDistance:0,dropShadowAngle:4}),this.coinSpotSize=46,this.coinSpotPadding=14,this.coinSpotX=151,this.spotEvenOddAnimation={},this.spotsContainer.sortableChildren=!0,this.spotsContainer.name=d.bettingSpot.n,this.spotsContainer.zIndex=d.bettingSpot.i,this.spotsContainer.x=405,this.spotsContainer.y=591,this.spot01=new p(this.assets.gameAssets.coinToss.bettingSpot0101),this.spot01.animationName="even",this.spot01.textureDefault=this.assets.gameAssets.coinToss.bettingSpot0101,this.spot01.winTexture=this.assets.gameAssets.coinToss.bettingSpot0102,this.spot01.spotWin=this.assets.gameAssets.coinToss.bettingSpot0103,this.spot01.zIndex=10,this.spot01.width=this.spot01Width,this.spot01.height=this.spot01Height,this.spot01.x=10,this.spot01.y=10,this.spot01.name=d.bettingSpot.spot.n(1),this.spot01.eventMode="static",this.spot01.cursor="pointer",this.spotsContainer?.addChild(this.spot01),this.spot01.on("pointerdown",()=>{n(d.bettingSpot.spot1.actionIndex)}),this.spot02=new p(this.assets.gameAssets.coinToss.bettingSpot0201),this.spot02.textureDefault=this.assets.gameAssets.coinToss.bettingSpot0201,this.spot02.animationName="odd",this.spot02.winTexture=this.assets.gameAssets.coinToss.bettingSpot0202,this.spot02.spotWin=this.assets.gameAssets.coinToss.bettingSpot0203,this.spot02.zIndex=10,this.spot02.width=this.spot01Width,this.spot02.height=this.spot01Height,this.spot02.x=1628,this.spot02.y=10,this.spot02.name=d.bettingSpot.spot.n(2),this.spot02.eventMode="static",this.spot02.cursor="pointer",this.spotsContainer?.addChild(this.spot02),this.spot02.on("pointerdown",()=>{n(d.bettingSpot.spot2.actionIndex)}),this.spot03=new p(this.assets.gameAssets.coinToss.bettingSpot0301),this.spot03.textureDefault=this.assets.gameAssets.coinToss.bettingSpot0301,this.spot03.animationName="fourRed",this.spot03.winTexture=this.assets.gameAssets.coinToss.bettingSpot0302,this.spot03.spotWin=this.assets.gameAssets.coinToss.bettingSpot0303,this.spot03.zIndex=10,this.spot03.width=this.spot03Width,this.spot03.height=this.spot03Height,this.spot03.x=5,this.spot03.y=524,this.spot03.name=d.bettingSpot.spot.n(3),this.spot03.eventMode="static",this.spot03.cursor="pointer",this.spotsContainer?.addChild(this.spot03),this.spot03.on("pointerdown",()=>{n(d.bettingSpot.spot3.actionIndex)}),this.spot04=new p(this.assets.gameAssets.coinToss.bettingSpot0401),this.spot04.textureDefault=this.assets.gameAssets.coinToss.bettingSpot0401,this.spot04.animationName="fourWhite",this.spot04.winTexture=this.assets.gameAssets.coinToss.bettingSpot0402,this.spot04.spotWin=this.assets.gameAssets.coinToss.bettingSpot0403,this.spot04.zIndex=10,this.spot04.width=this.spot03Width,this.spot04.height=this.spot03Height,this.spot04.x=2121,this.spot04.y=524,this.spot04.name=d.bettingSpot.spot.n(7),this.spot04.eventMode="static",this.spot04.cursor="pointer",this.spotsContainer?.addChild(this.spot04),this.spot04.on("pointerdown",()=>{n(d.bettingSpot.spot4.actionIndex)}),this.spot05=new p(this.assets.gameAssets.coinToss.bettingSpot0501),this.spot05.textureDefault=this.assets.gameAssets.coinToss.bettingSpot0501,this.spot05.animationName="threeRedOneWhite",this.spot05.winTexture=this.assets.gameAssets.coinToss.bettingSpot0502,this.spot05.spotWin=this.assets.gameAssets.coinToss.bettingSpot0503,this.spot05.zIndex=10,this.spot05.width=this.spot05Width,this.spot05.height=this.spot03Height,this.spot05.x=647,this.spot05.y=524,this.spot05.name=d.bettingSpot.spot.n(4),this.spot05.eventMode="static",this.spot05.cursor="pointer",this.spotsContainer?.addChild(this.spot05),this.spot05.on("pointerdown",()=>{n(d.bettingSpot.spot5.actionIndex)}),this.spot06=new p(this.assets.gameAssets.coinToss.bettingSpot0501),this.spot06.textureDefault=this.assets.gameAssets.coinToss.bettingSpot0501,this.spot06.animationName="twoRedTwoWhite",this.spot06.winTexture=this.assets.gameAssets.coinToss.bettingSpot0502,this.spot06.spotWin=this.assets.gameAssets.coinToss.bettingSpot0503,this.spot06.zIndex=10,this.spot06.width=this.spot05Width,this.spot06.height=this.spot03Height,this.spot06.x=1139,this.spot06.y=524,this.spot06.name=d.bettingSpot.spot.n(5),this.spot06.eventMode="static",this.spot06.cursor="pointer",this.spotsContainer?.addChild(this.spot06),this.spot06.on("pointerdown",()=>{n(d.bettingSpot.spot6.actionIndex)}),this.spot07=new p(this.assets.gameAssets.coinToss.bettingSpot0501),this.spot07.textureDefault=this.assets.gameAssets.coinToss.bettingSpot0501,this.spot07.animationName="oneRedThreeWhite",this.spot07.winTexture=this.assets.gameAssets.coinToss.bettingSpot0502,this.spot07.spotWin=this.assets.gameAssets.coinToss.bettingSpot0503,this.spot07.zIndex=10,this.spot07.width=this.spot05Width,this.spot07.height=this.spot03Height,this.spot07.x=1628,this.spot07.y=524,this.spot07.name=d.bettingSpot.spot.n(6),this.spot07.eventMode="static",this.spot07.cursor="pointer",this.spotsContainer?.addChild(this.spot07),this.spot07.on("pointerdown",()=>{n(d.bettingSpot.spot7.actionIndex)}),this.addCoinToSpot(4,0,0),this.addCoinToSpot(3,1,1),this.addCoinToSpot(2,2,2),this.addCoinToSpot(1,3,3),this.addCoinToSpot(0,4,4),this.addTextToTwoSpot("1:14.4",0),this.addTextToTwoSpot("1:3.75",1),this.addTextToTwoSpot("1:2.4",2),this.addTextToTwoSpot("1:3.75",3),this.addTextToTwoSpot("1:14.4",4),this.addTextToOneSpot("1:1.96",0),this.addTextToOneSpot("1:1.96",1);let e=new p(this.assets.gameAssets.coinToss.evenText);e.x=679-555,e.y=835-685,e.width=1055-679,e.height=e.width*(59/158),e.zIndex=20,this.spotsContainer?.addChild(e);let i=new p(this.assets.gameAssets.coinToss.oddText);i.x=2221-555,i.y=835-685,i.width=2365-2221,i.height=i.width*(65/60),i.zIndex=20,this.spotsContainer?.addChild(i),this.container.addChild(this.spotsContainer);for(let s=1;s<=7;s++)this.drawSpotArea(s)}drawSpotArea(t){let n=this.spotsContainer?.getChildByName(d.bettingSpot.spot.n(t));if(!n||!Q[t.toString()])return;let e=new f;e.zIndex=100,e.name=d.bettingSpot.spotArea.n(t),e.beginFill(9909289,1e-5),e.drawRect(0,0,Q[t.toString()].width,Q[t.toString()].height),e.x=n.x+Q[t.toString()].top.x,e.y=n.y+Q[t.toString()].top.y,this.spotsContainer?.addChild(e)}addTextToOneSpot(t,n){let e=new g(t,this.textStyle);e.anchor.set(1,0),e.x=n===0?1050:2587,e.y=211,e.zIndex=50,this.spotsContainer?.addChild(e)}addTextToTwoSpot(t,n){let e=new g(t,this.textStyle);e.anchor.set(1,0),e.x=n===4?2629:561+489*n,e.y=686,e.zIndex=50,this.spotsContainer?.addChild(e)}addCoinToSpot(t,n,e=0){let i=(s,o)=>{s.width=this.coinSpotSize,s.height=this.coinSpotSize,s.x=e===0?this.coinSpotX:e*491+this.coinSpotX+this.coinSpotSize,s.y=this.coinSpotPadding*o+this.coinSpotSize*o+602,s.zIndex=50,this.spotsContainer?.addChild(s)};for(let s=0;s<t;s++){let o=new p(this.assets.gameAssets.coinToss.coin02);i(o,s)}for(let s=0;s<n;s++){let o=new p(this.assets.gameAssets.coinToss.coin01);i(o,s+t)}}spotDefault(){this.spot01.texture=this.spot01.textureDefault,this.spot02.texture=this.spot02.textureDefault,this.spot03.texture=this.spot03.textureDefault,this.spot04.texture=this.spot04.textureDefault,this.spot05.texture=this.spot05.textureDefault,this.spot06.texture=this.spot06.textureDefault,this.spot07.texture=this.spot07.textureDefault}AddSpotWinAnimationV2(t,n=7e3){return new Promise(e=>{if(this.spotEvenOddAnimation[t.animationName])return e(!0);this.spotEvenOddAnimation[t.animationName]=!0;let i=new p(t.winTexture);i.width=t.width-20,i.height=t.height-20,i.x=t.x+10,i.y=t.y+10,i.zIndex=1,this.spotsContainer?.addChild(i),V(this.SpotWinAnimation(t,n)).subscribe(s=>{i.destroy(),this.spotsContainer?.removeChild(i),this.spotEvenOddAnimation[t.animationName]=!1,t.texture=t.spotWin,e(!0)})})}SpotWinAnimation(t,n=7e3){return new Promise(e=>{if(t.animation===!0)return e(!0);t.animation=!0;let i=new p(this.assets.gameAssets.coinToss.spotWinBg),s=Math.max(t.width,t.height)*1.5;i.anchor.x=.5,i.anchor.y=.5,i.position.x=t.width/2+t.x,i.position.y=t.height/2+t.y,i.width=s,i.height=s,i.mask=t,this.spotsContainer?.addChild(i);let o=2*Math.PI/120,r,l=()=>{i&&(i.rotation+=o,r=requestAnimationFrame(l))};l(),setTimeout(()=>{cancelAnimationFrame(r),i.mask=null,i.destroy(),this.spotsContainer?.removeChild(i),t.animation=!1,e(!0)},n)})}destroy(){this.spot01?.destroy(),this.spot01=null,this.spot02?.destroy(),this.spot02=null,this.spot03?.destroy(),this.spot03=null,this.spot04?.destroy(),this.spot04=null,this.spot05?.destroy(),this.spot05=null,this.spot06?.destroy(),this.spot06=null,this.spot07?.destroy(),this.spot07=null,this.spotsContainer?.removeChildren(),this.spotsContainer?.destroy(),this.spotsContainer=null,this.clickSpotAction=null}};var It=x.getInstance(),P={10:{color:"#be7724",name:"10",index:0,value:10},20:{color:"#7f31c9",name:"20",index:1,value:20},50:{color:"#c63fad",name:"50",index:2,value:50},100:{color:"#146bce",name:"100",index:3,value:100},200:{color:"#0b9aac",name:"200",index:4,value:200},500:{color:"#bd2f18",name:"500",index:5,value:500},1e3:{color:"#0c1f34",name:"1k",index:6,value:1e3},2e3:{color:"#4b3e0d",name:"2k",index:7,value:2e3}},tt=(a,t,n=0,e=0,i,s,o=340,r=!0,l,h,c)=>{let A=new T({fontFamily:It.gameAssets.coinToss.notoSerifBold.family,fontSize:65,fill:["#d0cecf","#eeeded","#f5f5f6","#c6c6c6"],dropShadowAngle:4,stroke:"#3c3939",strokeThickness:10}),y=new u;y.sortableChildren=!0,y.zIndex=o,y.name=d.denomination.item.n(e);let C=new f;C.beginFill(parseInt(a.replace("#","0x"),16)),C.drawRoundedRect(0,0,i-14,s-14,Math.max(i-14,s-14)/2),C.position.set(7,14),C.endFill(),C.zIndex=1;let B=new p(It.gameAssets.coinToss.denominations);if(B.zIndex=2,B.width=i-14,B.height=s-14,B.position.set(7,14),B.name=d.denomination.item.icon.n,l&&h){let v=new p(It.gameAssets.coinToss.denominationsActive);v.name=d.denomination.item.active.n,v.zIndex=3,v.width=l,v.height=h,v.anchor.set(.5,.5),v.position.set(i/2,s/2+7),v.visible=!1,y.addChild(v)}if(r){let v=new g(t.toString().toUpperCase(),A);v.anchor.set(.5,.5),v.x=i/2,v.y=s/2+4,v.zIndex=5,y?.addChild(v)}return y.addChild(C),y.addChild(B),c&&(y.eventMode="dynamic",y.cursor="pointer",y.valueNumber=e,y.valueName=t,y.on("pointerdown",()=>{c(t)})),y.position.set((i+10)*n,0),y};var ut=class{constructor(t,n){this.container=t,this.betting=n,this.scaleAction=!0,this.denominationsContainer=new u,this.assets=x.getInstance(),this.denominationsSize={width:1780,height:231,padding:167},this.denominationsWrapper=new u,this.denominationsMaskWrapper=new u,this.backgroundGraphic=new f,this.rightArrow=new p(this.assets.gameAssets.coinToss.denominationRightArrow),this.leftArrow=new p(this.assets.gameAssets.coinToss.denominationLeftArrow),this.isDragging=!1,this.prevPointerPos=null,this.denominationSize={width:217,height:217,activeWidth:260,denominationRatio:239/223,activeScale:260/217,activeHeight:217*260/217},this.denominationContainers={},this.animationFrameId=null,this.denominationsContainer.zIndex=d.denomination.i,this.denominationsContainer.name=d.denomination.n,this.denominationsContainer.x=881,this.denominationsContainer.y=1541,this.backgroundGraphic.y=52,this.backgroundGraphic.beginFill(0,.5),this.backgroundGraphic.drawRoundedRect(0,0,this.denominationsSize.width,this.denominationsSize.height,115.5),this.backgroundGraphic.endFill(),this.backgroundGraphic.zIndex=310,this.denominationsMaskWrapper.sortableChildren=!0,this.denominationsMaskWrapper.name=d.denomination.mask.n,this.denominationsMaskWrapper.width=this.denominationsSize.width-this.denominationsSize.padding*2,this.denominationsMaskWrapper.height=this.denominationSize.activeHeight+30;let e=new f;e.beginFill(0,1),e.drawRect(0,0,this.denominationsSize.width-this.denominationsSize.padding*2,this.denominationSize.activeHeight+30),e.position.y=this.denominationsSize.height-this.denominationSize.activeHeight-30,this.denominationsMaskWrapper.mask=e,this.denominationsMaskWrapper?.addChild(e),this.denominationsMaskWrapper.position.set(this.denominationsSize.padding,52),this.denominationsMaskWrapper.zIndex=320,this.denominationsWrapper.sortableChildren=!0,this.denominationsWrapper.name=d.denomination.mask.wrapper.n,this.denominationsWrapper.width=this.denominationsSize.width-this.denominationsSize.padding*2,this.denominationsWrapper.height=this.denominationSize.activeHeight+30,this.denominationsWrapper.zIndex=320,this.denominationsContainer.addChild(this.backgroundGraphic),this.denominationsContainer.width=this.denominationsSize.width,this.denominationsContainer.height=this.denominationsSize.height,this.denominationsMaskWrapper.addChild(this.denominationsWrapper),this.denominationsContainer.addChild(this.denominationsMaskWrapper);for(let i in P)this.addDenomination(P[i].color,P[i].name,P[i].index,P[i].value);this.activeContainer("10",!1),this.leftArrow.width=98,this.leftArrow.height=98/(40/56),this.leftArrow.y=(this.denominationsContainer.height-this.leftArrow.height)/2+25,this.leftArrow.x=40,this.leftArrow.eventMode="dynamic",this.rightArrow.width=98,this.rightArrow.height=98/(40/56),this.rightArrow.y=(this.denominationsContainer.height-this.rightArrow.height)/2+25,this.rightArrow.x=this.denominationsContainer.width-130,this.rightArrow.eventMode="dynamic",this.rightArrow.on("pointerdown",()=>{this.moveRight()}),this.leftArrow.on("pointerdown",()=>{this.moveLeft()}),this.denominationsContainer.addChild(this.rightArrow),this.denominationsContainer.addChild(this.leftArrow),this.container.addChild(this.denominationsContainer),this.denominationsWrapper.eventMode="dynamic",this.denominationsWrapper.on("pointerdown",this.onDragStart.bind(this)),this.denominationsWrapper.on("pointerup",this.onDragEnd.bind(this)),this.denominationsWrapper.on("pointerupoutside",this.onDragEnd.bind(this)),this.denominationsWrapper.on("pointerleave",this.onDragEnd.bind(this)),this.denominationsWrapper.on("pointermove",this.onDragMove.bind(this))}onDragStart(t){this.isDragging=!0,this.prevPointerPos=t.data.getLocalPosition(this.denominationsWrapper)}onDragEnd(){this.isDragging=!1,this.prevPointerPos=null}onDragMove(t){if(!this.isDragging||!this.prevPointerPos)return;let n=t.data.getLocalPosition(this.denominationsWrapper),e=n.x-this.prevPointerPos.x,i=this.denominationsWrapper.x+e;i<10&&i>this.denominationsSize.width-this.denominationsSize.padding*2-40-this.denominationsWrapper.width&&(this.denominationsWrapper.x=i,this.prevPointerPos=n)}moveWrapperLeft(){let n=this.denominationContainers[Object.keys(this.denominationContainers)[0]].width*1.1,e=this.denominationsWrapper.x-n,i=1e3,s=performance.now(),o=r=>{if(!this.denominationsWrapper||!this.denominationsSize)return;let l=r-s,h=Math.min(l/i,1),c=this.denominationsWrapper.x-e*h;c<10&&c>this.denominationsSize.width-this.denominationsSize.padding*2-40-this.denominationsWrapper.width&&(this.denominationsWrapper.x=c),h<1&&requestAnimationFrame(o)};requestAnimationFrame(o)}moveWrapperRight(){let n=this.denominationContainers[Object.keys(this.denominationContainers)[0]].width*1.1,e=this.denominationsWrapper.x-n,i=1e3,s=performance.now(),o=r=>{if(!this.denominationsWrapper||!this.denominationsSize)return;let l=r-s,h=Math.min(l/i,1),c=this.denominationsWrapper.x-e*h*-1;c<10&&c>this.denominationsSize.width-this.denominationsSize.padding*2-40-this.denominationsWrapper.width&&(this.denominationsWrapper.x=c),h<1&&requestAnimationFrame(o)};requestAnimationFrame(o)}getActive(){for(let t in this.denominationContainers)if(this.denominationContainers[t].active)return this.denominationContainers[t];return null}moveRight(){let t=this.getActive();if(t){let n=t.valueNumber,e=0,i=null;for(let s in this.denominationContainers)this.denominationContainers[s].valueNumber>n&&(this.denominationContainers[s].valueNumber<=e||!e)&&(e=this.denominationContainers[s].valueNumber,i=this.denominationContainers[s].valueName);i&&this.activeContainer(i)}}moveLeft(){let t=this.getActive();if(t){let n=t.valueNumber,e=0,i=null;for(let s in this.denominationContainers)this.denominationContainers[s].valueNumber<n&&(this.denominationContainers[s].valueNumber>=e||!e)&&(e=this.denominationContainers[s].valueNumber,i=this.denominationContainers[s].valueName);i&&this.activeContainer(i)}}removeRotateAnimate(){if(this.animationFrameId)try{cancelAnimationFrame(this.animationFrameId)}catch{}}disableDenomination(){for(let t in this.denominationContainers)if(this.denominationContainers[t].active){this.denominationContainers[t].active=!1,this.denominationContainers[t].zIndex=340;let n=this.denominationContainers[t].scale.x,e=()=>{if(!(!this.denominationContainers||!this.denominationContainers[t]||!this.denominationSize))if(n>1){n-=.02,this.denominationContainers[t].scale.set(n,n);let i=this.denominationSize.activeHeight*n;this.denominationContainers[t].y=this.denominationSize.activeHeight-i,requestAnimationFrame(e)}else this.denominationContainers[t].getChildByName("denominationActive").visible=!1};this.scaleAction&&e()}}checkDisableArrow(t){let e=this.denominationContainers[t].valueNumber,i=!0,s=!0;for(let o in this.denominationContainers)this.denominationContainers[o].valueNumber<e&&(i=!1),this.denominationContainers[o].valueNumber>e&&(s=!1);i?(this.leftArrow.texture=this.assets.gameAssets.coinToss.denominationLeftArrowD,this.leftArrow.cursor="not-allowed"):(this.leftArrow.texture=this.assets.gameAssets.coinToss.denominationLeftArrow,this.leftArrow.cursor="pointer"),s?(this.rightArrow.texture=this.assets.gameAssets.coinToss.denominationRightArrowD,this.rightArrow.cursor="not-allowed"):(this.rightArrow.texture=this.assets.gameAssets.coinToss.denominationRightArrow,this.rightArrow.cursor="pointer")}activeContainer(t,n=!0){if(this.denominationContainers[t].active)return;n&&this.assets.gameAssets.coinToss.soundDenominationNext.play({loop:!1,singleInstance:!0}),this.disableDenomination(),this.removeRotateAnimate(),this.checkDisableArrow(t);let e=this.denominationContainers[t];this.betting(e.valueNumber),this.denominationsWrapper.x*-1>e.x?this.moveWrapperLeft():e.width+e.x+this.denominationsWrapper.x>this.denominationsSize.width-this.denominationsSize.padding*2&&this.moveWrapperRight(),e.active=!0,e.zIndex=341;let i=e.getChildByName("denominationActive");i.visible=!0;let s=1,o=e.y,r=.02,l=1.2,h=()=>{if(!(!i||!this.denominationSize)){if(i.rotation>=360?i.rotation=0:i.rotation+=.15,s<l&&this.scaleAction){s+=r,e.scale.set(s,s);let c=this.denominationSize.height*s;e.y=this.denominationSize.height-c}this.animationFrameId=requestAnimationFrame(h)}};this.scaleAction&&h()}addDenomination(t,n,e=0,i=0){let s=tt(t,n,e,i,this.denominationSize.width,this.denominationSize.height,340,!0,this.denominationSize.activeWidth,this.denominationSize.activeHeight,o=>{this.activeContainer(o)});this.denominationContainers[n]=s,this.denominationsWrapper?.addChild(s)}destroy(){this.denominationsContainer?.destroy(),this.denominationsContainer=null,this.denominationsMaskWrapper?.destroy(),this.denominationsMaskWrapper=null,this.denominationsWrapper?.destroy(),this.denominationsWrapper=null}};var pe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,me=`
varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec2 uOffset;

void main(void)
{
    vec4 color = vec4(0.0);

    // Sample top left pixel
    color += texture2D(uSampler, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y));

    // Sample top right pixel
    color += texture2D(uSampler, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y));

    // Sample bottom right pixel
    color += texture2D(uSampler, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y));

    // Sample bottom left pixel
    color += texture2D(uSampler, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y));

    // Average
    color *= 0.25;

    gl_FragColor = color;
}`,ye=`
varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec2 uOffset;
uniform vec4 filterClamp;

void main(void)
{
    vec4 color = vec4(0.0);

    // Sample top left pixel
    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));

    // Sample top right pixel
    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));

    // Sample bottom right pixel
    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));

    // Sample bottom left pixel
    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));

    // Average
    color *= 0.25;

    gl_FragColor = color;
}
`,et=class extends J{constructor(t=4,n=3,e=!1){super(pe,e?ye:me),this._kernels=[],this._blur=4,this._quality=3,this.uniforms.uOffset=new Float32Array(2),this._pixelSize=new O,this.pixelSize=1,this._clamp=e,Array.isArray(t)?this.kernels=t:(this._blur=t,this.quality=n)}apply(t,n,e,i){let s=this._pixelSize.x/n._frame.width,o=this._pixelSize.y/n._frame.height,r;if(this._quality===1||this._blur===0)r=this._kernels[0]+.5,this.uniforms.uOffset[0]=r*s,this.uniforms.uOffset[1]=r*o,t.applyFilter(this,n,e,i);else{let l=t.getFilterTexture(),h=n,c=l,A,y=this._quality-1;for(let C=0;C<y;C++)r=this._kernels[C]+.5,this.uniforms.uOffset[0]=r*s,this.uniforms.uOffset[1]=r*o,t.applyFilter(this,h,c,1),A=h,h=c,c=A;r=this._kernels[y]+.5,this.uniforms.uOffset[0]=r*s,this.uniforms.uOffset[1]=r*o,t.applyFilter(this,h,e,i),t.returnFilterTexture(l)}}_updatePadding(){this.padding=Math.ceil(this._kernels.reduce((t,n)=>t+n+.5,0))}_generateKernels(){let t=this._blur,n=this._quality,e=[t];if(t>0){let i=t,s=t/n;for(let o=1;o<n;o++)i-=s,e.push(i)}this._kernels=e,this._updatePadding()}get kernels(){return this._kernels}set kernels(t){Array.isArray(t)&&t.length>0?(this._kernels=t,this._quality=t.length,this._blur=Math.max(...t)):(this._kernels=[0],this._quality=1)}get clamp(){return this._clamp}set pixelSize(t){typeof t=="number"?(this._pixelSize.x=t,this._pixelSize.y=t):Array.isArray(t)?(this._pixelSize.x=t[0],this._pixelSize.y=t[1]):t instanceof O?(this._pixelSize.x=t.x,this._pixelSize.y=t.y):(this._pixelSize.x=1,this._pixelSize.y=1)}get pixelSize(){return this._pixelSize}get quality(){return this._quality}set quality(t){this._quality=Math.max(1,Math.round(t)),this._generateKernels()}get blur(){return this._blur}set blur(t){this._blur=t,this._generateKernels()}};var ue=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,ge=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float alpha;
uniform vec3 color;

uniform vec2 shift;
uniform vec4 inputSize;

void main(void){
    vec4 sample = texture2D(uSampler, vTextureCoord - shift * inputSize.zw);

    // Premultiply alpha
    sample.rgb = color.rgb * sample.a;

    // alpha user alpha
    sample *= alpha;

    gl_FragColor = sample;
}`,fe=Object.defineProperty,Zt=Object.getOwnPropertySymbols,Ce=Object.prototype.hasOwnProperty,xe=Object.prototype.propertyIsEnumerable,Yt=(a,t,n)=>t in a?fe(a,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[t]=n,Kt=(a,t)=>{for(var n in t||(t={}))Ce.call(t,n)&&Yt(a,n,t[n]);if(Zt)for(var n of Zt(t))xe.call(t,n)&&Yt(a,n,t[n]);return a},Wt=class extends J{constructor(a){super(),this.angle=45,this._distance=5,this._resolution=Pt.FILTER_RESOLUTION;let t=a?Kt(Kt({},Wt.defaults),a):Wt.defaults,{kernels:n,blur:e,quality:i,pixelSize:s,resolution:o}=t;this._offset=new $t(this._updatePadding,this),this._tintFilter=new J(ue,ge),this._tintFilter.uniforms.color=new Float32Array(4),this._tintFilter.uniforms.shift=this._offset,this._tintFilter.resolution=o,this._blurFilter=n?new et(n):new et(e,i),this.pixelSize=s,this.resolution=o;let{shadowOnly:r,rotation:l,distance:h,offset:c,alpha:A,color:y}=t;this.shadowOnly=r,l!==void 0&&h!==void 0?(this.rotation=l,this.distance=h):this.offset=c,this.alpha=A,this.color=y}apply(a,t,n,e){let i=a.getFilterTexture();this._tintFilter.apply(a,t,i,1),this._blurFilter.apply(a,i,n,e),this.shadowOnly!==!0&&a.applyFilter(this,t,n,0),a.returnFilterTexture(i)}_updatePadding(){let a=Math.max(Math.abs(this._offset.x),Math.abs(this._offset.y));this.padding=a+this.blur*2}_updateShift(){this._tintFilter.uniforms.shift.set(this.distance*Math.cos(this.angle),this.distance*Math.sin(this.angle))}set offset(a){this._offset.copyFrom(a),this._updatePadding()}get offset(){return this._offset}get resolution(){return this._resolution}set resolution(a){this._resolution=a,this._tintFilter&&(this._tintFilter.resolution=a),this._blurFilter&&(this._blurFilter.resolution=a)}get distance(){return this._distance}set distance(a){K.deprecation("5.3.0","DropShadowFilter distance is deprecated, use offset"),this._distance=a,this._updatePadding(),this._updateShift()}get rotation(){return this.angle/At}set rotation(a){K.deprecation("5.3.0","DropShadowFilter rotation is deprecated, use offset"),this.angle=a*At,this._updateShift()}get alpha(){return this._tintFilter.uniforms.alpha}set alpha(a){this._tintFilter.uniforms.alpha=a}get color(){return K.rgb2hex(this._tintFilter.uniforms.color)}set color(a){K.hex2rgb(a,this._tintFilter.uniforms.color)}get kernels(){return this._blurFilter.kernels}set kernels(a){this._blurFilter.kernels=a}get blur(){return this._blurFilter.blur}set blur(a){this._blurFilter.blur=a,this._updatePadding()}get quality(){return this._blurFilter.quality}set quality(a){this._blurFilter.quality=a}get pixelSize(){return this._blurFilter.pixelSize}set pixelSize(a){this._blurFilter.pixelSize=a}},U=Wt;U.defaults={offset:{x:4,y:4},color:0,alpha:.5,shadowOnly:!1,kernels:null,blur:2,quality:3,pixelSize:1,resolution:Pt.FILTER_RESOLUTION};var gt,we=new Uint8Array(16);function Ht(){if(!gt&&(gt=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!gt))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return gt(we)}var b=[];for(let a=0;a<256;++a)b.push((a+256).toString(16).slice(1));function Jt(a,t=0){return b[a[t+0]]+b[a[t+1]]+b[a[t+2]]+b[a[t+3]]+"-"+b[a[t+4]]+b[a[t+5]]+"-"+b[a[t+6]]+b[a[t+7]]+"-"+b[a[t+8]]+b[a[t+9]]+"-"+b[a[t+10]]+b[a[t+11]]+b[a[t+12]]+b[a[t+13]]+b[a[t+14]]+b[a[t+15]]}var Se=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Bt={randomUUID:Se};function be(a,t,n){if(Bt.randomUUID&&!t&&!a)return Bt.randomUUID();a=a||{};let e=a.random||(a.rng||Ht)();if(e[6]=e[6]&15|64,e[8]=e[8]&63|128,t){n=n||0;for(let i=0;i<16;++i)t[n+i]=e[i];return t}return Jt(e)}var it=be;var m=class m{static addHistory(t){Array.isArray(t)?(m.history.push(...t),m.history.length>=m.maxHistory&&m.history.splice(0,m.history.length-m.maxHistory)):(m.history.push(t),m.history.length>=m.maxHistory&&m.history.shift()),m.history$.next(m.history),m.iniPercent(),m.iniBoard()}static iniBoard(){let t=[],n=[];m.history.forEach(e=>{n.length&&n[n.length-1].isWhite!==e.whiteIcon&&(t.push(JSON.parse(JSON.stringify(n))),n.splice(0,n.length)),n.push({isWhite:e.whiteIcon,red:e.red}),n.length===6&&(t.push(JSON.parse(JSON.stringify(n))),n.splice(0,n.length))}),n.length&&t.push(n),t.length>15&&t.splice(0,t.length-15),this.historyBoard$.next(t)}static iniPercent(){let t={even:0,fourRed:0,fourWhite:0,twoRedTwoWhite:0,odd:0,threeRedOneWhite:0,oneRedThreeWhite:0};m.history.forEach(e=>{e.whiteIcon?t.even++:t.odd++,e.red===4?t.fourRed++:e.red===0?t.fourWhite++:e.red===2?t.twoRedTwoWhite++:e.red===3?t.threeRedOneWhite++:e.red===1&&t.oneRedThreeWhite++});let n={even:Math.floor(t.even/m.history.length*100),fourRed:Math.floor(t.fourRed/m.history.length*100),fourWhite:Math.floor(t.fourWhite/m.history.length*100),twoRedTwoWhite:Math.floor(t.twoRedTwoWhite/m.history.length*100),odd:Math.ceil(t.odd/m.history.length*100),threeRedOneWhite:Math.ceil(t.threeRedOneWhite/m.history.length*100),oneRedThreeWhite:Math.ceil(t.oneRedThreeWhite/m.history.length*100)};m.historyPercent$.next(n)}static randomHistory(){for(let t=0;t<500;t++)m.addRandomHistory()}static addRandomHistory(t=0){let n=m.randomRed(),e=n!==3&&n!==1,i={red:n,white:4-n,whiteIcon:e,id:it(),createAt:new Date().toISOString()};return setTimeout(()=>{m.addHistory(i)},t),n}};m.history=[],m.history$=new E(1),m.historyPercent$=new E(1),m.historyBoard$=new E(1),m.maxHistory=1e3,m.randomRed=()=>{let t=0;for(let n=0;n<4;n++)Math.random()>.5&&t++;return t};var D=m;var ft=class{constructor(t){this.container=t,this.historyContainer=new u,this.backgroundGraphic=new f,this.evenContainer=new u,this.oddContainer=new u,this.assets=x.getInstance(),this.tableWidth=1467,this.tablePadding=18,this.coinPadding=3,this.maxCoin=30,this.coinWidth=(this.tableWidth-this.coinPadding*this.maxCoin-this.tablePadding*2)/this.maxCoin,this.textStyle=new T({fontFamily:this.assets.gameAssets.coinToss.notoSerif.family,fontSize:30,fill:"#f9f5f3",dropShadow:!0,dropShadowColor:"#1b181a",dropShadowBlur:10,dropShadowAlpha:.8,dropShadowDistance:0,dropShadowAngle:4,stroke:"#1b181a",strokeThickness:2}),this.isDestroy=!1,this.startTime=null,this.historyContainer.sortableChildren=!0,this.backgroundGraphic.zIndex=1,this.historyContainer.zIndex=d.tableHistory.i,this.historyContainer.y=1524,this.historyContainer.x=1040,this.backgroundGraphic.filters=[new U({blur:25,alpha:.5,color:0,resolution:10})],this.backgroundGraphic.beginFill(3343617,.5),this.backgroundGraphic.drawRoundedRect(0,0,1467,53,27),this.backgroundGraphic.endFill(),this.historyContainer?.addChild(this.backgroundGraphic),this.container.addChild(this.historyContainer),this.drawMessageShape(),this.animationLastCoin(),this.historySubscription=D.history$.subscribe(n=>{n.slice(-30).forEach(i=>{this.historyContainer?.getChildByName(i.id)||this.addHistory(i.red,i.white,i.id)})})}drawMessageShape(){this.messageShape=new f,this.messageShape.beginFill(65536),this.messageShape.drawRoundedRect(0,0,315,80,15);let t=document.createElement("canvas");t.width=1,t.height=100;let n=t.getContext("2d"),e=n.createLinearGradient(0,0,0,100);e.addColorStop(0,"#905038"),e.addColorStop(.4,"#fdff6c"),e.addColorStop(.5,"#f3fb66"),e.addColorStop(.6,"#c4cb56"),e.addColorStop(1,"#feff6d"),n.fillStyle=e,n.fillRect(0,0,1,100);let i=N.from(t);this.messageShape.lineStyle({width:5,color:16711532,texture:i}),this.messageShape.drawRoundedRect(0,0,315,80,15),this.messageShape.endFill(),this.messageShape.beginFill(65536),this.messageShape.drawPolygon([315/2,110,315/2-35,80,315/2+35,80]),this.messageShape.lineStyle({width:5,color:16711532,texture:i}),this.messageShape.endFill(),this.messageShape.lineStyle(5,65536),this.messageShape.moveTo(315/2-29,80),this.messageShape.lineTo(315/2+29,80),this.messageShape.endFill(),this.messageContainer=new u,this.messageContainer.addChild(this.messageShape);let s=new g("#1234567",this.textStyle);s.name="textIDData",s.anchor.set(.5,0),s.x=this.messageContainer.width/2,s.y=0,this.messageContainer?.addChild(s);let o=new g("CH\u0102\u0303N",this.textStyle);o.name="oddEvenData",o.anchor.set(0,0),o.x=30,o.y=40,this.messageContainer?.addChild(o);let r=new g("0",this.textStyle);r.name="oddText",r.anchor.set(0,0),r.x=210,r.y=40,this.messageContainer?.addChild(r);let l=new g("0",this.textStyle);l.name="evenText",l.anchor.set(0,0),l.x=280,l.y=40,this.messageContainer?.addChild(l);let h=new p(this.assets.gameAssets.coinToss.coin02);h.width=37,h.height=37,h.y=40,h.x=170,this.messageContainer?.addChild(h);let c=new p(this.assets.gameAssets.coinToss.coin01);c.width=37,c.height=37,c.y=40,c.x=240,this.messageContainer?.addChild(c),this.coinAnimationBorder=new f,this.coinAnimationBorder.lineStyle({width:5,color:16711532,texture:i}),this.coinAnimationBorder.drawCircle(0,0,this.coinWidth/2),this.coinAnimationBorder.name="coinAnimationBorder",this.coinAnimationBorder.zIndex=510,this.coinAnimationBorder.visible=!1,this.historyContainer?.addChild(this.coinAnimationBorder),this.messageContainer.visible=!1,this.historyContainer?.addChild(this.messageContainer)}showCoinInfo(t){this.messageContainer.getChildByName("textIDData").text=("#"+t.coinId).toUpperCase(),this.messageContainer.getChildByName("oddEvenData").text=t.isRed?"LE\u0309":"CH\u0102\u0303N",this.messageContainer.getChildByName("oddText").text=t.red.toString(),this.messageContainer.getChildByName("evenText").text=t.white.toString(),this.messageContainer.visible=!0,this.messageContainer.x=t.x+t.width/2-this.messageShape.width/2,this.messageContainer.y=t.y-this.messageShape.height}hideCoinInfo(){this.messageContainer.visible=!1}removeFirstCoin(){if(!this.historyContainer?.children||!this.historyContainer?.children.length)return;let t=this.historyContainer?.children.filter(o=>o.isCoin);if(!t||!t.length)return;let n=t.reduce((o,r)=>o.coinIndex<r.coinIndex?o:r);this.historyContainer?.removeChild(n),n?.destroy();let e;this.historyContainer?.children.filter(o=>o.isCoin).forEach(o=>{o.coinIndex-=1,o.y=4});let i=[],s=o=>{if(!this.historyContainer)return;e||(e=o);let r=(o-e)/500;this.historyContainer?.children.filter(l=>l.isCoin).forEach((l,h)=>{let c=l;c&&c.isCoin&&(i[h]||i?.push(this.tablePadding+(this.coinPadding+this.coinWidth)*(c.coinIndex+1)),c.x=i[h]-(this.coinWidth+this.coinPadding)*r)}),r<1&&requestAnimationFrame(s)};requestAnimationFrame(s)}addHistory(t,n,e){let i=t!==3&&t!==1,s=new p(this.assets.gameAssets.coinToss[i?"coin01":"coin02"]);s.isCoin=!0,s.coinIndex=this.totalCoin()||0,s.isRed=!i,s.name=e,s.red=t,s.white=n,s.coinId=Math.random().toString(36).substring(2,8),s.coinIndex+1>this.maxCoin&&(this.removeFirstCoin(),s.coinIndex-=1),s.width=this.coinWidth,s.height=this.coinWidth,s.x=this.tablePadding+(this.coinPadding+this.coinWidth)*s.coinIndex,s.y=4,s.zIndex=2,s.cursor="pointer",s.eventMode="dynamic",s.on("pointerenter",()=>{this.showCoinInfo(s)}),s.on("pointerout",()=>{this.hideCoinInfo()}),this.historyContainer?.addChild(s)}totalCoin(){return this.historyContainer?.children.filter(t=>t.isCoin).length}animationLastCoin(){if(!(!this.historyContainer||!this.coinAnimationBorder)&&!this.isDestroy){let t=this.historyContainer?.children.filter(e=>e.isCoin);if(!t||!t.length){this.lastCoinAnimationId=requestAnimationFrame(this.animationLastCoin.bind(this));return}let n=t.reduce((e,i)=>e.coinIndex>i.coinIndex?e:i);if(!n)this.lastCoinAnimationId=requestAnimationFrame(this.animationLastCoin.bind(this));else{this.coinAnimationBorder.visible=!0,this.coinAnimationBorder.x=n.x+n.width/2,this.coinAnimationBorder.y=n.y+n.height/2,this.startTime||(this.startTime=performance.now());let e=Math.sin((performance.now()-this.startTime)/150)*10;n.y=4+e,this.coinAnimationBorder.y=n.y+n.height/2,this.lastCoinAnimationId=requestAnimationFrame(this.animationLastCoin.bind(this))}}}destroy(){this.isDestroy=!0,this.backgroundGraphic?.destroy(),this.backgroundGraphic=null,this.historyContainer?.destroy(),this.historyContainer=null,this.evenContainer?.destroy(),this.evenContainer=null,this.oddContainer?.destroy(),this.oddContainer=null,this.messageShape?.destroy(),this.messageShape=null,this.messageContainer?.destroy(),this.messageContainer=null,this.coinAnimationBorder?.destroy(),this.coinAnimationBorder=null,this.historySubscription?.unsubscribe(),this.lastCoinAnimationId&&cancelAnimationFrame(this.lastCoinAnimationId)}};var ve={0:{x:481,y:1548},1:{x:732,y:219},2:{x:242,y:470},3:{x:103,y:856},4:{x:197,y:1317},5:{x:3220,y:734},6:{x:3193,y:1210}},Ct=class{set position(t){this._position=t,this.myPlayerContainer.playerPosition=t}get position(){return this._position}constructor(t){this.player=t,this.myPlayerContainer=new u,this._position=-1,this.assets=x.getInstance(),this.avatarContainer=new u,this.textStylePlayerMainName=new T({fontFamily:this.assets.gameAssets.coinToss.notoSerif.family,fontSize:37,fill:["#fffcea","#fffadb","#fff7ca"],dropShadow:!0,stroke:"#654d3c",strokeThickness:7}),this.textStylePlayerName=new T({fontFamily:this.assets.gameAssets.coinToss.notoSerifBold.family,fontSize:33,fill:"#ffffff",dropShadow:!0,dropShadowColor:"#433531",dropShadowBlur:10,dropShadowAlpha:.8,dropShadowDistance:0,dropShadowAngle:4,stroke:"#433531",strokeThickness:2}),this.textStylePlayerBalance=new T({fontFamily:this.assets.gameAssets.coinToss.notoSerifBold.family,fontSize:45,fill:"#fcf27d",dropShadow:!0,dropShadowColor:"#a08e56",dropShadowBlur:5,dropShadowAlpha:.8,dropShadowDistance:0,dropShadowAngle:0,stroke:"#fcf27d",strokeThickness:1}),this.avatarContainer.sortableChildren=!0,this.myPlayerContainer.isMain=t.isMain,this.myPlayerContainer.name=t.id,this.myPlayerContainer.playerPosition=-1,this.myPlayerContainer.sortableChildren=!0,this.avatar=new p(N.from(this.assets.assetsImg+"avatar/"+t.avatar)),this.avatar.name=d.player.o.avatar.n,this.myPlayerContainer.visible=!1,this.myPlayerContainer.alpha=0,t.isMain?this.mainSize():this.playerSize(),this.avatar.zIndex=10,this.avatarContainer.name=d.player.o.avatar.container.n,this.avatarContainer.addChild(this.avatar),this.avatarContainer.addChild(this.avatarBorder),this.myPlayerContainer.addChild(this.avatarContainer)}fadeInMyPlayerContainer(t=0){return this.myPlayerContainer.visible=!0,new Promise(n=>{if(this.myPlayerContainer.alpha===1||t<0||t>6)return n(!0);this.position=t;let{x:e,y:i}=ve[this.position.toString()];this.myPlayerContainer.y=i,this.myPlayerContainer.x=e;let s=0,o=1e3,r=50,l=setInterval(()=>{if(!this.myPlayerContainer)return clearInterval(l);s+=r,this.myPlayerContainer.alpha=0+s/o,s>=o&&(this.myPlayerContainer.alpha=1,clearInterval(l),n(!0))},r)})}fadeOutMyPlayerContainer(){return new Promise(t=>{if(this.myPlayerContainer.alpha===0)return t(!0);let n=0,e=1e3,i=50,s=setInterval(()=>{if(!this.myPlayerContainer)return clearInterval(s);n+=i,this.myPlayerContainer.alpha=1-n/e,n>=e&&(this.myPlayerContainer.alpha=0,this.myPlayerContainer.visible=!1,clearInterval(s),this.position=-1,t(!0))},i)})}mainSize(){this.myPlayerContainer.y=1548,this.myPlayerContainer.x=481,this.fadeInMyPlayerContainer().then(),this.avatarBorder=new p(this.assets.gameAssets.coinToss.avatarBorder02),this.avatarBorder.zIndex=20,this.avatar.width=234,this.avatar.height=234,this.avatarBorder.width=274,this.avatarBorder.height=274,this.avatarBorder.x=50,this.avatar.x=70,this.avatar.y=20;let t=this.player.name;t=t.charAt(0).toUpperCase()+t.slice(1);let n=new g(t,this.textStylePlayerMainName);n.zIndex=40,n.anchor.set(.5,0),n.x=370/2,n.y=this.avatarBorder.height-50-24,this.myPlayerContainer?.addChild(n);let e=new f;e.beginFill(0,.4),e.drawRoundedRect(0,0,n.width+70,50,25),e.endFill(),e.zIndex=30,e.x=(370-(n.width+70))/2,e.y=this.avatarBorder.height-50-24,this.myPlayerContainer.addChild(e);let i=new f;i.beginFill(2170404),i.drawRoundedRect(0,0,370,80,15);let s=document.createElement("canvas");s.width=1,s.height=80;let o=s.getContext("2d"),r=o.createLinearGradient(0,0,0,100);r.addColorStop(0,"#fff3ca"),r.addColorStop(.1,"#c59155"),r.addColorStop(.4,"#fbe9bd"),r.addColorStop(.5,"#fff0b7"),r.addColorStop(.7,"#61493c"),r.addColorStop(1,"#fae6af"),o.fillStyle=r,o.fillRect(0,0,1,100);let l=N.from(s);i.lineStyle({width:5,color:16443055,texture:l}),i.drawRoundedRect(0,0,370,80,15),i.endFill(),i.name=d.player.o.balance.background.n,i.zIndex=50,i.y=e.y+e.height,this.myPlayerContainer?.addChild(i);let h;Number.isInteger(this.player.balance)?h=this.player.balance.toLocaleString():h=parseFloat(this.player.balance.toFixed(2)).toLocaleString();let c=new g(h,this.textStylePlayerBalance);c.zIndex=60,c.anchor.set(.5,0),c.x=i.width/2,c.y=i.y+15,this.myPlayerContainer?.addChild(c)}playerSize(){this.myPlayerContainer.y=500,this.avatarBorder=new p(this.assets.gameAssets.coinToss.avatarBorder01),this.avatarBorder.zIndex=20,this.avatarBorder.width=216,this.avatarBorder.height=216,this.avatar.width=200,this.avatar.height=200,this.avatar.y=8,this.avatar.x=8;let t=new f;t.beginFill(0,.4),t.drawRoundedRect(0,0,200,40,10),t.endFill(),t.zIndex=30,t.x=17,t.y=176,this.myPlayerContainer.addChild(t);let n=this.player.name;n=n.charAt(0).toUpperCase()+n.slice(1),n.length>7&&(n=n.slice(0,7)+"...");let e=new g(n,this.textStylePlayerName);e.zIndex=40,e.anchor.set(.5,0),e.x=217/2,e.y=t.y-2,this.myPlayerContainer?.addChild(e);let i=new p(this.assets.gameAssets.coinToss.balance01);i.zIndex=50,i.width=this.avatarBorder.width,i.height=70,i.y=e.y+e.height,this.myPlayerContainer?.addChild(i);let s;this.player.balance>9999?s="9,999+":Number.isInteger(this.player.balance)?s=this.player.balance.toLocaleString():s=parseFloat(this.player.balance.toFixed(2)).toLocaleString();let o=new g(s,this.textStylePlayerBalance);o.zIndex=60,o.anchor.set(.5,0),i.name=d.player.o.balance.background.n,o.x=i.width/2,o.y=i.y+8,this.myPlayerContainer?.addChild(o)}destroy(){this.avatar?.destroy(),this.avatar=null,this.avatarBorder?.destroy(),this.avatarBorder=null,this.avatarContainer?.destroy(),this.avatarContainer=null,this.myPlayerContainer?.destroy(),this.myPlayerContainer=null}};var nt=["1cf504b8-693f-43a9-a15a-c49462035b39.88351.png","03e1be8a-3170-41aa-881c-8b194120c38a.16760.png","4d977f86-c287-4ec8-83f4-1471e71ab76e.d1ec3.png","4db02126-ef26-4ff0-92c5-14f34b2f6263.70bca.png","5fe62372-9276-400c-99f2-f496eee3ba2d.77b09.png","9b2cafba-dc29-48da-acc5-5304d7749dfe.109cd.png","64dc78b3-befb-4704-a11f-faa99ac91e39.a91f1.png","113e2a43-2afc-4655-a248-4b4b7a0d976c.3242d.png","135f32b9-c426-4648-8087-4a8286cceac6.130e1.png","493ffc87-ffa3-44d8-8df8-a6465351ed9c.160e1.png","670c79e1-35bd-4d66-8e82-54ae0b449456.89109.png","0952b3e9-b6a4-4666-9cb9-f330c53c576a.c01bf.png","968a06de-7ab9-4d4d-a4a2-f111c62d4957.c56ef.png","71905265-1bb7-4fd8-b6d0-0be62dd62781.1e233.png","a01e2018-d42a-4cfb-8332-d9456d3a60b9.89ac0.png","a1d79def-1d31-4a74-9bb3-c4c6de929c31.1f2bc.png","a82798bc-7ff8-443d-bb44-5ad3c28a4a6d.552a2.png","bbb297cd-ac54-4bdd-b15c-007681e5ba44.3a591.png","c3ec9215-7536-4c80-a681-976ac3aecb96.dd097.png","c6d35930-b7ae-4517-8ce5-dc682c3ef55d.d4880.png","c172905e-e468-4e49-a2b0-74deb7c3d17a.21a00.png","e7d1edb4-210a-4404-a125-389d27cae646.727a8.png","ed224165-3612-4289-8d5a-975fdf801b18.41d45.png","f36b1b13-fdbe-4dcd-ac48-a497d7a76e48.b0d15.png","f44277d9-a231-43f7-aed4-f841edc89187.02a04.png"];var xt=class{constructor(t){this.container=t,this.playerContainer=new u,this.assets=x.getInstance(),this.otherPlayer=new p(this.assets.gameAssets.coinToss.otherPlayer),this.listPlayerContainer={},this.mainPlayerID=Math.random().toString(36).substr(2,10),this.playerContainer.zIndex=d.player.i,this.playerContainer.name=d.player.n,this.otherPlayer.width=240,this.otherPlayer.height=240,this.otherPlayer.position.set(2770,1594),this.playerContainer.addChild(this.otherPlayer),this.playerContainer.sortableChildren=!0,this.container.addChild(this.playerContainer),this.addPlayer({id:this.mainPlayerID,name:Math.random().toString(36).substr(2,15),balance:Math.floor(Math.random()*1e5)*100+Math.random(),avatar:nt[Math.floor(Math.random()*nt.length)],isMain:!0});for(let n=0;n<100;n++)this.addPlayer({id:Math.random().toString(36).substr(2,10),name:Math.random().toString(36).substr(2,7),balance:Math.floor(Math.random()*1e3)*10+Math.random(),avatar:nt[Math.floor(Math.random()*nt.length)],isMain:!1});setInterval(()=>{let n=this.getPlayerIdByPosition(Math.floor(Math.random()*6)+1);n&&this.playerLeave(n)},3e3)}addPlayer(t){let n=new Ct(t);if(this.playerContainer.addChild(n.myPlayerContainer),this.listPlayerContainer[t.id]=n,!t.isMain){let e=this.getSpacePosition(!0);e&&this.showPlayer(t.id,e)}}getPlayerIdByPosition(t){return Object.keys(this.listPlayerContainer).find(n=>this.listPlayerContainer[n].position===t)}playerLeave(t){let n=this.listPlayerContainer[t].position;this.removePlayer(t).subscribe(e=>{if(n>=0){let i=this.getRandomPlayerWaiting();i&&this.showPlayer(i.player.id,n)}})}getRandomPlayerWaiting(){let t=this.getPlayerWaiting();return t.length>0?t[Math.floor(Math.random()*t.length)]:null}getPlayerWaiting(){return Object.keys(this.listPlayerContainer).filter(t=>this.listPlayerContainer[t].position===-1).map(t=>this.listPlayerContainer[t])}getSpacePosition(t=!1){let n=this.playerContainer.children.filter(i=>i.playerPosition!=-1).map(i=>i.playerPosition),e=[1,2,3,4,5,6].filter(i=>!n.includes(i));return t?e[Math.floor(Math.random()*e.length)]:e}showPlayer(t,n){if(this.listPlayerContainer[t].player.isMain&&(n=0),this.listPlayerContainer[t].position>=0)return!0;n=n;let e;for(let i in this.listPlayerContainer)if(this.listPlayerContainer[i].position===n){e=i;break}return e?this.listPlayerContainer[e].fadeOutMyPlayerContainer().then(i=>{this.listPlayerContainer[t].fadeInMyPlayerContainer(n).then()}):this.listPlayerContainer[t].fadeInMyPlayerContainer(n).then(),!0}removePlayer(t){return V(this.listPlayerContainer[t].fadeOutMyPlayerContainer()).pipe(_(n=>{this.listPlayerContainer[t].destroy(),delete this.listPlayerContainer[t]}))}destroy(){Object.keys(this.listPlayerContainer).forEach(t=>{this.listPlayerContainer[t].destroy(),delete this.listPlayerContainer[t]}),this.playerContainer?.destroy(),this.playerContainer=null}};var st=class{constructor(t,n,e,i,s,o=it()){this.playerID=t,this.amount=n,this.playerPosition=e,this.betPosition=i,this.denominationCoin=s,this.coinId=o}};var kt,Te=(a,t=!0)=>{if(kt&&t)return kt;{let n=a.getChildByName(d.bettingSpot.n);return kt=n,n}},Qt=(a,t)=>Te(a).getChildByName(d.bettingSpot.spotArea.n(t));var te=(a,t,n,e)=>{let i=Math.random()*(n-a),s=Math.random()*(e-t);return{x:i,y:s}};var ee=(a,t)=>t.angle==90?{height:a.width,width:a.height}:a;var wt=(a,t)=>{let n=a.getBounds(),e=t.scale;return Ot(X({},ee({width:n.width*(1/e.x),height:n.height*(1/e.y)},t)),{containerScale:e})};var ie=(a,t)=>{let n=a.toLocal(new O(0,0),t),e=a.scale,i=a.anchor,s={x:0,y:0};if(i){let o=a.parent,r=wt(o,t);s={x:r.width*i.x,y:r.height*i.y}}return{x:n.x*-1*e.x-s.x,y:n.y*-1*e.y-s.y,anchorRemovePosition:s,anchor:i,scale:e,position:n}};var ot=(a,t)=>X(X({},ie(a,t)),wt(a,t));var H=(()=>{let t=class t{static tweenTo(e,i,s,o,r,l,h,c){e[l]=!1;let A={object:e,property:i,propertyBeginValue:e[i],target:s,easing:r,time:o,animationName:l,change:h,complete:c,start:Date.now()};return t.tweening.push(A),A}static lerp(e,i,s){return e*(1-s)+i*s}static backout(e){return i=>--i*i*((e+1)*i+e)+1}};t.tweening=[];let a=t;return a})();var St=class{constructor(t){this.container=t,this.listCoinBet=[],this.listCoinContainer=new u,this.coinSize=62,this.listCoinContainer.zIndex=d.listCoinBet.i,this.container.addChild(this.listCoinContainer),this.playerContainer=this.container.getChildByName("playerContainer"),this.dealer=this.container.getChildByName(d.dealer.n),this.spotsContainer=this.container.getChildByName("spotsContainer"),this.denominationsContainer=this.container.getChildByName("denominationsContainer"),this.denominationsMaskWrapper=this.denominationsContainer.getChildByName("denominationsMaskWrapper"),this.denominationsWrapper=this.denominationsMaskWrapper.getChildByName("denominationsWrapper");let n={},e=s=>{n[s]&&clearTimeout(n[s]),n[s]=setTimeout(()=>{this.coinWin(s),delete n[s]},200)},i=()=>{this.listCoinBet.filter(s=>(s.denominationCoin?.xPosition||s.denominationCoin?.yPosition)&&(s.denominationCoin?.x!=s.denominationCoin?.xPosition||s.denominationCoin?.y!=s.denominationCoin?.yPosition)).forEach(s=>{s.denominationCoin.x=s.denominationCoin.xPosition,s.denominationCoin.y=s.denominationCoin.yPosition,(s.denominationCoin||{}).xPosition&&(s.denominationCoin||{}).yPosition&&(s.denominationCoin.xPosition=0,s.denominationCoin.yPosition=0),(s.denominationCoin||{}).xPositionAnimationDealerSpot&&(s.denominationCoin||{}).xPositionAnimationDealerSpot&&e(s.betPosition),((s.denominationCoin||{}).xPositionAnimationDealer&&(s.denominationCoin||{}).yPositionAnimationDealer||(s.denominationCoin||{}).xPositionAnimationWin&&(s.denominationCoin||{}).yPositionAnimationWin)&&(s.denominationCoin.xPosition=0,s.denominationCoin.yPosition=0,this.removeCoin(s))}),this.animationID=requestAnimationFrame(i)};this.animationID=requestAnimationFrame(i)}dealerToWinSpot(t){let n=this.getDealerPoint();this.listCoinBet.filter(e=>e.betPosition===t).forEach(e=>{let i=this.playerContainer.getChildByName(e.playerID),s=tt(P[e.amount].color,P[e.amount].name,0,P[e.amount].value,this.coinSize,this.coinSize,6e3,!1);this.listCoinBet.push(new st(e.playerID,e.amount,i.playerPosition,t,s)),s.x=n.x,s.y=n.y;let o=this.getRandomSpotPosition(s,t);this.moveDenominationAnimation(s,o.x,o.y,"xPositionAnimationDealerSpot","yPositionAnimationDealerSpot"),this.listCoinContainer.addChild(s)})}coinWin(t){let n={};this.listCoinBet.filter(e=>e.betPosition===t).forEach(e=>{let i=n[e.playerID];i||(n[e.playerID]=this.playerContainer.getChildByName(e.playerID),i=n[e.playerID]);let s=ot(i,this.container),o=new O(s.x+s.width/2-this.coinSize/2,s.y+s.height/2);this.moveDenominationAnimation(e.denominationCoin,o.x,o.y,"xPositionAnimationWin","yPositionAnimationWin")})}getDealerPoint(){let t=ot(this.dealer,this.container);return new O(t.x+t.width/2-this.coinSize/2,t.y+t.height-90)}coinToDealer(t){let n=this.getDealerPoint();Array.isArray(t)?t.forEach(e=>{this.listCoinBet.filter(i=>i.betPosition===e).forEach(i=>{this.moveDenominationAnimation(i.denominationCoin,n.x,n.y,"xPositionAnimationDealer","yPositionAnimationDealer")})}):this.listCoinBet.filter(e=>e.betPosition===t).forEach(e=>{this.moveDenominationAnimation(e.denominationCoin,n.x,n.y,"xPositionAnimationDealer","yPositionAnimationDealer")})}removeCoin(t){t.denominationCoin?.destroy(),t.denominationCoin=null,this.listCoinBet.splice(this.listCoinBet.map(n=>n.coinId).indexOf(t.coinId),1)}getRandomSpotPosition(t,n){let e=Qt(this.container,n),i=ot(e,this.container),s=te(t.width,t.height,i.width,i.height);return{x:s.x+i.x,y:s.y+i.y}}moveDenominationAnimation(t,n,e,i="xPositionAnimation",s="yPositionAnimation",o=800){t.xPosition=t.x,t.yPosition=t.y,H.tweenTo(t,"xPosition",n,800,H.backout(.5),i),H.tweenTo(t,"yPosition",e,800,H.backout(.5),s)}addBet(t,n,e){let i=this.playerContainer.getChildByName(t),s=tt(P[n].color,P[n].name,0,P[n].value,this.coinSize,this.coinSize,6e3,!1);if(this.listCoinBet.push(new st(t,n,i.playerPosition,e,s)),i.isMain){let o=this.denominationsWrapper.getChildByName(d.denomination.item.n(n)),r=o.getChildByName(d.denomination.item.active.n);r.rotation=0;let l=ot(o,this.container);s.position.set(l.x+l.width/(r.scale.x+1),l.y+l.height/(r.scale.y+1));let h=this.getRandomSpotPosition(s,e);this.moveDenominationAnimation(s,h.x,h.y)}this.listCoinContainer.addChild(s)}destroy(){this.listCoinBet=[],this.listCoinContainer?.destroy(),this.listCoinContainer=null,this.playerContainer?.destroy(),this.playerContainer=null,this.spotsContainer?.destroy(),this.spotsContainer=null,this.denominationsContainer?.destroy(),this.denominationsContainer=null,this.denominationsMaskWrapper?.destroy(),this.denominationsMaskWrapper=null,this.denominationsWrapper?.destroy(),this.denominationsWrapper=null,this.animationID&&cancelAnimationFrame(this.animationID)}};var Dt=a=>{let t=document.createElement("canvas");t.width=1,t.height=a;let n=t.getContext("2d"),e=n.createLinearGradient(0,0,0,a);return e.addColorStop(0,"#905038"),e.addColorStop(.4,"#fdff6c"),e.addColorStop(.5,"#f3fb66"),e.addColorStop(.6,"#c4cb56"),e.addColorStop(1,"#feff6d"),n.fillStyle=e,n.fillRect(0,0,1,a),N.from(t)},ne=a=>{let t=document.createElement("canvas");t.width=1,t.height=a;let n=t.getContext("2d"),e=n.createLinearGradient(0,0,0,100);return e.addColorStop(0,"#100e0e"),e.addColorStop(.5,"#313131"),e.addColorStop(1,"#100e0e"),n.fillStyle=e,n.fillRect(0,0,1,a),N.from(t)};var bt=class{constructor(t){this.container=t,this.percentHistory=new u,this.tableHistory=new u,this.percentHistorySize={width:332,height:378,border:6,radius:26},this.tableHistorySize={width:936,height:378,border:6,radius:0,itemSize:(378-6)/6},this.assets=x.getInstance(),this.container.addChild(this.percentHistory),this.container.addChild(this.tableHistory),this.tableHistory.sortableChildren=!0,this.tableHistory.zIndex=d.calHistory.i+1,this.tableHistory.position.set(d.calHistory.percent.left+this.percentHistorySize.width-this.percentHistorySize.border,d.calHistory.percent.top),this.percentHistory.sortableChildren=!0,this.percentHistory.zIndex=d.calHistory.i,this.percentHistory.position.set(d.calHistory.percent.left,d.calHistory.percent.top),this.__IniPercentHistory(),this.__IniTableHistory(),this.__IniBoardData(),this.__IniPercentData()}__IniPercentData(){this.percentSubscription=D.historyPercent$.subscribe(t=>{let n=this.percentHistory.getChildByName("evenPercent"),e=this.percentHistory.getChildByName("oddPercent"),i=this.percentHistory.getChildByName("fourRed"),s=this.percentHistory.getChildByName("fourWhite"),o=this.percentHistory.getChildByName("twoRedTwoWhite"),r=this.percentHistory.getChildByName("threeRedOneWhite"),l=this.percentHistory.getChildByName("oneRedThreeWhite");n.text=`${t.even}%`,e.text=`${t.odd}%`,i.text=`${t.fourRed}%`,s.text=`${t.fourWhite}%`,o.text=`${t.twoRedTwoWhite}%`,r.text=`${t.threeRedOneWhite}%`,l.text=`${t.oneRedThreeWhite}%`})}__IniBoardData(){this.boardSubscription=D.historyBoard$.subscribe(t=>{this.tableHistory.children.filter(n=>n.name?.includes("square")).forEach(n=>{n.removeChildren()}),t.forEach((n,e)=>{n.forEach((i,s)=>{let o=this.tableHistory.getChildByName(`square-${s}-${e}`),r=this.drawHistoryCoin(!i.isWhite);r.zIndex=1;let l=new T({fontFamily:this.assets.gameAssets.coinToss.notoSerif.family,fontSize:30,fill:i.isWhite?460551:16445422}),h=new g(i.red.toString(),l);h.zIndex=2,h.anchor.set(.5,.5),h.position.set(this.tableHistorySize.itemSize/2-this.tableHistorySize.border/2,this.tableHistorySize.itemSize/2-this.tableHistorySize.border/2),o.addChild(r),o.addChild(h)})})})}destroy(){this.percentHistory?.destroy(),this.boardSubscription?.unsubscribe(),this.percentSubscription?.unsubscribe(),this.percentHistory=null}__IniTableHistory(){this.__IniTableHistoryBackground()}__IniTableHistoryBackground(){let t=new f;t.zIndex=1,t.beginFill(460291),t.filters=[new U({alpha:.3,color:0})],t.lineStyle({width:this.tableHistorySize.border,color:16777215,texture:Dt(332)}),t.moveTo(0,0),t.lineTo(this.tableHistorySize.width,0),t.bezierCurveTo(this.tableHistorySize.width,0,this.tableHistorySize.width,this.tableHistorySize.radius,this.tableHistorySize.width,this.tableHistorySize.radius),t.lineTo(this.tableHistorySize.width,this.tableHistorySize.height-this.tableHistorySize.radius),t.bezierCurveTo(this.tableHistorySize.width,this.tableHistorySize.height,this.tableHistorySize.width-this.tableHistorySize.radius,this.tableHistorySize.height,this.tableHistorySize.width-this.tableHistorySize.radius,this.tableHistorySize.height),t.lineTo(0,this.tableHistorySize.height),t.lineTo(0,0),t.endFill(),this.tableHistory.addChild(t);let n=this.tableHistorySize.itemSize,e=n;for(let i=0;i<6;i++)for(let s=0;s<15;s++){let o=new u,r=new f;r.lineStyle(4,3223857,1e-4),r.drawRect(0,0,e,n),o.x=s*e+2,o.sortableChildren=!0,o.y=i*n+2,o.name=`square-${i}-${s}`,o.zIndex=40,o.addChild(r),this.tableHistory.addChild(o)}for(let i=0;i<5;i++){let s=new f;s.lineStyle(6,3947323,.4),s.zIndex=50,s.moveTo(0,0),s.lineTo(this.tableHistorySize.width-this.tableHistorySize.border,0),s.y=(i+1)*this.tableHistorySize.itemSize,s.x=this.tableHistorySize.border/2,this.tableHistory.addChild(s)}for(let i=0;i<14;i++){let s=new f;s.lineStyle(6,3947323,.4),s.zIndex=50,s.moveTo(0,0),s.lineTo(0,this.tableHistorySize.height-this.tableHistorySize.border),s.x=(i+1)*((this.tableHistorySize.width-this.tableHistorySize.border)/15),this.tableHistory.addChild(s)}}__IniPercentHistory(){this.percentTextType={white:new T({fontFamily:this.assets.gameAssets.coinToss.notoSerifBold.family,fontSize:33,fill:15724527}),black:new T({fontFamily:this.assets.gameAssets.coinToss.notoSerifBold.family,fontSize:33,fill:0})},this.__IniPercentHistoryBackground();let t=this.percentHistorySize.width-15,n=new g("0%",this.percentTextType.black);n.zIndex=100,n.name="evenPercent",n.anchor.set(1,0),n.position.set(t,13),this.percentHistory.addChild(n);let e=new g("0%",this.percentTextType.white);e.zIndex=100,e.anchor.set(1,0),e.position.set(t,4*54+10),this.percentHistory.addChild(e);let i=new g("0%",this.percentTextType.white);i.zIndex=100,i.anchor.set(1,0),i.position.set(t,1*55+5),this.percentHistory.addChild(i);let s=new g("0%",this.percentTextType.white);s.zIndex=100,s.anchor.set(1,0),s.position.set(t,2*55+5),this.percentHistory.addChild(s);let o=new g("0%",this.percentTextType.white);o.zIndex=100,o.anchor.set(1,0),o.position.set(t,3*55+5),this.percentHistory.addChild(o);let r=new g("0%",this.percentTextType.white);r.zIndex=100,r.anchor.set(1,0),r.position.set(t,5*54+7),this.percentHistory.addChild(r);let l=new g("0%",this.percentTextType.white);l.zIndex=100,l.anchor.set(1,0),l.position.set(t,6*54+7),this.percentHistory.addChild(l),e.name="oddPercent",i.name="fourRed",s.name="fourWhite",o.name="twoRedTwoWhite",r.name="threeRedOneWhite",l.name="oneRedThreeWhite",this.__IniEven(),this.__IniOdd(),this.__IniLine()}drawHistoryCoin(t,n=25){let e=new f,i=t?13056817:16777215;return e.beginFill(i),e.drawCircle(0,0,n),e.endFill(),e.x=this.tableHistorySize.itemSize/2-this.tableHistorySize.border/2,e.y=this.tableHistorySize.itemSize/2-this.tableHistorySize.border/2,e}__IniHistoryCoin(t,n,e){for(let i=0;i<t;i++){let s=this.drawHistoryCoin(!0,20);s.zIndex=100,s.x=40+i*55,s.y=e*54+25,this.percentHistory.addChild(s)}for(let i=0;i<n;i++){let s=this.drawHistoryCoin(!1,20);s.zIndex=100,s.x=40+(i+t)*55,s.y=e*54+25,this.percentHistory.addChild(s)}}__IniLine(){this.__IniHistoryCoin(4,0,1),this.__IniHistoryCoin(0,4,2),this.__IniHistoryCoin(2,2,3),this.__IniHistoryCoin(3,1,5),this.__IniHistoryCoin(1,3,6);for(let t=0;t<5;t++){let n=new f;n.lineStyle({width:6,color:16777215,texture:ne(5),alpha:.9}),n.moveTo(0,0),n.lineTo(326,0),n.y=(t+2)*54,n.x=3,n.zIndex=20,this.percentHistory.addChild(n)}}__IniOdd(){let t=new f;t.beginFill(13056817),t.drawRect(0,0,326,49),t.endFill(),t.y=4*54+3,t.x=3,t.zIndex=30;let n=new g("Le\u0309",this.percentTextType.white);n.zIndex=40,n.position.set(20,4*54+10),this.percentHistory.addChild(n),this.percentHistory.addChild(t)}__IniEven(){let t=new f;t.zIndex=2,t.beginFill(16777215),t.moveTo(this.percentHistorySize.width,0),t.lineTo(this.percentHistorySize.radius,0),t.bezierCurveTo(0,0,0,this.percentHistorySize.radius-this.percentHistorySize.border,0,this.percentHistorySize.radius-this.percentHistorySize.border),t.lineTo(0,54),t.lineTo(this.percentHistorySize.width-this.percentHistorySize.border,54),t.lineTo(this.percentHistorySize.width-this.percentHistorySize.border,0),t.endFill(),t.x=3,t.y=3;let n=new g("Ch\u0103\u0303n",this.percentTextType.black);n.zIndex=3,n.position.set(20,13),this.percentHistory.addChild(n),this.percentHistory.addChild(t)}__IniPercentHistoryBackground(){let t=new f;t.zIndex=1,t.beginFill(460291),t.filters=[new U({alpha:.3,color:0})],t.lineStyle({width:this.percentHistorySize.border,color:16777215,texture:Dt(332)}),t.moveTo(this.percentHistorySize.width,0),t.lineTo(this.percentHistorySize.radius,0),t.bezierCurveTo(0,0,0,this.percentHistorySize.radius,0,this.percentHistorySize.radius),t.lineTo(0,this.percentHistorySize.height-this.percentHistorySize.radius),t.bezierCurveTo(0,this.percentHistorySize.height,this.percentHistorySize.radius,this.percentHistorySize.height,25,this.percentHistorySize.height),t.lineTo(this.percentHistorySize.width,this.percentHistorySize.height),t.lineTo(this.percentHistorySize.width,0),t.endFill(),this.percentHistory.addChild(t)}};var vt=class{constructor(t){this.game=t,this.containerRealHeight=1898,this.containerRealWidth=3538,this.containerSpecRatio=this.containerRealWidth/this.containerRealHeight,this.tableSpecRatio=1315/607,this.dealerSpecRatio=192/243,this.container=new u,this.containerWidth=this.containerRealWidth,this.containerHeight=this.containerRealHeight,this.assets=x.getInstance(),this.graphic=new f,this.init().then()}init(){return k(this,null,function*(){this.container.sortableChildren=!0,yield this.assets.loadSuccess$.pipe(rt(1),G(1)).toPromise(),this.table=new p(this.assets.gameAssets.coinToss.table),this.table.zIndex=d.table.i,this.dealer=new p(this.assets.gameAssets.coinToss.dealer),this.dealer.zIndex=d.dealer.i,this.dealer.name=d.dealer.n,this.container.addChild(this.graphic),this.game.stage.addChild(this.container),this.container.addChild(this.table),this.container.addChild(this.dealer),this.iniContainerSize(),this.iniTableSize(),this.iniDealerSize(),this.coinTossPlate=new mt(this.container),this.bettingSpotsContains=new yt(this.container,t=>{this.assets.gameAssets.coinToss.soundCoinBet.play({singleInstance:!0,loop:!1}),this.listCoinBet.addBet(this.playerContainer.mainPlayerID,this.bettingAmount,-t)}),this.tableHistory=new ft(this.container),this.playerContainer=new xt(this.container),this.denominationsContainer=new ut(this.container,t=>{this.bettingAmount=t}),this.listCoinBet=new St(this.container),this.calHistory=new bt(this.container)})}iniSize(){this.iniContainerSize()}iniContainerSize(){let t;this.game.screen.width>this.game.screen.height||this.game.screen.width>900?(this.game.screen.width/this.game.screen.height<this.containerSpecRatio?(t=this.game.screen.width/this.containerWidth,this.container.scale.set(t)):(t=this.game.screen.height/this.containerHeight,this.container.scale.set(t)),this.container.angle=0,this.container.position.x=(this.game.screen.width-this.containerWidth*t)/2,this.container.position.y=(this.game.screen.height-this.containerHeight*t)/2,this.container.pivot.x=0,this.container.pivot.y=0):(t=this.game.screen.width/this.containerHeight,this.container.scale.set(t),this.container.pivot.x=0,this.container.pivot.y=this.containerHeight,this.container.position.x=0,this.container.position.y=(this.game.screen.height-this.containerWidth*t)/2,this.container.angle=90)}iniTableSize(){this.table.width=3138,this.table.height=this.table.width/this.tableSpecRatio,this.table.y=410,this.table.x=200}iniDealerSize(){this.dealer.width=450,this.dealer.height=this.dealer.width/this.dealerSpecRatio,this.dealer.x=1540,this.dealer.y=48}destroy(){this.coinTossPlate?.destroy(),this.bettingSpotsContains?.destroy(),this.denominationsContainer?.destroy(),this.tableHistory?.destroy(),this.container?.destroy(!0),this.playerContainer?.destroy(),this.playerContainer=null,this.listCoinBet?.destroy(),this.listCoinBet=null,this.calHistory?.destroy(),this.calHistory=null}};var Tt=x.getInstance(),se=(a,t,n)=>{let e=new T({fontFamily:Tt.gameAssets.coinToss.notoSerifBold.family,fontSize:90,fill:["#fff073","#fae882","#ffeca3","#fae882","#fff073"],dropShadow:!0,dropShadowColor:"#371600",dropShadowBlur:5,dropShadowAlpha:.8,dropShadowDistance:0,dropShadowAngle:0,stroke:"#371600",strokeThickness:1}),i=new u;i.zIndex=d.coinTossWinAnimation.i,i.name=d.coinTossWinAnimation.n,i.sortableChildren=!0;let s;Number.isInteger(n)?s=n.toLocaleString().toString():s=parseFloat(n.toFixed(2)).toLocaleString().toString(),s="+"+s;let o=new g(s,e);o.zIndex=30,o.anchor.set(.5,1),i.addChild(o);let r=t.getChildByName("avatarContainer"),l=t.getChildByName("balanceBackground"),h=r.width*2,c=h*(94/247),A=t.height,y=new p(Tt.gameAssets.coinToss.winBG);y.width=h*.8,y.height=h*.8*(549/533),y.zIndex=10,y.anchor.set(.5,.5),y.x=h/2,y.y=h/2,i.addChild(y);let C=new p(Tt.gameAssets.coinToss.winCoin);C.width=h*.6,C.height=h*.6*(614/539),C.zIndex=11,C.anchor.set(.5,.5),C.x=h/2,C.y=h/2,i.addChild(C);let B=(S=0,z=1,I,W,R,F)=>{let L=null,M=1e3,j=at=>{if(!y||!C)return;L||(L=at);let q=at-L,he=I+Math.sin(q/M*Math.PI*2)*.2,de=W+Math.sin(q/M*Math.PI*2)*.2,le=R+Math.sin(q/M*Math.PI*2)*.1*-1,ce=F+Math.sin(q/M*Math.PI*2)*.1*-1;y.scale.set(he,de),C.scale.set(le,ce),q<M?requestAnimationFrame(j):(S++,S<=z?B(S,z,I,W,R,F):(y.scale.set(1,1),C.scale.set(1,1),y.destroy(),C.destroy(),y=null,C=null,B=null))};requestAnimationFrame(j)};B(0,1,y.scale.x,y.scale.y,C.scale.x,C.scale.y),o.x=h/2;let v=A-o.height*.6;o.y=v;let Rt=o.height*.5,Mt=()=>{let S=0,z=2300,I=50,W=o.y,R=W-Rt,F=setInterval(()=>{if(!o)return clearInterval(F);S+=I,o.y=W-S/z*Rt,S>=z&&(o.y=R,clearInterval(F),Mt=null,o?.destroy(),o=null)},I)};Mt(),i.x=t.x+l.x-(h*1.25-l.width)/2,i.y=t.y+r.y-(h-r.width)/2,i.width=h;let w=new p(Tt.gameAssets.coinToss.winVI);w.zIndex=20,w.width=h,w.height=c,w.anchor.set(.5,.5),w.x=h/2,w.alpha=0,w.y=A;let _t=()=>{let S=0,z=300,I=20,W=setInterval(()=>{if(!w)return clearInterval(W);S+=I,w.alpha=S/z,w.width=h-S/z*(h-h*.85),w.height=c-S/z*(c-c*.85),S>=z&&(w.alpha=1,w.width=h*.85,w.height=c*.85,clearInterval(W),_t=null,zt(0,3,w.scale.x,w.scale.y))},I)};_t();let zt=(S=0,z=1,I,W)=>{let R=null,F=500,L=M=>{if(!w)return;R||(R=M);let j=M-R,at=I+Math.sin(j/F*Math.PI*2)*.3,q=W+Math.sin(j/F*Math.PI*2)*.3;w.scale.set(at,q),j<F?requestAnimationFrame(L):(S++,S<=z?zt(S,z,I,W):(w?.destroy(),w=null,zt=null))};requestAnimationFrame(L)};i.addChild(w),a.addChild(i),setTimeout(()=>{i?.destroy(),a.removeChild(i),i=null},2e3)};var oe=(()=>{let t=class t{constructor(e){this.zone=e,this.width$=new E(1),this.height$=new E(1),this.screen$=new Nt,this.zone.runOutsideAngular(()=>{qt(window,"resize").pipe(Et(500)).subscribe(i=>{this.getScreenSize()})}),this.getScreenSize()}getScreenSize(){this.screenWidth=window.innerWidth,this.screenHeight=window.innerHeight,this.width$.next(this.screenWidth),this.height$.next(this.screenHeight),this.screen$.next({width:this.screenWidth,height:this.screenHeight})}};t.\u0275fac=function(i){return new(i||t)(Y($))},t.\u0275prov=ht({token:t,factory:t.\u0275fac,providedIn:"root"});let a=t;return a})();var ae=(()=>{let t=class t{constructor(e,i){this.screenSize=e,this.zone=i,this.spotAnimationName={1:"oneRedThreeWhite",2:"twoRedTwoWhite",3:"threeRedOneWhite",4:"fourRed",0:"fourWhite",odd:"odd",even:"even"},D.randomHistory(),this.screenSubscription=this.screenSize.screen$.subscribe(s=>{this.gameContainer&&this.game&&(this.game.view.width=s.width,this.game.view.height=s.height,this.game.screen.width=s.width,this.game.screen.height=s.height,this.gameContainer.iniSize())})}init(){return k(this,null,function*(){yield this.zone.runOutsideAngular(()=>k(this,null,function*(){this.game=new Ut({width:this.screenSize.screenWidth,height:this.screenSize.screenHeight,backgroundAlpha:0}),this.game.ticker.add(e=>{let i=Date.now(),s=[];for(let o=0;o<H.tweening.length;o++){let r=H.tweening[o],l=Math.min(1,(i-r.start)/r.time);r.object[r.property]=H.lerp(r.propertyBeginValue,r.target,r.easing(l)),r.change&&r.change(r),l===1&&(r.object[r.property]=r.target,r.object[r.animationName]=!0,r.complete&&r.complete(r),s.push(r))}for(let o=0;o<s.length;o++)H.tweening.splice(H.tweening.indexOf(s[o]),1)}),this.assets=x.getInstance(),yield this.assets.loadSuccess$.pipe(rt(1),G(1)).toPromise(),this.assets.gameAssets.coinToss.soundtrack.play({loop:!0,singleInstance:!0}),this.gameContainer=new vt(this.game),setTimeout(()=>{this.gameContainer.coinTossPlate.plateContainer.eventMode="static",this.gameContainer.coinTossPlate.plateContainer.cursor="pointer";let e=!1;this.gameContainer.coinTossPlate.plateContainer.on("pointerdown",()=>{if(e)return;e=!0,this.gameContainer.coinTossPlate.coinContainer?.removeChildren();let i=D.addRandomHistory(3e3);this.gameContainer.coinTossPlate.addCoin(4-i,i),this.gameContainer.coinTossPlate.plateContainer.zIndex=d.plate.a,this.gameContainer.bettingSpotsContains.spotDefault(),V(this.gameContainer.coinTossPlate.shake()).pipe(_(()=>{if([0,2,4].indexOf(i)!==-1){let o=this.gameContainer.bettingSpotsContains.spot01;this.gameContainer.bettingSpotsContains.AddSpotWinAnimationV2(o,6e3).then()}else{let o=this.gameContainer.bettingSpotsContains.spot02;this.gameContainer.bettingSpotsContains.AddSpotWinAnimationV2(o,6e3).then()}let s;switch(i){case 4:{s=this.gameContainer.bettingSpotsContains.spot03;break}case 3:{s=this.gameContainer.bettingSpotsContains.spot05;break}case 2:{s=this.gameContainer.bettingSpotsContains.spot06;break}case 1:{s=this.gameContainer.bettingSpotsContains.spot07;break}case 0:{s=this.gameContainer.bettingSpotsContains.spot04;break}}this.gameContainer.bettingSpotsContains.AddSpotWinAnimationV2(s,6e3).then()}),Z(s=>this.gameContainer.coinTossPlate.reveal()),Z(s=>this.gameContainer.coinTossPlate.hidePlate01()),_(()=>{switch(this.gameContainer.coinTossPlate.plateContainer.zIndex=d.plate.i,[0,2,4].indexOf(i)!==-1?this.gameContainer.listCoinBet.coinToDealer(2):this.gameContainer.listCoinBet.coinToDealer(1),i){case 0:{this.gameContainer.listCoinBet.coinToDealer([3,4,5,6]);break}case 1:{this.gameContainer.listCoinBet.coinToDealer([3,4,5,7]);break}case 2:{this.gameContainer.listCoinBet.coinToDealer([3,4,6,7]);break}case 3:{this.gameContainer.listCoinBet.coinToDealer([3,5,6,7]);break}case 4:{this.gameContainer.listCoinBet.coinToDealer([4,5,6,7]);break}}}),G(2e3),_(()=>{let s=0;if(this.gameContainer.listCoinBet.listCoinBet.forEach(o=>{o.betPosition===1||o.betPosition===2?s+=o.amount*1.96:o.betPosition===3||o.betPosition===7?s+=o.amount*14.4:o.betPosition===4||o.betPosition===6?s+=o.amount*3.75:o.betPosition===5&&(s+=o.amount*2.4)}),this.gameContainer.listCoinBet.listCoinBet.length>0&&s){let o=this.gameContainer.listCoinBet.listCoinBet[0].playerID;se(this.gameContainer.container,this.gameContainer.playerContainer.listPlayerContainer[o].myPlayerContainer,s)}}),G(100),_(()=>{switch([0,2,4].indexOf(i)!==-1?this.gameContainer.listCoinBet.dealerToWinSpot(1):this.gameContainer.listCoinBet.dealerToWinSpot(2),i){case 0:{this.gameContainer.listCoinBet.dealerToWinSpot(7);break}case 1:{this.gameContainer.listCoinBet.dealerToWinSpot(6);break}case 2:{this.gameContainer.listCoinBet.dealerToWinSpot(5);break}case 3:{this.gameContainer.listCoinBet.dealerToWinSpot(4);break}case 4:{this.gameContainer.listCoinBet.dealerToWinSpot(3);break}}}),G(3e3),_(()=>{this.gameContainer.coinTossPlate.plateContainer.zIndex=d.plate.a}),Z(s=>this.gameContainer.coinTossPlate.showPlate01()),Z(s=>this.gameContainer.coinTossPlate.reset())).subscribe(s=>{console.log("shake Done"),e=!1})})},500)}))})}destroy(){return k(this,null,function*(){Xt.stopAll(),this.screenSubscription?.unsubscribe(),this.gameContainer?.destroy(),this.game.destroy(!0),this.gameContainer=null})}};t.\u0275fac=function(i){return new(i||t)(Y(oe),Y($))},t.\u0275prov=ht({token:t,factory:t.\u0275fac,providedIn:"root"});let a=t;return a})();var Ae=["gameContainer"],re=(()=>{let t=class t{constructor(e,i,s){this.coinTossService=e,this.renderer=i,this.zone=s}ngOnDestroy(){return k(this,null,function*(){yield this.coinTossService.destroy(),this.renderer.removeChild(this.gameContainer.nativeElement,this.coinTossService.game.view)})}ngOnInit(){return k(this,null,function*(){yield this.zone.runOutsideAngular(()=>k(this,null,function*(){yield this.coinTossService.init(),this.renderer.appendChild(this.gameContainer.nativeElement,this.coinTossService.game.view)}))})}};t.\u0275fac=function(i){return new(i||t)(lt(ae),lt(Gt),lt($))},t.\u0275cmp=dt({type:t,selectors:[["app-coin-toss-game"]],viewQuery:function(i,s){if(i&1&&jt(Ae,7),i&2){let o;Lt(o=Vt())&&(s.gameContainer=o.first)}},standalone:!0,features:[pt],decls:2,vars:0,consts:[[1,"game-container"],["gameContainer",""]],template:function(i,s){i&1&&ct(0,"div",0,1)},styles:[".game-container[_ngcontent-%COMP%]{width:100vw;height:100vh;overflow:hidden;position:relative;background-image:url(/assets/img/sb-background.jpg);background-repeat:no-repeat;background-size:cover;background-position:center center;text-align:center}"]});let a=t;return a})();var Gn=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=dt({type:t,selectors:[["app-coin-toss"]],standalone:!0,features:[pt],decls:1,vars:0,template:function(i,s){i&1&&ct(0,"app-coin-toss-game")},dependencies:[re]});let a=t;return a})();export{Gn as CoinTossComponent};

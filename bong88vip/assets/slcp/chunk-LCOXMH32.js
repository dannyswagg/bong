import{a as Y,b as rr,c as tr,g as or,i as er,j as nr,k as sr,l as ir,n as ar,o as lr}from"./chunk-ZOT4O2I3.js";import{a as X,d as $,e as M,g as K,h as L,j as H,n as W,o as Z,p as J,r as Q}from"./chunk-OVOI2WLF.js";import{F as T,I as b,Oa as m,Ra as j,Sa as B,Ua as q,Xa as p,a as E,b as V,ba as G,bb as h,cb as g,db as x,ja as C,ka as w,o as S,q as _,qb as O,r as A,sa as N,u as I,ub as R,x as k,xb as U}from"./chunk-N5HMSUQW.js";var dr=(o,r,e=[])=>{let t=Object.getOwnPropertyDescriptors(r);for(let n of e)delete t[n];Object.defineProperties(o,t)},f=(o,r=[o])=>{let e=Object.getPrototypeOf(o);return e===null?r:f(e,[...r,e])},xr=(...o)=>{if(o.length===0)return;let r,e=o.map(t=>f(t));for(;e.every(t=>t.length>0);){let t=e.map(s=>s.pop()),n=t[0];if(t.every(s=>s===n))r=n;else break}return r},ur=(o,r,e=[])=>{var t;let n=(t=xr(...o))!==null&&t!==void 0?t:Object.prototype,s=Object.create(n),i=f(n);for(let l of o){let a=f(l);for(let u=a.length-1;u>=0;u--){let c=a[u];i.indexOf(c)===-1&&(dr(s,c,["constructor",...e]),i.push(c))}}return s.constructor=r,s},P=o=>o.filter((r,e)=>o.indexOf(r)==e),F=(o,r)=>{let e=r.map(s=>f(s)),t=0,n=!0;for(;n;){n=!1;for(let s=r.length-1;s>=0;s--){let i=e[s][t];if(i!=null&&(n=!0,Object.getOwnPropertyDescriptor(i,o)!=null))return e[s][0]}t++}},mr=(o,r=Object.prototype)=>new Proxy({},{getPrototypeOf(){return r},setPrototypeOf(){throw Error("Cannot set prototype of Proxies created by ts-mixer")},getOwnPropertyDescriptor(e,t){return Object.getOwnPropertyDescriptor(F(t,o)||{},t)},defineProperty(){throw new Error("Cannot define new properties on Proxies created by ts-mixer")},has(e,t){return F(t,o)!==void 0||r[t]!==void 0},get(e,t){return(F(t,o)||r)[t]},set(e,t,n){let s=F(t,o);if(s===void 0)throw new Error("Cannot set new properties on Proxies created by ts-mixer");return s[t]=n,!0},deleteProperty(){throw new Error("Cannot delete properties on Proxies created by ts-mixer")},ownKeys(){return o.map(Object.getOwnPropertyNames).reduce((e,t)=>t.concat(e.filter(n=>t.indexOf(n)<0)))}}),Or=(o,r)=>mr([...o,{constructor:r}]),v={initFunction:null,staticsStrategy:"copy",prototypeStrategy:"copy",decoratorInheritance:"deep"},hr=new Map,Pr=o=>hr.get(o),zr=(o,r)=>hr.set(o,r);var cr=(o,r)=>{var e,t;let n=P([...Object.getOwnPropertyNames(o),...Object.getOwnPropertyNames(r)]),s={};for(let i of n)s[i]=P([...(e=o?.[i])!==null&&e!==void 0?e:[],...(t=r?.[i])!==null&&t!==void 0?t:[]]);return s},pr=(o,r)=>{var e,t,n,s;return{property:cr((e=o?.property)!==null&&e!==void 0?e:{},(t=r?.property)!==null&&t!==void 0?t:{}),method:cr((n=o?.method)!==null&&n!==void 0?n:{},(s=r?.method)!==null&&s!==void 0?s:{})}},gr=(o,r)=>{var e,t,n,s,i,l;return{class:P([...(e=o?.class)!==null&&e!==void 0?e:[],...(t=r?.class)!==null&&t!==void 0?t:[]]),static:pr((n=o?.static)!==null&&n!==void 0?n:{},(s=r?.static)!==null&&s!==void 0?s:{}),instance:pr((i=o?.instance)!==null&&i!==void 0?i:{},(l=r?.instance)!==null&&l!==void 0?l:{})}},z=new Map,Dr=(...o)=>{var r;let e=new Set,t=new Set([...o]);for(;t.size>0;)for(let n of t){let s=f(n.prototype).map(u=>u.constructor),i=(r=Pr(n))!==null&&r!==void 0?r:[],a=[...s,...i].filter(u=>!e.has(u));for(let u of a)t.add(u);e.add(n),t.delete(n)}return[...e]},Vr=(...o)=>{let r=Dr(...o).map(e=>z.get(e)).filter(e=>!!e);return r.length==0?{}:r.length==1?r[0]:r.reduce((e,t)=>gr(e,t))},Sr=(...o)=>{let r=o.map(e=>_r(e));return r.length===0?{}:r.length===1?r[0]:r.reduce((e,t)=>gr(e,t))},_r=o=>{let r=z.get(o);return r||(r={},z.set(o,r)),r};function kr(...o){var r,e,t;let n=o.map(a=>a.prototype),s=v.initFunction;if(s!==null){let a=n.map(d=>d[s]).filter(d=>typeof d=="function"),u=function(...d){for(let br of a)br.apply(this,d)},c={[s]:u};n.push(c)}function i(...a){for(let u of o)dr(this,new u(...a));s!==null&&typeof this[s]=="function"&&this[s].apply(this,a)}i.prototype=v.prototypeStrategy==="copy"?ur(n,i):Or(n,i),Object.setPrototypeOf(i,v.staticsStrategy==="copy"?ur(o,null,["prototype"]):mr(o,Function.prototype));let l=i;if(v.decoratorInheritance!=="none"){let a=v.decoratorInheritance==="deep"?Vr(...o):Sr(...o);for(let u of(r=a?.class)!==null&&r!==void 0?r:[]){let c=u(l);c&&(l=c)}fr((e=a?.static)!==null&&e!==void 0?e:{},l),fr((t=a?.instance)!==null&&t!==void 0?t:{},l.prototype)}return zr(l,o),l}var fr=(o,r)=>{let e=o.property,t=o.method;if(e)for(let n in e)for(let s of e[n])s(r,n);if(t)for(let n in t)for(let s of t[n])s(r,n,Object.getOwnPropertyDescriptor(r,n))};var vr=(()=>{let r=class r{};r.confirmed=(t,n)=>s=>{let i=s.get(t),l=s.get(n);return!i||!l||l.errors&&!l.errors.confirmedValidator?null:i.value!==l.value?(l.setErrors({confirmedValidator:!0}),{confirmedValidator:!0}):(l.setErrors(null),null)};let o=r;return o})();var y={password:[M.required,M.pattern(/^(?=.*[A-Z])(?=.*[a-z])(?=.*\d)[A-Za-z\d@$!%*#?&]{6,}$/)],passwordConfirm:[M.required]},Br={password:[null,y.password],passwordConfirm:[null,y.passwordConfirm]},yr={validators:vr.confirmed("password","passwordConfirm")},Er={password:{required:"Vui lo\u0300ng nh\xE2\u0323p m\xE2\u0323t kh\xE2\u0309u!",pattern:"M\xE2\u0323t kh\xE2\u0309u pha\u0309i co\u0301 i\u0301t nh\xE2\u0301t 6 ky\u0301 t\u01B0\u0323, bao g\xF4\u0300m ch\u01B0\u0303 hoa, ch\u01B0\u0303 th\u01B0\u01A1\u0300ng va\u0300 s\xF4\u0301!"},passwordConfirm:{required:"Vui lo\u0300ng nh\xE2\u0323p m\xE2\u0323t kh\xE2\u0309u xa\u0301c nh\xE2\u0323n!",confirmedValidator:"Nh\xE2\u0323p la\u0323i m\xE2\u0323t kh\xE2\u0309u kh\xF4ng chi\u0301nh xa\u0301c"}};var Cr=(()=>{let r=class r{set formErrorMsg(t){this._formErrorMsg!=t&&t&&(this._formErrorMsg=t,this.formErrorMsgChange.next(t))}addControl(t,n){let s=this.formGroup.get(t);s?s.setValidators(n):this.formGroup.addControl(t,new H(this.defaultValue[t]||"",{validators:n}))}get formErrorMsg(){return this._formErrorMsg}emitNewErrorMsg(t){this.formErrorMsg=V(E({},this.formErrorMsg),{[t]:E(E({},this.formErrorMsg[t]||{}),this.validatorError[t])})}setValidators(t,n){return t?(Array.isArray(t)?t.push(...n):t=[t,...n],t):n}writeValue(t){}registerOnChange(t){}registerOnTouched(t){}constructor(){this.formErrors={},this.defaultValue={},this.validators={},this._formErrorMsg={},this.validatorError={},this.formErrorMsgChange=new B}};r.\u0275fac=function(n){return new(n||r)},r.\u0275cmp=w({type:r,selectors:[["ng-component"]],inputs:{formGroup:"formGroup",formErrors:"formErrors",defaultValue:"defaultValue",validators:"validators",formErrorMsg:"formErrorMsg"},outputs:{formErrorMsgChange:"formErrorMsgChange"},decls:0,vars:0,template:function(n,s){},encapsulation:2});let o=r;return o})();var ut=(()=>{let r=class r extends Cr{constructor(){super(...arguments),this.validatorError=Er}ngOnInit(){this.addControl("password",y.password),this.addControl("passwordConfirm",y.passwordConfirm),this.formGroup.addValidators(yr.validators),this.emitNewErrorMsg("password"),this.emitNewErrorMsg("passwordConfirm")}};r.\u0275fac=(()=>{let t;return function(s){return(t||(t=N(r)))(s||r)}})(),r.\u0275cmp=w({type:r,selectors:[["app-password-confirm"]],inputs:{formGroup:"formGroup",formErrors:"formErrors",errorMsgGroup:"errorMsgGroup",defaultValue:"defaultValue",validators:"validators",formErrorMsg:"formErrorMsg"},outputs:{formErrorMsgChange:"formErrorMsgChange"},standalone:!0,features:[R([{provide:X,useExisting:G(()=>r),multi:!0}]),q,U],decls:11,vars:11,consts:[[3,"formGroup"],["nzFor","password","nzRequired","",3,"nzSm","nzXs"],[3,"nzSm","nzXs","nzErrorTip"],["nz-input","","type","password","id","password","formControlName","password"],["nzFor","passwordConfirm","nzRequired","",3,"nzSm","nzXs"],["nz-input","","type","password","formControlName","passwordConfirm","id","passwordConfirm"]],template:function(n,s){n&1&&(h(0,"div",0)(1,"nz-form-item")(2,"nz-form-label",1),O(3,"Password"),g(),h(4,"nz-form-control",2),x(5,"input",3),g()(),h(6,"nz-form-item")(7,"nz-form-label",4),O(8,"Confirm Password"),g(),h(9,"nz-form-control",2),x(10,"input",5),g()()()),n&2&&(p("formGroup",s.formGroup),m(2),p("nzSm",10)("nzXs",24),m(2),p("nzSm",14)("nzXs",24)("nzErrorTip",s.formErrors.password),m(3),p("nzSm",10)("nzXs",24),m(2),p("nzSm",14)("nzXs",24)("nzErrorTip",s.formErrors.passwordConfirm))},dependencies:[sr,rr,Y,or,nr,er,ar,ir,tr,Q,$,K,L,W,Z]});let o=r;return o})();var D=o=>typeof o=="function",wr=o=>{o&&D(o.unsubscribe)&&o.unsubscribe()},Ir=o=>{Array.isArray(o)&&o.forEach(wr)};function Mr({blackList:o=[],arrayName:r="",event:e="ngOnDestroy"}={}){return function(t){let n=t.prototype[e];if(!D(n))throw new Error(`${t.name} is using @AutoUnsubscribe but does not implement ${e}`);t.prototype[e]=function(){if(D(n)&&n.apply(this,arguments),r){Ir(this[r]);return}for(let s in this){if(o.includes(s))continue;let i=this[s];wr(i)}}}}var Fr=class{constructor(){this.fb=C(J),this.notification=C(lr),this.cdr=C(j),this.formErrors={},this._formErrorMsg={},this.formSuccess=!1,this.defaultValue={},this.validators={}}set validateForm(r){this._validateForm=r,this.formValidationSubAuto()}get validateForm(){return this._validateForm}set formErrorMsg(r){this._formErrorMsg!=r&&(this._formErrorMsg=r,this.cdr.detectChanges())}get formErrorMsg(){return this._formErrorMsg}ngOnDestroy(){}formValidationSubAuto(){this.formValidation$=k(this.validateForm.valueChanges,this.validateForm.statusChanges).pipe(b(300)).subscribe(()=>{Object.keys(this.validateForm.controls).forEach(r=>{let e=this.validateForm.get(r),t=e.errors;t!=null&&e.dirty&&(this.formErrors[r]=this.formErrorMsg[r]&&this.formErrorMsg[r][Object.keys(t)[0]]||"Data is not valid")})})}getFormError(r){let e=this.validateForm.get(r);return e?e.valueChanges.pipe(b(200),I(t=>{if((e.dirty||e.touched)&&e.errors)if(this.formErrorMsg[r]){let n=Object.keys(e.errors)[0];return this.formErrorMsg[r][n]||this.formErrors[r]||"D\u01B0\u0303 li\xEA\u0323u kh\xF4ng h\u01A1\u0323p l\xEA\u0323"}else return this.formErrors[r];else return!1})):_(!1)}formValid(){return this.validateForm.valid?!0:(this.markAsDirty(),!1)}markAsDirty(){Object.values(this.validateForm.controls).forEach(r=>{r.invalid&&(r.markAsDirty(),r.markAllAsTouched(),r.updateValueAndValidity({onlySelf:!0,emitEvent:!0}))})}markControlDirty(r){r.markAsDirty(),r.markAllAsTouched(),r.updateValueAndValidity({onlySelf:!0,emitEvent:!0})}removeBlankString(r){let e={};for(let t in r)r[t]!==""&&(e[t]=r[t]);return e}httpErrorOperator(r){return e=>e.pipe(T(t=>(t.status===400?this.setHttpError(t,r):t.status===500&&this.notification.httpError(t,!0),A(()=>t))))}setHttpError(r,e){if(r.status===400){let t=r.error.message;t&&Array.isArray(t)&&t.length?t.forEach(n=>{let s=this.validateForm.controls[n.property];!s&&e&&(s=this.validateForm.controls[e]),s&&this.setFormError(s,n.property,n.code,n.message)}):this.notification.unknownError()}}setFormError(r,e,t,n){this.formErrors[e]=n,this.addFormDefaultErr(e,t,n),r.markAsDirty(),r.markAsTouched(),r.updateValueAndValidity({onlySelf:!0,emitEvent:!0}),r.setErrors({[t]:!0},{emitEvent:!0})}addFormDefaultErr(r,e,t){this.formErrorMsg[r]||(this.formErrorMsg[r]={}),this.formErrorMsg[r][e]=t}};Fr=S([Mr()],Fr);export{kr as a,Br as b,Cr as c,ut as d,Mr as e,Fr as f};

import{a as Ie,b as De,c as Fe}from"./chunk-32X6G2EY.js";import{a as q}from"./chunk-GNK7FYUU.js";import{f as ye}from"./chunk-C3NGE6VN.js";import{a as Me,b as Q}from"./chunk-HJQG5MPA.js";import{a as Y,b as I}from"./chunk-QLGHRBI5.js";import{a as x,b as Te}from"./chunk-ZQ2SH2HQ.js";import{a as ve,b as xe,c as Se,e as Ee,h as be}from"./chunk-3PCEZDWH.js";import{a as Ce,b as ze,c as _e}from"./chunk-ZMMV7WJY.js";import"./chunk-CSB3WEXX.js";import"./chunk-RLSNMKZI.js";import{a as H,b as L,c as W,d as R,e as K,f as X,g as J}from"./chunk-JXDMAI73.js";import"./chunk-FL4M6M5O.js";import"./chunk-5OAHLW4P.js";import"./chunk-RKZT45YI.js";import{a as E}from"./chunk-H5VHI5G7.js";import{e as y,g as le,h as se,k as pe,l as de,n as ce,q as ue,r as fe,s as O,t as G,v as U,w as j}from"./chunk-7SITBUYR.js";import{E as he,F as ge}from"./chunk-RFOR6XZY.js";import"./chunk-BFOO2OG4.js";import{g as B,h as $,n as A,o as ae,q as T,x as me}from"./chunk-5QXQBUCH.js";import{Bb as b,Cb as n,Db as o,Eb as M,Fb as w,Gb as P,Ib as F,Qb as d,Sb as u,Wb as V,Yb as l,Zb as c,a as te,b as ie,dc as v,hc as N,ic as k,ja as re,jc as oe,lb as s,mb as z,oa as ne,ra as h,rb as _,ub as p,wa as g,xa as C}from"./chunk-U56GQCYX.js";var S=(()=>{let r=class r{constructor(e){this.http=e}getAllCtrl(e=10,t=0){return this.http.get(E.apiUrl+`ctrl?perPage=${e}&page=${t}`)}getAllActions(e,t=10,i=0){return this.http.get(E.apiUrl+`ctrl/actions/${e}?perPage=${t}&page=${i}`)}createCtrl(e){return this.http.post(E.apiUrl+"ctrl",e)}updateCtrl(e){return this.http.put(E.apiUrl+"ctrl",e)}updateDisabled(e){return this.http.put(E.apiUrl+"ctrl/disabled",e)}changePassword(e){return this.http.put(E.apiUrl+"ctrl/change-password",e)}};r.\u0275fac=function(t){return new(t||r)(ne(me))},r.\u0275prov=re({token:r,factory:r.\u0275fac,providedIn:"root"});let a=r;return a})();var Ne=(()=>{let r=class r extends x(Y,I){constructor(e){super(),this.ctrlService=e,this.defaultValue={username:"",disabled:!1},this.validators={username:[y.minLength(4),y.maxLength(20)],fullName:[y.required],email:[y.required]},this._formErrorMsg={username:{required:"Username is not valid",minlength:"Username is too short",maxlength:"Username is too long"},email:{required:"Email is required"}}}ngOnInit(){this.validateForm=this.fb.group({username:["",[y.required]]})}submitForm(){this.formValid()&&this.ctrlService.createCtrl(this.validateForm.value).pipe(this.httpErrorOperator("username")).subscribe(e=>{this.destroyModal(e)})}};r.\u0275fac=function(t){return new(t||r)(z(S))},r.\u0275cmp=h({type:r,selectors:[["app-ctrl-create"]],standalone:!0,features:[_,v],decls:8,vars:19,consts:[["nz-form","",3,"formGroup","ngSubmit"],[3,"defaultValue","validators","formErrorMsg","formGroup","formErrors","formErrorMsgChange"],[3,"validators","defaultValue","formErrorMsg","formGroup","formErrors","formErrorMsgChange"],["nz-row","",1,"register-area"],[3,"nzSpan","nzOffset"],["nz-button","","nzType","primary",3,"disabled"]],template:function(t,i){t&1&&(n(0,"form",0),d("ngSubmit",function(){return i.submitForm()}),n(1,"app-username-password-confirm",1),d("formErrorMsgChange",function(D){return i.formErrorMsg=D}),o(),n(2,"app-fullname-phone-email-input",1),d("formErrorMsgChange",function(D){return i.formErrorMsg=D}),o(),n(3,"app-disabled-input",2),d("formErrorMsgChange",function(D){return i.formErrorMsg=D}),o(),n(4,"nz-form-item",3)(5,"nz-form-control",4)(6,"button",5),l(7,"\u0110\u0103ng ky\u0301 ta\u0300i khoa\u0309n"),o()()()()),t&2&&(p("formGroup",i.validateForm),s(1),p("defaultValue",i.defaultValue)("validators",i.validators)("formErrorMsg",i.formErrorMsg)("formGroup",i.validateForm)("formErrors",i.formErrors),s(1),p("defaultValue",i.defaultValue)("validators",i.validators)("formErrorMsg",i.formErrorMsg)("formGroup",i.validateForm)("formErrors",i.formErrors),s(1),p("validators",i.validators)("defaultValue",i.defaultValue)("formErrorMsg",i.formErrorMsg)("formGroup",i.validateForm)("formErrors",i.formErrors),s(2),p("nzSpan",12)("nzOffset",8),s(1),p("disabled",!i.validateForm.valid))},dependencies:[j,U,O,G,fe,de,se,ce,_e,ze,Ce,Ee,xe,ve,Se,be,Q,Ie,De,Fe,T]});let a=r;return a})();function Ge(a,r){if(a&1&&(n(0,"tr")(1,"td"),l(2),o(),n(3,"td"),l(4),o(),n(5,"td"),l(6),o(),n(7,"td"),l(8),o()()),a&2){let m=r.$implicit;s(2),c(m.createdAt),s(2),c(m.action),s(2),c(m.refId),s(2),c(m.description)}}function Ue(a,r){if(a&1){let m=F();w(0),n(1,"nz-table",1,2),d("nzPageIndexChange",function(t){g(m);let i=u();return C(i.changePage(t))}),n(3,"thead")(4,"tr")(5,"th"),l(6,"Th\u01A1\u0300i gian"),o(),n(7,"th"),l(8,"Ha\u0300nh \u0111\xF4\u0323ng"),o(),n(9,"th"),l(10,"ID"),o(),n(11,"th"),l(12,"M\xF4 ta\u0309"),o()()(),n(13,"tbody"),b(14,Ge,9,4,"tr",3),o()(),P()}if(a&2){let m=r.ngIf,e=V(2),t=u();s(1),p("nzData",m.data)("nzTotal",t.total)("nzPageIndex",t.pageIndex+1)("nzPageSize",t.pageSize),s(13),p("ngForOf",e.data)}}var we=(()=>{let r=class r extends x(q,I){constructor(e){super(),this.ctrlService=e,this.pageSize=20,this.actions$=this.createObservableData((t,i)=>this.ctrlService.getAllActions(this.nzModalData.id,t,i))}};r.\u0275fac=function(t){return new(t||r)(z(S))},r.\u0275cmp=h({type:r,selectors:[["app-ctrl-history"]],standalone:!0,features:[_,v],decls:2,vars:3,consts:[[4,"ngIf"],["nzSize","small","nzShowPagination","true","nzFrontPagination","false",3,"nzData","nzTotal","nzPageIndex","nzPageSize","nzPageIndexChange"],["actionsTable",""],[4,"ngFor","ngForOf"]],template:function(t,i){t&1&&(b(0,Ue,15,5,"ng-container",0),N(1,"async")),t&2&&p("ngIf",k(1,1,i.actions$))},dependencies:[J,W,H,L,X,R,K,T,B,$,A]});let a=r;return a})();var Pe=(()=>{let r=class r extends x(Y,I){constructor(e){super(),this.ctrlService=e}submit(e){return this.ctrlService.changePassword(ie(te({},e),{id:this.nzModalData.id}))}};r.\u0275fac=function(t){return new(t||r)(z(S))},r.\u0275cmp=h({type:r,selectors:[["app-ctrl-change-password"]],standalone:!0,features:[_,v],decls:1,vars:1,consts:[[3,"submitFunc"]],template:function(t,i){t&1&&M(0,"app-change-password",0),t&2&&p("submitFunc",i.submit.bind(i))},dependencies:[ye]});let a=r;return a})();function je(a,r){if(a&1){let m=F();n(0,"tr")(1,"td"),l(2),N(3,"date"),o(),n(4,"td"),l(5),o(),n(6,"td"),l(7),o(),n(8,"td"),l(9),o(),n(10,"td"),l(11),o(),n(12,"td")(13,"nz-switch",7),d("ngModelChange",function(){let i=g(m).$implicit,f=u(2);return C(f.changeDisabled(i,!i.disabled))}),o()(),n(14,"td",8)(15,"button",9),d("click",function(){let i=g(m).$implicit,f=u(2);return C(f.changePassword(i))}),M(16,"span",10),o(),n(17,"button",11),d("click",function(){let i=g(m).$implicit,f=u(2);return C(f.history(i))}),M(18,"span",12),o()()()}if(a&2){let m=r.$implicit;s(2),c(oe(3,6,m.createdAt,"short")),s(3),c(m.username),s(2),c(m.fullName),s(2),c(m.phone),s(2),c(m.email),s(2),p("ngModel",m.disabled)}}function qe(a,r){if(a&1){let m=F();w(0),n(1,"nz-table",1,2),d("nzPageIndexChange",function(t){g(m);let i=u();return C(i.changePage(t))}),n(3,"thead")(4,"tr")(5,"th"),l(6,"Ng\xE0y kh\u1EDFi t\u1EA1o"),o(),n(7,"th"),l(8,"Ta\u0300i khoa\u0309n"),o(),n(9,"th"),l(10,"Chu\u0309 khoa\u0309n"),o(),n(11,"th"),l(12,"S\u0110T"),o(),n(13,"th"),l(14,"Email"),o(),n(15,"th"),l(16,"Disabled"),o(),n(17,"th"),l(18,"X\u1EED l\xFD "),o()(),n(19,"tr")(20,"th",3)(21,"button",4),d("click",function(){g(m);let t=u();return C(t.create())}),M(22,"span",5),o()()()(),n(23,"tbody"),b(24,je,19,9,"tr",6),o()(),P()}if(a&2){let m=r.ngIf,e=V(2),t=u();s(1),p("nzData",m.data)("nzTotal",t.total)("nzPageIndex",t.pageIndex+1)("nzPageSize",t.pageSize),s(23),p("ngForOf",e.data)}}var Bt=(()=>{let r=class r extends x(q,Te){constructor(e){super(),this.ctrlService=e,this.pageSize=20,this.ctrl$=this.createObservableData((t,i)=>this.ctrlService.getAllCtrl(t,i))}changePassword(e){this.createComponentModal({nzTitle:"\u0110\xF4\u0309i m\xE2\u0323t kh\xE2\u0309u ta\u0300i khoa\u0309n: "+e.username+" - "+e.fullName},Pe,e)}history(e){this.createComponentModal({nzWidth:"100vw",nzTitle:"Li\u0323ch s\u01B0\u0309 ha\u0300nh \u0111\xF4\u0323ng cu\u0309a ta\u0300i khoa\u0309n: "+e.username+" - "+e.fullName},we,e)}changeDisabled(e,t){this.ctrlService.updateDisabled({id:e.id,disabled:t}).subscribe(()=>this.loadDataSubject$.next(!0))}create(){this.createComponentModal({nzTitle:"Ta\u0323o ta\u0300i Khoa\u0309n \u0111i\xEA\u0300u khi\xEA\u0309n"},Ne).afterClose.subscribe(()=>this.loadDataSubject$.next(!0))}};r.\u0275fac=function(t){return new(t||r)(z(S))},r.\u0275cmp=h({type:r,selectors:[["app-ctrl-index"]],standalone:!0,features:[_,v],decls:2,vars:3,consts:[[4,"ngIf"],["nzSize","small","nzShowPagination","true","nzFrontPagination","false",3,"nzData","nzTotal","nzPageIndex","nzPageSize","nzPageIndexChange"],["ctrlTable",""],["colspan","11",1,"center-align"],["nz-button","","nzType","primary","nz-tooltip","","nzTooltipTitle","T\u1EA1o ta\u0300i khoa\u0309n",3,"click"],["nz-icon","","nzType","plus","nzTheme","outline"],[4,"ngFor","ngForOf"],[3,"ngModel","ngModelChange"],[1,"btn-float"],["nz-button","","nzType","primary","nz-tooltip","","nzTooltipTitle","\u0110\xF4\u0309i m\xE2\u0323t kh\xE2\u0309u admin",3,"click"],["nz-icon","","nzType","key","nzTheme","outline"],["nz-button","","nzType","primary","nz-tooltip","","nzTooltipTitle","Li\u0323ch s\u01B0\u0309 ha\u0300nh \u0111\xF4\u0323ng",3,"click"],["nz-icon","","nzType","history","nzTheme","outline"]],template:function(t,i){t&1&&(b(0,qe,25,5,"ng-container",0),N(1,"async")),t&2&&p("ngIf",k(1,1,i.ctrl$))},dependencies:[T,B,$,A,ae,J,W,H,L,X,R,K,ge,he,j,U,O,G,Q,Me,ue,le,pe]});let a=r;return a})();export{Bt as CtrlIndexComponent};

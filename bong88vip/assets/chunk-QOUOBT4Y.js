var lO=Object.create;var od=Object.defineProperty,uO=Object.defineProperties,cO=Object.getOwnPropertyDescriptor,hO=Object.getOwnPropertyDescriptors,dO=Object.getOwnPropertyNames,sd=Object.getOwnPropertySymbols,fO=Object.getPrototypeOf,ug=Object.prototype.hasOwnProperty,$w=Object.prototype.propertyIsEnumerable;var Gw=(r,e,t)=>e in r?od(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,O=(r,e)=>{for(var t in e||={})ug.call(e,t)&&Gw(r,t,e[t]);if(sd)for(var t of sd(e))$w.call(e,t)&&Gw(r,t,e[t]);return r},De=(r,e)=>uO(r,hO(e));var pu=(r,e)=>{var t={};for(var n in r)ug.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&sd)for(var n of sd(r))e.indexOf(n)<0&&$w.call(r,n)&&(t[n]=r[n]);return t};var Ve=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),pO=(r,e)=>{for(var t in e)od(r,t,{get:e[t],enumerable:!0})},mO=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of dO(e))!ug.call(r,i)&&i!==t&&od(r,i,{get:()=>e[i],enumerable:!(n=cO(e,i))||n.enumerable});return r};var cg=(r,e,t)=>(t=r!=null?lO(fO(r)):{},mO(e||!r||!r.__esModule?od(t,"default",{value:r,enumerable:!0}):t,r));var L=(r,e,t)=>new Promise((n,i)=>{var s=l=>{try{a(t.next(l))}catch(u){i(u)}},o=l=>{try{a(t.throw(l))}catch(u){i(u)}},a=l=>l.done?n(l.value):Promise.resolve(l.value).then(s,o);a((t=t.apply(r,e)).next())});var zI=Ve((IJ,x0)=>{"use strict";var UV=Object.prototype.hasOwnProperty,ir="~";function Cc(){}Object.create&&(Cc.prototype=Object.create(null),new Cc().__proto__||(ir=!1));function jV(r,e,t){this.fn=r,this.context=e,this.once=t||!1}function $I(r,e,t,n,i){if(typeof t!="function")throw new TypeError("The listener must be a function");var s=new jV(t,n||r,i),o=ir?ir+e:e;return r._events[o]?r._events[o].fn?r._events[o]=[r._events[o],s]:r._events[o].push(s):(r._events[o]=s,r._eventsCount++),r}function Rp(r,e){--r._eventsCount===0?r._events=new Cc:delete r._events[e]}function jt(){this._events=new Cc,this._eventsCount=0}jt.prototype.eventNames=function(){var e=[],t,n;if(this._eventsCount===0)return e;for(n in t=this._events)UV.call(t,n)&&e.push(ir?n.slice(1):n);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e};jt.prototype.listeners=function(e){var t=ir?ir+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,s=n.length,o=new Array(s);i<s;i++)o[i]=n[i].fn;return o};jt.prototype.listenerCount=function(e){var t=ir?ir+e:e,n=this._events[t];return n?n.fn?1:n.length:0};jt.prototype.emit=function(e,t,n,i,s,o){var a=ir?ir+e:e;if(!this._events[a])return!1;var l=this._events[a],u=arguments.length,c,h;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),u){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,i),!0;case 5:return l.fn.call(l.context,t,n,i,s),!0;case 6:return l.fn.call(l.context,t,n,i,s,o),!0}for(h=1,c=new Array(u-1);h<u;h++)c[h-1]=arguments[h];l.fn.apply(l.context,c)}else{var d=l.length,f;for(h=0;h<d;h++)switch(l[h].once&&this.removeListener(e,l[h].fn,void 0,!0),u){case 1:l[h].fn.call(l[h].context);break;case 2:l[h].fn.call(l[h].context,t);break;case 3:l[h].fn.call(l[h].context,t,n);break;case 4:l[h].fn.call(l[h].context,t,n,i);break;default:if(!c)for(f=1,c=new Array(u-1);f<u;f++)c[f-1]=arguments[f];l[h].fn.apply(l[h].context,c)}}return!0};jt.prototype.on=function(e,t,n){return $I(this,e,t,n,!1)};jt.prototype.once=function(e,t,n){return $I(this,e,t,n,!0)};jt.prototype.removeListener=function(e,t,n,i){var s=ir?ir+e:e;if(!this._events[s])return this;if(!t)return Rp(this,s),this;var o=this._events[s];if(o.fn)o.fn===t&&(!i||o.once)&&(!n||o.context===n)&&Rp(this,s);else{for(var a=0,l=[],u=o.length;a<u;a++)(o[a].fn!==t||i&&!o[a].once||n&&o[a].context!==n)&&l.push(o[a]);l.length?this._events[s]=l.length===1?l[0]:l:Rp(this,s)}return this};jt.prototype.removeAllListeners=function(e){var t;return e?(t=ir?ir+e:e,this._events[t]&&Rp(this,t)):(this._events=new Cc,this._eventsCount=0),this};jt.prototype.off=jt.prototype.removeListener;jt.prototype.addListener=jt.prototype.on;jt.prefixed=ir;jt.EventEmitter=jt;typeof x0<"u"&&(x0.exports=jt)});var ZI=Ve((AJ,T0)=>{"use strict";T0.exports=Np;T0.exports.default=Np;function Np(r,e,t){t=t||2;var n=e&&e.length,i=n?e[0]*t:r.length,s=XI(r,0,i,t,!0),o=[];if(!s||s.next===s.prev)return o;var a,l,u,c,h,d,f;if(n&&(s=zV(r,e,s,t)),r.length>80*t){a=u=r[0],l=c=r[1];for(var p=t;p<i;p+=t)h=r[p],d=r[p+1],h<a&&(a=h),d<l&&(l=d),h>u&&(u=h),d>c&&(c=d);f=Math.max(u-a,c-l),f=f!==0?32767/f:0}return Dc(s,o,t,a,l,f,0),o}function XI(r,e,t,n,i){var s,o;if(i===E0(r,e,t,n)>0)for(s=e;s<t;s+=n)o=WI(s,r[s],r[s+1],o);else for(s=t-n;s>=e;s-=n)o=WI(s,r[s],r[s+1],o);return o&&Fp(o,o.next)&&(Ic(o),o=o.next),o}function Eo(r,e){if(!r)return r;e||(e=r);var t=r,n;do if(n=!1,!t.steiner&&(Fp(t,t.next)||Qe(t.prev,t,t.next)===0)){if(Ic(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function Dc(r,e,t,n,i,s,o){if(r){!o&&s&&ZV(r,n,i,s);for(var a=r,l,u;r.prev!==r.next;){if(l=r.prev,u=r.next,s?HV(r,n,i,s):VV(r)){e.push(l.i/t|0),e.push(r.i/t|0),e.push(u.i/t|0),Ic(r),r=u.next,a=u.next;continue}if(r=u,r===a){o?o===1?(r=GV(Eo(r),e,t),Dc(r,e,t,n,i,s,2)):o===2&&$V(r,e,t,n,i,s):Dc(Eo(r),e,t,n,i,s,1);break}}}}function VV(r){var e=r.prev,t=r,n=r.next;if(Qe(e,t,n)>=0)return!1;for(var i=e.x,s=t.x,o=n.x,a=e.y,l=t.y,u=n.y,c=i<s?i<o?i:o:s<o?s:o,h=a<l?a<u?a:u:l<u?l:u,d=i>s?i>o?i:o:s>o?s:o,f=a>l?a>u?a:u:l>u?l:u,p=n.next;p!==e;){if(p.x>=c&&p.x<=d&&p.y>=h&&p.y<=f&&rl(i,a,s,l,o,u,p.x,p.y)&&Qe(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function HV(r,e,t,n){var i=r.prev,s=r,o=r.next;if(Qe(i,s,o)>=0)return!1;for(var a=i.x,l=s.x,u=o.x,c=i.y,h=s.y,d=o.y,f=a<l?a<u?a:u:l<u?l:u,p=c<h?c<d?c:d:h<d?h:d,m=a>l?a>u?a:u:l>u?l:u,g=c>h?c>d?c:d:h>d?h:d,y=b0(f,p,e,t,n),_=b0(m,g,e,t,n),v=r.prevZ,x=r.nextZ;v&&v.z>=y&&x&&x.z<=_;){if(v.x>=f&&v.x<=m&&v.y>=p&&v.y<=g&&v!==i&&v!==o&&rl(a,c,l,h,u,d,v.x,v.y)&&Qe(v.prev,v,v.next)>=0||(v=v.prevZ,x.x>=f&&x.x<=m&&x.y>=p&&x.y<=g&&x!==i&&x!==o&&rl(a,c,l,h,u,d,x.x,x.y)&&Qe(x.prev,x,x.next)>=0))return!1;x=x.nextZ}for(;v&&v.z>=y;){if(v.x>=f&&v.x<=m&&v.y>=p&&v.y<=g&&v!==i&&v!==o&&rl(a,c,l,h,u,d,v.x,v.y)&&Qe(v.prev,v,v.next)>=0)return!1;v=v.prevZ}for(;x&&x.z<=_;){if(x.x>=f&&x.x<=m&&x.y>=p&&x.y<=g&&x!==i&&x!==o&&rl(a,c,l,h,u,d,x.x,x.y)&&Qe(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function GV(r,e,t){var n=r;do{var i=n.prev,s=n.next.next;!Fp(i,s)&&qI(i,n,n.next,s)&&Sc(i,s)&&Sc(s,i)&&(e.push(i.i/t|0),e.push(n.i/t|0),e.push(s.i/t|0),Ic(n),Ic(n.next),n=r=s),n=n.next}while(n!==r);return Eo(n)}function $V(r,e,t,n,i,s){var o=r;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&JV(o,a)){var l=YI(o,a);o=Eo(o,o.next),l=Eo(l,l.next),Dc(o,e,t,n,i,s,0),Dc(l,e,t,n,i,s,0);return}a=a.next}o=o.next}while(o!==r)}function zV(r,e,t,n){var i=[],s,o,a,l,u;for(s=0,o=e.length;s<o;s++)a=e[s]*n,l=s<o-1?e[s+1]*n:r.length,u=XI(r,a,l,n,!1),u===u.next&&(u.steiner=!0),i.push(QV(u));for(i.sort(WV),s=0;s<i.length;s++)t=XV(i[s],t);return t}function WV(r,e){return r.x-e.x}function XV(r,e){var t=qV(r,e);if(!t)return e;var n=YI(t,r);return Eo(n,n.next),Eo(t,t.next)}function qV(r,e){var t=e,n=r.x,i=r.y,s=-1/0,o;do{if(i<=t.y&&i>=t.next.y&&t.next.y!==t.y){var a=t.x+(i-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(a<=n&&a>s&&(s=a,o=t.x<t.next.x?t:t.next,a===n))return o}t=t.next}while(t!==e);if(!o)return null;var l=o,u=o.x,c=o.y,h=1/0,d;t=o;do n>=t.x&&t.x>=u&&n!==t.x&&rl(i<c?n:s,i,u,c,i<c?s:n,i,t.x,t.y)&&(d=Math.abs(i-t.y)/(n-t.x),Sc(t,r)&&(d<h||d===h&&(t.x>o.x||t.x===o.x&&YV(o,t)))&&(o=t,h=d)),t=t.next;while(t!==l);return o}function YV(r,e){return Qe(r.prev,r,e.prev)<0&&Qe(e.next,r,r.next)<0}function ZV(r,e,t,n){var i=r;do i.z===0&&(i.z=b0(i.x,i.y,e,t,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==r);i.prevZ.nextZ=null,i.prevZ=null,KV(i)}function KV(r){var e,t,n,i,s,o,a,l,u=1;do{for(t=r,r=null,s=null,o=0;t;){for(o++,n=t,a=0,e=0;e<u&&(a++,n=n.nextZ,!!n);e++);for(l=u;a>0||l>0&&n;)a!==0&&(l===0||!n||t.z<=n.z)?(i=t,t=t.nextZ,a--):(i=n,n=n.nextZ,l--),s?s.nextZ=i:r=i,i.prevZ=s,s=i;t=n}s.nextZ=null,u*=2}while(o>1);return r}function b0(r,e,t,n,i){return r=(r-t)*i|0,e=(e-n)*i|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,r|e<<1}function QV(r){var e=r,t=r;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==r);return t}function rl(r,e,t,n,i,s,o,a){return(i-o)*(e-a)>=(r-o)*(s-a)&&(r-o)*(n-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(i-o)*(n-a)}function JV(r,e){return r.next.i!==e.i&&r.prev.i!==e.i&&!eH(r,e)&&(Sc(r,e)&&Sc(e,r)&&tH(r,e)&&(Qe(r.prev,r,e.prev)||Qe(r,e.prev,e))||Fp(r,e)&&Qe(r.prev,r,r.next)>0&&Qe(e.prev,e,e.next)>0)}function Qe(r,e,t){return(e.y-r.y)*(t.x-e.x)-(e.x-r.x)*(t.y-e.y)}function Fp(r,e){return r.x===e.x&&r.y===e.y}function qI(r,e,t,n){var i=Op(Qe(r,e,t)),s=Op(Qe(r,e,n)),o=Op(Qe(t,n,r)),a=Op(Qe(t,n,e));return!!(i!==s&&o!==a||i===0&&Pp(r,t,e)||s===0&&Pp(r,n,e)||o===0&&Pp(t,r,n)||a===0&&Pp(t,e,n))}function Pp(r,e,t){return e.x<=Math.max(r.x,t.x)&&e.x>=Math.min(r.x,t.x)&&e.y<=Math.max(r.y,t.y)&&e.y>=Math.min(r.y,t.y)}function Op(r){return r>0?1:r<0?-1:0}function eH(r,e){var t=r;do{if(t.i!==r.i&&t.next.i!==r.i&&t.i!==e.i&&t.next.i!==e.i&&qI(t,t.next,r,e))return!0;t=t.next}while(t!==r);return!1}function Sc(r,e){return Qe(r.prev,r,r.next)<0?Qe(r,e,r.next)>=0&&Qe(r,r.prev,e)>=0:Qe(r,e,r.prev)<0||Qe(r,r.next,e)<0}function tH(r,e){var t=r,n=!1,i=(r.x+e.x)/2,s=(r.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==r);return n}function YI(r,e){var t=new w0(r.i,r.x,r.y),n=new w0(e.i,e.x,e.y),i=r.next,s=e.prev;return r.next=e,e.prev=r,t.next=i,i.prev=t,n.next=t,t.prev=n,s.next=n,n.prev=s,n}function WI(r,e,t,n){var i=new w0(r,e,t);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function Ic(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function w0(r,e,t){this.i=r,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}Np.deviation=function(r,e,t,n){var i=e&&e.length,s=i?e[0]*t:r.length,o=Math.abs(E0(r,0,s,t));if(i)for(var a=0,l=e.length;a<l;a++){var u=e[a]*t,c=a<l-1?e[a+1]*t:r.length;o-=Math.abs(E0(r,u,c,t))}var h=0;for(a=0;a<n.length;a+=3){var d=n[a]*t,f=n[a+1]*t,p=n[a+2]*t;h+=Math.abs((r[d]-r[p])*(r[f+1]-r[d+1])-(r[d]-r[f])*(r[p+1]-r[d+1]))}return o===0&&h===0?0:Math.abs((h-o)/o)};function E0(r,e,t,n){for(var i=0,s=e,o=t-n;s<t;s+=n)i+=(r[o]-r[s])*(r[s+1]+r[o+1]),o=s;return i}Np.flatten=function(r){for(var e=r[0][0].length,t={vertices:[],holes:[],dimensions:e},n=0,i=0;i<r.length;i++){for(var s=0;s<r[i].length;s++)for(var o=0;o<e;o++)t.vertices.push(r[i][s][o]);i>0&&(n+=r[i-1].length,t.holes.push(n))}return t}});var KI=Ve((nl,il)=>{"use strict";(function(r){var e=typeof nl=="object"&&nl&&!nl.nodeType&&nl,t=typeof il=="object"&&il&&!il.nodeType&&il,n=typeof global=="object"&&global;(n.global===n||n.window===n||n.self===n)&&(r=n);var i,s=2147483647,o=36,a=1,l=26,u=38,c=700,h=72,d=128,f="-",p=/^xn--/,m=/[^\x20-\x7E]/,g=/[\x2E\u3002\uFF0E\uFF61]/g,y={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},_=o-a,v=Math.floor,x=String.fromCharCode,b;function C(B){throw new RangeError(y[B])}function E(B,z){for(var H=B.length,be=[];H--;)be[H]=z(B[H]);return be}function w(B,z){var H=B.split("@"),be="";H.length>1&&(be=H[0]+"@",B=H[1]),B=B.replace(g,".");var Ce=B.split("."),qe=E(Ce,z).join(".");return be+qe}function T(B){for(var z=[],H=0,be=B.length,Ce,qe;H<be;)Ce=B.charCodeAt(H++),Ce>=55296&&Ce<=56319&&H<be?(qe=B.charCodeAt(H++),(qe&64512)==56320?z.push(((Ce&1023)<<10)+(qe&1023)+65536):(z.push(Ce),H--)):z.push(Ce);return z}function k(B){return E(B,function(z){var H="";return z>65535&&(z-=65536,H+=x(z>>>10&1023|55296),z=56320|z&1023),H+=x(z),H}).join("")}function P(B){return B-48<10?B-22:B-65<26?B-65:B-97<26?B-97:o}function R(B,z){return B+22+75*(B<26)-((z!=0)<<5)}function D(B,z,H){var be=0;for(B=H?v(B/c):B>>1,B+=v(B/z);B>_*l>>1;be+=o)B=v(B/_);return v(be+(_+1)*B/(B+u))}function A(B){var z=[],H=B.length,be,Ce=0,qe=d,Te=h,$e,cr,Zt,hr,gt,ht,yt,kt,Kt;for($e=B.lastIndexOf(f),$e<0&&($e=0),cr=0;cr<$e;++cr)B.charCodeAt(cr)>=128&&C("not-basic"),z.push(B.charCodeAt(cr));for(Zt=$e>0?$e+1:0;Zt<H;){for(hr=Ce,gt=1,ht=o;Zt>=H&&C("invalid-input"),yt=P(B.charCodeAt(Zt++)),(yt>=o||yt>v((s-Ce)/gt))&&C("overflow"),Ce+=yt*gt,kt=ht<=Te?a:ht>=Te+l?l:ht-Te,!(yt<kt);ht+=o)Kt=o-kt,gt>v(s/Kt)&&C("overflow"),gt*=Kt;be=z.length+1,Te=D(Ce-hr,be,hr==0),v(Ce/be)>s-qe&&C("overflow"),qe+=v(Ce/be),Ce%=be,z.splice(Ce++,0,qe)}return k(z)}function X(B){var z,H,be,Ce,qe,Te,$e,cr,Zt,hr,gt,ht=[],yt,kt,Kt,fu;for(B=T(B),yt=B.length,z=d,H=0,qe=h,Te=0;Te<yt;++Te)gt=B[Te],gt<128&&ht.push(x(gt));for(be=Ce=ht.length,Ce&&ht.push(f);be<yt;){for($e=s,Te=0;Te<yt;++Te)gt=B[Te],gt>=z&&gt<$e&&($e=gt);for(kt=be+1,$e-z>v((s-H)/kt)&&C("overflow"),H+=($e-z)*kt,z=$e,Te=0;Te<yt;++Te)if(gt=B[Te],gt<z&&++H>s&&C("overflow"),gt==z){for(cr=H,Zt=o;hr=Zt<=qe?a:Zt>=qe+l?l:Zt-qe,!(cr<hr);Zt+=o)fu=cr-hr,Kt=o-hr,ht.push(x(R(hr+fu%Kt,0))),cr=v(fu/Kt);ht.push(x(R(cr,0))),qe=D(H,kt,be==Ce),H=0,++be}++H,++z}return ht.join("")}function K(B){return w(B,function(z){return p.test(z)?A(z.slice(4).toLowerCase()):z})}function U(B){return w(B,function(z){return m.test(z)?"xn--"+X(z):z})}if(i={version:"1.4.1",ucs2:{decode:T,encode:k},decode:A,encode:X,toASCII:U,toUnicode:K},typeof define=="function"&&typeof define.amd=="object"&&define.amd)define("punycode",function(){return i});else if(e&&t)if(il.exports==e)t.exports=i;else for(b in i)i.hasOwnProperty(b)&&(e[b]=i[b]);else r.punycode=i})(nl)});var JI=Ve((MJ,QI)=>{"use strict";QI.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),n=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;e[t]=i;for(t in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,t);if(o.value!==i||o.enumerable!==!0)return!1}return!0}});var rA=Ve((RJ,tA)=>{"use strict";var eA=typeof Symbol<"u"&&Symbol,rH=JI();tA.exports=function(){return typeof eA!="function"||typeof Symbol!="function"||typeof eA("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:rH()}});var sA=Ve((PJ,iA)=>{"use strict";var nA={foo:{}},nH=Object;iA.exports=function(){return{__proto__:nA}.foo===nA.foo&&!({__proto__:null}instanceof nH)}});var lA=Ve((OJ,aA)=>{"use strict";var iH="Function.prototype.bind called on incompatible ",sH=Object.prototype.toString,oH=Math.max,aH="[object Function]",oA=function(e,t){for(var n=[],i=0;i<e.length;i+=1)n[i]=e[i];for(var s=0;s<t.length;s+=1)n[s+e.length]=t[s];return n},lH=function(e,t){for(var n=[],i=t||0,s=0;i<e.length;i+=1,s+=1)n[s]=e[i];return n},uH=function(r,e){for(var t="",n=0;n<r.length;n+=1)t+=r[n],n+1<r.length&&(t+=e);return t};aA.exports=function(e){var t=this;if(typeof t!="function"||sH.apply(t)!==aH)throw new TypeError(iH+t);for(var n=lH(arguments,1),i,s=function(){if(this instanceof i){var c=t.apply(this,oA(n,arguments));return Object(c)===c?c:this}return t.apply(e,oA(n,arguments))},o=oH(0,t.length-n.length),a=[],l=0;l<o;l++)a[l]="$"+l;if(i=Function("binder","return function ("+uH(a,",")+"){ return binder.apply(this,arguments); }")(s),t.prototype){var u=function(){};u.prototype=t.prototype,i.prototype=new u,u.prototype=null}return i}});var Lp=Ve((NJ,uA)=>{"use strict";var cH=lA();uA.exports=Function.prototype.bind||cH});var hA=Ve((FJ,cA)=>{"use strict";var hH=Function.prototype.call,dH=Object.prototype.hasOwnProperty,fH=Lp();cA.exports=fH.call(hH,dH)});var ws=Ve((LJ,gA)=>{"use strict";var xe,ll=SyntaxError,mA=Function,al=TypeError,C0=function(r){try{return mA('"use strict"; return ('+r+").constructor;")()}catch{}},To=Object.getOwnPropertyDescriptor;if(To)try{To({},"")}catch{To=null}var D0=function(){throw new al},pH=To?function(){try{return arguments.callee,D0}catch{try{return To(arguments,"callee").get}catch{return D0}}}():D0,sl=rA()(),mH=sA()(),wt=Object.getPrototypeOf||(mH?function(r){return r.__proto__}:null),ol={},gH=typeof Uint8Array>"u"||!wt?xe:wt(Uint8Array),Co={"%AggregateError%":typeof AggregateError>"u"?xe:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?xe:ArrayBuffer,"%ArrayIteratorPrototype%":sl&&wt?wt([][Symbol.iterator]()):xe,"%AsyncFromSyncIteratorPrototype%":xe,"%AsyncFunction%":ol,"%AsyncGenerator%":ol,"%AsyncGeneratorFunction%":ol,"%AsyncIteratorPrototype%":ol,"%Atomics%":typeof Atomics>"u"?xe:Atomics,"%BigInt%":typeof BigInt>"u"?xe:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?xe:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?xe:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?xe:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?xe:Float32Array,"%Float64Array%":typeof Float64Array>"u"?xe:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?xe:FinalizationRegistry,"%Function%":mA,"%GeneratorFunction%":ol,"%Int8Array%":typeof Int8Array>"u"?xe:Int8Array,"%Int16Array%":typeof Int16Array>"u"?xe:Int16Array,"%Int32Array%":typeof Int32Array>"u"?xe:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":sl&&wt?wt(wt([][Symbol.iterator]())):xe,"%JSON%":typeof JSON=="object"?JSON:xe,"%Map%":typeof Map>"u"?xe:Map,"%MapIteratorPrototype%":typeof Map>"u"||!sl||!wt?xe:wt(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?xe:Promise,"%Proxy%":typeof Proxy>"u"?xe:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?xe:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?xe:Set,"%SetIteratorPrototype%":typeof Set>"u"||!sl||!wt?xe:wt(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?xe:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":sl&&wt?wt(""[Symbol.iterator]()):xe,"%Symbol%":sl?Symbol:xe,"%SyntaxError%":ll,"%ThrowTypeError%":pH,"%TypedArray%":gH,"%TypeError%":al,"%Uint8Array%":typeof Uint8Array>"u"?xe:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?xe:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?xe:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?xe:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?xe:WeakMap,"%WeakRef%":typeof WeakRef>"u"?xe:WeakRef,"%WeakSet%":typeof WeakSet>"u"?xe:WeakSet};if(wt)try{null.error}catch(r){dA=wt(wt(r)),Co["%Error.prototype%"]=dA}var dA,yH=function r(e){var t;if(e==="%AsyncFunction%")t=C0("async function () {}");else if(e==="%GeneratorFunction%")t=C0("function* () {}");else if(e==="%AsyncGeneratorFunction%")t=C0("async function* () {}");else if(e==="%AsyncGenerator%"){var n=r("%AsyncGeneratorFunction%");n&&(t=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=r("%AsyncGenerator%");i&&wt&&(t=wt(i.prototype))}return Co[e]=t,t},fA={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Ac=Lp(),kp=hA(),vH=Ac.call(Function.call,Array.prototype.concat),_H=Ac.call(Function.apply,Array.prototype.splice),pA=Ac.call(Function.call,String.prototype.replace),Bp=Ac.call(Function.call,String.prototype.slice),xH=Ac.call(Function.call,RegExp.prototype.exec),bH=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,wH=/\\(\\)?/g,EH=function(e){var t=Bp(e,0,1),n=Bp(e,-1);if(t==="%"&&n!=="%")throw new ll("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&t!=="%")throw new ll("invalid intrinsic syntax, expected opening `%`");var i=[];return pA(e,bH,function(s,o,a,l){i[i.length]=a?pA(l,wH,"$1"):o||s}),i},TH=function(e,t){var n=e,i;if(kp(fA,n)&&(i=fA[n],n="%"+i[0]+"%"),kp(Co,n)){var s=Co[n];if(s===ol&&(s=yH(n)),typeof s>"u"&&!t)throw new al("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:s}}throw new ll("intrinsic "+e+" does not exist!")};gA.exports=function(e,t){if(typeof e!="string"||e.length===0)throw new al("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof t!="boolean")throw new al('"allowMissing" argument must be a boolean');if(xH(/^%?[^%]*%?$/,e)===null)throw new ll("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=EH(e),i=n.length>0?n[0]:"",s=TH("%"+i+"%",t),o=s.name,a=s.value,l=!1,u=s.alias;u&&(i=u[0],_H(n,vH([0,1],u)));for(var c=1,h=!0;c<n.length;c+=1){var d=n[c],f=Bp(d,0,1),p=Bp(d,-1);if((f==='"'||f==="'"||f==="`"||p==='"'||p==="'"||p==="`")&&f!==p)throw new ll("property names with quotes must have matching quotes");if((d==="constructor"||!h)&&(l=!0),i+="."+d,o="%"+i+"%",kp(Co,o))a=Co[o];else if(a!=null){if(!(d in a)){if(!t)throw new al("base intrinsic for "+e+" exists, but the property is not available.");return}if(To&&c+1>=n.length){var m=To(a,d);h=!!m,h&&"get"in m&&!("originalValue"in m.get)?a=m.get:a=a[d]}else h=kp(a,d),a=a[d];h&&!l&&(Co[o]=a)}}return a}});var A0=Ve((kJ,yA)=>{"use strict";var CH=ws(),S0=CH("%Object.defineProperty%",!0),I0=function(){if(S0)try{return S0({},"a",{value:1}),!0}catch{return!1}return!1};I0.hasArrayLengthDefineBug=function(){if(!I0())return null;try{return S0([],"length",{value:1}).length!==1}catch{return!0}};yA.exports=I0});var M0=Ve((BJ,vA)=>{"use strict";var DH=ws(),Up=DH("%Object.getOwnPropertyDescriptor%",!0);if(Up)try{Up([],"length")}catch{Up=null}vA.exports=Up});var bA=Ve((UJ,xA)=>{"use strict";var SH=A0()(),R0=ws(),Mc=SH&&R0("%Object.defineProperty%",!0);if(Mc)try{Mc({},"a",{value:1})}catch{Mc=!1}var IH=R0("%SyntaxError%"),ul=R0("%TypeError%"),_A=M0();xA.exports=function(e,t,n){if(!e||typeof e!="object"&&typeof e!="function")throw new ul("`obj` must be an object or a function`");if(typeof t!="string"&&typeof t!="symbol")throw new ul("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new ul("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new ul("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new ul("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new ul("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,s=arguments.length>4?arguments[4]:null,o=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,l=!!_A&&_A(e,t);if(Mc)Mc(e,t,{configurable:o===null&&l?l.configurable:!o,enumerable:i===null&&l?l.enumerable:!i,value:n,writable:s===null&&l?l.writable:!s});else if(a||!i&&!s&&!o)e[t]=n;else throw new IH("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")}});var SA=Ve((jJ,DA)=>{"use strict";var CA=ws(),wA=bA(),AH=A0()(),EA=M0(),TA=CA("%TypeError%"),MH=CA("%Math.floor%");DA.exports=function(e,t){if(typeof e!="function")throw new TA("`fn` is not a function");if(typeof t!="number"||t<0||t>4294967295||MH(t)!==t)throw new TA("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],i=!0,s=!0;if("length"in e&&EA){var o=EA(e,"length");o&&!o.configurable&&(i=!1),o&&!o.writable&&(s=!1)}return(i||s||!n)&&(AH?wA(e,"length",t,!0,!0):wA(e,"length",t)),e}});var PA=Ve((VJ,jp)=>{"use strict";var P0=Lp(),cl=ws(),RH=SA(),PH=cl("%TypeError%"),AA=cl("%Function.prototype.apply%"),MA=cl("%Function.prototype.call%"),RA=cl("%Reflect.apply%",!0)||P0.call(MA,AA),Rc=cl("%Object.defineProperty%",!0),OH=cl("%Math.max%");if(Rc)try{Rc({},"a",{value:1})}catch{Rc=null}jp.exports=function(e){if(typeof e!="function")throw new PH("a function is required");var t=RA(P0,MA,arguments);return RH(t,1+OH(0,e.length-(arguments.length-1)),!0)};var IA=function(){return RA(P0,AA,arguments)};Rc?Rc(jp.exports,"apply",{value:IA}):jp.exports.apply=IA});var LA=Ve((HJ,FA)=>{"use strict";var OA=ws(),NA=PA(),NH=NA(OA("String.prototype.indexOf"));FA.exports=function(e,t){var n=OA(e,!!t);return typeof n=="function"&&NH(e,".prototype.")>-1?NA(n):n}});var kA=Ve(()=>{"use strict"});var n1=Ve((zJ,r1)=>{"use strict";var H0=typeof Map=="function"&&Map.prototype,O0=Object.getOwnPropertyDescriptor&&H0?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Hp=H0&&O0&&typeof O0.get=="function"?O0.get:null,BA=H0&&Map.prototype.forEach,G0=typeof Set=="function"&&Set.prototype,N0=Object.getOwnPropertyDescriptor&&G0?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Gp=G0&&N0&&typeof N0.get=="function"?N0.get:null,UA=G0&&Set.prototype.forEach,FH=typeof WeakMap=="function"&&WeakMap.prototype,Oc=FH?WeakMap.prototype.has:null,LH=typeof WeakSet=="function"&&WeakSet.prototype,Nc=LH?WeakSet.prototype.has:null,kH=typeof WeakRef=="function"&&WeakRef.prototype,jA=kH?WeakRef.prototype.deref:null,BH=Boolean.prototype.valueOf,UH=Object.prototype.toString,jH=Function.prototype.toString,VH=String.prototype.match,$0=String.prototype.slice,Ts=String.prototype.replace,HH=String.prototype.toUpperCase,VA=String.prototype.toLowerCase,ZA=RegExp.prototype.test,HA=Array.prototype.concat,ei=Array.prototype.join,GH=Array.prototype.slice,GA=Math.floor,k0=typeof BigInt=="function"?BigInt.prototype.valueOf:null,F0=Object.getOwnPropertySymbols,B0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,hl=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Vt=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===hl||"symbol")?Symbol.toStringTag:null,KA=Object.prototype.propertyIsEnumerable,$A=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(r){return r.__proto__}:null);function zA(r,e){if(r===1/0||r===-1/0||r!==r||r&&r>-1e3&&r<1e3||ZA.call(/e/,e))return e;var t=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof r=="number"){var n=r<0?-GA(-r):GA(r);if(n!==r){var i=String(n),s=$0.call(e,i.length+1);return Ts.call(i,t,"$&_")+"."+Ts.call(Ts.call(s,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Ts.call(e,t,"$&_")}var U0=kA(),WA=U0.custom,XA=JA(WA)?WA:null;r1.exports=function r(e,t,n,i){var s=t||{};if(Es(s,"quoteStyle")&&s.quoteStyle!=="single"&&s.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Es(s,"maxStringLength")&&(typeof s.maxStringLength=="number"?s.maxStringLength<0&&s.maxStringLength!==1/0:s.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=Es(s,"customInspect")?s.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Es(s,"indent")&&s.indent!==null&&s.indent!=="	"&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Es(s,"numericSeparator")&&typeof s.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=s.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return t1(e,s);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var l=String(e);return a?zA(e,l):l}if(typeof e=="bigint"){var u=String(e)+"n";return a?zA(e,u):u}var c=typeof s.depth>"u"?5:s.depth;if(typeof n>"u"&&(n=0),n>=c&&c>0&&typeof e=="object")return j0(e)?"[Array]":"[Object]";var h=aG(s,n);if(typeof i>"u")i=[];else if(e1(i,e)>=0)return"[Circular]";function d(D,A,X){if(A&&(i=GH.call(i),i.push(A)),X){var K={depth:s.depth};return Es(s,"quoteStyle")&&(K.quoteStyle=s.quoteStyle),r(D,K,n+1,i)}return r(D,s,n+1,i)}if(typeof e=="function"&&!qA(e)){var f=QH(e),p=Vp(e,d);return"[Function"+(f?": "+f:" (anonymous)")+"]"+(p.length>0?" { "+ei.call(p,", ")+" }":"")}if(JA(e)){var m=hl?Ts.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):B0.call(e);return typeof e=="object"&&!hl?Pc(m):m}if(iG(e)){for(var g="<"+VA.call(String(e.nodeName)),y=e.attributes||[],_=0;_<y.length;_++)g+=" "+y[_].name+"="+QA($H(y[_].value),"double",s);return g+=">",e.childNodes&&e.childNodes.length&&(g+="..."),g+="</"+VA.call(String(e.nodeName))+">",g}if(j0(e)){if(e.length===0)return"[]";var v=Vp(e,d);return h&&!oG(v)?"["+V0(v,h)+"]":"[ "+ei.call(v,", ")+" ]"}if(WH(e)){var x=Vp(e,d);return!("cause"in Error.prototype)&&"cause"in e&&!KA.call(e,"cause")?"{ ["+String(e)+"] "+ei.call(HA.call("[cause]: "+d(e.cause),x),", ")+" }":x.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+ei.call(x,", ")+" }"}if(typeof e=="object"&&o){if(XA&&typeof e[XA]=="function"&&U0)return U0(e,{depth:c-n});if(o!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(JH(e)){var b=[];return BA&&BA.call(e,function(D,A){b.push(d(A,e,!0)+" => "+d(D,e))}),YA("Map",Hp.call(e),b,h)}if(rG(e)){var C=[];return UA&&UA.call(e,function(D){C.push(d(D,e))}),YA("Set",Gp.call(e),C,h)}if(eG(e))return L0("WeakMap");if(nG(e))return L0("WeakSet");if(tG(e))return L0("WeakRef");if(qH(e))return Pc(d(Number(e)));if(ZH(e))return Pc(d(k0.call(e)));if(YH(e))return Pc(BH.call(e));if(XH(e))return Pc(d(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(e===global)return"{ [object globalThis] }";if(!zH(e)&&!qA(e)){var E=Vp(e,d),w=$A?$A(e)===Object.prototype:e instanceof Object||e.constructor===Object,T=e instanceof Object?"":"null prototype",k=!w&&Vt&&Object(e)===e&&Vt in e?$0.call(Cs(e),8,-1):T?"Object":"",P=w||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",R=P+(k||T?"["+ei.call(HA.call([],k||[],T||[]),": ")+"] ":"");return E.length===0?R+"{}":h?R+"{"+V0(E,h)+"}":R+"{ "+ei.call(E,", ")+" }"}return String(e)};function QA(r,e,t){var n=(t.quoteStyle||e)==="double"?'"':"'";return n+r+n}function $H(r){return Ts.call(String(r),/"/g,"&quot;")}function j0(r){return Cs(r)==="[object Array]"&&(!Vt||!(typeof r=="object"&&Vt in r))}function zH(r){return Cs(r)==="[object Date]"&&(!Vt||!(typeof r=="object"&&Vt in r))}function qA(r){return Cs(r)==="[object RegExp]"&&(!Vt||!(typeof r=="object"&&Vt in r))}function WH(r){return Cs(r)==="[object Error]"&&(!Vt||!(typeof r=="object"&&Vt in r))}function XH(r){return Cs(r)==="[object String]"&&(!Vt||!(typeof r=="object"&&Vt in r))}function qH(r){return Cs(r)==="[object Number]"&&(!Vt||!(typeof r=="object"&&Vt in r))}function YH(r){return Cs(r)==="[object Boolean]"&&(!Vt||!(typeof r=="object"&&Vt in r))}function JA(r){if(hl)return r&&typeof r=="object"&&r instanceof Symbol;if(typeof r=="symbol")return!0;if(!r||typeof r!="object"||!B0)return!1;try{return B0.call(r),!0}catch{}return!1}function ZH(r){if(!r||typeof r!="object"||!k0)return!1;try{return k0.call(r),!0}catch{}return!1}var KH=Object.prototype.hasOwnProperty||function(r){return r in this};function Es(r,e){return KH.call(r,e)}function Cs(r){return UH.call(r)}function QH(r){if(r.name)return r.name;var e=VH.call(jH.call(r),/^function\s*([\w$]+)/);return e?e[1]:null}function e1(r,e){if(r.indexOf)return r.indexOf(e);for(var t=0,n=r.length;t<n;t++)if(r[t]===e)return t;return-1}function JH(r){if(!Hp||!r||typeof r!="object")return!1;try{Hp.call(r);try{Gp.call(r)}catch{return!0}return r instanceof Map}catch{}return!1}function eG(r){if(!Oc||!r||typeof r!="object")return!1;try{Oc.call(r,Oc);try{Nc.call(r,Nc)}catch{return!0}return r instanceof WeakMap}catch{}return!1}function tG(r){if(!jA||!r||typeof r!="object")return!1;try{return jA.call(r),!0}catch{}return!1}function rG(r){if(!Gp||!r||typeof r!="object")return!1;try{Gp.call(r);try{Hp.call(r)}catch{return!0}return r instanceof Set}catch{}return!1}function nG(r){if(!Nc||!r||typeof r!="object")return!1;try{Nc.call(r,Nc);try{Oc.call(r,Oc)}catch{return!0}return r instanceof WeakSet}catch{}return!1}function iG(r){return!r||typeof r!="object"?!1:typeof HTMLElement<"u"&&r instanceof HTMLElement?!0:typeof r.nodeName=="string"&&typeof r.getAttribute=="function"}function t1(r,e){if(r.length>e.maxStringLength){var t=r.length-e.maxStringLength,n="... "+t+" more character"+(t>1?"s":"");return t1($0.call(r,0,e.maxStringLength),e)+n}var i=Ts.call(Ts.call(r,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,sG);return QA(i,"single",e)}function sG(r){var e=r.charCodeAt(0),t={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return t?"\\"+t:"\\x"+(e<16?"0":"")+HH.call(e.toString(16))}function Pc(r){return"Object("+r+")"}function L0(r){return r+" { ? }"}function YA(r,e,t,n){var i=n?V0(t,n):ei.call(t,", ");return r+" ("+e+") {"+i+"}"}function oG(r){for(var e=0;e<r.length;e++)if(e1(r[e],`
`)>=0)return!1;return!0}function aG(r,e){var t;if(r.indent==="	")t="	";else if(typeof r.indent=="number"&&r.indent>0)t=ei.call(Array(r.indent+1)," ");else return null;return{base:t,prev:ei.call(Array(e+1),t)}}function V0(r,e){if(r.length===0)return"";var t=`
`+e.prev+e.base;return t+ei.call(r,","+t)+`
`+e.prev}function Vp(r,e){var t=j0(r),n=[];if(t){n.length=r.length;for(var i=0;i<r.length;i++)n[i]=Es(r,i)?e(r[i],r):""}var s=typeof F0=="function"?F0(r):[],o;if(hl){o={};for(var a=0;a<s.length;a++)o["$"+s[a]]=s[a]}for(var l in r)Es(r,l)&&(t&&String(Number(l))===l&&l<r.length||hl&&o["$"+l]instanceof Symbol||(ZA.call(/[^\w$]/,l)?n.push(e(l,r)+": "+e(r[l],r)):n.push(l+": "+e(r[l],r))));if(typeof F0=="function")for(var u=0;u<s.length;u++)KA.call(r,s[u])&&n.push("["+e(s[u])+"]: "+e(r[s[u]],r));return n}});var s1=Ve((WJ,i1)=>{"use strict";var z0=ws(),dl=LA(),lG=n1(),uG=z0("%TypeError%"),$p=z0("%WeakMap%",!0),zp=z0("%Map%",!0),cG=dl("WeakMap.prototype.get",!0),hG=dl("WeakMap.prototype.set",!0),dG=dl("WeakMap.prototype.has",!0),fG=dl("Map.prototype.get",!0),pG=dl("Map.prototype.set",!0),mG=dl("Map.prototype.has",!0),W0=function(r,e){for(var t=r,n;(n=t.next)!==null;t=n)if(n.key===e)return t.next=n.next,n.next=r.next,r.next=n,n},gG=function(r,e){var t=W0(r,e);return t&&t.value},yG=function(r,e,t){var n=W0(r,e);n?n.value=t:r.next={key:e,next:r.next,value:t}},vG=function(r,e){return!!W0(r,e)};i1.exports=function(){var e,t,n,i={assert:function(s){if(!i.has(s))throw new uG("Side channel does not contain "+lG(s))},get:function(s){if($p&&s&&(typeof s=="object"||typeof s=="function")){if(e)return cG(e,s)}else if(zp){if(t)return fG(t,s)}else if(n)return gG(n,s)},has:function(s){if($p&&s&&(typeof s=="object"||typeof s=="function")){if(e)return dG(e,s)}else if(zp){if(t)return mG(t,s)}else if(n)return vG(n,s);return!1},set:function(s,o){$p&&s&&(typeof s=="object"||typeof s=="function")?(e||(e=new $p),hG(e,s,o)):zp?(t||(t=new zp),pG(t,s,o)):(n||(n={key:{},next:null}),yG(n,s,o))}};return i}});var Wp=Ve((XJ,o1)=>{"use strict";var _G=String.prototype.replace,xG=/%20/g,X0={RFC1738:"RFC1738",RFC3986:"RFC3986"};o1.exports={default:X0.RFC3986,formatters:{RFC1738:function(r){return _G.call(r,xG,"+")},RFC3986:function(r){return String(r)}},RFC1738:X0.RFC1738,RFC3986:X0.RFC3986}});var Y0=Ve((qJ,l1)=>{"use strict";var bG=Wp(),q0=Object.prototype.hasOwnProperty,Do=Array.isArray,ti=function(){for(var r=[],e=0;e<256;++e)r.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return r}(),wG=function(e){for(;e.length>1;){var t=e.pop(),n=t.obj[t.prop];if(Do(n)){for(var i=[],s=0;s<n.length;++s)typeof n[s]<"u"&&i.push(n[s]);t.obj[t.prop]=i}}},a1=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},i=0;i<e.length;++i)typeof e[i]<"u"&&(n[i]=e[i]);return n},EG=function r(e,t,n){if(!t)return e;if(typeof t!="object"){if(Do(e))e.push(t);else if(e&&typeof e=="object")(n&&(n.plainObjects||n.allowPrototypes)||!q0.call(Object.prototype,t))&&(e[t]=!0);else return[e,t];return e}if(!e||typeof e!="object")return[e].concat(t);var i=e;return Do(e)&&!Do(t)&&(i=a1(e,n)),Do(e)&&Do(t)?(t.forEach(function(s,o){if(q0.call(e,o)){var a=e[o];a&&typeof a=="object"&&s&&typeof s=="object"?e[o]=r(a,s,n):e.push(s)}else e[o]=s}),e):Object.keys(t).reduce(function(s,o){var a=t[o];return q0.call(s,o)?s[o]=r(s[o],a,n):s[o]=a,s},i)},TG=function(e,t){return Object.keys(t).reduce(function(n,i){return n[i]=t[i],n},e)},CG=function(r,e,t){var n=r.replace(/\+/g," ");if(t==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch{return n}},DG=function(e,t,n,i,s){if(e.length===0)return e;var o=e;if(typeof e=="symbol"?o=Symbol.prototype.toString.call(e):typeof e!="string"&&(o=String(e)),n==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(c){return"%26%23"+parseInt(c.slice(2),16)+"%3B"});for(var a="",l=0;l<o.length;++l){var u=o.charCodeAt(l);if(u===45||u===46||u===95||u===126||u>=48&&u<=57||u>=65&&u<=90||u>=97&&u<=122||s===bG.RFC1738&&(u===40||u===41)){a+=o.charAt(l);continue}if(u<128){a=a+ti[u];continue}if(u<2048){a=a+(ti[192|u>>6]+ti[128|u&63]);continue}if(u<55296||u>=57344){a=a+(ti[224|u>>12]+ti[128|u>>6&63]+ti[128|u&63]);continue}l+=1,u=65536+((u&1023)<<10|o.charCodeAt(l)&1023),a+=ti[240|u>>18]+ti[128|u>>12&63]+ti[128|u>>6&63]+ti[128|u&63]}return a},SG=function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],i=0;i<t.length;++i)for(var s=t[i],o=s.obj[s.prop],a=Object.keys(o),l=0;l<a.length;++l){var u=a[l],c=o[u];typeof c=="object"&&c!==null&&n.indexOf(c)===-1&&(t.push({obj:o,prop:u}),n.push(c))}return wG(t),e},IG=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},AG=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},MG=function(e,t){return[].concat(e,t)},RG=function(e,t){if(Do(e)){for(var n=[],i=0;i<e.length;i+=1)n.push(t(e[i]));return n}return t(e)};l1.exports={arrayToObject:a1,assign:TG,combine:MG,compact:SG,decode:CG,encode:DG,isBuffer:AG,isRegExp:IG,maybeMap:RG,merge:EG}});var p1=Ve((YJ,f1)=>{"use strict";var h1=s1(),Xp=Y0(),Fc=Wp(),PG=Object.prototype.hasOwnProperty,u1={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},Ni=Array.isArray,OG=Array.prototype.push,d1=function(r,e){OG.apply(r,Ni(e)?e:[e])},NG=Date.prototype.toISOString,c1=Fc.default,Ht={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:Xp.encode,encodeValuesOnly:!1,format:c1,formatter:Fc.formatters[c1],indices:!1,serializeDate:function(e){return NG.call(e)},skipNulls:!1,strictNullHandling:!1},FG=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},Z0={},LG=function r(e,t,n,i,s,o,a,l,u,c,h,d,f,p,m,g){for(var y=e,_=g,v=0,x=!1;(_=_.get(Z0))!==void 0&&!x;){var b=_.get(e);if(v+=1,typeof b<"u"){if(b===v)throw new RangeError("Cyclic object value");x=!0}typeof _.get(Z0)>"u"&&(v=0)}if(typeof l=="function"?y=l(t,y):y instanceof Date?y=h(y):n==="comma"&&Ni(y)&&(y=Xp.maybeMap(y,function(K){return K instanceof Date?h(K):K})),y===null){if(s)return a&&!p?a(t,Ht.encoder,m,"key",d):t;y=""}if(FG(y)||Xp.isBuffer(y)){if(a){var C=p?t:a(t,Ht.encoder,m,"key",d);return[f(C)+"="+f(a(y,Ht.encoder,m,"value",d))]}return[f(t)+"="+f(String(y))]}var E=[];if(typeof y>"u")return E;var w;if(n==="comma"&&Ni(y))p&&a&&(y=Xp.maybeMap(y,a)),w=[{value:y.length>0?y.join(",")||null:void 0}];else if(Ni(l))w=l;else{var T=Object.keys(y);w=u?T.sort(u):T}for(var k=i&&Ni(y)&&y.length===1?t+"[]":t,P=0;P<w.length;++P){var R=w[P],D=typeof R=="object"&&typeof R.value<"u"?R.value:y[R];if(!(o&&D===null)){var A=Ni(y)?typeof n=="function"?n(k,R):k:k+(c?"."+R:"["+R+"]");g.set(e,v);var X=h1();X.set(Z0,g),d1(E,r(D,A,n,i,s,o,n==="comma"&&p&&Ni(y)?null:a,l,u,c,h,d,f,p,m,X))}}return E},kG=function(e){if(!e)return Ht;if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var t=e.charset||Ht.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=Fc.default;if(typeof e.format<"u"){if(!PG.call(Fc.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var i=Fc.formatters[n],s=Ht.filter;return(typeof e.filter=="function"||Ni(e.filter))&&(s=e.filter),{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:Ht.addQueryPrefix,allowDots:typeof e.allowDots>"u"?Ht.allowDots:!!e.allowDots,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Ht.charsetSentinel,delimiter:typeof e.delimiter>"u"?Ht.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:Ht.encode,encoder:typeof e.encoder=="function"?e.encoder:Ht.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:Ht.encodeValuesOnly,filter:s,format:n,formatter:i,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:Ht.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:Ht.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Ht.strictNullHandling}};f1.exports=function(r,e){var t=r,n=kG(e),i,s;typeof n.filter=="function"?(s=n.filter,t=s("",t)):Ni(n.filter)&&(s=n.filter,i=s);var o=[];if(typeof t!="object"||t===null)return"";var a;e&&e.arrayFormat in u1?a=e.arrayFormat:e&&"indices"in e?a=e.indices?"indices":"repeat":a="indices";var l=u1[a];if(e&&"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var u=l==="comma"&&e&&e.commaRoundTrip;i||(i=Object.keys(t)),n.sort&&i.sort(n.sort);for(var c=h1(),h=0;h<i.length;++h){var d=i[h];n.skipNulls&&t[d]===null||d1(o,LG(t[d],d,l,u,n.strictNullHandling,n.skipNulls,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,c))}var f=o.join(n.delimiter),p=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?p+="utf8=%26%2310003%3B&":p+="utf8=%E2%9C%93&"),f.length>0?p+f:""}});var y1=Ve((ZJ,g1)=>{"use strict";var fl=Y0(),K0=Object.prototype.hasOwnProperty,BG=Array.isArray,Et={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:fl.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},UG=function(r){return r.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})},m1=function(r,e){return r&&typeof r=="string"&&e.comma&&r.indexOf(",")>-1?r.split(","):r},jG="utf8=%26%2310003%3B",VG="utf8=%E2%9C%93",HG=function(e,t){var n={__proto__:null},i=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,s=t.parameterLimit===1/0?void 0:t.parameterLimit,o=i.split(t.delimiter,s),a=-1,l,u=t.charset;if(t.charsetSentinel)for(l=0;l<o.length;++l)o[l].indexOf("utf8=")===0&&(o[l]===VG?u="utf-8":o[l]===jG&&(u="iso-8859-1"),a=l,l=o.length);for(l=0;l<o.length;++l)if(l!==a){var c=o[l],h=c.indexOf("]="),d=h===-1?c.indexOf("="):h+1,f,p;d===-1?(f=t.decoder(c,Et.decoder,u,"key"),p=t.strictNullHandling?null:""):(f=t.decoder(c.slice(0,d),Et.decoder,u,"key"),p=fl.maybeMap(m1(c.slice(d+1),t),function(m){return t.decoder(m,Et.decoder,u,"value")})),p&&t.interpretNumericEntities&&u==="iso-8859-1"&&(p=UG(p)),c.indexOf("[]=")>-1&&(p=BG(p)?[p]:p),K0.call(n,f)?n[f]=fl.combine(n[f],p):n[f]=p}return n},GG=function(r,e,t,n){for(var i=n?e:m1(e,t),s=r.length-1;s>=0;--s){var o,a=r[s];if(a==="[]"&&t.parseArrays)o=[].concat(i);else{o=t.plainObjects?Object.create(null):{};var l=a.charAt(0)==="["&&a.charAt(a.length-1)==="]"?a.slice(1,-1):a,u=parseInt(l,10);!t.parseArrays&&l===""?o={0:i}:!isNaN(u)&&a!==l&&String(u)===l&&u>=0&&t.parseArrays&&u<=t.arrayLimit?(o=[],o[u]=i):l!=="__proto__"&&(o[l]=i)}i=o}return i},$G=function(e,t,n,i){if(e){var s=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,l=n.depth>0&&o.exec(s),u=l?s.slice(0,l.index):s,c=[];if(u){if(!n.plainObjects&&K0.call(Object.prototype,u)&&!n.allowPrototypes)return;c.push(u)}for(var h=0;n.depth>0&&(l=a.exec(s))!==null&&h<n.depth;){if(h+=1,!n.plainObjects&&K0.call(Object.prototype,l[1].slice(1,-1))&&!n.allowPrototypes)return;c.push(l[1])}return l&&c.push("["+s.slice(l.index)+"]"),GG(c,t,n,i)}},zG=function(e){if(!e)return Et;if(e.decoder!==null&&e.decoder!==void 0&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=typeof e.charset>"u"?Et.charset:e.charset;return{allowDots:typeof e.allowDots>"u"?Et.allowDots:!!e.allowDots,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:Et.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:Et.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:Et.arrayLimit,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Et.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:Et.comma,decoder:typeof e.decoder=="function"?e.decoder:Et.decoder,delimiter:typeof e.delimiter=="string"||fl.isRegExp(e.delimiter)?e.delimiter:Et.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:Et.depth,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:Et.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:Et.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:Et.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Et.strictNullHandling}};g1.exports=function(r,e){var t=zG(e);if(r===""||r===null||typeof r>"u")return t.plainObjects?Object.create(null):{};for(var n=typeof r=="string"?HG(r,t):r,i=t.plainObjects?Object.create(null):{},s=Object.keys(n),o=0;o<s.length;++o){var a=s[o],l=$G(a,n[a],t,typeof r=="string");i=fl.merge(i,l,t)}return t.allowSparse===!0?i:fl.compact(i)}});var _1=Ve((KJ,v1)=>{"use strict";var WG=p1(),XG=y1(),qG=Wp();v1.exports={formats:qG,parse:XG,stringify:WG}});var E1=Ve(ml=>{"use strict";var YG=KI();function en(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var ZG=/^([a-z0-9.+-]+:)/i,KG=/:[0-9]*$/,QG=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,JG=["<",">",'"',"`"," ","\r",`
`,"	"],e$=["{","}","|","\\","^","`"].concat(JG),Q0=["'"].concat(e$),x1=["%","/","?",";","#"].concat(Q0),b1=["/","?","#"],t$=255,w1=/^[+a-z0-9A-Z_-]{0,63}$/,r$=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,n$={javascript:!0,"javascript:":!0},J0={javascript:!0,"javascript:":!0},pl={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},ex=_1();function Lc(r,e,t){if(r&&typeof r=="object"&&r instanceof en)return r;var n=new en;return n.parse(r,e,t),n}en.prototype.parse=function(r,e,t){if(typeof r!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof r);var n=r.indexOf("?"),i=n!==-1&&n<r.indexOf("#")?"?":"#",s=r.split(i),o=/\\/g;s[0]=s[0].replace(o,"/"),r=s.join(i);var a=r;if(a=a.trim(),!t&&r.split("#").length===1){var l=QG.exec(a);if(l)return this.path=a,this.href=a,this.pathname=l[1],l[2]?(this.search=l[2],e?this.query=ex.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var u=ZG.exec(a);if(u){u=u[0];var c=u.toLowerCase();this.protocol=c,a=a.substr(u.length)}if(t||u||a.match(/^\/\/[^@/]+@[^@/]+/)){var h=a.substr(0,2)==="//";h&&!(u&&J0[u])&&(a=a.substr(2),this.slashes=!0)}if(!J0[u]&&(h||u&&!pl[u])){for(var d=-1,f=0;f<b1.length;f++){var p=a.indexOf(b1[f]);p!==-1&&(d===-1||p<d)&&(d=p)}var m,g;d===-1?g=a.lastIndexOf("@"):g=a.lastIndexOf("@",d),g!==-1&&(m=a.slice(0,g),a=a.slice(g+1),this.auth=decodeURIComponent(m)),d=-1;for(var f=0;f<x1.length;f++){var p=a.indexOf(x1[f]);p!==-1&&(d===-1||p<d)&&(d=p)}d===-1&&(d=a.length),this.host=a.slice(0,d),a=a.slice(d),this.parseHost(),this.hostname=this.hostname||"";var y=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!y)for(var _=this.hostname.split(/\./),f=0,v=_.length;f<v;f++){var x=_[f];if(x&&!x.match(w1)){for(var b="",C=0,E=x.length;C<E;C++)x.charCodeAt(C)>127?b+="x":b+=x[C];if(!b.match(w1)){var w=_.slice(0,f),T=_.slice(f+1),k=x.match(r$);k&&(w.push(k[1]),T.unshift(k[2])),T.length&&(a="/"+T.join(".")+a),this.hostname=w.join(".");break}}}this.hostname.length>t$?this.hostname="":this.hostname=this.hostname.toLowerCase(),y||(this.hostname=YG.toASCII(this.hostname));var P=this.port?":"+this.port:"",R=this.hostname||"";this.host=R+P,this.href+=this.host,y&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),a[0]!=="/"&&(a="/"+a))}if(!n$[c])for(var f=0,v=Q0.length;f<v;f++){var D=Q0[f];if(a.indexOf(D)!==-1){var A=encodeURIComponent(D);A===D&&(A=escape(D)),a=a.split(D).join(A)}}var X=a.indexOf("#");X!==-1&&(this.hash=a.substr(X),a=a.slice(0,X));var K=a.indexOf("?");if(K!==-1?(this.search=a.substr(K),this.query=a.substr(K+1),e&&(this.query=ex.parse(this.query)),a=a.slice(0,K)):e&&(this.search="",this.query={}),a&&(this.pathname=a),pl[c]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var P=this.pathname||"",U=this.search||"";this.path=P+U}return this.href=this.format(),this};function i$(r){return typeof r=="string"&&(r=Lc(r)),r instanceof en?r.format():en.prototype.format.call(r)}en.prototype.format=function(){var r=this.auth||"";r&&(r=encodeURIComponent(r),r=r.replace(/%3A/i,":"),r+="@");var e=this.protocol||"",t=this.pathname||"",n=this.hash||"",i=!1,s="";this.host?i=r+this.host:this.hostname&&(i=r+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(s=ex.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var o=this.search||s&&"?"+s||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||pl[e])&&i!==!1?(i="//"+(i||""),t&&t.charAt(0)!=="/"&&(t="/"+t)):i||(i=""),n&&n.charAt(0)!=="#"&&(n="#"+n),o&&o.charAt(0)!=="?"&&(o="?"+o),t=t.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),o=o.replace("#","%23"),e+i+t+o+n};function s$(r,e){return Lc(r,!1,!0).resolve(e)}en.prototype.resolve=function(r){return this.resolveObject(Lc(r,!1,!0)).format()};function o$(r,e){return r?Lc(r,!1,!0).resolveObject(e):e}en.prototype.resolveObject=function(r){if(typeof r=="string"){var e=new en;e.parse(r,!1,!0),r=e}for(var t=new en,n=Object.keys(this),i=0;i<n.length;i++){var s=n[i];t[s]=this[s]}if(t.hash=r.hash,r.href==="")return t.href=t.format(),t;if(r.slashes&&!r.protocol){for(var o=Object.keys(r),a=0;a<o.length;a++){var l=o[a];l!=="protocol"&&(t[l]=r[l])}return pl[t.protocol]&&t.hostname&&!t.pathname&&(t.pathname="/",t.path=t.pathname),t.href=t.format(),t}if(r.protocol&&r.protocol!==t.protocol){if(!pl[r.protocol]){for(var u=Object.keys(r),c=0;c<u.length;c++){var h=u[c];t[h]=r[h]}return t.href=t.format(),t}if(t.protocol=r.protocol,!r.host&&!J0[r.protocol]){for(var v=(r.pathname||"").split("/");v.length&&!(r.host=v.shift()););r.host||(r.host=""),r.hostname||(r.hostname=""),v[0]!==""&&v.unshift(""),v.length<2&&v.unshift(""),t.pathname=v.join("/")}else t.pathname=r.pathname;if(t.search=r.search,t.query=r.query,t.host=r.host||"",t.auth=r.auth,t.hostname=r.hostname||r.host,t.port=r.port,t.pathname||t.search){var d=t.pathname||"",f=t.search||"";t.path=d+f}return t.slashes=t.slashes||r.slashes,t.href=t.format(),t}var p=t.pathname&&t.pathname.charAt(0)==="/",m=r.host||r.pathname&&r.pathname.charAt(0)==="/",g=m||p||t.host&&r.pathname,y=g,_=t.pathname&&t.pathname.split("/")||[],v=r.pathname&&r.pathname.split("/")||[],x=t.protocol&&!pl[t.protocol];if(x&&(t.hostname="",t.port=null,t.host&&(_[0]===""?_[0]=t.host:_.unshift(t.host)),t.host="",r.protocol&&(r.hostname=null,r.port=null,r.host&&(v[0]===""?v[0]=r.host:v.unshift(r.host)),r.host=null),g=g&&(v[0]===""||_[0]==="")),m)t.host=r.host||r.host===""?r.host:t.host,t.hostname=r.hostname||r.hostname===""?r.hostname:t.hostname,t.search=r.search,t.query=r.query,_=v;else if(v.length)_||(_=[]),_.pop(),_=_.concat(v),t.search=r.search,t.query=r.query;else if(r.search!=null){if(x){t.host=_.shift(),t.hostname=t.host;var b=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;b&&(t.auth=b.shift(),t.hostname=b.shift(),t.host=t.hostname)}return t.search=r.search,t.query=r.query,(t.pathname!==null||t.search!==null)&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.href=t.format(),t}if(!_.length)return t.pathname=null,t.search?t.path="/"+t.search:t.path=null,t.href=t.format(),t;for(var C=_.slice(-1)[0],E=(t.host||r.host||_.length>1)&&(C==="."||C==="..")||C==="",w=0,T=_.length;T>=0;T--)C=_[T],C==="."?_.splice(T,1):C===".."?(_.splice(T,1),w++):w&&(_.splice(T,1),w--);if(!g&&!y)for(;w--;w)_.unshift("..");g&&_[0]!==""&&(!_[0]||_[0].charAt(0)!=="/")&&_.unshift(""),E&&_.join("/").substr(-1)!=="/"&&_.push("");var k=_[0]===""||_[0]&&_[0].charAt(0)==="/";if(x){t.hostname=k?"":_.length?_.shift():"",t.host=t.hostname;var b=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;b&&(t.auth=b.shift(),t.hostname=b.shift(),t.host=t.hostname)}return g=g||t.host&&_.length,g&&!k&&_.unshift(""),_.length>0?t.pathname=_.join("/"):(t.pathname=null,t.path=null),(t.pathname!==null||t.search!==null)&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.auth=r.auth||t.auth,t.slashes=t.slashes||r.slashes,t.href=t.format(),t};en.prototype.parseHost=function(){var r=this.host,e=KG.exec(r);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),r=r.substr(0,r.length-e.length)),r&&(this.hostname=r)};ml.parse=Lc;ml.resolve=s$;ml.resolveObject=o$;ml.format=i$;ml.Url=en});var zw=null;var hg=1;function Qt(r){let e=zw;return zw=r,e}var Ww={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function gO(r){if(!(pg(r)&&!r.dirty)&&!(!r.dirty&&r.lastCleanEpoch===hg)){if(!r.producerMustRecompute(r)&&!dg(r)){r.dirty=!1,r.lastCleanEpoch=hg;return}r.producerRecomputeValue(r),r.dirty=!1,r.lastCleanEpoch=hg}}function Xw(r){return r&&(r.nextProducerIndex=0),Qt(r)}function qw(r,e){if(Qt(e),!(!r||r.producerNode===void 0||r.producerIndexOfThis===void 0||r.producerLastReadVersion===void 0)){if(pg(r))for(let t=r.nextProducerIndex;t<r.producerNode.length;t++)fg(r.producerNode[t],r.producerIndexOfThis[t]);for(;r.producerNode.length>r.nextProducerIndex;)r.producerNode.pop(),r.producerLastReadVersion.pop(),r.producerIndexOfThis.pop()}}function dg(r){ad(r);for(let e=0;e<r.producerNode.length;e++){let t=r.producerNode[e],n=r.producerLastReadVersion[e];if(n!==t.version||(gO(t),n!==t.version))return!0}return!1}function Yw(r){if(ad(r),pg(r))for(let e=0;e<r.producerNode.length;e++)fg(r.producerNode[e],r.producerIndexOfThis[e]);r.producerNode.length=r.producerLastReadVersion.length=r.producerIndexOfThis.length=0,r.liveConsumerNode&&(r.liveConsumerNode.length=r.liveConsumerIndexOfThis.length=0)}function fg(r,e){if(yO(r),ad(r),r.liveConsumerNode.length===1)for(let n=0;n<r.producerNode.length;n++)fg(r.producerNode[n],r.producerIndexOfThis[n]);let t=r.liveConsumerNode.length-1;if(r.liveConsumerNode[e]=r.liveConsumerNode[t],r.liveConsumerIndexOfThis[e]=r.liveConsumerIndexOfThis[t],r.liveConsumerNode.length--,r.liveConsumerIndexOfThis.length--,e<r.liveConsumerNode.length){let n=r.liveConsumerIndexOfThis[e],i=r.liveConsumerNode[e];ad(i),i.producerIndexOfThis[n]=e}}function pg(r){return r.consumerIsAlwaysLive||(r?.liveConsumerNode?.length??0)>0}function ad(r){r.producerNode??=[],r.producerIndexOfThis??=[],r.producerLastReadVersion??=[]}function yO(r){r.liveConsumerNode??=[],r.liveConsumerIndexOfThis??=[]}function vO(){throw new Error}var _O=vO;function Zw(r){_O=r}function ae(r){return typeof r=="function"}function oa(r){let t=r(n=>{Error.call(n),n.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var ld=oa(r=>function(t){r(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((n,i)=>`${i+1}) ${n.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Qs(r,e){if(r){let t=r.indexOf(e);0<=t&&r.splice(t,1)}}var Ye=class r{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:n}=this;if(ae(n))try{n()}catch(s){e=s instanceof ld?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{Kw(s)}catch(o){e=e??[],o instanceof ld?e=[...e,...o.errors]:e.push(o)}}if(e)throw new ld(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Kw(e);else{if(e instanceof r){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Qs(t,e)}remove(e){let{_finalizers:t}=this;t&&Qs(t,e),e instanceof r&&e._removeParent(this)}};Ye.EMPTY=(()=>{let r=new Ye;return r.closed=!0,r})();var mg=Ye.EMPTY;function ud(r){return r instanceof Ye||r&&"closed"in r&&ae(r.remove)&&ae(r.add)&&ae(r.unsubscribe)}function Kw(r){ae(r)?r():r.unsubscribe()}var fn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var aa={setTimeout(r,e,...t){let{delegate:n}=aa;return n?.setTimeout?n.setTimeout(r,e,...t):setTimeout(r,e,...t)},clearTimeout(r){let{delegate:e}=aa;return(e?.clearTimeout||clearTimeout)(r)},delegate:void 0};function cd(r){aa.setTimeout(()=>{let{onUnhandledError:e}=fn;if(e)e(r);else throw r})}function Dr(){}var Qw=(()=>gg("C",void 0,void 0))();function Jw(r){return gg("E",void 0,r)}function eE(r){return gg("N",r,void 0)}function gg(r,e,t){return{kind:r,value:e,error:t}}var Js=null;function la(r){if(fn.useDeprecatedSynchronousErrorHandling){let e=!Js;if(e&&(Js={errorThrown:!1,error:null}),r(),e){let{errorThrown:t,error:n}=Js;if(Js=null,t)throw n}}else r()}function tE(r){fn.useDeprecatedSynchronousErrorHandling&&Js&&(Js.errorThrown=!0,Js.error=r)}var eo=class extends Ye{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ud(e)&&e.add(this)):this.destination=wO}static create(e,t,n){return new yi(e,t,n)}next(e){this.isStopped?vg(eE(e),this):this._next(e)}error(e){this.isStopped?vg(Jw(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?vg(Qw,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},xO=Function.prototype.bind;function yg(r,e){return xO.call(r,e)}var _g=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(n){hd(n)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(n){hd(n)}else hd(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){hd(t)}}},yi=class extends eo{constructor(e,t,n){super();let i;if(ae(e)||!e)i={next:e??void 0,error:t??void 0,complete:n??void 0};else{let s;this&&fn.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&yg(e.next,s),error:e.error&&yg(e.error,s),complete:e.complete&&yg(e.complete,s)}):i=e}this.destination=new _g(i)}};function hd(r){fn.useDeprecatedSynchronousErrorHandling?tE(r):cd(r)}function bO(r){throw r}function vg(r,e){let{onStoppedNotification:t}=fn;t&&aa.setTimeout(()=>t(r,e))}var wO={closed:!0,next:Dr,error:bO,complete:Dr};var ua=(()=>typeof Symbol=="function"&&Symbol.observable||"@@observable")();function At(r){return r}function xg(...r){return bg(r)}function bg(r){return r.length===0?At:r.length===1?r[0]:function(t){return r.reduce((n,i)=>i(n),t)}}var ve=(()=>{class r{constructor(t){t&&(this._subscribe=t)}lift(t){let n=new r;return n.source=this,n.operator=t,n}subscribe(t,n,i){let s=TO(t)?t:new yi(t,n,i);return la(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(n){t.error(n)}}forEach(t,n){return n=rE(n),new n((i,s)=>{let o=new yi({next:a=>{try{t(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(t)}[ua](){return this}pipe(...t){return bg(t)(this)}toPromise(t){return t=rE(t),new t((n,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>n(s))})}}return r.create=e=>new r(e),r})();function rE(r){var e;return(e=r??fn.Promise)!==null&&e!==void 0?e:Promise}function EO(r){return r&&ae(r.next)&&ae(r.error)&&ae(r.complete)}function TO(r){return r&&r instanceof eo||EO(r)&&ud(r)}function wg(r){return ae(r?.lift)}function ee(r){return e=>{if(wg(e))return e.lift(function(t){try{return r(t,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function te(r,e,t,n,i){return new Eg(r,e,t,n,i)}var Eg=class extends eo{constructor(e,t,n,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=n?function(){try{n()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function ca(){return ee((r,e)=>{let t=null;r._refCount++;let n=te(e,void 0,void 0,void 0,()=>{if(!r||r._refCount<=0||0<--r._refCount){t=null;return}let i=r._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});r.subscribe(n),n.closed||(t=r.connect())})}var ha=class extends ve{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,wg(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ye;let t=this.getSubject();e.add(this.source.subscribe(te(t,void 0,()=>{this._teardown(),t.complete()},n=>{this._teardown(),t.error(n)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ye.EMPTY)}return e}refCount(){return ca()(this)}};var da={schedule(r){let e=requestAnimationFrame,t=cancelAnimationFrame,{delegate:n}=da;n&&(e=n.requestAnimationFrame,t=n.cancelAnimationFrame);let i=e(s=>{t=void 0,r(s)});return new Ye(()=>t?.(i))},requestAnimationFrame(...r){let{delegate:e}=da;return(e?.requestAnimationFrame||requestAnimationFrame)(...r)},cancelAnimationFrame(...r){let{delegate:e}=da;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...r)},delegate:void 0};var nE=oa(r=>function(){r(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var nt=(()=>{class r extends ve{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let n=new dd(this,this);return n.operator=t,n}_throwIfClosed(){if(this.closed)throw new nE}next(t){la(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let n of this.currentObservers)n.next(t)}})}error(t){la(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:n}=this;for(;n.length;)n.shift().error(t)}})}complete(){la(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:n,isStopped:i,observers:s}=this;return n||i?mg:(this.currentObservers=null,s.push(t),new Ye(()=>{this.currentObservers=null,Qs(s,t)}))}_checkFinalizedStatuses(t){let{hasError:n,thrownError:i,isStopped:s}=this;n?t.error(i):s&&t.complete()}asObservable(){let t=new ve;return t.source=this,t}}return r.create=(e,t)=>new dd(e,t),r})(),dd=class extends nt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.next)===null||n===void 0||n.call(t,e)}error(e){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.error)===null||n===void 0||n.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,n;return(n=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&n!==void 0?n:mg}};var Mt=class extends nt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:n}=this;if(e)throw t;return this._throwIfClosed(),n}next(e){super.next(this._value=e)}};var mu={now(){return(mu.delegate||Date).now()},delegate:void 0};var pn=class extends nt{constructor(e=1/0,t=1/0,n=mu){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=n,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:n,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(n.push(e),!i&&n.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:n,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=n?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:n,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<n.length&&n.splice(0,n.length-s),!i){let o=t.now(),a=0;for(let l=1;l<n.length&&n[l]<=o;l+=2)a=l;a&&n.splice(0,a+1)}}};var fd=class extends Ye{constructor(e,t){super()}schedule(e,t=0){return this}};var gu={setInterval(r,e,...t){let{delegate:n}=gu;return n?.setInterval?n.setInterval(r,e,...t):setInterval(r,e,...t)},clearInterval(r){let{delegate:e}=gu;return(e?.clearInterval||clearInterval)(r)},delegate:void 0};var rs=class extends fd{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var n;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(n=this.id)!==null&&n!==void 0?n:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,n=0){return gu.setInterval(e.flush.bind(e,this),n)}recycleAsyncId(e,t,n=0){if(n!=null&&this.delay===n&&this.pending===!1)return t;t!=null&&gu.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let n=this._execute(e,t);if(n)return n;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let n=!1,i;try{this.work(e)}catch(s){n=!0,i=s||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:n}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Qs(n,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var CO=1,Tg,Cg={};function iE(r){return r in Cg?(delete Cg[r],!0):!1}var sE={setImmediate(r){let e=CO++;return Cg[e]=!0,Tg||(Tg=Promise.resolve()),Tg.then(()=>iE(e)&&r()),e},clearImmediate(r){iE(r)}};var{setImmediate:DO,clearImmediate:SO}=sE,yu={setImmediate(...r){let{delegate:e}=yu;return(e?.setImmediate||DO)(...r)},clearImmediate(r){let{delegate:e}=yu;return(e?.clearImmediate||SO)(r)},delegate:void 0};var pd=class extends rs{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,n=0){return n!==null&&n>0?super.requestAsyncId(e,t,n):(e.actions.push(this),e._scheduled||(e._scheduled=yu.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,n=0){var i;if(n!=null?n>0:this.delay>0)return super.recycleAsyncId(e,t,n);let{actions:s}=e;t!=null&&((i=s[s.length-1])===null||i===void 0?void 0:i.id)!==t&&(yu.clearImmediate(t),e._scheduled===t&&(e._scheduled=void 0))}};var fa=class r{constructor(e,t=r.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,n){return new this.schedulerActionCtor(this,e).schedule(n,t)}};fa.now=mu.now;var ns=class extends fa{constructor(e,t=fa.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let n;this._active=!0;do if(n=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}};var md=class extends ns{flush(e){this._active=!0;let t=this._scheduled;this._scheduled=void 0;let{actions:n}=this,i;e=e||n.shift();do if(i=e.execute(e.state,e.delay))break;while((e=n[0])&&e.id===t&&n.shift());if(this._active=!1,i){for(;(e=n[0])&&e.id===t&&n.shift();)e.unsubscribe();throw i}}};var IO=new md(pd);var mn=new ns(rs),oE=mn;var gd=class extends rs{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,n=0){return n!==null&&n>0?super.requestAsyncId(e,t,n):(e.actions.push(this),e._scheduled||(e._scheduled=da.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,n=0){var i;if(n!=null?n>0:this.delay>0)return super.recycleAsyncId(e,t,n);let{actions:s}=e;t!=null&&((i=s[s.length-1])===null||i===void 0?void 0:i.id)!==t&&(da.cancelAnimationFrame(t),e._scheduled=void 0)}};var yd=class extends ns{flush(e){this._active=!0;let t=this._scheduled;this._scheduled=void 0;let{actions:n}=this,i;e=e||n.shift();do if(i=e.execute(e.state,e.delay))break;while((e=n[0])&&e.id===t&&n.shift());if(this._active=!1,i){for(;(e=n[0])&&e.id===t&&n.shift();)e.unsubscribe();throw i}}};var AO=new yd(gd);var dr=new ve(r=>r.complete());function vd(r){return r&&ae(r.schedule)}function Dg(r){return r[r.length-1]}function pa(r){return ae(Dg(r))?r.pop():void 0}function Bn(r){return vd(Dg(r))?r.pop():void 0}function aE(r,e){return typeof Dg(r)=="number"?r.pop():e}function hW(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s}function uE(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(n.next(c))}catch(h){o(h)}}function l(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((n=n.apply(r,e||[])).next())})}function lE(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function to(r){return this instanceof to?(this.v=r,this):new to(r)}function cE(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(r,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(d){n[d]&&(i[d]=function(f){return new Promise(function(p,m){s.push([d,f,p,m])>1||a(d,f)})})}function a(d,f){try{l(n[d](f))}catch(p){h(s[0][3],p)}}function l(d){d.value instanceof to?Promise.resolve(d.value.v).then(u,c):h(s[0][2],d)}function u(d){a("next",d)}function c(d){a("throw",d)}function h(d,f){d(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}function hE(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof lE=="function"?lE(r):r[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(s){t[s]=r[s]&&function(o){return new Promise(function(a,l){o=r[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(u){s({value:u,done:a})},o)}}var ma=r=>r&&typeof r.length=="number"&&typeof r!="function";function _d(r){return ae(r?.then)}function xd(r){return ae(r[ua])}function bd(r){return Symbol.asyncIterator&&ae(r?.[Symbol.asyncIterator])}function wd(r){return new TypeError(`You provided ${r!==null&&typeof r=="object"?"an invalid object":`'${r}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function MO(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ed=MO();function Td(r){return ae(r?.[Ed])}function Cd(r){return cE(this,arguments,function*(){let t=r.getReader();try{for(;;){let{value:n,done:i}=yield to(t.read());if(i)return yield to(void 0);yield yield to(n)}}finally{t.releaseLock()}})}function Dd(r){return ae(r?.getReader)}function _e(r){if(r instanceof ve)return r;if(r!=null){if(xd(r))return RO(r);if(ma(r))return PO(r);if(_d(r))return OO(r);if(bd(r))return dE(r);if(Td(r))return NO(r);if(Dd(r))return FO(r)}throw wd(r)}function RO(r){return new ve(e=>{let t=r[ua]();if(ae(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function PO(r){return new ve(e=>{for(let t=0;t<r.length&&!e.closed;t++)e.next(r[t]);e.complete()})}function OO(r){return new ve(e=>{r.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,cd)})}function NO(r){return new ve(e=>{for(let t of r)if(e.next(t),e.closed)return;e.complete()})}function dE(r){return new ve(e=>{LO(r,e).catch(t=>e.error(t))})}function FO(r){return dE(Cd(r))}function LO(r,e){var t,n,i,s;return uE(this,void 0,void 0,function*(){try{for(t=hE(r);n=yield t.next(),!n.done;){let o=n.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{n&&!n.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function fr(r,e,t,n=0,i=!1){let s=e.schedule(function(){t(),i?r.add(this.schedule(null,n)):this.unsubscribe()},n);if(r.add(s),!i)return s}function Sd(r,e=0){return ee((t,n)=>{t.subscribe(te(n,i=>fr(n,r,()=>n.next(i),e),()=>fr(n,r,()=>n.complete(),e),i=>fr(n,r,()=>n.error(i),e)))})}function Id(r,e=0){return ee((t,n)=>{n.add(r.schedule(()=>t.subscribe(n),e))})}function fE(r,e){return _e(r).pipe(Id(e),Sd(e))}function pE(r,e){return _e(r).pipe(Id(e),Sd(e))}function mE(r,e){return new ve(t=>{let n=0;return e.schedule(function(){n===r.length?t.complete():(t.next(r[n++]),t.closed||this.schedule())})})}function gE(r,e){return new ve(t=>{let n;return fr(t,e,()=>{n=r[Ed](),fr(t,e,()=>{let i,s;try{({value:i,done:s}=n.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>ae(n?.return)&&n.return()})}function Ad(r,e){if(!r)throw new Error("Iterable cannot be null");return new ve(t=>{fr(t,e,()=>{let n=r[Symbol.asyncIterator]();fr(t,e,()=>{n.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function yE(r,e){return Ad(Cd(r),e)}function vE(r,e){if(r!=null){if(xd(r))return fE(r,e);if(ma(r))return mE(r,e);if(_d(r))return pE(r,e);if(bd(r))return Ad(r,e);if(Td(r))return gE(r,e);if(Dd(r))return yE(r,e)}throw wd(r)}function He(r,e){return e?vE(r,e):_e(r)}function q(...r){let e=Bn(r);return He(r,e)}function ga(r,e){let t=ae(r)?r:()=>r,n=i=>i.error(t());return new ve(e?i=>e.schedule(n,0,i):n)}function Sg(r){return!!r&&(r instanceof ve||ae(r.lift)&&ae(r.subscribe))}var vi=oa(r=>function(){r(this),this.name="EmptyError",this.message="no elements in sequence"});function _E(r){return r instanceof Date&&!isNaN(r)}function he(r,e){return ee((t,n)=>{let i=0;t.subscribe(te(n,s=>{n.next(r.call(e,s,i++))}))})}var{isArray:kO}=Array;function BO(r,e){return kO(e)?r(...e):r(e)}function ya(r){return he(e=>BO(r,e))}var{isArray:UO}=Array,{getPrototypeOf:jO,prototype:VO,keys:HO}=Object;function Md(r){if(r.length===1){let e=r[0];if(UO(e))return{args:e,keys:null};if(GO(e)){let t=HO(e);return{args:t.map(n=>e[n]),keys:t}}}return{args:r,keys:null}}function GO(r){return r&&typeof r=="object"&&jO(r)===VO}function Rd(r,e){return r.reduce((t,n,i)=>(t[n]=e[i],t),{})}function vu(...r){let e=Bn(r),t=pa(r),{args:n,keys:i}=Md(r);if(n.length===0)return He([],e);let s=new ve($O(n,e,i?o=>Rd(i,o):At));return t?s.pipe(ya(t)):s}function $O(r,e,t=At){return n=>{xE(e,()=>{let{length:i}=r,s=new Array(i),o=i,a=i;for(let l=0;l<i;l++)xE(e,()=>{let u=He(r[l],e),c=!1;u.subscribe(te(n,h=>{s[l]=h,c||(c=!0,a--),a||n.next(t(s.slice()))},()=>{--o||n.complete()}))},n)},n)}}function xE(r,e,t){r?fr(t,r,e):e()}function bE(r,e,t,n,i,s,o,a){let l=[],u=0,c=0,h=!1,d=()=>{h&&!l.length&&!u&&e.complete()},f=m=>u<n?p(m):l.push(m),p=m=>{s&&e.next(m),u++;let g=!1;_e(t(m,c++)).subscribe(te(e,y=>{i?.(y),s?f(y):e.next(y)},()=>{g=!0},void 0,()=>{if(g)try{for(u--;l.length&&u<n;){let y=l.shift();o?fr(e,o,()=>p(y)):p(y)}d()}catch(y){e.error(y)}}))};return r.subscribe(te(e,f,()=>{h=!0,d()})),()=>{a?.()}}function ze(r,e,t=1/0){return ae(e)?ze((n,i)=>he((s,o)=>e(n,s,i,o))(_e(r(n,i))),t):(typeof e=="number"&&(t=e),ee((n,i)=>bE(n,i,r,t)))}function is(r=1/0){return ze(At,r)}function wE(){return is(1)}function ss(...r){return wE()(He(r,Bn(r)))}function Pd(r){return new ve(e=>{_e(r()).subscribe(e)})}function zO(...r){let e=pa(r),{args:t,keys:n}=Md(r),i=new ve(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),l=o,u=o;for(let c=0;c<o;c++){let h=!1;_e(t[c]).subscribe(te(s,d=>{h||(h=!0,u--),a[c]=d},()=>l--,void 0,()=>{(!l||!h)&&(u||s.next(n?Rd(n,a):a),s.complete())}))}});return e?i.pipe(ya(e)):i}var WO=["addListener","removeListener"],XO=["addEventListener","removeEventListener"],qO=["on","off"];function Ig(r,e,t,n){if(ae(t)&&(n=t,t=void 0),n)return Ig(r,e,t).pipe(ya(n));let[i,s]=KO(r)?XO.map(o=>a=>r[o](e,a,t)):YO(r)?WO.map(EE(r,e)):ZO(r)?qO.map(EE(r,e)):[];if(!i&&ma(r))return ze(o=>Ig(o,e,t))(_e(r));if(!i)throw new TypeError("Invalid event target");return new ve(o=>{let a=(...l)=>o.next(1<l.length?l:l[0]);return i(a),()=>s(a)})}function EE(r,e){return t=>n=>r[t](e,n)}function YO(r){return ae(r.addListener)&&ae(r.removeListener)}function ZO(r){return ae(r.on)&&ae(r.off)}function KO(r){return ae(r.addEventListener)&&ae(r.removeEventListener)}function ro(r=0,e,t=oE){let n=-1;return e!=null&&(vd(e)?t=e:n=e),new ve(i=>{let s=_E(r)?+r-t.now():r;s<0&&(s=0);let o=0;return t.schedule(function(){i.closed||(i.next(o++),0<=n?this.schedule(void 0,n):i.complete())},s)})}function TE(r=0,e=mn){return r<0&&(r=0),ro(r,r,e)}function QO(...r){let e=Bn(r),t=aE(r,1/0),n=r;return n.length?n.length===1?_e(n[0]):is(t)(He(n,e)):dr}function vt(r,e){return ee((t,n)=>{let i=0;t.subscribe(te(n,s=>r.call(e,s,i++)&&n.next(s)))})}function CE(r){return ee((e,t)=>{let n=!1,i=null,s=null,o=!1,a=()=>{if(s?.unsubscribe(),s=null,n){n=!1;let u=i;i=null,t.next(u)}o&&t.complete()},l=()=>{s=null,o&&t.complete()};e.subscribe(te(t,u=>{n=!0,i=u,s||_e(r(u)).subscribe(s=te(t,a,l))},()=>{o=!0,(!n||!s||s.closed)&&t.complete()}))})}function JO(r,e=mn){return CE(()=>ro(r,e))}function gn(r){return ee((e,t)=>{let n=null,i=!1,s;n=e.subscribe(te(t,void 0,void 0,o=>{s=_e(r(o,gn(r)(e))),n?(n.unsubscribe(),n=null,s.subscribe(t)):i=!0})),i&&(n.unsubscribe(),n=null,s.subscribe(t))})}function Od(r,e,t,n,i){return(s,o)=>{let a=t,l=e,u=0;s.subscribe(te(o,c=>{let h=u++;l=a?r(l,c,h):(a=!0,c),n&&o.next(l)},i&&(()=>{a&&o.next(l),o.complete()})))}}function DE(r,e){return ee(Od(r,e,arguments.length>=2,!1,!0))}var eN=(r,e)=>(r.push(e),r);function tN(){return ee((r,e)=>{DE(eN,[])(r).subscribe(e)})}function _i(r,e){return ae(e)?ze(r,e,1):ze(r,1)}function rN(r){return ee((e,t)=>{let n=!1,i=null,s=null,o=()=>{if(s?.unsubscribe(),s=null,n){n=!1;let a=i;i=null,t.next(a)}};e.subscribe(te(t,a=>{s?.unsubscribe(),n=!0,i=a,s=te(t,o,Dr),_e(r(a)).subscribe(s)},()=>{o(),t.complete()},void 0,()=>{i=s=null}))})}function SE(r,e=mn){return ee((t,n)=>{let i=null,s=null,o=null,a=()=>{if(i){i.unsubscribe(),i=null;let u=s;s=null,n.next(u)}};function l(){let u=o+r,c=e.now();if(c<u){i=this.schedule(void 0,u-c),n.add(i);return}a()}t.subscribe(te(n,u=>{s=u,o=e.now(),i||(i=e.schedule(l,r),n.add(i))},()=>{a(),n.complete()},void 0,()=>{s=i=null}))})}function os(r){return ee((e,t)=>{let n=!1;e.subscribe(te(t,i=>{n=!0,t.next(i)},()=>{n||t.next(r),t.complete()}))})}function Sr(r){return r<=0?()=>dr:ee((e,t)=>{let n=0;e.subscribe(te(t,i=>{++n<=r&&(t.next(i),r<=n&&t.complete())}))})}function IE(){return ee((r,e)=>{r.subscribe(te(e,Dr))})}function _u(r){return he(()=>r)}function Ag(r,e){return e?t=>ss(e.pipe(Sr(1),IE()),t.pipe(Ag(r))):ze((t,n)=>_e(r(t,n)).pipe(Sr(1),_u(t)))}function AE(r,e=mn){let t=ro(r,e);return Ag(()=>t)}function Mg(r,e=At){return r=r??nN,ee((t,n)=>{let i,s=!0;t.subscribe(te(n,o=>{let a=e(o);(s||!r(i,a))&&(s=!1,i=a,n.next(o))}))})}function nN(r,e){return r===e}function Nd(r=iN){return ee((e,t)=>{let n=!1;e.subscribe(te(t,i=>{n=!0,t.next(i)},()=>n?t.complete():t.error(r())))})}function iN(){return new vi}function xi(r){return ee((e,t)=>{try{e.subscribe(t)}finally{t.add(r)}})}function Un(r,e){let t=arguments.length>=2;return n=>n.pipe(r?vt((i,s)=>r(i,s,n)):At,Sr(1),t?os(e):Nd(()=>new vi))}function va(r){return r<=0?()=>dr:ee((e,t)=>{let n=[];e.subscribe(te(t,i=>{n.push(i),r<n.length&&n.shift()},()=>{for(let i of n)t.next(i);t.complete()},void 0,()=>{n=null}))})}function Rg(r,e){let t=arguments.length>=2;return n=>n.pipe(r?vt((i,s)=>r(i,s,n)):At,va(1),t?os(e):Nd(()=>new vi))}function sN(){return ee((r,e)=>{let t,n=!1;r.subscribe(te(e,i=>{let s=t;t=i,n&&e.next([s,i]),n=!0}))})}function ME(r){return ee((e,t)=>{let n=!1,i=null;e.subscribe(te(t,s=>{n=!0,i=s})),_e(r).subscribe(te(t,()=>{if(n){n=!1;let s=i;i=null,t.next(s)}},Dr))})}function oN(r,e=mn){return ME(TE(r,e))}function Pg(r,e){return ee(Od(r,e,arguments.length>=2,!0))}function Ng(r={}){let{connector:e=()=>new nt,resetOnError:t=!0,resetOnComplete:n=!0,resetOnRefCountZero:i=!0}=r;return s=>{let o,a,l,u=0,c=!1,h=!1,d=()=>{a?.unsubscribe(),a=void 0},f=()=>{d(),o=l=void 0,c=h=!1},p=()=>{let m=o;f(),m?.unsubscribe()};return ee((m,g)=>{u++,!h&&!c&&d();let y=l=l??e();g.add(()=>{u--,u===0&&!h&&!c&&(a=Og(p,i))}),y.subscribe(g),!o&&u>0&&(o=new yi({next:_=>y.next(_),error:_=>{h=!0,d(),a=Og(f,t,_),y.error(_)},complete:()=>{c=!0,d(),a=Og(f,n),y.complete()}}),_e(m).subscribe(o))})(s)}}function Og(r,e,...t){if(e===!0){r();return}if(e===!1)return;let n=new yi({next:()=>{n.unsubscribe(),r()}});return _e(e(...t)).subscribe(n)}function Fg(r,e,t){let n,i=!1;return r&&typeof r=="object"?{bufferSize:n=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=r:n=r??1/0,Ng({connector:()=>new pn(n,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function aN(r){return vt((e,t)=>r<=t)}function Lg(...r){let e=Bn(r);return ee((t,n)=>{(e?ss(r,t,e):ss(r,t)).subscribe(n)})}function _t(r,e){return ee((t,n)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&n.complete();t.subscribe(te(n,l=>{i?.unsubscribe();let u=0,c=s++;_e(r(l,c)).subscribe(i=te(n,h=>n.next(e?e(l,h,c,u++):h),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function kg(r){return ee((e,t)=>{_e(r).subscribe(te(t,()=>t.complete(),Dr)),!t.closed&&e.subscribe(t)})}function lN(r,e=!1){return ee((t,n)=>{let i=0;t.subscribe(te(n,s=>{let o=r(s,i++);(o||e)&&n.next(s),!o&&n.complete()}))})}function it(r,e,t){let n=ae(r)||e||t?{next:r,error:e,complete:t}:r;return n?ee((i,s)=>{var o;(o=n.subscribe)===null||o===void 0||o.call(n);let a=!0;i.subscribe(te(s,l=>{var u;(u=n.next)===null||u===void 0||u.call(n,l),s.next(l)},()=>{var l;a=!1,(l=n.complete)===null||l===void 0||l.call(n),s.complete()},l=>{var u;a=!1,(u=n.error)===null||u===void 0||u.call(n,l),s.error(l)},()=>{var l,u;a&&((l=n.unsubscribe)===null||l===void 0||l.call(n)),(u=n.finalize)===null||u===void 0||u.call(n)}))}):At}function Fd(...r){let e=pa(r);return ee((t,n)=>{let i=r.length,s=new Array(i),o=r.map(()=>!1),a=!1;for(let l=0;l<i;l++)_e(r[l]).subscribe(te(n,u=>{s[l]=u,!a&&!o[l]&&(o[l]=!0,(a=o.every(At))&&(o=null))},Dr));t.subscribe(te(n,l=>{if(a){let u=[l,...s];n.next(e?e(...u):u)}}))})}function Ne(r){for(let e in r)if(r[e]===Ne)return e;throw Error("Could not find renamed property on target object.")}function Ld(r,e){for(let t in e)e.hasOwnProperty(t)&&!r.hasOwnProperty(t)&&(r[t]=e[t])}function Bt(r){if(typeof r=="string")return r;if(Array.isArray(r))return"["+r.map(Bt).join(", ")+"]";if(r==null)return""+r;if(r.overriddenName)return`${r.overriddenName}`;if(r.name)return`${r.name}`;let e=r.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function Jg(r,e){return r==null||r===""?e===null?"":e:e==null||e===""?r:r+" "+e}var uN=Ne({__forward_ref__:Ne});function vT(r){return r.__forward_ref__=vT,r.toString=function(){return Bt(this())},r}function Jt(r){return _T(r)?r():r}function _T(r){return typeof r=="function"&&r.hasOwnProperty(uN)&&r.__forward_ref__===vT}function xT(r){return r&&!!r.\u0275providers}var bT="https://g.co/ng/security#xss",J=class extends Error{constructor(e,t){super(mf(e,t)),this.code=e}};function mf(r,e){return`${`NG0${Math.abs(r)}`}${e?": "+e:""}`}var cN=Ne({\u0275cmp:Ne}),hN=Ne({\u0275dir:Ne}),dN=Ne({\u0275pipe:Ne}),fN=Ne({\u0275mod:Ne}),Yd=Ne({\u0275fac:Ne}),xu=Ne({__NG_ELEMENT_ID__:Ne}),RE=Ne({__NG_ENV_ID__:Ne});function so(r){return typeof r=="string"?r:r==null?"":String(r)}function pN(r){return typeof r=="function"?r.name||r.toString():typeof r=="object"&&r!=null&&typeof r.type=="function"?r.type.name||r.type.toString():so(r)}function mN(r,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${r}`:"";throw new J(-200,`Circular dependency in DI detected for ${r}${t}`)}function iv(r,e){let t=e?` in ${e}`:"";throw new J(-201,!1)}function gN(r,e){r==null&&yN(e,r,null,"!=")}function yN(r,e,t,n){throw new Error(`ASSERTION ERROR: ${r}`+(n==null?"":` [Expected=> ${t} ${n} ${e} <=Actual]`))}function W(r){return{token:r.token,providedIn:r.providedIn||null,factory:r.factory,value:void 0}}function En(r){return{providers:r.providers||[],imports:r.imports||[]}}function gf(r){return PE(r,ET)||PE(r,TT)}function wT(r){return gf(r)!==null}function PE(r,e){return r.hasOwnProperty(e)?r[e]:null}function vN(r){let e=r&&(r[ET]||r[TT]);return e||null}function OE(r){return r&&(r.hasOwnProperty(NE)||r.hasOwnProperty(_N))?r[NE]:null}var ET=Ne({\u0275prov:Ne}),NE=Ne({\u0275inj:Ne}),TT=Ne({ngInjectableDef:Ne}),_N=Ne({ngInjectorDef:Ne}),ye=function(r){return r[r.Default=0]="Default",r[r.Host=1]="Host",r[r.Self=2]="Self",r[r.SkipSelf=4]="SkipSelf",r[r.Optional=8]="Optional",r}(ye||{}),ey;function CT(){return ey}function pr(r){let e=ey;return ey=r,e}function DT(r,e,t){let n=gf(r);if(n&&n.providedIn=="root")return n.value===void 0?n.value=n.factory():n.value;if(t&ye.Optional)return null;if(e!==void 0)return e;iv(Bt(r),"Injector")}var dt=globalThis;var ne=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=W({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};var xN={},wu=xN,ty="__NG_DI_FLAG__",Zd="ngTempTokenPath",bN="ngTokenPath",wN=/\n/gm,EN="\u0275",FE="__source",Ea;function TN(){return Ea}function as(r){let e=Ea;return Ea=r,e}function CN(r,e=ye.Default){if(Ea===void 0)throw new J(-203,!1);return Ea===null?DT(r,void 0,e):Ea.get(r,e&ye.Optional?null:void 0,e)}function j(r,e=ye.Default){return(CT()||CN)(Jt(r),e)}function V(r,e=ye.Default){return j(r,yf(e))}function yf(r){return typeof r>"u"||typeof r=="number"?r:0|(r.optional&&8)|(r.host&&1)|(r.self&&2)|(r.skipSelf&&4)}function ry(r){let e=[];for(let t=0;t<r.length;t++){let n=Jt(r[t]);if(Array.isArray(n)){if(n.length===0)throw new J(900,!1);let i,s=ye.Default;for(let o=0;o<n.length;o++){let a=n[o],l=DN(a);typeof l=="number"?l===-1?i=a.token:s|=l:i=a}e.push(j(i,s))}else e.push(j(n))}return e}function sv(r,e){return r[ty]=e,r.prototype[ty]=e,r}function DN(r){return r[ty]}function SN(r,e,t,n){let i=r[Zd];throw e[FE]&&i.unshift(e[FE]),r.message=IN(`
`+r.message,i,t,n),r[bN]=i,r[Zd]=null,r}function IN(r,e,t,n=null){r=r&&r.charAt(0)===`
`&&r.charAt(1)==EN?r.slice(2):r;let i=Bt(e);if(Array.isArray(e))i=e.map(Bt).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):Bt(a)))}i=`{${s.join(", ")}}`}return`${t}${n?"("+n+")":""}[${i}]: ${r.replace(wN,`
  `)}`}function Ou(r){return{toString:r}.toString()}var ST=function(r){return r[r.OnPush=0]="OnPush",r[r.Default=1]="Default",r}(ST||{}),Gn=function(r){return r[r.Emulated=0]="Emulated",r[r.None=2]="None",r[r.ShadowDom=3]="ShadowDom",r}(Gn||{}),Ca={},mr=[];function IT(r,e,t){let n=r.length;for(;;){let i=r.indexOf(e,t);if(i===-1)return i;if(i===0||r.charCodeAt(i-1)<=32){let s=e.length;if(i+s===n||r.charCodeAt(i+s)<=32)return i}t=i+1}}function ny(r,e,t){let n=0;for(;n<t.length;){let i=t[n];if(typeof i=="number"){if(i!==0)break;n++;let s=t[n++],o=t[n++],a=t[n++];r.setAttribute(e,o,a,s)}else{let s=i,o=t[++n];AN(s)?r.setProperty(e,s,o):r.setAttribute(e,s,o),n++}}return n}function AT(r){return r===3||r===4||r===6}function AN(r){return r.charCodeAt(0)===64}function Eu(r,e){if(!(e===null||e.length===0))if(r===null||r.length===0)r=e.slice();else{let t=-1;for(let n=0;n<e.length;n++){let i=e[n];typeof i=="number"?t=i:t===0||(t===-1||t===2?LE(r,t,i,null,e[++n]):LE(r,t,i,null,null))}}return r}function LE(r,e,t,n,i){let s=0,o=r.length;if(e===-1)o=-1;else for(;s<r.length;){let a=r[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<r.length;){let a=r[s];if(typeof a=="number")break;if(a===t){if(n===null){i!==null&&(r[s+1]=i);return}else if(n===r[s+1]){r[s+2]=i;return}}s++,n!==null&&s++,i!==null&&s++}o!==-1&&(r.splice(o,0,e),s=o+1),r.splice(s++,0,t),n!==null&&r.splice(s++,0,n),i!==null&&r.splice(s++,0,i)}var MT="ng-template";function MN(r,e,t){let n=0,i=!0;for(;n<r.length;){let s=r[n++];if(typeof s=="string"&&i){let o=r[n++];if(t&&s==="class"&&IT(o.toLowerCase(),e,0)!==-1)return!0}else if(s===1){for(;n<r.length&&typeof(s=r[n++])=="string";)if(s.toLowerCase()===e)return!0;return!1}else typeof s=="number"&&(i=!1)}return!1}function RT(r){return r.type===4&&r.value!==MT}function RN(r,e,t){let n=r.type===4&&!t?MT:r.value;return e===n}function PN(r,e,t){let n=4,i=r.attrs||[],s=FN(i),o=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!o&&!yn(n)&&!yn(l))return!1;if(o&&yn(l))continue;o=!1,n=l|n&1;continue}if(!o)if(n&4){if(n=2|n&1,l!==""&&!RN(r,l,t)||l===""&&e.length===1){if(yn(n))return!1;o=!0}}else{let u=n&8?l:e[++a];if(n&8&&r.attrs!==null){if(!MN(r.attrs,u,t)){if(yn(n))return!1;o=!0}continue}let c=n&8?"class":l,h=ON(c,i,RT(r),t);if(h===-1){if(yn(n))return!1;o=!0;continue}if(u!==""){let d;h>s?d="":d=i[h+1].toLowerCase();let f=n&8?d:null;if(f&&IT(f,u,0)!==-1||n&2&&u!==d){if(yn(n))return!1;o=!0}}}}return yn(n)||o}function yn(r){return(r&1)===0}function ON(r,e,t,n){if(e===null)return-1;let i=0;if(n||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===r)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return LN(e,r)}function PT(r,e,t=!1){for(let n=0;n<e.length;n++)if(PN(r,e[n],t))return!0;return!1}function NN(r){let e=r.attrs;if(e!=null){let t=e.indexOf(5);if(!(t&1))return e[t+1]}return null}function FN(r){for(let e=0;e<r.length;e++){let t=r[e];if(AT(t))return e}return r.length}function LN(r,e){let t=r.indexOf(4);if(t>-1)for(t++;t<r.length;){let n=r[t];if(typeof n=="number")return-1;if(n===e)return t;t++}return-1}function kN(r,e){e:for(let t=0;t<e.length;t++){let n=e[t];if(r.length===n.length){for(let i=0;i<r.length;i++)if(r[i]!==n[i])continue e;return!0}}return!1}function kE(r,e){return r?":not("+e.trim()+")":e}function BN(r){let e=r[0],t=1,n=2,i="",s=!1;for(;t<r.length;){let o=r[t];if(typeof o=="string")if(n&2){let a=r[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else n&8?i+="."+o:n&4&&(i+=" "+o);else i!==""&&!yn(o)&&(e+=kE(s,i),i=""),n=o,s=s||!yn(n);t++}return i!==""&&(e+=kE(s,i)),e}function UN(r){return r.map(BN).join(",")}function jN(r){let e=[],t=[],n=1,i=2;for(;n<r.length;){let s=r[n];if(typeof s=="string")i===2?s!==""&&e.push(s,r[++n]):i===8&&t.push(s);else{if(!yn(i))break;i=s}n++}return{attrs:e,classes:t}}function OT(r){return Ou(()=>{let e=BT(r),t=De(O({},e),{decls:r.decls,vars:r.vars,template:r.template,consts:r.consts||null,ngContentSelectors:r.ngContentSelectors,onPush:r.changeDetection===ST.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&r.dependencies||null,getStandaloneInjector:null,signals:r.signals??!1,data:r.data||{},encapsulation:r.encapsulation||Gn.Emulated,styles:r.styles||mr,_:null,schemas:r.schemas||null,tView:null,id:""});UT(t);let n=r.dependencies;return t.directiveDefs=UE(n,!1),t.pipeDefs=UE(n,!0),t.id=GN(t),t})}function VN(r){return cs(r)||NT(r)}function HN(r){return r!==null}function Tn(r){return Ou(()=>({type:r.type,bootstrap:r.bootstrap||mr,declarations:r.declarations||mr,imports:r.imports||mr,exports:r.exports||mr,transitiveCompileScopes:null,schemas:r.schemas||null,id:r.id||null}))}function BE(r,e){if(r==null)return Ca;let t={};for(let n in r)if(r.hasOwnProperty(n)){let i=r[n],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),t[i]=n,e&&(e[i]=s)}return t}function Wr(r){return Ou(()=>{let e=BT(r);return UT(e),e})}function Nu(r){return{type:r.type,name:r.name,factory:null,pure:r.pure!==!1,standalone:r.standalone===!0,onDestroy:r.type.prototype.ngOnDestroy||null}}function cs(r){return r[cN]||null}function NT(r){return r[hN]||null}function FT(r){return r[dN]||null}function LT(r){let e=cs(r)||NT(r)||FT(r);return e!==null?e.standalone:!1}function kT(r,e){let t=r[fN]||null;if(!t&&e===!0)throw new Error(`Type ${Bt(r)} does not have '\u0275mod' property.`);return t}function BT(r){let e={};return{type:r.type,providersResolver:null,factory:null,hostBindings:r.hostBindings||null,hostVars:r.hostVars||0,hostAttrs:r.hostAttrs||null,contentQueries:r.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:r.inputs||Ca,exportAs:r.exportAs||null,standalone:r.standalone===!0,signals:r.signals===!0,selectors:r.selectors||mr,viewQuery:r.viewQuery||null,features:r.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:BE(r.inputs,e),outputs:BE(r.outputs),debugInfo:null}}function UT(r){r.features?.forEach(e=>e(r))}function UE(r,e){if(!r)return null;let t=e?FT:VN;return()=>(typeof r=="function"?r():r).map(n=>t(n)).filter(HN)}function GN(r){let e=0,t=[r.selectors,r.ngContentSelectors,r.hostVars,r.hostAttrs,r.consts,r.vars,r.decls,r.encapsulation,r.standalone,r.signals,r.exportAs,JSON.stringify(r.inputs),JSON.stringify(r.outputs),Object.getOwnPropertyNames(r.type.prototype),!!r.contentQueries,!!r.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483647+1,"c"+e}var Xn=0,ge=1,ce=2,ft=3,_n=4,Ar=5,Tu=6,Cu=7,xn=8,Da=9,bi=10,We=11,Du=12,jE=13,Na=14,bn=15,Fu=16,_a=17,Hn=18,vf=19,jT=20,ls=21,Bg=22,oo=23,er=25,ov=1;var ao=7,Kd=8,Sa=9,Ir=10,Ia=function(r){return r[r.None=0]="None",r[r.HasTransplantedViews=2]="HasTransplantedViews",r[r.HasChildViewsToRefresh=4]="HasChildViewsToRefresh",r}(Ia||{});function us(r){return Array.isArray(r)&&typeof r[ov]=="object"}function wn(r){return Array.isArray(r)&&r[ov]===!0}function av(r){return(r.flags&4)!==0}function _f(r){return r.componentOffset>-1}function xf(r){return(r.flags&1)===1}function wi(r){return!!r.template}function $N(r){return(r[ce]&512)!==0}function lo(r,e){let t=r.hasOwnProperty(Yd);return t?r[Yd]:null}var iy=class{constructor(e,t,n){this.previousValue=e,this.currentValue=t,this.firstChange=n}isFirstChange(){return this.firstChange}};function Fa(){return VT}function VT(r){return r.type.prototype.ngOnChanges&&(r.setInput=WN),zN}Fa.ngInherit=!0;function zN(){let r=GT(this),e=r?.current;if(e){let t=r.previous;if(t===Ca)r.previous=e;else for(let n in e)t[n]=e[n];r.current=null,this.ngOnChanges(e)}}function WN(r,e,t,n){let i=this.declaredInputs[t],s=GT(r)||XN(r,{previous:Ca,current:null}),o=s.current||(s.current={}),a=s.previous,l=a[i];o[i]=new iy(l&&l.currentValue,e,a===Ca),r[n]=e}var HT="__ngSimpleChanges__";function GT(r){return r[HT]||null}function XN(r,e){return r[HT]=e}var VE=null;var jn=function(r,e,t){VE?.(r,e,t)},$T="svg",qN="math",YN=!1;function ZN(){return YN}function $n(r){for(;Array.isArray(r);)r=r[Xn];return r}function KN(r){for(;Array.isArray(r);){if(typeof r[ov]=="object")return r;r=r[Xn]}return null}function zT(r,e){return $n(e[r])}function Xr(r,e){return $n(e[r.index])}function WT(r,e){return r.data[e]}function bf(r,e){return r[e]}function fs(r,e){let t=e[r];return us(t)?t:t[Xn]}function QN(r){return(r[ce]&4)===4}function lv(r){return(r[ce]&128)===128}function JN(r){return wn(r[ft])}function Aa(r,e){return e==null?null:r[e]}function XT(r){r[_a]=0}function eF(r){r[ce]&1024||(r[ce]|=1024,lv(r)&&Su(r))}function tF(r,e){for(;r>0;)e=e[Na],r--;return e}function qT(r){return r[ce]&9216||r[oo]?.dirty}function sy(r){qT(r)?Su(r):r[ce]&64&&(ZN()?(r[ce]|=1024,Su(r)):r[bi].changeDetectionScheduler?.notify())}function Su(r){r[bi].changeDetectionScheduler?.notify();let e=r[ft];for(;e!==null&&!(wn(e)&&e[ce]&Ia.HasChildViewsToRefresh||us(e)&&e[ce]&8192);){if(wn(e))e[ce]|=Ia.HasChildViewsToRefresh;else if(e[ce]|=8192,!lv(e))break;e=e[ft]}}function YT(r,e){if((r[ce]&256)===256)throw new J(911,!1);r[ls]===null&&(r[ls]=[]),r[ls].push(e)}function rF(r,e){if(r[ls]===null)return;let t=r[ls].indexOf(e);t!==-1&&r[ls].splice(t,1)}var fe={lFrame:rC(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function nF(){return fe.lFrame.elementDepthCount}function iF(){fe.lFrame.elementDepthCount++}function sF(){fe.lFrame.elementDepthCount--}function ZT(){return fe.bindingsEnabled}function KT(){return fe.skipHydrationRootTNode!==null}function oF(r){return fe.skipHydrationRootTNode===r}function aF(){fe.skipHydrationRootTNode=null}function de(){return fe.lFrame.lView}function Ze(){return fe.lFrame.tView}function lK(r){return fe.lFrame.contextLView=r,r[xn]}function uK(r){return fe.lFrame.contextLView=null,r}function Ut(){let r=QT();for(;r!==null&&r.type===64;)r=r.parent;return r}function QT(){return fe.lFrame.currentTNode}function lF(){let r=fe.lFrame,e=r.currentTNode;return r.isParent?e:e.parent}function mo(r,e){let t=fe.lFrame;t.currentTNode=r,t.isParent=e}function uv(){return fe.lFrame.isParent}function cv(){fe.lFrame.isParent=!1}function uF(){return fe.lFrame.contextLView}function ps(){let r=fe.lFrame,e=r.bindingRootIndex;return e===-1&&(e=r.bindingRootIndex=r.tView.bindingStartIndex),e}function cF(){return fe.lFrame.bindingIndex}function hF(r){return fe.lFrame.bindingIndex=r}function Lu(){return fe.lFrame.bindingIndex++}function hv(r){let e=fe.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+r,t}function dF(){return fe.lFrame.inI18n}function fF(r,e){let t=fe.lFrame;t.bindingIndex=t.bindingRootIndex=r,oy(e)}function pF(){return fe.lFrame.currentDirectiveIndex}function oy(r){fe.lFrame.currentDirectiveIndex=r}function dv(r){let e=fe.lFrame.currentDirectiveIndex;return e===-1?null:r[e]}function JT(){return fe.lFrame.currentQueryIndex}function fv(r){fe.lFrame.currentQueryIndex=r}function mF(r){let e=r[ge];return e.type===2?e.declTNode:e.type===1?r[Ar]:null}function eC(r,e,t){if(t&ye.SkipSelf){let i=e,s=r;for(;i=i.parent,i===null&&!(t&ye.Host);)if(i=mF(s),i===null||(s=s[Na],i.type&10))break;if(i===null)return!1;e=i,r=s}let n=fe.lFrame=tC();return n.currentTNode=e,n.lView=r,!0}function pv(r){let e=tC(),t=r[ge];fe.lFrame=e,e.currentTNode=t.firstChild,e.lView=r,e.tView=t,e.contextLView=r,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function tC(){let r=fe.lFrame,e=r===null?null:r.child;return e===null?rC(r):e}function rC(r){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:r,child:null,inI18n:!1};return r!==null&&(r.child=e),e}function nC(){let r=fe.lFrame;return fe.lFrame=r.parent,r.currentTNode=null,r.lView=null,r}var iC=nC;function mv(){let r=nC();r.isParent=!0,r.tView=null,r.selectedIndex=-1,r.contextLView=null,r.elementDepthCount=0,r.currentDirectiveIndex=-1,r.currentNamespace=null,r.bindingRootIndex=-1,r.bindingIndex=-1,r.currentQueryIndex=0}function gF(r){return(fe.lFrame.contextLView=tF(r,fe.lFrame.contextLView))[xn]}function ms(){return fe.lFrame.selectedIndex}function uo(r){fe.lFrame.selectedIndex=r}function ku(){let r=fe.lFrame;return WT(r.tView,r.selectedIndex)}function cK(){fe.lFrame.currentNamespace=$T}function yF(){return fe.lFrame.currentNamespace}var sC=!0;function wf(){return sC}function Ef(r){sC=r}function vF(r,e,t){let{ngOnChanges:n,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(n){let o=VT(e);(t.preOrderHooks??=[]).push(r,o),(t.preOrderCheckHooks??=[]).push(r,o)}i&&(t.preOrderHooks??=[]).push(0-r,i),s&&((t.preOrderHooks??=[]).push(r,s),(t.preOrderCheckHooks??=[]).push(r,s))}function Tf(r,e){for(let t=e.directiveStart,n=e.directiveEnd;t<n;t++){let s=r.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:u,ngOnDestroy:c}=s;o&&(r.contentHooks??=[]).push(-t,o),a&&((r.contentHooks??=[]).push(t,a),(r.contentCheckHooks??=[]).push(t,a)),l&&(r.viewHooks??=[]).push(-t,l),u&&((r.viewHooks??=[]).push(t,u),(r.viewCheckHooks??=[]).push(t,u)),c!=null&&(r.destroyHooks??=[]).push(t,c)}}function Gd(r,e,t){oC(r,e,3,t)}function $d(r,e,t,n){(r[ce]&3)===t&&oC(r,e,t,n)}function Ug(r,e){let t=r[ce];(t&3)===e&&(t&=16383,t+=1,r[ce]=t)}function oC(r,e,t,n){let i=n!==void 0?r[_a]&65535:0,s=n??-1,o=e.length-1,a=0;for(let l=i;l<o;l++)if(typeof e[l+1]=="number"){if(a=e[l],n!=null&&a>=n)break}else e[l]<0&&(r[_a]+=65536),(a<s||s==-1)&&(_F(r,t,e,l),r[_a]=(r[_a]&4294901760)+l+2),l++}function HE(r,e){jn(4,r,e);let t=Qt(null);try{e.call(r)}finally{Qt(t),jn(5,r,e)}}function _F(r,e,t,n){let i=t[n]<0,s=t[n+1],o=i?-t[n]:t[n],a=r[o];i?r[ce]>>14<r[_a]>>16&&(r[ce]&3)===e&&(r[ce]+=16384,HE(a,s)):HE(a,s)}var Ta=-1,co=class{constructor(e,t,n){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=n}};function xF(r){return r instanceof co}function bF(r){return(r.flags&8)!==0}function wF(r){return(r.flags&16)!==0}function aC(r){return r!==Ta}function Qd(r){let e=r&32767;return r&32767}function EF(r){return r>>16}function Jd(r,e){let t=EF(r),n=e;for(;t>0;)n=n[Na],t--;return n}var ay=!0;function ef(r){let e=ay;return ay=r,e}var TF=256,lC=TF-1,uC=5,CF=0,Vn={};function DF(r,e,t){let n;typeof t=="string"?n=t.charCodeAt(0)||0:t.hasOwnProperty(xu)&&(n=t[xu]),n==null&&(n=t[xu]=CF++);let i=n&lC,s=1<<i;e.data[r+(i>>uC)]|=s}function tf(r,e){let t=cC(r,e);if(t!==-1)return t;let n=e[ge];n.firstCreatePass&&(r.injectorIndex=e.length,jg(n.data,r),jg(e,null),jg(n.blueprint,null));let i=gv(r,e),s=r.injectorIndex;if(aC(i)){let o=Qd(i),a=Jd(i,e),l=a[ge].data;for(let u=0;u<8;u++)e[s+u]=a[o+u]|l[o+u]}return e[s+8]=i,s}function jg(r,e){r.push(0,0,0,0,0,0,0,0,e)}function cC(r,e){return r.injectorIndex===-1||r.parent&&r.parent.injectorIndex===r.injectorIndex||e[r.injectorIndex+8]===null?-1:r.injectorIndex}function gv(r,e){if(r.parent&&r.parent.injectorIndex!==-1)return r.parent.injectorIndex;let t=0,n=null,i=e;for(;i!==null;){if(n=mC(i),n===null)return Ta;if(t++,i=i[Na],n.injectorIndex!==-1)return n.injectorIndex|t<<16}return Ta}function ly(r,e,t){DF(r,e,t)}function SF(r,e){if(e==="class")return r.classes;if(e==="style")return r.styles;let t=r.attrs;if(t){let n=t.length,i=0;for(;i<n;){let s=t[i];if(AT(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<n&&typeof t[i]=="string";)i++;else{if(s===e)return t[i+1];i=i+2}}}return null}function hC(r,e,t){if(t&ye.Optional||r!==void 0)return r;iv(e,"NodeInjector")}function dC(r,e,t,n){if(t&ye.Optional&&n===void 0&&(n=null),!(t&(ye.Self|ye.Host))){let i=r[Da],s=pr(void 0);try{return i?i.get(e,n,t&ye.Optional):DT(e,n,t&ye.Optional)}finally{pr(s)}}return hC(n,e,t)}function fC(r,e,t,n=ye.Default,i){if(r!==null){if(e[ce]&2048&&!(n&ye.Self)){let o=RF(r,e,t,n,Vn);if(o!==Vn)return o}let s=pC(r,e,t,n,Vn);if(s!==Vn)return s}return dC(e,t,n,i)}function pC(r,e,t,n,i){let s=AF(t);if(typeof s=="function"){if(!eC(e,r,n))return n&ye.Host?hC(i,t,n):dC(e,t,n,i);try{let o;if(o=s(n),o==null&&!(n&ye.Optional))iv(t);else return o}finally{iC()}}else if(typeof s=="number"){let o=null,a=cC(r,e),l=Ta,u=n&ye.Host?e[bn][Ar]:null;for((a===-1||n&ye.SkipSelf)&&(l=a===-1?gv(r,e):e[a+8],l===Ta||!$E(n,!1)?a=-1:(o=e[ge],a=Qd(l),e=Jd(l,e)));a!==-1;){let c=e[ge];if(GE(s,a,c.data)){let h=IF(a,e,t,o,n,u);if(h!==Vn)return h}l=e[a+8],l!==Ta&&$E(n,e[ge].data[a+8]===u)&&GE(s,a,e)?(o=c,a=Qd(l),e=Jd(l,e)):a=-1}}return i}function IF(r,e,t,n,i,s){let o=e[ge],a=o.data[r+8],l=n==null?_f(a)&&ay:n!=o&&(a.type&3)!==0,u=i&ye.Host&&s===a,c=zd(a,o,t,l,u);return c!==null?ho(e,o,c,a):Vn}function zd(r,e,t,n,i){let s=r.providerIndexes,o=e.data,a=s&1048575,l=r.directiveStart,u=r.directiveEnd,c=s>>20,h=n?a:a+c,d=i?a+c:u;for(let f=h;f<d;f++){let p=o[f];if(f<l&&t===p||f>=l&&p.type===t)return f}if(i){let f=o[l];if(f&&wi(f)&&f.type===t)return l}return null}function ho(r,e,t,n){let i=r[t],s=e.data;if(xF(i)){let o=i;o.resolving&&mN(pN(s[t]));let a=ef(o.canSeeViewProviders);o.resolving=!0;let l,u=o.injectImpl?pr(o.injectImpl):null,c=eC(r,n,ye.Default);try{i=r[t]=o.factory(void 0,s,r,n),e.firstCreatePass&&t>=n.directiveStart&&vF(t,s[t],e)}finally{u!==null&&pr(u),ef(a),o.resolving=!1,iC()}}return i}function AF(r){if(typeof r=="string")return r.charCodeAt(0)||0;let e=r.hasOwnProperty(xu)?r[xu]:void 0;return typeof e=="number"?e>=0?e&lC:MF:e}function GE(r,e,t){let n=1<<r;return!!(t[e+(r>>uC)]&n)}function $E(r,e){return!(r&ye.Self)&&!(r&ye.Host&&e)}var io=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,n){return fC(this._tNode,this._lView,e,yf(n),t)}};function MF(){return new io(Ut(),de())}function yv(r){return Ou(()=>{let e=r.prototype.constructor,t=e[Yd]||uy(e),n=Object.prototype,i=Object.getPrototypeOf(r.prototype).constructor;for(;i&&i!==n;){let s=i[Yd]||uy(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function uy(r){return _T(r)?()=>{let e=uy(Jt(r));return e&&e()}:lo(r)}function RF(r,e,t,n,i){let s=r,o=e;for(;s!==null&&o!==null&&o[ce]&2048&&!(o[ce]&512);){let a=pC(s,o,t,n|ye.Self,Vn);if(a!==Vn)return a;let l=s.parent;if(!l){let u=o[jT];if(u){let c=u.get(t,Vn,n);if(c!==Vn)return c}l=mC(o),o=o[Na]}s=l}return i}function mC(r){let e=r[ge],t=e.type;return t===2?e.declTNode:t===1?r[Ar]:null}function vv(r){return SF(Ut(),r)}var kd="__parameters__";function PF(r){return function(...t){if(r){let n=r(...t);for(let i in n)this[i]=n[i]}}}function _v(r,e,t){return Ou(()=>{let n=PF(e);function i(...s){if(this instanceof i)return n.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(l,u,c){let h=l.hasOwnProperty(kd)?l[kd]:Object.defineProperty(l,kd,{value:[]})[kd];for(;h.length<=c;)h.push(null);return(h[c]=h[c]||[]).push(o),l}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=r,i.annotationCls=i,i})}var hK=Function;function OF(r){return typeof r=="function"}function NF(r,e,t){if(r.length!==e.length)return!1;for(let n=0;n<r.length;n++){let i=r[n],s=e[n];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}function FF(r){return r.flat(Number.POSITIVE_INFINITY)}function xv(r,e){r.forEach(t=>Array.isArray(t)?xv(t,e):e(t))}function gC(r,e,t){e>=r.length?r.push(t):r.splice(e,0,t)}function rf(r,e){return e>=r.length-1?r.pop():r.splice(e,1)[0]}function yC(r,e){let t=[];for(let n=0;n<r;n++)t.push(e);return t}function LF(r,e,t,n){let i=r.length;if(i==e)r.push(t,n);else if(i===1)r.push(n,r[0]),r[0]=t;else{for(i--,r.push(r[i-1],r[i]);i>e;){let s=i-2;r[i]=r[s],i--}r[e]=t,r[e+1]=n}}function bv(r,e,t){let n=Bu(r,e);return n>=0?r[n|1]=t:(n=~n,LF(r,n,e,t)),n}function Vg(r,e){let t=Bu(r,e);if(t>=0)return r[t|1]}function Bu(r,e){return kF(r,e,1)}function kF(r,e,t){let n=0,i=r.length>>t;for(;i!==n;){let s=n+(i-n>>1),o=r[s<<t];if(e===o)return s<<t;o>e?i=s:n=s+1}return~(i<<t)}var dK=sv(_v("Inject",r=>({token:r})),-1),Uu=sv(_v("Optional"),8);var Cf=sv(_v("SkipSelf"),4);var Ma=new ne("ENVIRONMENT_INITIALIZER"),vC=new ne("INJECTOR",-1),_C=new ne("INJECTOR_DEF_TYPES"),nf=class{get(e,t=wu){if(t===wu){let n=new Error(`NullInjectorError: No provider for ${Bt(e)}!`);throw n.name="NullInjectorError",n}return t}};function La(r){return{\u0275providers:r}}function BF(...r){return{\u0275providers:xC(!0,r),\u0275fromNgModule:!0}}function xC(r,...e){let t=[],n=new Set,i,s=o=>{t.push(o)};return xv(e,o=>{let a=o;cy(a,s,[],n)&&(i||=[],i.push(a))}),i!==void 0&&bC(i,s),t}function bC(r,e){for(let t=0;t<r.length;t++){let{ngModule:n,providers:i}=r[t];wv(i,s=>{e(s,n)})}}function cy(r,e,t,n){if(r=Jt(r),!r)return!1;let i=null,s=OE(r),o=!s&&cs(r);if(!s&&!o){let l=r.ngModule;if(s=OE(l),s)i=l;else return!1}else{if(o&&!o.standalone)return!1;i=r}let a=n.has(i);if(o){if(a)return!1;if(n.add(i),o.dependencies){let l=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let u of l)cy(u,e,t,n)}}else if(s){if(s.imports!=null&&!a){n.add(i);let u;try{xv(s.imports,c=>{cy(c,e,t,n)&&(u||=[],u.push(c))})}finally{}u!==void 0&&bC(u,e)}if(!a){let u=lo(i)||(()=>new i);e({provide:i,useFactory:u,deps:mr},i),e({provide:_C,useValue:i,multi:!0},i),e({provide:Ma,useValue:()=>j(i),multi:!0},i)}let l=s.providers;if(l!=null&&!a){let u=r;wv(l,c=>{e(c,u)})}}else return!1;return i!==r&&r.providers!==void 0}function wv(r,e){for(let t of r)xT(t)&&(t=t.\u0275providers),Array.isArray(t)?wv(t,e):e(t)}var UF=Ne({provide:String,useValue:Ne});function wC(r){return r!==null&&typeof r=="object"&&UF in r}function jF(r){return!!(r&&r.useExisting)}function VF(r){return!!(r&&r.useFactory)}function Ra(r){return typeof r=="function"}function HF(r){return!!r.useClass}var Df=new ne("Set Injector scope."),Wd={},GF={},Hg;function Ev(){return Hg===void 0&&(Hg=new nf),Hg}var tr=class{},Iu=class extends tr{get destroyed(){return this._destroyed}constructor(e,t,n,i){super(),this.parent=t,this.source=n,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,dy(e,o=>this.processProvider(o)),this.records.set(vC,xa(void 0,this)),i.has("environment")&&this.records.set(tr,xa(void 0,this));let s=this.records.get(Df);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(_C,mr,ye.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(let t of this._ngOnDestroyHooks)t.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=as(this),n=pr(void 0),i;try{return e()}finally{as(t),pr(n)}}get(e,t=wu,n=ye.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(RE))return e[RE](this);n=yf(n);let i,s=as(this),o=pr(void 0);try{if(!(n&ye.SkipSelf)){let l=this.records.get(e);if(l===void 0){let u=qF(e)&&gf(e);u&&this.injectableDefInScope(u)?l=xa(hy(e),Wd):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l)}let a=n&ye.Self?Ev():this.parent;return t=n&ye.Optional&&t===wu?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Zd]=a[Zd]||[]).unshift(Bt(e)),s)throw a;return SN(a,e,"R3InjectorError",this.source)}else throw a}finally{pr(o),as(s)}}resolveInjectorInitializers(){let e=as(this),t=pr(void 0),n;try{let i=this.get(Ma,mr,ye.Self);for(let s of i)s()}finally{as(e),pr(t)}}toString(){let e=[],t=this.records;for(let n of t.keys())e.push(Bt(n));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new J(205,!1)}processProvider(e){e=Jt(e);let t=Ra(e)?e:Jt(e&&e.provide),n=zF(e);if(!Ra(e)&&e.multi===!0){let i=this.records.get(t);i||(i=xa(void 0,Wd,!0),i.factory=()=>ry(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}else{let i=this.records.get(t)}this.records.set(t,n)}hydrate(e,t){return t.value===Wd&&(t.value=GF,t.value=t.factory()),typeof t.value=="object"&&t.value&&XF(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Jt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function hy(r){let e=gf(r),t=e!==null?e.factory:lo(r);if(t!==null)return t;if(r instanceof ne)throw new J(204,!1);if(r instanceof Function)return $F(r);throw new J(204,!1)}function $F(r){let e=r.length;if(e>0){let n=yC(e,"?");throw new J(204,!1)}let t=vN(r);return t!==null?()=>t.factory(r):()=>new r}function zF(r){if(wC(r))return xa(void 0,r.useValue);{let e=EC(r);return xa(e,Wd)}}function EC(r,e,t){let n;if(Ra(r)){let i=Jt(r);return lo(i)||hy(i)}else if(wC(r))n=()=>Jt(r.useValue);else if(VF(r))n=()=>r.useFactory(...ry(r.deps||[]));else if(jF(r))n=()=>j(Jt(r.useExisting));else{let i=Jt(r&&(r.useClass||r.provide));if(WF(r))n=()=>new i(...ry(r.deps));else return lo(i)||hy(i)}return n}function xa(r,e,t=!1){return{factory:r,value:e,multi:t?[]:void 0}}function WF(r){return!!r.deps}function XF(r){return r!==null&&typeof r=="object"&&typeof r.ngOnDestroy=="function"}function qF(r){return typeof r=="function"||typeof r=="object"&&r instanceof ne}function dy(r,e){for(let t of r)Array.isArray(t)?dy(t,e):t&&xT(t)?dy(t.\u0275providers,e):e(t)}function qn(r,e){r instanceof Iu&&r.assertNotDestroyed();let t,n=as(r),i=pr(void 0);try{return e()}finally{as(n),pr(i)}}function YF(r){if(!CT()&&!TN())throw new J(-203,!1)}function zE(r,e=null,t=null,n){let i=TC(r,e,t,n);return i.resolveInjectorInitializers(),i}function TC(r,e=null,t=null,n,i=new Set){let s=[t||mr,BF(r)];return n=n||(typeof r=="object"?void 0:Bt(r)),new Iu(s,e||Ev(),n||null,i)}var Yn=(()=>{let e=class e{static create(n,i){if(Array.isArray(n))return zE({name:""},i,n,"");{let s=n.name??"";return zE({name:s},n.parent,n.providers,s)}}};e.THROW_IF_NOT_FOUND=wu,e.NULL=new nf,e.\u0275prov=W({token:e,providedIn:"any",factory:()=>j(vC)}),e.__NG_ELEMENT_ID__=-1;let r=e;return r})();var fy;function CC(r){fy=r}function DC(){if(fy!==void 0)return fy;if(typeof document<"u")return document;throw new J(210,!1)}var Sf=new ne("AppId",{providedIn:"root",factory:()=>ZF}),ZF="ng",Tv=new ne("Platform Initializer"),qr=new ne("Platform ID",{providedIn:"platform",factory:()=>"unknown"});var fK=new ne("AnimationModuleType"),Cv=new ne("CSP nonce",{providedIn:"root",factory:()=>DC().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function pK(r){return r.ownerDocument}function SC(r){return r instanceof Function?r():r}function KF(r){return(r??V(Yn)).get(qr)==="browser"}function IC(r){return(r.flags&128)===128}var zn=function(r){return r[r.Important=1]="Important",r[r.DashCase=2]="DashCase",r}(zn||{}),QF=/^>|^->|<!--|-->|--!>|<!-$/g,JF=/(<|>)/g,eL="\u200B$1\u200B";function tL(r){return r.replace(QF,e=>e.replace(JF,eL))}var AC=new Map,rL=0;function nL(){return rL++}function iL(r){AC.set(r[vf],r)}function sL(r){AC.delete(r[vf])}var WE="__ngContext__";function hs(r,e){us(e)?(r[WE]=e[vf],iL(e)):r[WE]=e}var oL;function Dv(r,e){return oL(r,e)}function Sv(r){let e=r[ft];return wn(e)?e[ft]:e}function MC(r){return PC(r[Du])}function RC(r){return PC(r[_n])}function PC(r){for(;r!==null&&!wn(r);)r=r[_n];return r}function ba(r,e,t,n,i){if(n!=null){let s,o=!1;wn(n)?s=n:us(n)&&(o=!0,n=n[Xn]);let a=$n(n);r===0&&t!==null?i==null?kC(e,t,a):sf(e,t,a,i||null,!0):r===1&&t!==null?sf(e,t,a,i||null,!0):r===2?EL(e,a,o):r===3&&e.destroyNode(a),s!=null&&CL(e,r,s,t,i)}}function aL(r,e){return r.createText(e)}function lL(r,e,t){r.setValue(e,t)}function uL(r,e){return r.createComment(tL(e))}function OC(r,e,t){return r.createElement(e,t)}function cL(r,e){let t=e[We];ju(r,e,t,2,null,null),e[Xn]=null,e[Ar]=null}function hL(r,e,t,n,i,s){n[Xn]=i,n[Ar]=e,ju(r,n,t,1,i,s)}function dL(r,e){ju(r,e,e[We],2,null,null)}function fL(r){let e=r[Du];if(!e)return Gg(r[ge],r);for(;e;){let t=null;if(us(e))t=e[Du];else{let n=e[Ir];n&&(t=n)}if(!t){for(;e&&!e[_n]&&e!==r;)us(e)&&Gg(e[ge],e),e=e[ft];e===null&&(e=r),us(e)&&Gg(e[ge],e),t=e&&e[_n]}e=t}}function pL(r,e,t,n){let i=Ir+n,s=t.length;n>0&&(t[i-1][_n]=e),n<s-Ir?(e[_n]=t[i],gC(t,Ir+n,e)):(t.push(e),e[_n]=null),e[ft]=t;let o=e[Fu];o!==null&&t!==o&&mL(o,e);let a=e[Hn];a!==null&&a.insertView(r),sy(e),e[ce]|=128}function mL(r,e){let t=r[Sa],i=e[ft][ft][bn];e[bn]!==i&&(r[ce]|=Ia.HasTransplantedViews),t===null?r[Sa]=[e]:t.push(e)}function NC(r,e){let t=r[Sa],n=t.indexOf(e),i=e[ft];t.splice(n,1)}function py(r,e){if(r.length<=Ir)return;let t=Ir+e,n=r[t];if(n){let i=n[Fu];i!==null&&i!==r&&NC(i,n),e>0&&(r[t-1][_n]=n[_n]);let s=rf(r,Ir+e);cL(n[ge],n);let o=s[Hn];o!==null&&o.detachView(s[ge]),n[ft]=null,n[_n]=null,n[ce]&=-129}return n}function FC(r,e){if(!(e[ce]&256)){let t=e[We];t.destroyNode&&ju(r,e,t,3,null,null),fL(e)}}function Gg(r,e){if(!(e[ce]&256)){e[ce]&=-129,e[ce]|=256,e[oo]&&Yw(e[oo]),yL(r,e),gL(r,e),e[ge].type===1&&e[We].destroy();let t=e[Fu];if(t!==null&&wn(e[ft])){t!==e[ft]&&NC(t,e);let n=e[Hn];n!==null&&n.detachView(r)}sL(e)}}function gL(r,e){let t=r.cleanup,n=e[Cu];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let o=t[s+3];o>=0?n[o]():n[-o].unsubscribe(),s+=2}else{let o=n[t[s+1]];t[s].call(o)}n!==null&&(e[Cu]=null);let i=e[ls];if(i!==null){e[ls]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function yL(r,e){let t;if(r!=null&&(t=r.destroyHooks)!=null)for(let n=0;n<t.length;n+=2){let i=e[t[n]];if(!(i instanceof co)){let s=t[n+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],l=s[o+1];jn(4,a,l);try{l.call(a)}finally{jn(5,a,l)}}else{jn(4,i,s);try{s.call(i)}finally{jn(5,i,s)}}}}}function LC(r,e,t){return vL(r,e.parent,t)}function vL(r,e,t){let n=e;for(;n!==null&&n.type&40;)e=n,n=e.parent;if(n===null)return t[Xn];{let{componentOffset:i}=n;if(i>-1){let{encapsulation:s}=r.data[n.directiveStart+i];if(s===Gn.None||s===Gn.Emulated)return null}return Xr(n,t)}}function sf(r,e,t,n,i){r.insertBefore(e,t,n,i)}function kC(r,e,t){r.appendChild(e,t)}function XE(r,e,t,n,i){n!==null?sf(r,e,t,n,i):kC(r,e,t)}function _L(r,e,t,n){r.removeChild(e,t,n)}function Iv(r,e){return r.parentNode(e)}function xL(r,e){return r.nextSibling(e)}function BC(r,e,t){return wL(r,e,t)}function bL(r,e,t){return r.type&40?Xr(r,t):null}var wL=bL,qE;function If(r,e,t,n){let i=LC(r,n,e),s=e[We],o=n.parent||e[Ar],a=BC(o,n,e);if(i!=null)if(Array.isArray(t))for(let l=0;l<t.length;l++)XE(s,i,t[l],a,!1);else XE(s,i,t,a,!1);qE!==void 0&&qE(s,n,e,t,i)}function Xd(r,e){if(e!==null){let t=e.type;if(t&3)return Xr(e,r);if(t&4)return my(-1,r[e.index]);if(t&8){let n=e.child;if(n!==null)return Xd(r,n);{let i=r[e.index];return wn(i)?my(-1,i):$n(i)}}else{if(t&32)return Dv(e,r)()||$n(r[e.index]);{let n=UC(r,e);if(n!==null){if(Array.isArray(n))return n[0];let i=Sv(r[bn]);return Xd(i,n)}else return Xd(r,e.next)}}}return null}function UC(r,e){if(e!==null){let n=r[bn][Ar],i=e.projection;return n.projection[i]}return null}function my(r,e){let t=Ir+r+1;if(t<e.length){let n=e[t],i=n[ge].firstChild;if(i!==null)return Xd(n,i)}return e[ao]}function EL(r,e,t){let n=Iv(r,e);n&&_L(r,n,e,t)}function Av(r,e,t,n,i,s,o){for(;t!=null;){let a=n[t.index],l=t.type;if(o&&e===0&&(a&&hs($n(a),n),t.flags|=2),(t.flags&32)!==32)if(l&8)Av(r,e,t.child,n,i,s,!1),ba(e,r,i,a,s);else if(l&32){let u=Dv(t,n),c;for(;c=u();)ba(e,r,i,c,s);ba(e,r,i,a,s)}else l&16?jC(r,e,n,t,i,s):ba(e,r,i,a,s);t=o?t.projectionNext:t.next}}function ju(r,e,t,n,i,s){Av(t,n,r.firstChild,e,i,s,!1)}function TL(r,e,t){let n=e[We],i=LC(r,t,e),s=t.parent||e[Ar],o=BC(s,t,e);jC(n,0,e,t,i,o)}function jC(r,e,t,n,i,s){let o=t[bn],l=o[Ar].projection[n.projection];if(Array.isArray(l))for(let u=0;u<l.length;u++){let c=l[u];ba(e,r,i,c,s)}else{let u=l,c=o[ft];IC(n)&&(u.flags|=128),Av(r,e,u,c,i,s,!0)}}function CL(r,e,t,n,i){let s=t[ao],o=$n(t);s!==o&&ba(e,r,n,s,i);for(let a=Ir;a<t.length;a++){let l=t[a];ju(l[ge],l,r,e,n,s)}}function DL(r,e,t,n,i){if(e)i?r.addClass(t,n):r.removeClass(t,n);else{let s=n.indexOf("-")===-1?void 0:zn.DashCase;i==null?r.removeStyle(t,n,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=zn.Important),r.setStyle(t,n,i,s))}}function SL(r,e,t){r.setAttribute(e,"style",t)}function VC(r,e,t){t===""?r.removeAttribute(e,"class"):r.setAttribute(e,"class",t)}function HC(r,e,t){let{mergedAttrs:n,classes:i,styles:s}=t;n!==null&&ny(r,e,n),i!==null&&VC(r,e,i),s!==null&&SL(r,e,s)}var Bd;function IL(){if(Bd===void 0&&(Bd=null,dt.trustedTypes))try{Bd=dt.trustedTypes.createPolicy("angular",{createHTML:r=>r,createScript:r=>r,createScriptURL:r=>r})}catch{}return Bd}function Af(r){return IL()?.createHTML(r)||r}var Ud;function GC(){if(Ud===void 0&&(Ud=null,dt.trustedTypes))try{Ud=dt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:r=>r,createScript:r=>r,createScriptURL:r=>r})}catch{}return Ud}function YE(r){return GC()?.createHTML(r)||r}function ZE(r){return GC()?.createScriptURL(r)||r}var Ei=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${bT})`}},gy=class extends Ei{getTypeName(){return"HTML"}},yy=class extends Ei{getTypeName(){return"Style"}},vy=class extends Ei{getTypeName(){return"Script"}},_y=class extends Ei{getTypeName(){return"URL"}},xy=class extends Ei{getTypeName(){return"ResourceURL"}};function Yr(r){return r instanceof Ei?r.changingThisBreaksApplicationSecurity:r}function Ci(r,e){let t=AL(r);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${bT})`)}return t===e}function AL(r){return r instanceof Ei&&r.getTypeName()||null}function $C(r){return new gy(r)}function zC(r){return new yy(r)}function WC(r){return new vy(r)}function XC(r){return new _y(r)}function qC(r){return new xy(r)}function ML(r){let e=new wy(r);return RL()?new by(e):e}var by=class{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let t=new window.DOMParser().parseFromString(Af(e),"text/html").body;return t===null?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}},wy=class{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let t=this.inertDocument.createElement("template");return t.innerHTML=Af(e),t}};function RL(){try{return!!new window.DOMParser().parseFromString(Af(""),"text/html")}catch{return!1}}var PL=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Mf(r){return r=String(r),r.match(PL)?r:"unsafe:"+r}function Di(r){let e={};for(let t of r.split(","))e[t]=!0;return e}function Vu(...r){let e={};for(let t of r)for(let n in t)t.hasOwnProperty(n)&&(e[n]=!0);return e}var YC=Di("area,br,col,hr,img,wbr"),ZC=Di("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),KC=Di("rp,rt"),OL=Vu(KC,ZC),NL=Vu(ZC,Di("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),FL=Vu(KC,Di("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),KE=Vu(YC,NL,FL,OL),QC=Di("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),LL=Di("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),kL=Di("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),BL=Vu(QC,LL,kL),UL=Di("script,style,template"),Ey=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,n=!0;for(;t;){if(t.nodeType===Node.ELEMENT_NODE?n=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,n&&t.firstChild){t=t.firstChild;continue}for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let i=this.checkClobberedElement(t,t.nextSibling);if(i){t=i;break}t=this.checkClobberedElement(t,t.parentNode)}}return this.buf.join("")}startElement(e){let t=e.nodeName.toLowerCase();if(!KE.hasOwnProperty(t))return this.sanitizedSomething=!0,!UL.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);let n=e.attributes;for(let i=0;i<n.length;i++){let s=n.item(i),o=s.name,a=o.toLowerCase();if(!BL.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=s.value;QC[a]&&(l=Mf(l)),this.buf.push(" ",o,'="',QE(l),'"')}return this.buf.push(">"),!0}endElement(e){let t=e.nodeName.toLowerCase();KE.hasOwnProperty(t)&&!YC.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(QE(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}},jL=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,VL=/([^\#-~ |!])/g;function QE(r){return r.replace(/&/g,"&amp;").replace(jL,function(e){let t=e.charCodeAt(0),n=e.charCodeAt(1);return"&#"+((t-55296)*1024+(n-56320)+65536)+";"}).replace(VL,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var jd;function Mv(r,e){let t=null;try{jd=jd||ML(r);let n=e?String(e):"";t=jd.getInertBodyElement(n);let i=5,s=n;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,n=s,s=t.innerHTML,t=jd.getInertBodyElement(n)}while(n!==s);let a=new Ey().sanitizeChildren(JE(t)||t);return Af(a)}finally{if(t){let n=JE(t)||t;for(;n.firstChild;)n.removeChild(n.firstChild)}}}function JE(r){return"content"in r&&HL(r)?r.content:null}function HL(r){return r.nodeType===Node.ELEMENT_NODE&&r.nodeName==="TEMPLATE"}var Cn=function(r){return r[r.NONE=0]="NONE",r[r.HTML=1]="HTML",r[r.STYLE=2]="STYLE",r[r.SCRIPT=3]="SCRIPT",r[r.URL=4]="URL",r[r.RESOURCE_URL=5]="RESOURCE_URL",r}(Cn||{});function mK(r){let e=Rv();return e?YE(e.sanitize(Cn.HTML,r)||""):Ci(r,"HTML")?YE(Yr(r)):Mv(DC(),so(r))}function GL(r){let e=Rv();return e?e.sanitize(Cn.URL,r)||"":Ci(r,"URL")?Yr(r):Mf(so(r))}function $L(r){let e=Rv();if(e)return ZE(e.sanitize(Cn.RESOURCE_URL,r)||"");if(Ci(r,"ResourceURL"))return ZE(Yr(r));throw new J(904,!1)}function zL(r,e){return e==="src"&&(r==="embed"||r==="frame"||r==="iframe"||r==="media"||r==="script")||e==="href"&&(r==="base"||r==="link")?$L:GL}function JC(r,e,t){return zL(e,t)(r)}function Rv(){let r=de();return r&&r[bi].sanitizer}var Ty=class{};var WL="h",XL="b";var qL=(r,e,t)=>null;function Pv(r,e,t=!1){return qL(r,e,t)}var Cy=class{},of=class{};function YL(r){let e=Error(`No component factory found for ${Bt(r)}.`);return e[ZL]=r,e}var ZL="ngComponent";var Dy=class{resolveComponentFactory(e){throw YL(e)}},Rf=(()=>{let e=class e{};e.NULL=new Dy;let r=e;return r})();function KL(){return ka(Ut(),de())}function ka(r,e){return new Zn(Xr(r,e))}var Zn=(()=>{let e=class e{constructor(n){this.nativeElement=n}};e.__NG_ELEMENT_ID__=KL;let r=e;return r})();function QL(r){return r instanceof Zn?r.nativeElement:r}var Au=class{},Ba=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>JL();let r=e;return r})();function JL(){let r=de(),e=Ut(),t=fs(e.index,r);return(us(t)?t:r)[We]}var ek=(()=>{let e=class e{};e.\u0275prov=W({token:e,providedIn:"root",factory:()=>null});let r=e;return r})(),$g={};function Ov(r){let e=Qt(null);try{return r()}finally{Qt(e)}}function eD(r){return Nv(r)?Array.isArray(r)||!(r instanceof Map)&&Symbol.iterator in r:!1}function tk(r,e){if(Array.isArray(r))for(let t=0;t<r.length;t++)e(r[t]);else{let t=r[Symbol.iterator](),n;for(;!(n=t.next()).done;)e(n.value)}}function Nv(r){return r!==null&&(typeof r=="function"||typeof r=="object")}var Sy=class{constructor(){}supports(e){return eD(e)}create(e){return new Iy(e)}},rk=(r,e)=>e,Iy=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||rk}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,n=this._removalsHead,i=0,s=null;for(;t||n;){let o=!n||t&&t.currentIndex<eT(n,i,s)?t:n,a=eT(o,i,s),l=o.currentIndex;if(o===n)i--,n=n._nextRemoved;else if(t=t._next,o.previousIndex==null)i++;else{s||(s=[]);let u=a-i,c=l-i;if(u!=c){for(let d=0;d<u;d++){let f=d<s.length?s[d]:s[d]=0,p=f+d;c<=p&&p<u&&(s[d]=f+1)}let h=o.previousIndex;s[h]=c-u}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!eD(e))throw new J(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,n=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),n=!0):(n&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else i=0,tk(e,a=>{o=this._trackByFn(i,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,i),n=!0):(n&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,n,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(n,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(n,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new Ay(t,n),s,i)),e}_verifyReinsertion(e,t,n,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(n,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,n){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,n),this._addToMoves(e,n),e}_moveAfter(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}_addAfter(e,t,n){return this._insertAfter(e,t,n),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,n){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new af),this._linkedRecords.put(e),e.currentIndex=n,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,n=e._next;return t===null?this._itHead=n:t._next=n,n===null?this._itTail=t:n._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new af),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Ay=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},My=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let n;for(n=this._head;n!==null;n=n._nextDup)if((t===null||t<=n.currentIndex)&&Object.is(n.trackById,e))return n;return null}remove(e){let t=e._prevDup,n=e._nextDup;return t===null?this._head=n:t._nextDup=n,n===null?this._tail=t:n._prevDup=t,this._head===null}},af=class{constructor(){this.map=new Map}put(e){let t=e.trackById,n=this.map.get(t);n||(n=new My,this.map.set(t,n)),n.add(e)}get(e,t){let n=e,i=this.map.get(n);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function eT(r,e,t){let n=r.previousIndex;if(n===null)return n;let i=0;return t&&n<t.length&&(i=t[n]),n+e+i}var Ry=class{constructor(){}supports(e){return e instanceof Map||Nv(e)}create(){return new Py}},Py=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let t;for(t=this._mapHead;t!==null;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;t!==null;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;t!==null;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||Nv(e)))throw new J(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(n,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,n),this._appendAfter=t,t=t._next;else{let s=this._getOrCreateRecordForKey(i,n);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let n=t;n!==null;n=n._nextRemoved)n===this._mapHead&&(this._mapHead=null),this._records.delete(n.key),n._nextRemoved=n._next,n.previousValue=n.currentValue,n.currentValue=null,n._prev=null,n._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){let n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){let i=this._records.get(e);this._maybeAddToChanges(i,t);let s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}let n=new Oy(e);return this._records.set(e,n),n.currentValue=t,this._addToAdditions(n),n}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(n=>t(e[n],n))}},Oy=class{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function tT(){return new Pf([new Sy])}var Pf=(()=>{let e=class e{constructor(n){this.factories=n}static create(n,i){if(i!=null){let s=i.factories.slice();n=n.concat(s)}return new e(n)}static extend(n){return{provide:e,useFactory:i=>e.create(n,i||tT()),deps:[[e,new Cf,new Uu]]}}find(n){let i=this.factories.find(s=>s.supports(n));if(i!=null)return i;throw new J(901,!1)}};e.\u0275prov=W({token:e,providedIn:"root",factory:tT});let r=e;return r})();function rT(){return new Of([new Ry])}var Of=(()=>{let e=class e{constructor(n){this.factories=n}static create(n,i){if(i){let s=i.factories.slice();n=n.concat(s)}return new e(n)}static extend(n){return{provide:e,useFactory:i=>e.create(n,i||rT()),deps:[[e,new Cf,new Uu]]}}find(n){let i=this.factories.find(s=>s.supports(n));if(i)return i;throw new J(901,!1)}};e.\u0275prov=W({token:e,providedIn:"root",factory:rT});let r=e;return r})();function lf(r,e,t,n,i=!1){for(;t!==null;){let s=e[t.index];s!==null&&n.push($n(s)),wn(s)&&nk(s,n);let o=t.type;if(o&8)lf(r,e,t.child,n);else if(o&32){let a=Dv(t,e),l;for(;l=a();)n.push(l)}else if(o&16){let a=UC(e,t);if(Array.isArray(a))n.push(...a);else{let l=Sv(e[bn]);lf(l[ge],l,a,n,!0)}}t=i?t.projectionNext:t.next}return n}function nk(r,e){for(let t=Ir;t<r.length;t++){let n=r[t],i=n[ge].firstChild;i!==null&&lf(n[ge],n,i,e)}r[ao]!==r[Xn]&&e.push(r[ao])}var tD=[];function ik(r){return r[oo]??sk(r)}function sk(r){let e=tD.pop()??Object.create(ak);return e.lView=r,e}function ok(r){r.lView[oo]!==r&&(r.lView=null,tD.push(r))}var ak=De(O({},Ww),{consumerIsAlwaysLive:!0,consumerMarkedDirty:r=>{Su(r.lView)},consumerOnSignalRead(){this.lView[oo]=this}}),lk="ngOriginalError";function zg(r){return r[lk]}var Wn=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&zg(e);for(;t&&zg(t);)t=zg(t);return t||null}},rD=new ne("",{providedIn:"root",factory:()=>V(Wn).handleError.bind(void 0)});var nD=!1,uk=new ne("",{providedIn:"root",factory:()=>nD});var Mr={};function gK(r){iD(Ze(),de(),ms()+r,!1)}function iD(r,e,t,n){if(!n)if((e[ce]&3)===3){let s=r.preOrderCheckHooks;s!==null&&Gd(e,s,t)}else{let s=r.preOrderHooks;s!==null&&$d(e,s,0,t)}uo(t)}function we(r,e=ye.Default){let t=de();if(t===null)return j(r,e);let n=Ut();return fC(n,t,Jt(r),e)}function sD(){let r="invalid";throw new Error(r)}function ck(r,e){let t=r.hostBindingOpCodes;if(t!==null)try{for(let n=0;n<t.length;n++){let i=t[n];if(i<0)uo(~i);else{let s=i,o=t[++n],a=t[++n];fF(o,s);let l=e[s];a(2,l)}}}finally{uo(-1)}}function Nf(r,e,t,n,i,s,o,a,l,u,c){let h=e.blueprint.slice();return h[Xn]=i,h[ce]=n|4|128|8|64,(u!==null||r&&r[ce]&2048)&&(h[ce]|=2048),XT(h),h[ft]=h[Na]=r,h[xn]=t,h[bi]=o||r&&r[bi],h[We]=a||r&&r[We],h[Da]=l||r&&r[Da]||null,h[Ar]=s,h[vf]=nL(),h[Tu]=c,h[jT]=u,h[bn]=e.type==2?r[bn]:h,h}function Ua(r,e,t,n,i){let s=r.data[e];if(s===null)s=hk(r,e,t,n,i),dF()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=n,s.attrs=i;let o=lF();s.injectorIndex=o===null?-1:o.injectorIndex}return mo(s,!0),s}function hk(r,e,t,n,i){let s=QT(),o=uv(),a=o?s:s&&s.parent,l=r.data[e]=yk(r,a,t,e,n,i);return r.firstChild===null&&(r.firstChild=l),s!==null&&(o?s.child==null&&l.parent!==null&&(s.child=l):s.next===null&&(s.next=l,l.prev=s)),l}function oD(r,e,t,n){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(n),r.blueprint.push(n),r.data.push(null);return i}function aD(r,e,t,n,i){let s=ms(),o=n&2;try{uo(-1),o&&e.length>er&&iD(r,e,er,!1),jn(o?2:0,i),t(n,i)}finally{uo(s),jn(o?3:1,i)}}function Fv(r,e,t){if(av(e)){let n=Qt(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=r.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}finally{Qt(n)}}}function Lv(r,e,t){ZT()&&(Ek(r,e,t,Xr(t,e)),(t.flags&64)===64&&cD(r,e,t))}function kv(r,e,t=Xr){let n=e.localNames;if(n!==null){let i=e.index+1;for(let s=0;s<n.length;s+=2){let o=n[s+1],a=o===-1?t(e,r):r[o];r[i++]=a}}}function lD(r){let e=r.tView;return e===null||e.incompleteFirstPass?r.tView=Bv(1,null,r.template,r.decls,r.vars,r.directiveDefs,r.pipeDefs,r.viewQuery,r.schemas,r.consts,r.id):e}function Bv(r,e,t,n,i,s,o,a,l,u,c){let h=er+n,d=h+i,f=dk(h,d),p=typeof u=="function"?u():u;return f[ge]={type:r,blueprint:f,template:t,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:l,consts:p,incompleteFirstPass:!1,ssrId:c}}function dk(r,e){let t=[];for(let n=0;n<e;n++)t.push(n<r?null:Mr);return t}function fk(r,e,t,n){let s=n.get(uk,nD)||t===Gn.ShadowDom,o=r.selectRootElement(e,s);return pk(o),o}function pk(r){mk(r)}var mk=r=>null;function gk(r,e,t,n){let i=pD(e);i.push(t),r.firstCreatePass&&mD(r).push(n,i.length-1)}function yk(r,e,t,n,i,s){let o=e?e.injectorIndex:-1,a=0;return KT()&&(a|=128),{type:t,index:n,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function nT(r,e,t,n){for(let i in r)if(r.hasOwnProperty(i)){t=t===null?{}:t;let s=r[i];n===null?iT(t,e,i,s):n.hasOwnProperty(i)&&iT(t,e,n[i],s)}return t}function iT(r,e,t,n){r.hasOwnProperty(t)?r[t].push(e,n):r[t]=[e,n]}function vk(r,e,t){let n=e.directiveStart,i=e.directiveEnd,s=r.data,o=e.attrs,a=[],l=null,u=null;for(let c=n;c<i;c++){let h=s[c],d=t?t.get(h):null,f=d?d.inputs:null,p=d?d.outputs:null;l=nT(h.inputs,c,l,f),u=nT(h.outputs,c,u,p);let m=l!==null&&o!==null&&!RT(e)?Nk(l,c,o):null;a.push(m)}l!==null&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=u}function _k(r){return r==="class"?"className":r==="for"?"htmlFor":r==="formaction"?"formAction":r==="innerHtml"?"innerHTML":r==="readonly"?"readOnly":r==="tabindex"?"tabIndex":r}function Ff(r,e,t,n,i,s,o,a){let l=Xr(e,t),u=e.inputs,c;!a&&u!=null&&(c=u[n])?(jv(r,t,c,n,i),_f(e)&&xk(t,e.index)):e.type&3?(n=_k(n),i=o!=null?o(i,e.value||"",n):i,s.setProperty(l,n,i)):e.type&12}function xk(r,e){let t=fs(e,r);t[ce]&16||(t[ce]|=64)}function Uv(r,e,t,n){if(ZT()){let i=n===null?null:{"":-1},s=Ck(r,t),o,a;s===null?o=a=null:[o,a]=s,o!==null&&uD(r,e,t,o,i,a),i&&Dk(t,n,i)}t.mergedAttrs=Eu(t.mergedAttrs,t.attrs)}function uD(r,e,t,n,i,s){for(let u=0;u<n.length;u++)ly(tf(t,e),r,n[u].type);Ik(t,r.data.length,n.length);for(let u=0;u<n.length;u++){let c=n[u];c.providersResolver&&c.providersResolver(c)}let o=!1,a=!1,l=oD(r,e,n.length,null);for(let u=0;u<n.length;u++){let c=n[u];t.mergedAttrs=Eu(t.mergedAttrs,c.hostAttrs),Ak(r,t,e,l,c),Sk(l,c,i),c.contentQueries!==null&&(t.flags|=4),(c.hostBindings!==null||c.hostAttrs!==null||c.hostVars!==0)&&(t.flags|=64);let h=c.type.prototype;!o&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((r.preOrderHooks??=[]).push(t.index),o=!0),!a&&(h.ngOnChanges||h.ngDoCheck)&&((r.preOrderCheckHooks??=[]).push(t.index),a=!0),l++}vk(r,t,s)}function bk(r,e,t,n,i){let s=i.hostBindings;if(s){let o=r.hostBindingOpCodes;o===null&&(o=r.hostBindingOpCodes=[]);let a=~e.index;wk(o)!=a&&o.push(a),o.push(t,n,s)}}function wk(r){let e=r.length;for(;e>0;){let t=r[--e];if(typeof t=="number"&&t<0)return t}return 0}function Ek(r,e,t,n){let i=t.directiveStart,s=t.directiveEnd;_f(t)&&Mk(e,t,r.data[i+t.componentOffset]),r.firstCreatePass||tf(t,e),hs(n,e);let o=t.initialInputs;for(let a=i;a<s;a++){let l=r.data[a],u=ho(e,r,a,t);if(hs(u,e),o!==null&&Ok(e,a-i,u,l,t,o),wi(l)){let c=fs(t.index,e);c[xn]=ho(e,r,a,t)}}}function cD(r,e,t){let n=t.directiveStart,i=t.directiveEnd,s=t.index,o=pF();try{uo(s);for(let a=n;a<i;a++){let l=r.data[a],u=e[a];oy(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&Tk(l,u)}}finally{uo(-1),oy(o)}}function Tk(r,e){r.hostBindings!==null&&r.hostBindings(1,e)}function Ck(r,e){let t=r.directiveRegistry,n=null,i=null;if(t)for(let s=0;s<t.length;s++){let o=t[s];if(PT(e,o.selectors,!1))if(n||(n=[]),wi(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),n.unshift(...a,o);let l=a.length;Ny(r,e,l)}else n.unshift(o),Ny(r,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,n,i),n.push(o)}return n===null?null:[n,i]}function Ny(r,e,t){e.componentOffset=t,(r.components??=[]).push(e.index)}function Dk(r,e,t){if(e){let n=r.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new J(-301,!1);n.push(e[i],s)}}}function Sk(r,e,t){if(t){if(e.exportAs)for(let n=0;n<e.exportAs.length;n++)t[e.exportAs[n]]=r;wi(e)&&(t[""]=r)}}function Ik(r,e,t){r.flags|=1,r.directiveStart=e,r.directiveEnd=e+t,r.providerIndexes=e}function Ak(r,e,t,n,i){r.data[n]=i;let s=i.factory||(i.factory=lo(i.type,!0)),o=new co(s,wi(i),we);r.blueprint[n]=o,t[n]=o,bk(r,e,n,oD(r,t,i.hostVars,Mr),i)}function Mk(r,e,t){let n=Xr(e,r),i=lD(t),s=r[bi].rendererFactory,o=16;t.signals?o=4096:t.onPush&&(o=64);let a=Lf(r,Nf(r,i,null,o,n,e,null,s.createRenderer(n,t),null,null,null));r[e.index]=a}function Rk(r,e,t,n,i,s){let o=Xr(r,e);Pk(e[We],o,s,r.value,t,n,i)}function Pk(r,e,t,n,i,s,o){if(s==null)r.removeAttribute(e,i,t);else{let a=o==null?so(s):o(s,n||"",i);r.setAttribute(e,i,a,t)}}function Ok(r,e,t,n,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let l=o[a++],u=o[a++],c=o[a++];hD(n,t,l,u,c)}}function hD(r,e,t,n,i){let s=Qt(null);try{let o=r.inputTransforms;o!==null&&o.hasOwnProperty(n)&&(i=o[n].call(e,i)),r.setInput!==null?r.setInput(e,i,t,n):e[n]=i}finally{Qt(s)}}function Nk(r,e,t){let n=null,i=0;for(;i<t.length;){let s=t[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(r.hasOwnProperty(s)){n===null&&(n=[]);let o=r[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){n.push(s,o[a+1],t[i+1]);break}}i+=2}return n}function dD(r,e,t,n){return[r,!0,0,e,null,n,null,t,null,null]}function fD(r,e){let t=r.contentQueries;if(t!==null){let n=Qt(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=r.data[o];fv(s),a.contentQueries(2,e[o],o)}}}finally{Qt(n)}}}function Lf(r,e){return r[Du]?r[jE][_n]=e:r[Du]=e,r[jE]=e,e}function Fy(r,e,t){fv(0);let n=Qt(null);try{e(r,t)}finally{Qt(n)}}function pD(r){return r[Cu]||(r[Cu]=[])}function mD(r){return r.cleanup||(r.cleanup=[])}function gD(r,e,t){return(r===null||wi(r))&&(t=KN(t[e.index])),t[We]}function yD(r,e){let t=r[Da],n=t?t.get(Wn,null):null;n&&n.handleError(e)}function jv(r,e,t,n,i){for(let s=0;s<t.length;){let o=t[s++],a=t[s++],l=e[o],u=r.data[o];hD(u,l,n,a,i)}}function vD(r,e,t){let n=zT(e,r);lL(r[We],n,t)}var Fk=100;function Lk(r,e=!0){let t=r[bi],n=t.rendererFactory,i=t.afterRenderEventManager,s=!1;s||(n.begin?.(),i?.begin());try{kk(r)}catch(o){throw e&&yD(r,o),o}finally{s||(n.end?.(),t.inlineEffectRunner?.flush(),i?.end())}}function kk(r){Ly(r,0);let e=0;for(;qT(r);){if(e===Fk)throw new J(103,!1);e++,Ly(r,1)}}function Bk(r,e,t,n){let i=e[ce];if((i&256)===256)return;let s=!1;!s&&e[bi].inlineEffectRunner?.flush(),pv(e);let o=null,a=null;!s&&Uk(r)&&(a=ik(e),o=Xw(a));try{XT(e),hF(r.bindingStartIndex),t!==null&&aD(r,e,t,2,n);let l=(i&3)===3;if(!s)if(l){let h=r.preOrderCheckHooks;h!==null&&Gd(e,h,null)}else{let h=r.preOrderHooks;h!==null&&$d(e,h,0,null),Ug(e,0)}if(jk(e),_D(e,0),r.contentQueries!==null&&fD(r,e),!s)if(l){let h=r.contentCheckHooks;h!==null&&Gd(e,h)}else{let h=r.contentHooks;h!==null&&$d(e,h,1),Ug(e,1)}ck(r,e);let u=r.components;u!==null&&bD(e,u,0);let c=r.viewQuery;if(c!==null&&Fy(2,c,n),!s)if(l){let h=r.viewCheckHooks;h!==null&&Gd(e,h)}else{let h=r.viewHooks;h!==null&&$d(e,h,2),Ug(e,2)}if(r.firstUpdatePass===!0&&(r.firstUpdatePass=!1),e[Bg]){for(let h of e[Bg])h();e[Bg]=null}s||(e[ce]&=-73)}catch(l){throw Su(e),l}finally{a!==null&&(qw(a,o),ok(a)),mv()}}function Uk(r){return r.type!==2}function _D(r,e){for(let t=MC(r);t!==null;t=RC(t)){t[ce]&=~Ia.HasChildViewsToRefresh;for(let n=Ir;n<t.length;n++){let i=t[n];xD(i,e)}}}function jk(r){for(let e=MC(r);e!==null;e=RC(e)){if(!(e[ce]&Ia.HasTransplantedViews))continue;let t=e[Sa];for(let n=0;n<t.length;n++){let i=t[n],s=i[ft];eF(i)}}}function Vk(r,e,t){let n=fs(e,r);xD(n,t)}function xD(r,e){lv(r)&&Ly(r,e)}function Ly(r,e){let n=r[ge],i=r[ce],s=r[oo],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&dg(s)),s&&(s.dirty=!1),r[ce]&=-9217,o)Bk(n,r,n.template,r[xn]);else if(i&8192){_D(r,1);let a=n.components;a!==null&&bD(r,a,1)}}function bD(r,e,t){for(let n=0;n<e.length;n++)Vk(r,e[n],t)}function Vv(r){for(r[bi].changeDetectionScheduler?.notify();r;){r[ce]|=64;let e=Sv(r);if($N(r)&&!e)return r;r=e}return null}var fo=class{get rootNodes(){let e=this._lView,t=e[ge];return lf(t,e,t.firstChild,[])}constructor(e,t,n=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[xn]}set context(e){this._lView[xn]=e}get destroyed(){return(this._lView[ce]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[ft];if(wn(e)){let t=e[Kd],n=t?t.indexOf(this):-1;n>-1&&(py(e,n),rf(t,n))}this._attachedToViewContainer=!1}FC(this._lView[ge],this._lView)}onDestroy(e){YT(this._lView,e)}markForCheck(){Vv(this._cdRefInjectingView||this._lView)}detach(){this._lView[ce]&=-129}reattach(){sy(this._lView),this._lView[ce]|=128}detectChanges(){this._lView[ce]|=1024,Lk(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new J(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,dL(this._lView[ge],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new J(902,!1);this._appRef=e,sy(this._lView)}},Hu=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=Hk;let r=e;return r})();function Hk(r){return Gk(Ut(),de(),(r&16)===16)}function Gk(r,e,t){if(_f(r)&&!t){let n=fs(r.index,e);return new fo(n,n)}else if(r.type&47){let n=e[bn];return new fo(n,e)}return null}var wD=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=$k,e.__NG_ENV_ID__=n=>n;let r=e;return r})(),ky=class extends wD{constructor(e){super(),this._lView=e}onDestroy(e){return YT(this._lView,e),()=>rF(this._lView,e)}};function $k(){return new ky(de())}var sT=new Set;function kf(r){sT.has(r)||(sT.add(r),performance?.mark?.("mark_feature_usage",{detail:{feature:r}}))}var By=class extends nt{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,n){let i=e,s=t||(()=>null),o=n;if(e&&typeof e=="object"){let l=e;i=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=Wg(s),i&&(i=Wg(i)),o&&(o=Wg(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Ye&&e.add(a),a}};function Wg(r){return e=>{setTimeout(r,void 0,e)}}var $r=By;function oT(...r){}function zk(){let r=typeof dt.requestAnimationFrame=="function",e=dt[r?"requestAnimationFrame":"setTimeout"],t=dt[r?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){let n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);let i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}var Se=class r{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new $r(!1),this.onMicrotaskEmpty=new $r(!1),this.onStable=new $r(!1),this.onError=new $r(!1),typeof Zone>"u")throw new J(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!n&&t,i.shouldCoalesceRunChangeDetection=n,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=zk().nativeRequestAnimationFrame,qk(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!r.isInAngularZone())throw new J(909,!1)}static assertNotInAngularZone(){if(r.isInAngularZone())throw new J(909,!1)}run(e,t,n){return this._inner.run(e,t,n)}runTask(e,t,n,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,Wk,oT,oT);try{return s.runTask(o,t,n)}finally{s.cancelTask(o)}}runGuarded(e,t,n){return this._inner.runGuarded(e,t,n)}runOutsideAngular(e){return this._outer.run(e)}},Wk={};function Hv(r){if(r._nesting==0&&!r.hasPendingMicrotasks&&!r.isStable)try{r._nesting++,r.onMicrotaskEmpty.emit(null)}finally{if(r._nesting--,!r.hasPendingMicrotasks)try{r.runOutsideAngular(()=>r.onStable.emit(null))}finally{r.isStable=!0}}}function Xk(r){r.isCheckStableRunning||r.lastRequestAnimationFrameId!==-1||(r.lastRequestAnimationFrameId=r.nativeRequestAnimationFrame.call(dt,()=>{r.fakeTopEventTask||(r.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{r.lastRequestAnimationFrameId=-1,Uy(r),r.isCheckStableRunning=!0,Hv(r),r.isCheckStableRunning=!1},void 0,()=>{},()=>{})),r.fakeTopEventTask.invoke()}),Uy(r))}function qk(r){let e=()=>{Xk(r)};r._inner=r._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,n,i,s,o,a)=>{if(Yk(a))return t.invokeTask(i,s,o,a);try{return aT(r),t.invokeTask(i,s,o,a)}finally{(r.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||r.shouldCoalesceRunChangeDetection)&&e(),lT(r)}},onInvoke:(t,n,i,s,o,a,l)=>{try{return aT(r),t.invoke(i,s,o,a,l)}finally{r.shouldCoalesceRunChangeDetection&&e(),lT(r)}},onHasTask:(t,n,i,s)=>{t.hasTask(i,s),n===i&&(s.change=="microTask"?(r._hasPendingMicrotasks=s.microTask,Uy(r),Hv(r)):s.change=="macroTask"&&(r.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,n,i,s)=>(t.handleError(i,s),r.runOutsideAngular(()=>r.onError.emit(s)),!1)})}function Uy(r){r._hasPendingMicrotasks||(r.shouldCoalesceEventChangeDetection||r.shouldCoalesceRunChangeDetection)&&r.lastRequestAnimationFrameId!==-1?r.hasPendingMicrotasks=!0:r.hasPendingMicrotasks=!1}function aT(r){r._nesting++,r.isStable&&(r.isStable=!1,r.onUnstable.emit(null))}function lT(r){r._nesting--,Hv(r)}function Yk(r){return!Array.isArray(r)||r.length!==1?!1:r[0].data?.__ignore_ng_zone__===!0}var wa=function(r){return r[r.EarlyRead=0]="EarlyRead",r[r.Write=1]="Write",r[r.MixedReadWrite=2]="MixedReadWrite",r[r.Read=3]="Read",r}(wa||{}),Zk={destroy(){}};function Gv(r,e){!e&&YF(Gv);let t=e?.injector??V(Yn);if(!KF(t))return Zk;kf("NgAfterNextRender");let n=t.get(ED),i=n.handler??=new Vy,s=e?.phase??wa.MixedReadWrite,o=()=>{i.unregister(l),a()},a=t.get(wD).onDestroy(o),l=new jy(t,s,()=>{o(),r()});return i.register(l),{destroy:o}}var jy=class{constructor(e,t,n){this.phase=t,this.callbackFn=n,this.zone=e.get(Se),this.errorHandler=e.get(Wn,null,{optional:!0})}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},Vy=class{constructor(){this.executingCallbacks=!1,this.buckets={[wa.EarlyRead]:new Set,[wa.Write]:new Set,[wa.MixedReadWrite]:new Set,[wa.Read]:new Set},this.deferredCallbacks=new Set}validateBegin(){if(this.executingCallbacks)throw new J(102,!1)}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let t of e)t.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},ED=(()=>{let e=class e{constructor(){this.renderDepth=0,this.handler=null,this.internalCallbacks=[]}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){if(this.renderDepth--,this.renderDepth===0){for(let n of this.internalCallbacks)n();this.internalCallbacks.length=0,this.handler?.execute()}}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=W({token:e,providedIn:"root",factory:()=>new e});let r=e;return r})();function Kk(r,e){let t=fs(e,r),n=t[ge];Qk(n,t);let i=t[Xn];i!==null&&t[Tu]===null&&(t[Tu]=Pv(i,t[Da])),$v(n,t,t[xn])}function Qk(r,e){for(let t=e.length;t<r.blueprint.length;t++)e.push(r.blueprint[t])}function $v(r,e,t){pv(e);try{let n=r.viewQuery;n!==null&&Fy(1,n,t);let i=r.template;i!==null&&aD(r,e,i,1,t),r.firstCreatePass&&(r.firstCreatePass=!1),r.staticContentQueries&&fD(r,e),r.staticViewQueries&&Fy(2,r.viewQuery,t);let s=r.components;s!==null&&Jk(e,s)}catch(n){throw r.firstCreatePass&&(r.incompleteFirstPass=!0,r.firstCreatePass=!1),n}finally{e[ce]&=-5,mv()}}function Jk(r,e){for(let t=0;t<e.length;t++)Kk(r,e[t])}function uf(r,e,t){let n=t?r.styles:null,i=t?r.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=Jg(i,a);else if(s==2){let l=a,u=e[++o];n=Jg(n,l+": "+u+";")}}t?r.styles=n:r.stylesWithoutHost=n,t?r.classes=i:r.classesWithoutHost=i}var cf=class extends Rf{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=cs(e);return new Pa(t,this.ngModule)}};function uT(r){let e=[];for(let t in r)if(r.hasOwnProperty(t)){let n=r[t];e.push({propName:n,templateName:t})}return e}function eB(r){let e=r.toLowerCase();return e==="svg"?$T:e==="math"?qN:null}var Hy=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,n){n=yf(n);let i=this.injector.get(e,$g,n);return i!==$g||t===$g?i:this.parentInjector.get(e,t,n)}},Pa=class extends of{get inputs(){let e=this.componentDef,t=e.inputTransforms,n=uT(e.inputs);if(t!==null)for(let i of n)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return n}get outputs(){return uT(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=UN(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,n,i){i=i||this.ngModule;let s=i instanceof tr?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let o=s?new Hy(e,s):e,a=o.get(Au,null);if(a===null)throw new J(407,!1);let l=o.get(ek,null),u=o.get(ED,null),c=o.get(Ty,null),h={rendererFactory:a,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:u,changeDetectionScheduler:c},d=a.createRenderer(null,this.componentDef),f=this.componentDef.selectors[0][0]||"div",p=n?fk(d,n,this.componentDef.encapsulation,o):OC(d,f,eB(f)),m=512;this.componentDef.signals?m|=4096:this.componentDef.onPush||(m|=16);let g=null;p!==null&&(g=Pv(p,o,!0));let y=Bv(0,null,null,1,0,null,null,null,null,null,null),_=Nf(null,y,null,m,null,null,h,d,o,null,g);pv(_);let v,x;try{let b=this.componentDef,C,E=null;b.findHostDirectiveDefs?(C=[],E=new Map,b.findHostDirectiveDefs(b,C,E),C.push(b)):C=[b];let w=tB(_,p),T=rB(w,p,b,C,_,h,d);x=WT(y,er),p&&sB(d,b,p,n),t!==void 0&&oB(x,this.ngContentSelectors,t),v=iB(T,b,C,E,_,[aB]),$v(y,_,null)}finally{mv()}return new Gy(this.componentType,v,ka(x,_),_,x)}},Gy=class extends Cy{constructor(e,t,n,i,s){super(),this.location=n,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new fo(i,void 0,!1),this.componentType=e}setInput(e,t){let n=this._tNode.inputs,i;if(n!==null&&(i=n[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let s=this._rootLView;jv(s[ge],s,i,e,t),this.previousInputValues.set(e,t);let o=fs(this._tNode.index,s);Vv(o)}}get injector(){return new io(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function tB(r,e){let t=r[ge],n=er;return r[n]=e,Ua(t,n,2,"#host",null)}function rB(r,e,t,n,i,s,o){let a=i[ge];nB(n,r,e,o);let l=null;e!==null&&(l=Pv(e,i[Da]));let u=s.rendererFactory.createRenderer(e,t),c=16;t.signals?c=4096:t.onPush&&(c=64);let h=Nf(i,lD(t),null,c,i[r.index],r,s,u,null,null,l);return a.firstCreatePass&&Ny(a,r,n.length-1),Lf(i,h),i[r.index]=h}function nB(r,e,t,n){for(let i of r)e.mergedAttrs=Eu(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(uf(e,e.mergedAttrs,!0),t!==null&&HC(n,t,e))}function iB(r,e,t,n,i,s){let o=Ut(),a=i[ge],l=Xr(o,i);uD(a,i,o,t,null,n);for(let c=0;c<t.length;c++){let h=o.directiveStart+c,d=ho(i,a,h,o);hs(d,i)}cD(a,i,o),l&&hs(l,i);let u=ho(i,a,o.directiveStart+o.componentOffset,o);if(r[xn]=i[xn]=u,s!==null)for(let c of s)c(u,e);return Fv(a,o,r),u}function sB(r,e,t,n){if(n)ny(r,t,["ng-version","17.0.8"]);else{let{attrs:i,classes:s}=jN(e.selectors[0]);i&&ny(r,t,i),s&&s.length>0&&VC(r,t,s.join(" "))}}function oB(r,e,t){let n=r.projection=[];for(let i=0;i<e.length;i++){let s=t[i];n.push(s!=null?Array.from(s):null)}}function aB(){let r=Ut();Tf(de()[ge],r)}function lB(r){return Object.getPrototypeOf(r.prototype).constructor}function uB(r){let e=lB(r.type),t=!0,n=[r];for(;e;){let i;if(wi(r))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new J(903,!1);i=e.\u0275dir}if(i){if(t){n.push(i);let o=r;o.inputs=Vd(r.inputs),o.inputTransforms=Vd(r.inputTransforms),o.declaredInputs=Vd(r.declaredInputs),o.outputs=Vd(r.outputs);let a=i.hostBindings;a&&fB(r,a);let l=i.viewQuery,u=i.contentQueries;if(l&&hB(r,l),u&&dB(r,u),Ld(r.inputs,i.inputs),Ld(r.declaredInputs,i.declaredInputs),Ld(r.outputs,i.outputs),i.inputTransforms!==null&&(o.inputTransforms===null&&(o.inputTransforms={}),Ld(o.inputTransforms,i.inputTransforms)),wi(i)&&i.data.animation){let c=r.data;c.animation=(c.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(r),a===uB&&(t=!1)}}e=Object.getPrototypeOf(e)}cB(n)}function cB(r){let e=0,t=null;for(let n=r.length-1;n>=0;n--){let i=r[n];i.hostVars=e+=i.hostVars,i.hostAttrs=Eu(i.hostAttrs,t=Eu(t,i.hostAttrs))}}function Vd(r){return r===Ca?{}:r===mr?[]:r}function hB(r,e){let t=r.viewQuery;t?r.viewQuery=(n,i)=>{e(n,i),t(n,i)}:r.viewQuery=e}function dB(r,e){let t=r.contentQueries;t?r.contentQueries=(n,i,s)=>{e(n,i,s),t(n,i,s)}:r.contentQueries=e}function fB(r,e){let t=r.hostBindings;t?r.hostBindings=(n,i)=>{e(n,i),t(n,i)}:r.hostBindings=e}function zv(r){let e=r.inputConfig,t={};for(let n in e)if(e.hasOwnProperty(n)){let i=e[n];Array.isArray(i)&&i[2]&&(t[n]=i[2])}r.inputTransforms=t}function ja(r,e,t){return r[e]=t}function TD(r,e){return r[e]}function zr(r,e,t){let n=r[e];return Object.is(n,t)?!1:(r[e]=t,!0)}function Mu(r,e,t,n){let i=zr(r,e,t);return zr(r,e+1,n)||i}function pB(r,e,t,n,i){let s=Mu(r,e,t,n);return zr(r,e+2,i)||s}function CD(r,e,t,n,i,s){let o=Mu(r,e,t,n);return Mu(r,e+2,i,s)||o}function Wv(r,e,t,n){let i=de(),s=Lu();if(zr(i,s,e)){let o=Ze(),a=ku();Rk(a,i,r,e,t,n)}return Wv}function DD(r,e,t,n){return zr(r,Lu(),t)?e+so(t)+n:Mr}function mB(r,e,t,n,i,s){let o=cF(),a=Mu(r,o,t,i);return hv(2),a?e+so(t)+n+so(i)+s:Mr}function Hd(r,e){return r<<17|e<<2}function po(r){return r>>17&32767}function gB(r){return(r&2)==2}function yB(r,e){return r&131071|e<<17}function $y(r){return r|2}function Oa(r){return(r&131068)>>2}function Xg(r,e){return r&-131069|e<<2}function vB(r){return(r&1)===1}function zy(r){return r|1}function _B(r,e,t,n,i,s){let o=s?e.classBindings:e.styleBindings,a=po(o),l=Oa(o);r[n]=t;let u=!1,c;if(Array.isArray(t)){let h=t;c=h[1],(c===null||Bu(h,c)>0)&&(u=!0)}else c=t;if(i)if(l!==0){let d=po(r[a+1]);r[n+1]=Hd(d,a),d!==0&&(r[d+1]=Xg(r[d+1],n)),r[a+1]=yB(r[a+1],n)}else r[n+1]=Hd(a,0),a!==0&&(r[a+1]=Xg(r[a+1],n)),a=n;else r[n+1]=Hd(l,0),a===0?a=n:r[l+1]=Xg(r[l+1],n),l=n;u&&(r[n+1]=$y(r[n+1])),cT(r,c,n,!0,s),cT(r,c,n,!1,s),xB(e,c,r,n,s),o=Hd(a,l),s?e.classBindings=o:e.styleBindings=o}function xB(r,e,t,n,i){let s=i?r.residualClasses:r.residualStyles;s!=null&&typeof e=="string"&&Bu(s,e)>=0&&(t[n+1]=zy(t[n+1]))}function cT(r,e,t,n,i){let s=r[t+1],o=e===null,a=n?po(s):Oa(s),l=!1;for(;a!==0&&(l===!1||o);){let u=r[a],c=r[a+1];bB(u,e)&&(l=!0,r[a+1]=n?zy(c):$y(c)),a=n?po(c):Oa(c)}l&&(r[t+1]=n?$y(s):zy(s))}function bB(r,e){return r===null||e==null||(Array.isArray(r)?r[1]:r)===e?!0:Array.isArray(r)&&typeof e=="string"?Bu(r,e)>=0:!1}var vn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function wB(r){return r.substring(vn.key,vn.keyEnd)}function EB(r){return TB(r),SD(r,ID(r,0,vn.textEnd))}function SD(r,e){let t=vn.textEnd;return t===e?-1:(e=vn.keyEnd=CB(r,vn.key=e,t),ID(r,e,t))}function TB(r){vn.key=0,vn.keyEnd=0,vn.value=0,vn.valueEnd=0,vn.textEnd=r.length}function ID(r,e,t){for(;e<t&&r.charCodeAt(e)<=32;)e++;return e}function CB(r,e,t){for(;e<t&&r.charCodeAt(e)>32;)e++;return e}function DB(r,e,t){let n=de(),i=Lu();if(zr(n,i,e)){let s=Ze(),o=ku();Ff(s,o,n,r,e,n[We],t,!1)}return DB}function Wy(r,e,t,n,i){let s=e.inputs,o=i?"class":"style";jv(r,t,s[o],o,n)}function AD(r,e,t){return MD(r,e,t,!1),AD}function SB(r,e){return MD(r,e,null,!0),SB}function yK(r){AB(FB,IB,r,!0)}function IB(r,e){for(let t=EB(e);t>=0;t=SD(e,t))bv(r,wB(e),!0)}function MD(r,e,t,n){let i=de(),s=Ze(),o=hv(2);if(s.firstUpdatePass&&PD(s,r,o,n),e!==Mr&&zr(i,o,e)){let a=s.data[ms()];OD(s,a,i,i[We],r,i[o+1]=kB(e,t),n,o)}}function AB(r,e,t,n){let i=Ze(),s=hv(2);i.firstUpdatePass&&PD(i,null,s,n);let o=de();if(t!==Mr&&zr(o,s,t)){let a=i.data[ms()];if(ND(a,n)&&!RD(i,s)){let l=n?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(t=Jg(l,t||"")),Wy(i,a,o,t,n)}else LB(i,a,o,o[We],o[s+1],o[s+1]=NB(r,e,t),n,s)}}function RD(r,e){return e>=r.expandoStartIndex}function PD(r,e,t,n){let i=r.data;if(i[t+1]===null){let s=i[ms()],o=RD(r,t);ND(s,n)&&e===null&&!o&&(e=!1),e=MB(i,s,e,n),_B(i,s,e,t,o,n)}}function MB(r,e,t,n){let i=dv(r),s=n?e.residualClasses:e.residualStyles;if(i===null)(n?e.classBindings:e.styleBindings)===0&&(t=qg(null,r,e,t,n),t=Ru(t,e.attrs,n),s=null);else{let o=e.directiveStylingLast;if(o===-1||r[o]!==i)if(t=qg(i,r,e,t,n),s===null){let l=RB(r,e,n);l!==void 0&&Array.isArray(l)&&(l=qg(null,r,e,l[1],n),l=Ru(l,e.attrs,n),PB(r,e,n,l))}else s=OB(r,e,n)}return s!==void 0&&(n?e.residualClasses=s:e.residualStyles=s),t}function RB(r,e,t){let n=t?e.classBindings:e.styleBindings;if(Oa(n)!==0)return r[po(n)]}function PB(r,e,t,n){let i=t?e.classBindings:e.styleBindings;r[po(i)]=n}function OB(r,e,t){let n,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=r[s].hostAttrs;n=Ru(n,o,t)}return Ru(n,e.attrs,t)}function qg(r,e,t,n,i){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],n=Ru(n,s.hostAttrs,i),s!==r);)a++;return r!==null&&(t.directiveStylingLast=a),n}function Ru(r,e,t){let n=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===n&&(Array.isArray(r)||(r=r===void 0?[]:["",r]),bv(r,o,t?!0:e[++s]))}return r===void 0?null:r}function NB(r,e,t){if(t==null||t==="")return mr;let n=[],i=Yr(t);if(Array.isArray(i))for(let s=0;s<i.length;s++)r(n,i[s],!0);else if(typeof i=="object")for(let s in i)i.hasOwnProperty(s)&&r(n,s,i[s]);else typeof i=="string"&&e(n,i);return n}function FB(r,e,t){let n=String(e);n!==""&&!n.includes(" ")&&bv(r,n,t)}function LB(r,e,t,n,i,s,o,a){i===Mr&&(i=mr);let l=0,u=0,c=0<i.length?i[0]:null,h=0<s.length?s[0]:null;for(;c!==null||h!==null;){let d=l<i.length?i[l+1]:void 0,f=u<s.length?s[u+1]:void 0,p=null,m;c===h?(l+=2,u+=2,d!==f&&(p=h,m=f)):h===null||c!==null&&c<h?(l+=2,p=c):(u+=2,p=h,m=f),p!==null&&OD(r,e,t,n,p,m,o,a),c=l<i.length?i[l]:null,h=u<s.length?s[u]:null}}function OD(r,e,t,n,i,s,o,a){if(!(e.type&3))return;let l=r.data,u=l[a+1],c=vB(u)?hT(l,e,t,i,Oa(u),o):void 0;if(!hf(c)){hf(s)||gB(u)&&(s=hT(l,null,t,i,a,o));let h=zT(ms(),t);DL(n,o,h,i,s)}}function hT(r,e,t,n,i,s){let o=e===null,a;for(;i>0;){let l=r[i],u=Array.isArray(l),c=u?l[1]:l,h=c===null,d=t[i+1];d===Mr&&(d=h?mr:void 0);let f=h?Vg(d,n):c===n?d:void 0;if(u&&!hf(f)&&(f=Vg(l,n)),hf(f)&&(a=f,o))return a;let p=r[i+1];i=o?po(p):Oa(p)}if(e!==null){let l=s?e.residualClasses:e.residualStyles;l!=null&&(a=Vg(l,n))}return a}function hf(r){return r!==void 0}function kB(r,e){return r==null||r===""||(typeof e=="string"?r=r+e:typeof r=="object"&&(r=Bt(Yr(r)))),r}function ND(r,e){return(r.flags&(e?8:16))!==0}var vK=new RegExp(`^(\\d+)*(${XL}|${WL})*(.*)`);var BB=(r,e)=>null;function dT(r,e){return BB(r,e)}function UB(r,e,t,n){let i=e.tView,o=r[ce]&4096?4096:16,a=Nf(r,i,t,o,null,e,null,null,null,n?.injector??null,n?.dehydratedView??null),l=r[e.index];a[Fu]=l;let u=r[Hn];return u!==null&&(a[Hn]=u.createEmbeddedView(i)),$v(i,a,t),a}function fT(r,e){return!e||e.firstChild===null||IC(r)}function jB(r,e,t,n=!0){let i=e[ge];if(pL(i,e,r,t),n){let o=my(t,r),a=e[We],l=Iv(a,r[ao]);l!==null&&hL(i,r[Ar],a,e,l,o)}let s=e[Tu];s!==null&&s.firstChild!==null&&(s.firstChild=null)}var Dn=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=VB;let r=e;return r})();function VB(){let r=Ut();return LD(r,de())}var HB=Dn,FD=class extends HB{constructor(e,t,n){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=n}get element(){return ka(this._hostTNode,this._hostLView)}get injector(){return new io(this._hostTNode,this._hostLView)}get parentInjector(){let e=gv(this._hostTNode,this._hostLView);if(aC(e)){let t=Jd(e,this._hostLView),n=Qd(e),i=t[ge].data[n+8];return new io(i,t)}else return new io(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=pT(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Ir}createEmbeddedView(e,t,n){let i,s;typeof n=="number"?i=n:n!=null&&(i=n.index,s=n.injector);let o=dT(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,fT(this._hostTNode,o)),a}createComponent(e,t,n,i,s){let o=e&&!OF(e),a;if(o)a=t;else{let p=t||{};a=p.index,n=p.injector,i=p.projectableNodes,s=p.environmentInjector||p.ngModuleRef}let l=o?e:new Pa(cs(e)),u=n||this.parentInjector;if(!s&&l.ngModule==null){let m=(o?u:this.parentInjector).get(tr,null);m&&(s=m)}let c=cs(l.componentType??{}),h=dT(this._lContainer,c?.id??null),d=h?.firstChild??null,f=l.create(u,i,d,s);return this.insertImpl(f.hostView,a,fT(this._hostTNode,h)),f}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,n){let i=e._lView;if(JN(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=i[ft],u=new FD(l,l[Ar],l[ft]);u.detach(u.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return jB(o,i,s,n),e.attachToViewContainerRef(),gC(Yg(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=pT(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),n=py(this._lContainer,t);n&&(rf(Yg(this._lContainer),t),FC(n[ge],n))}detach(e){let t=this._adjustIndex(e,-1),n=py(this._lContainer,t);return n&&rf(Yg(this._lContainer),t)!=null?new fo(n):null}_adjustIndex(e,t=0){return e??this.length+t}};function pT(r){return r[Kd]}function Yg(r){return r[Kd]||(r[Kd]=[])}function LD(r,e){let t,n=e[r.index];return wn(n)?t=n:(t=dD(n,e,null,r),e[r.index]=t,Lf(e,t)),$B(t,e,r,n),new FD(t,r,e)}function GB(r,e){let t=r[We],n=t.createComment(""),i=Xr(e,r),s=Iv(t,i);return sf(t,s,n,xL(t,i),!1),n}var $B=XB,zB=(r,e,t)=>!1;function WB(r,e,t){return zB(r,e,t)}function XB(r,e,t,n){if(r[ao])return;let i;t.type&8?i=$n(n):i=GB(e,t),r[ao]=i}function qB(r,e,t,n,i,s,o,a,l){let u=e.consts,c=Ua(e,r,4,o||null,Aa(u,a));Uv(e,t,c,Aa(u,l)),Tf(e,c);let h=c.tView=Bv(2,c,n,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,c),h.queries=e.queries.embeddedTView(c)),c}function YB(r,e,t,n,i,s,o,a){let l=de(),u=Ze(),c=r+er,h=u.firstCreatePass?qB(c,u,l,e,t,n,i,s,o):u.data[c];mo(h,!1);let d=ZB(u,l,h,r);wf()&&If(u,l,d,h),hs(d,l);let f=dD(d,l,d,h);return l[c]=f,Lf(l,f),WB(f,h,l),xf(h)&&Lv(u,l,h),o!=null&&kv(l,h,a),YB}var ZB=KB;function KB(r,e,t,n){return Ef(!0),e[We].createComment("")}function QB(r,e,t,n,i,s){let o=e.consts,a=Aa(o,i),l=Ua(e,r,2,n,a);return Uv(e,t,l,Aa(o,s)),l.attrs!==null&&uf(l,l.attrs,!1),l.mergedAttrs!==null&&uf(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function kD(r,e,t,n){let i=de(),s=Ze(),o=er+r,a=i[We],l=s.firstCreatePass?QB(o,s,i,e,t,n):s.data[o],u=JB(s,i,l,a,e,r);i[o]=u;let c=xf(l);return mo(l,!0),HC(a,u,l),(l.flags&32)!==32&&wf()&&If(s,i,u,l),nF()===0&&hs(u,i),iF(),c&&(Lv(s,i,l),Fv(s,l,i)),n!==null&&kv(i,l),kD}function BD(){let r=Ut();uv()?cv():(r=r.parent,mo(r,!1));let e=r;oF(e)&&aF(),sF();let t=Ze();return t.firstCreatePass&&(Tf(t,r),av(r)&&t.queries.elementEnd(r)),e.classesWithoutHost!=null&&bF(e)&&Wy(t,e,de(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&wF(e)&&Wy(t,e,de(),e.stylesWithoutHost,!1),BD}function Xv(r,e,t,n){return kD(r,e,t,n),BD(),Xv}var JB=(r,e,t,n,i,s)=>(Ef(!0),OC(n,i,yF()));function e2(r,e,t,n,i){let s=e.consts,o=Aa(s,n),a=Ua(e,r,8,"ng-container",o);o!==null&&uf(a,o,!0);let l=Aa(s,i);return Uv(e,t,a,l),e.queries!==null&&e.queries.elementStart(e,a),a}function UD(r,e,t){let n=de(),i=Ze(),s=r+er,o=i.firstCreatePass?e2(s,i,n,e,t):i.data[s];mo(o,!0);let a=r2(i,n,o,r);return n[s]=a,wf()&&If(i,n,a,o),hs(a,n),xf(o)&&(Lv(i,n,o),Fv(i,o,n)),t!=null&&kv(n,o),UD}function jD(){let r=Ut(),e=Ze();return uv()?cv():(r=r.parent,mo(r,!1)),e.firstCreatePass&&(Tf(e,r),av(r)&&e.queries.elementEnd(r)),jD}function t2(r,e,t){return UD(r,e,t),jD(),t2}var r2=(r,e,t,n)=>(Ef(!0),uL(e[We],""));function xK(){return de()}function n2(r,e,t){let n=de(),i=Lu();if(zr(n,i,e)){let s=Ze(),o=ku();Ff(s,o,n,r,e,n[We],t,!0)}return n2}function i2(r,e,t){let n=de(),i=Lu();if(zr(n,i,e)){let s=Ze(),o=ku(),a=dv(s.data),l=gD(a,o,n);Ff(s,o,n,r,e,l,t,!0)}return i2}var no=void 0;function s2(r){let e=r,t=Math.floor(Math.abs(r)),n=r.toString().replace(/^[^.]*\.?/,"").length;return t===1&&n===0?1:5}var o2=["en",[["a","p"],["AM","PM"],no],[["AM","PM"],no,no],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],no,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],no,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",no,"{1} 'at' {0}",no],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",s2],bu={};function VD(r,e,t){typeof e!="string"&&(t=e,e=r[Xe.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),bu[e]=r,t&&(bu[e][Xe.ExtraData]=t)}function Rr(r){let e=a2(r),t=mT(e);if(t)return t;let n=e.split("-")[0];if(t=mT(n),t)return t;if(n==="en")return o2;throw new J(701,!1)}function mT(r){return r in bu||(bu[r]=dt.ng&&dt.ng.common&&dt.ng.common.locales&&dt.ng.common.locales[r]),bu[r]}var Xe=function(r){return r[r.LocaleId=0]="LocaleId",r[r.DayPeriodsFormat=1]="DayPeriodsFormat",r[r.DayPeriodsStandalone=2]="DayPeriodsStandalone",r[r.DaysFormat=3]="DaysFormat",r[r.DaysStandalone=4]="DaysStandalone",r[r.MonthsFormat=5]="MonthsFormat",r[r.MonthsStandalone=6]="MonthsStandalone",r[r.Eras=7]="Eras",r[r.FirstDayOfWeek=8]="FirstDayOfWeek",r[r.WeekendRange=9]="WeekendRange",r[r.DateFormat=10]="DateFormat",r[r.TimeFormat=11]="TimeFormat",r[r.DateTimeFormat=12]="DateTimeFormat",r[r.NumberSymbols=13]="NumberSymbols",r[r.NumberFormats=14]="NumberFormats",r[r.CurrencyCode=15]="CurrencyCode",r[r.CurrencySymbol=16]="CurrencySymbol",r[r.CurrencyName=17]="CurrencyName",r[r.Currencies=18]="Currencies",r[r.Directionality=19]="Directionality",r[r.PluralCase=20]="PluralCase",r[r.ExtraData=21]="ExtraData",r}(Xe||{});function a2(r){return r.toLowerCase().replace(/_/g,"-")}var df="en-US";var l2=df;function u2(r){gN(r,"Expected localeId to be defined"),typeof r=="string"&&(l2=r.toLowerCase().replace(/_/g,"-"))}function Va(r){return!!r&&typeof r.then=="function"}function qv(r){return!!r&&typeof r.subscribe=="function"}function Yv(r,e,t,n){let i=de(),s=Ze(),o=Ut();return HD(s,i,i[We],o,r,e,n),Yv}function c2(r,e){let t=Ut(),n=de(),i=Ze(),s=dv(i.data),o=gD(s,t,n);return HD(i,n,o,t,r,e),c2}function h2(r,e,t,n){let i=r.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===n){let a=e[Cu],l=i[s+2];return a.length>l?a[l]:null}typeof o=="string"&&(s+=2)}return null}function HD(r,e,t,n,i,s,o){let a=xf(n),u=r.firstCreatePass&&mD(r),c=e[xn],h=pD(e),d=!0;if(n.type&3||o){let m=Xr(n,e),g=o?o(m):m,y=h.length,_=o?x=>o($n(x[n.index])):n.index,v=null;if(!o&&a&&(v=h2(r,e,i,n.index)),v!==null){let x=v.__ngLastListenerFn__||v;x.__ngNextListenerFn__=s,v.__ngLastListenerFn__=s,d=!1}else{s=yT(n,e,c,s,!1);let x=t.listen(g,i,s);h.push(s,x),u&&u.push(i,_,y,y+1)}}else s=yT(n,e,c,s,!1);let f=n.outputs,p;if(d&&f!==null&&(p=f[i])){let m=p.length;if(m)for(let g=0;g<m;g+=2){let y=p[g],_=p[g+1],b=e[y][_].subscribe(s),C=h.length;h.push(s,b),u&&u.push(i,n.index,C,-(C+1))}}}function gT(r,e,t,n){try{return jn(6,e,t),t(n)!==!1}catch(i){return yD(r,i),!1}finally{jn(7,e,t)}}function yT(r,e,t,n,i){return function s(o){if(o===Function)return n;let a=r.componentOffset>-1?fs(r.index,e):e;Vv(a);let l=gT(e,t,n,o),u=s.__ngNextListenerFn__;for(;u;)l=gT(e,t,u,o)&&l,u=u.__ngNextListenerFn__;return i&&l===!1&&o.preventDefault(),l}}function bK(r=1){return gF(r)}function d2(r,e){let t=null,n=NN(r);for(let i=0;i<e.length;i++){let s=e[i];if(s==="*"){t=i;continue}if(n===null?PT(r,s,!0):kN(n,s))return i}return t}function wK(r){let e=de()[bn][Ar];if(!e.projection){let t=r?r.length:1,n=e.projection=yC(t,null),i=n.slice(),s=e.child;for(;s!==null;){let o=r?d2(s,r):0;o!==null&&(i[o]?i[o].projectionNext=s:n[o]=s,i[o]=s),s=s.next}}}function EK(r,e=0,t){let n=de(),i=Ze(),s=Ua(i,er+r,16,null,t||null);s.projection===null&&(s.projection=e),cv(),(!n[Tu]||KT())&&(s.flags&32)!==32&&TL(i,n,s)}function f2(r,e,t){return GD(r,"",e,"",t),f2}function GD(r,e,t,n,i){let s=de(),o=DD(s,e,t,n);if(o!==Mr){let a=Ze(),l=ku();Ff(a,l,s,r,o,s[We],i,!1)}return GD}function p2(r,e,t,n){t>=r.data.length&&(r.data[t]=null,r.blueprint[t]=null),e[t]=n}function TK(r){let e=uF();return bf(e,er+r)}function CK(r,e=""){let t=de(),n=Ze(),i=r+er,s=n.firstCreatePass?Ua(n,i,1,e,null):n.data[i],o=m2(n,t,s,e,r);t[i]=o,wf()&&If(n,t,o,s),mo(s,!1)}var m2=(r,e,t,n,i)=>(Ef(!0),aL(e[We],n));function g2(r){return $D("",r,""),g2}function $D(r,e,t){let n=de(),i=DD(n,r,e,t);return i!==Mr&&vD(n,ms(),i),$D}function y2(r,e,t,n,i){let s=de(),o=mB(s,r,e,t,n,i);return o!==Mr&&vD(s,ms(),o),y2}function v2(r,e,t){let n=Ze();if(n.firstCreatePass){let i=wi(r);Xy(t,n.data,n.blueprint,i,!0),Xy(e,n.data,n.blueprint,i,!1)}}function Xy(r,e,t,n,i){if(r=Jt(r),Array.isArray(r))for(let s=0;s<r.length;s++)Xy(r[s],e,t,n,i);else{let s=Ze(),o=de(),a=Ut(),l=Ra(r)?r:Jt(r.provide),u=EC(r),c=a.providerIndexes&1048575,h=a.directiveStart,d=a.providerIndexes>>20;if(Ra(r)||!r.multi){let f=new co(u,i,we),p=Kg(l,e,i?c:c+d,h);p===-1?(ly(tf(a,o),s,l),Zg(s,r,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(f),o.push(f)):(t[p]=f,o[p]=f)}else{let f=Kg(l,e,c+d,h),p=Kg(l,e,c,c+d),m=f>=0&&t[f],g=p>=0&&t[p];if(i&&!g||!i&&!m){ly(tf(a,o),s,l);let y=b2(i?x2:_2,t.length,i,n,u);!i&&g&&(t[p].providerFactory=y),Zg(s,r,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),o.push(y)}else{let y=zD(t[i?p:f],u,!i&&n);Zg(s,r,f>-1?f:p,y)}!i&&n&&g&&t[p].componentProviders++}}}function Zg(r,e,t,n){let i=Ra(e),s=HF(e);if(i||s){let l=(s?Jt(e.useClass):e).prototype.ngOnDestroy;if(l){let u=r.destroyHooks||(r.destroyHooks=[]);if(!i&&e.multi){let c=u.indexOf(t);c===-1?u.push(t,[n,l]):u[c+1].push(n,l)}else u.push(t,l)}}}function zD(r,e,t){return t&&r.componentProviders++,r.multi.push(e)-1}function Kg(r,e,t,n){for(let i=t;i<n;i++)if(e[i]===r)return i;return-1}function _2(r,e,t,n){return qy(this.multi,[])}function x2(r,e,t,n){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=ho(t,t[ge],this.providerFactory.index,n);s=a.slice(0,o),qy(i,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],qy(i,s);return s}function qy(r,e){for(let t=0;t<r.length;t++){let n=r[t];e.push(n())}return e}function b2(r,e,t,n,i){let s=new co(r,t,we);return s.multi=[],s.index=e,s.componentProviders=0,zD(s,i,n&&!t),s}function DK(r,e=[]){return t=>{t.providersResolver=(n,i)=>v2(n,i?i(r):r,e)}}var ds=class{},Pu=class{};var Yy=class extends ds{constructor(e,t,n){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new cf(this);let i=kT(e);this._bootstrapComponents=SC(i.bootstrap),this._r3Injector=TC(e,t,[{provide:ds,useValue:this},{provide:Rf,useValue:this.componentFactoryResolver},...n],Bt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Zy=class extends Pu{constructor(e){super(),this.moduleType=e}create(e){return new Yy(this.moduleType,e,[])}};var ff=class extends ds{constructor(e){super(),this.componentFactoryResolver=new cf(this),this.instance=null;let t=new Iu([...e.providers,{provide:ds,useValue:this},{provide:Rf,useValue:this.componentFactoryResolver}],e.parent||Ev(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Bf(r,e,t=null){return new ff({providers:r,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var w2=(()=>{let e=class e{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let i=xC(!1,n.type),s=i.length>0?Bf([i],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,s)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=W({token:e,providedIn:"environment",factory:()=>new e(j(tr))});let r=e;return r})();function WD(r){kf("NgStandalone"),r.getStandaloneInjector=e=>e.get(w2).getOrCreateStandaloneInjector(r)}function SK(r,e,t){let n=ps()+r,i=de();return i[n]===Mr?ja(i,n,t?e.call(t):e()):TD(i,n)}function IK(r,e,t,n){return XD(de(),ps(),r,e,t,n)}function AK(r,e,t,n,i){return qD(de(),ps(),r,e,t,n,i)}function MK(r,e,t,n,i,s,o){return T2(de(),ps(),r,e,t,n,i,s,o)}function RK(r,e,t,n,i,s,o,a){let l=ps()+r,u=de(),c=CD(u,l,t,n,i,s);return zr(u,l+4,o)||c?ja(u,l+5,a?e.call(a,t,n,i,s,o):e(t,n,i,s,o)):TD(u,l+5)}function Uf(r,e){let t=r[e];return t===Mr?void 0:t}function XD(r,e,t,n,i,s){let o=e+t;return zr(r,o,i)?ja(r,o+1,s?n.call(s,i):n(i)):Uf(r,o+1)}function qD(r,e,t,n,i,s,o){let a=e+t;return Mu(r,a,i,s)?ja(r,a+2,o?n.call(o,i,s):n(i,s)):Uf(r,a+2)}function E2(r,e,t,n,i,s,o,a){let l=e+t;return pB(r,l,i,s,o)?ja(r,l+3,a?n.call(a,i,s,o):n(i,s,o)):Uf(r,l+3)}function T2(r,e,t,n,i,s,o,a,l){let u=e+t;return CD(r,u,i,s,o,a)?ja(r,u+4,l?n.call(l,i,s,o,a):n(i,s,o,a)):Uf(r,u+4)}function PK(r,e){let t=Ze(),n,i=r+er;t.firstCreatePass?(n=C2(e,t.pipeRegistry),t.data[i]=n,n.onDestroy&&(t.destroyHooks??=[]).push(i,n.onDestroy)):n=t.data[i];let s=n.factory||(n.factory=lo(n.type,!0)),o,a=pr(we);try{let l=ef(!1),u=s();return ef(l),p2(t,de(),i,u),u}finally{pr(a)}}function C2(r,e){if(e)for(let t=e.length-1;t>=0;t--){let n=e[t];if(r===n.name)return n}}function OK(r,e,t){let n=r+er,i=de(),s=bf(i,n);return Zv(i,n)?XD(i,ps(),e,s.transform,t,s):s.transform(t)}function NK(r,e,t,n){let i=r+er,s=de(),o=bf(s,i);return Zv(s,i)?qD(s,ps(),e,o.transform,t,n,o):o.transform(t,n)}function FK(r,e,t,n,i){let s=r+er,o=de(),a=bf(o,s);return Zv(o,s)?E2(o,ps(),e,a.transform,t,n,i,a):a.transform(t,n,i)}function Zv(r,e){return r[ge].data[e].pure}function D2(){return this._results[Symbol.iterator]()}var Ky=class r{get changes(){return this._changes??=new $r}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let t=r.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=D2)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let n=FF(e);(this._changesDetected=!NF(this._results,n,t))&&(this._results=n,this.length=n.length,this.last=n[this.length-1],this.first=n[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}},Ti=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=A2;let r=e;return r})(),S2=Ti,I2=class extends S2{constructor(e,t,n){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=n}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,n){let i=UB(this._declarationLView,this._declarationTContainer,e,{injector:t,dehydratedView:n});return new fo(i)}};function A2(){return jf(Ut(),de())}function jf(r,e){return r.type&4?new I2(e,r,ka(r,e)):null}var Qy=class r{constructor(e){this.queryList=e,this.matches=null}clone(){return new r(this.queryList)}setDirty(){this.queryList.setDirty()}},Jy=class r{constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let n=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let s=0;s<n;s++){let o=t.getByIndex(s),a=this.queries[o.indexInDeclarationView];i.push(a.clone())}return new r(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)QD(e,t).matches!==null&&this.queries[t].setDirty()}},pf=class{constructor(e,t,n=null){this.predicate=e,this.flags=t,this.read=n}},ev=class r{constructor(e=[]){this.queries=e}elementStart(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let n=0;n<this.length;n++){let i=t!==null?t.length:0,s=this.getByIndex(n).embeddedTView(e,i);s&&(s.indexInDeclarationView=n,t!==null?t.push(s):t=[s])}return t!==null?new r(t):null}template(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},tv=class r{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new r(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,n=e.parent;for(;n!==null&&n.type&8&&n.index!==t;)n=n.parent;return t===(n!==null?n.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let n=this.metadata.predicate;if(Array.isArray(n))for(let i=0;i<n.length;i++){let s=n[i];this.matchTNodeWithReadOption(e,t,M2(t,s)),this.matchTNodeWithReadOption(e,t,zd(t,e,s,!1,!1))}else n===Ti?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,zd(t,e,n,!1,!1))}matchTNodeWithReadOption(e,t,n){if(n!==null){let i=this.metadata.read;if(i!==null)if(i===Zn||i===Dn||i===Ti&&t.type&4)this.addMatch(t.index,-2);else{let s=zd(t,e,i,!1,!1);s!==null&&this.addMatch(t.index,s)}else this.addMatch(t.index,n)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function M2(r,e){let t=r.localNames;if(t!==null){for(let n=0;n<t.length;n+=2)if(t[n]===e)return t[n+1]}return null}function R2(r,e){return r.type&11?ka(r,e):r.type&4?jf(r,e):null}function P2(r,e,t,n){return t===-1?R2(e,r):t===-2?O2(r,e,n):ho(r,r[ge],t,e)}function O2(r,e,t){if(t===Zn)return ka(e,r);if(t===Ti)return jf(e,r);if(t===Dn)return LD(e,r)}function YD(r,e,t,n){let i=e[Hn].queries[n];if(i.matches===null){let s=r.data,o=t.matches,a=[];for(let l=0;l<o.length;l+=2){let u=o[l];if(u<0)a.push(null);else{let c=s[u];a.push(P2(e,c,o[l+1],t.metadata.read))}}i.matches=a}return i.matches}function rv(r,e,t,n){let i=r.queries.getByIndex(t),s=i.matches;if(s!==null){let o=YD(r,e,i,t);for(let a=0;a<s.length;a+=2){let l=s[a];if(l>0)n.push(o[a/2]);else{let u=s[a+1],c=e[-l];for(let h=Ir;h<c.length;h++){let d=c[h];d[Fu]===d[ft]&&rv(d[ge],d,u,n)}if(c[Sa]!==null){let h=c[Sa];for(let d=0;d<h.length;d++){let f=h[d];rv(f[ge],f,u,n)}}}}}return n}function N2(r){let e=de(),t=Ze(),n=JT();fv(n+1);let i=QD(t,n);if(r.dirty&&QN(e)===((i.metadata.flags&2)===2)){if(i.matches===null)r.reset([]);else{let s=i.crossesNgTemplate?rv(t,e,n,[]):YD(t,e,i,n);r.reset(s,QL),r.notifyOnChanges()}return!0}return!1}function kK(r,e,t){let n=Ze();n.firstCreatePass&&(KD(n,new pf(r,e,t),-1),(e&2)===2&&(n.staticViewQueries=!0)),ZD(n,de(),e)}function F2(r,e,t,n){let i=Ze();if(i.firstCreatePass){let s=Ut();KD(i,new pf(e,t,n),s.index),B2(i,r),(t&2)===2&&(i.staticContentQueries=!0)}ZD(i,de(),t)}function L2(){return k2(de(),JT())}function k2(r,e){return r[Hn].queries[e].queryList}function ZD(r,e,t){let n=new Ky((t&4)===4);gk(r,e,n,n.destroy),e[Hn]===null&&(e[Hn]=new Jy),e[Hn].queries.push(new Qy(n))}function KD(r,e,t){r.queries===null&&(r.queries=new ev),r.queries.track(new tv(e,t))}function B2(r,e){let t=r.contentQueries||(r.contentQueries=[]),n=t.length?t[t.length-1]:-1;e!==n&&t.push(r.queries.length-1,e)}function QD(r,e){return r.queries.getByIndex(e)}function BK(r,e){return jf(r,e)}var Vf=(()=>{let e=class e{log(n){console.log(n)}warn(n){console.warn(n)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"platform"});let r=e;return r})(),nv=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Hf=(()=>{let e=class e{compileModuleSync(n){return new Zy(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let i=this.compileModuleSync(n),s=kT(n),o=SC(s.declarations).reduce((a,l)=>{let u=cs(l);return u&&a.push(new Pa(u)),a},[]);return new nv(i,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})();var go=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Mt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})();var Kv=new ne(""),Gu=new ne(""),Gf=(()=>{let e=class e{constructor(n,i,s){this._ngZone=n,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Qv||(U2(s),s.addToWindow(i)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Se.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&this._pendingCount===0&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>i.updateCb&&i.updateCb(n)?(clearTimeout(i.timeoutId),!1):!0),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,i,s){let o=-1;i&&i>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==o),n(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:n,timeoutId:o,updateCb:s})}whenStable(n,i,s){if(s&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,i,s),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,i,s){return[]}};e.\u0275fac=function(i){return new(i||e)(j(Se),j($f),j(Gu))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let r=e;return r})(),$f=(()=>{let e=class e{constructor(){this._applications=new Map}registerApplication(n,i){this._applications.set(n,i)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,i=!0){return Qv?.findTestabilityInTree(this,n,i)??null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"platform"});let r=e;return r})();function U2(r){Qv=r}var Qv,Ha=new ne("Application Initializer"),JD=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,i)=>{this.resolve=n,this.reject=i}),this.appInits=V(Ha,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let n=[];for(let s of this.appInits){let o=s();if(Va(o))n.push(o);else if(qv(o)){let a=new Promise((l,u)=>{o.subscribe({complete:l,error:u})});n.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{i()}).catch(s=>{this.reject(s)}),n.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})(),$u=new ne("appBootstrapListener");function j2(){Zw(()=>{throw new J(600,!1)})}function V2(r){return r.isBoundToModule}function H2(r,e,t){try{let n=t();return Va(n)?n.catch(i=>{throw e.runOutsideAngular(()=>r.handleError(i)),i}):n}catch(n){throw e.runOutsideAngular(()=>r.handleError(n)),n}}var yo=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=V(rD),this.componentTypes=[],this.components=[],this.isStable=V(go).hasPendingTasks.pipe(he(n=>!n)),this._injector=V(tr)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,i){let s=n instanceof of;if(!this._injector.get(JD).done){let p="Cannot bootstrap as there are still asynchronous initializers running."+(!s&&LT(n)?"":" Bootstrap components in the `ngDoBootstrap` method of the root module.");throw new J(405,!1)}let a;s?a=n:a=this._injector.get(Rf).resolveComponentFactory(n),this.componentTypes.push(a.componentType);let l=V2(a)?void 0:this._injector.get(ds),u=i||a.selector,c=a.create(Yn.NULL,[],u,l),h=c.location.nativeElement,d=c.injector.get(Kv,null);return d?.registerApplication(h),c.onDestroy(()=>{this.detachView(c.hostView),Qg(this.components,c),d?.unregisterApplication(h)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new J(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this.internalErrorHandler(n)}finally{this._runningTick=!1}}attachView(n){let i=n;this._views.push(i),i.attachToAppRef(this)}detachView(n){let i=n;Qg(this._views,i),i.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);let i=this._injector.get($u,[]);[...this._bootstrapListeners,...i].forEach(s=>s(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Qg(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new J(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})();function Qg(r,e){let t=r.indexOf(e);t>-1&&r.splice(t,1)}var G2=(()=>{let e=class e{constructor(){this.zone=V(Se),this.applicationRef=V(yo)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})();function $2(r){return[{provide:Se,useFactory:r},{provide:Ma,multi:!0,useFactory:()=>{let e=V(G2,{optional:!0});return()=>e.initialize()}},{provide:Ma,multi:!0,useFactory:()=>{let e=V(q2);return()=>{e.initialize()}}},{provide:rD,useFactory:z2}]}function z2(){let r=V(Se),e=V(Wn);return t=>r.runOutsideAngular(()=>e.handleError(t))}function W2(r){let e=$2(()=>new Se(X2(r)));return La([[],e])}function X2(r){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:r?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:r?.runCoalescing??!1}}var q2=(()=>{let e=class e{constructor(){this.subscription=new Ye,this.initialized=!1,this.zone=V(Se),this.pendingTasks=V(go)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Se.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Se.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})();function Y2(){return typeof $localize<"u"&&$localize.locale||df}var zu=new ne("LocaleId",{providedIn:"root",factory:()=>V(zu,ye.Optional|ye.SkipSelf)||Y2()});var eS=new ne("PlatformDestroyListeners");var qd=null;function Z2(r=[],e){return Yn.create({name:e,providers:[{provide:Df,useValue:"platform"},{provide:eS,useValue:new Set([()=>qd=null])},...r]})}function K2(r=[]){if(qd)return qd;let e=Z2(r);return qd=e,j2(),Q2(e),e}function Q2(r){r.get(Tv,null)?.forEach(t=>t())}function UK(){return!1}var tS=(()=>{let e=class e{constructor(n){}};e.\u0275fac=function(i){return new(i||e)(j(yo))},e.\u0275mod=Tn({type:e}),e.\u0275inj=En({});let r=e;return r})();function rS(r){try{let{rootComponent:e,appProviders:t,platformProviders:n}=r,i=K2(n),s=[W2(),...t||[]],a=new ff({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,l=a.get(Se);return l.run(()=>{a.resolveInjectorInitializers();let u=a.get(Wn,null),c;l.runOutsideAngular(()=>{c=l.onError.subscribe({next:f=>{u.handleError(f)}})});let h=()=>a.destroy(),d=i.get(eS);return d.add(h),a.onDestroy(()=>{c.unsubscribe(),d.delete(h)}),H2(u,l,()=>{let f=a.get(JD);return f.runInitializers(),f.donePromise.then(()=>{let p=a.get(zu,df);u2(p||df);let m=a.get(yo);return e!==void 0&&m.bootstrap(e),m})})})}catch(e){return Promise.reject(e)}}function Wu(r){return typeof r=="boolean"?r:r!=null&&r!=="false"}function nS(r){let e=cs(r);if(!e)return null;let t=new Pa(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var s_=null;function _o(){return s_}function dS(r){s_||(s_=r)}var Qf=class{},xt=new ne("DocumentToken"),h_=(()=>{let e=class e{historyGo(n){throw new Error("Not implemented")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>(()=>V(J2))(),providedIn:"platform"});let r=e;return r})(),fS=new ne("Location Initialized"),J2=(()=>{let e=class e extends h_{constructor(){super(),this._doc=V(xt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return _o().getBaseHref(this._doc)}onPopState(n){let i=_o().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",n,!1),()=>i.removeEventListener("popstate",n)}onHashChange(n){let i=_o().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",n,!1),()=>i.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,i,s){this._history.pushState(n,i,s)}replaceState(n,i,s){this._history.replaceState(n,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>(()=>new e)(),providedIn:"platform"});let r=e;return r})();function d_(r,e){if(r.length==0)return e;if(e.length==0)return r;let t=0;return r.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?r+e.substring(1):t==1?r+e:r+"/"+e}function iS(r){let e=r.match(/#|\?|$/),t=e&&e.index||r.length,n=t-(r[t-1]==="/"?1:0);return r.slice(0,n)+r.slice(t)}function Ii(r){return r&&r[0]!=="?"?"?"+r:r}var Ri=(()=>{let e=class e{historyGo(n){throw new Error("Not implemented")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>(()=>V(f_))(),providedIn:"root"});let r=e;return r})(),pS=new ne("appBaseHref"),f_=(()=>{let e=class e extends Ri{constructor(n,i){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??V(xt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return d_(this._baseHref,n)}path(n=!1){let i=this._platformLocation.pathname+Ii(this._platformLocation.search),s=this._platformLocation.hash;return s&&n?`${i}${s}`:i}pushState(n,i,s,o){let a=this.prepareExternalUrl(s+Ii(o));this._platformLocation.pushState(n,i,a)}replaceState(n,i,s,o){let a=this.prepareExternalUrl(s+Ii(o));this._platformLocation.replaceState(n,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}};e.\u0275fac=function(i){return new(i||e)(j(h_),j(pS,8))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})(),mS=(()=>{let e=class e extends Ri{constructor(n,i){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let i=this._platformLocation.hash;return i==null&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(n){let i=d_(this._baseHref,n);return i.length>0?"#"+i:i}pushState(n,i,s,o){let a=this.prepareExternalUrl(s+Ii(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(n,i,a)}replaceState(n,i,s,o){let a=this.prepareExternalUrl(s+Ii(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(n,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}};e.\u0275fac=function(i){return new(i||e)(j(h_),j(pS,8))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let r=e;return r})(),$a=(()=>{let e=class e{constructor(n){this._subject=new $r,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;let i=this._locationStrategy.getBaseHref();this._basePath=rU(iS(sS(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,i=""){return this.path()==this.normalize(n+Ii(i))}normalize(n){return e.stripTrailingSlash(tU(this._basePath,sS(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,i="",s=null){this._locationStrategy.pushState(s,"",n,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Ii(i)),s)}replaceState(n,i="",s=null){this._locationStrategy.replaceState(s,"",n,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Ii(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{let i=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",i){this._urlChangeListeners.forEach(s=>s(n,i))}subscribe(n,i,s){return this._subject.subscribe({next:n,error:i,complete:s})}};e.normalizeQueryParams=Ii,e.joinWithSlash=d_,e.stripTrailingSlash=iS,e.\u0275fac=function(i){return new(i||e)(j(Ri))},e.\u0275prov=W({token:e,factory:()=>eU(),providedIn:"root"});let r=e;return r})();function eU(){return new $a(j(Ri))}function tU(r,e){if(!r||!e.startsWith(r))return e;let t=e.substring(r.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function sS(r){return r.replace(/\/index.html$/,"")}function rU(r){if(new RegExp("^(https?:)?//").test(r)){let[,t]=r.split(/\/\/[^\/]+/);return t}return r}var gS=function(r){return r[r.Decimal=0]="Decimal",r[r.Percent=1]="Percent",r[r.Currency=2]="Currency",r[r.Scientific=3]="Scientific",r}(gS||{});var rr=function(r){return r[r.Format=0]="Format",r[r.Standalone=1]="Standalone",r}(rr||{}),Fe=function(r){return r[r.Narrow=0]="Narrow",r[r.Abbreviated=1]="Abbreviated",r[r.Wide=2]="Wide",r[r.Short=3]="Short",r}(Fe||{}),Pr=function(r){return r[r.Short=0]="Short",r[r.Medium=1]="Medium",r[r.Long=2]="Long",r[r.Full=3]="Full",r}(Pr||{}),gr=function(r){return r[r.Decimal=0]="Decimal",r[r.Group=1]="Group",r[r.List=2]="List",r[r.PercentSign=3]="PercentSign",r[r.PlusSign=4]="PlusSign",r[r.MinusSign=5]="MinusSign",r[r.Exponential=6]="Exponential",r[r.SuperscriptingExponent=7]="SuperscriptingExponent",r[r.PerMille=8]="PerMille",r[r.Infinity=9]="Infinity",r[r.NaN=10]="NaN",r[r.TimeSeparator=11]="TimeSeparator",r[r.CurrencyDecimal=12]="CurrencyDecimal",r[r.CurrencyGroup=13]="CurrencyGroup",r}(gr||{});function nU(r){return Rr(r)[Xe.LocaleId]}function iU(r,e,t){let n=Rr(r),i=[n[Xe.DayPeriodsFormat],n[Xe.DayPeriodsStandalone]],s=Zr(i,e);return Zr(s,t)}function sU(r,e,t){let n=Rr(r),i=[n[Xe.DaysFormat],n[Xe.DaysStandalone]],s=Zr(i,e);return Zr(s,t)}function oU(r,e,t){let n=Rr(r),i=[n[Xe.MonthsFormat],n[Xe.MonthsStandalone]],s=Zr(i,e);return Zr(s,t)}function aU(r,e){let n=Rr(r)[Xe.Eras];return Zr(n,e)}function zf(r,e){let t=Rr(r);return Zr(t[Xe.DateFormat],e)}function Wf(r,e){let t=Rr(r);return Zr(t[Xe.TimeFormat],e)}function Xf(r,e){let n=Rr(r)[Xe.DateTimeFormat];return Zr(n,e)}function Ai(r,e){let t=Rr(r),n=t[Xe.NumberSymbols][e];if(typeof n>"u"){if(e===gr.CurrencyDecimal)return t[Xe.NumberSymbols][gr.Decimal];if(e===gr.CurrencyGroup)return t[Xe.NumberSymbols][gr.Group]}return n}function lU(r,e){return Rr(r)[Xe.NumberFormats][e]}function yS(r){if(!r[Xe.ExtraData])throw new Error(`Missing extra locale data for the locale "${r[Xe.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function uU(r){let e=Rr(r);return yS(e),(e[Xe.ExtraData][2]||[]).map(n=>typeof n=="string"?Jv(n):[Jv(n[0]),Jv(n[1])])}function cU(r,e,t){let n=Rr(r);yS(n);let i=[n[Xe.ExtraData][0],n[Xe.ExtraData][1]],s=Zr(i,e)||[];return Zr(s,t)||[]}function Zr(r,e){for(let t=e;t>-1;t--)if(typeof r[t]<"u")return r[t];throw new Error("Locale data API: locale data undefined")}function Jv(r){let[e,t]=r.split(":");return{hours:+e,minutes:+t}}var hU=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Xu={},dU=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,Mi=function(r){return r[r.Short=0]="Short",r[r.ShortGMT=1]="ShortGMT",r[r.Long=2]="Long",r[r.Extended=3]="Extended",r}(Mi||{}),Ae=function(r){return r[r.FullYear=0]="FullYear",r[r.Month=1]="Month",r[r.Date=2]="Date",r[r.Hours=3]="Hours",r[r.Minutes=4]="Minutes",r[r.Seconds=5]="Seconds",r[r.FractionalSeconds=6]="FractionalSeconds",r[r.Day=7]="Day",r}(Ae||{}),Ie=function(r){return r[r.DayPeriods=0]="DayPeriods",r[r.Days=1]="Days",r[r.Months=2]="Months",r[r.Eras=3]="Eras",r}(Ie||{});function fU(r,e,t,n){let i=wU(r);e=Si(t,e)||e;let o=[],a;for(;e;)if(a=dU.exec(e),a){o=o.concat(a.slice(1));let c=o.pop();if(!c)break;e=c}else{o.push(e);break}let l=i.getTimezoneOffset();n&&(l=_S(n,l),i=bU(i,n,!0));let u="";return o.forEach(c=>{let h=_U(c);u+=h?h(i,t,l):c==="''"?"'":c.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}function Jf(r,e,t){let n=new Date(0);return n.setFullYear(r,e,t),n.setHours(0,0,0),n}function Si(r,e){let t=nU(r);if(Xu[t]=Xu[t]||{},Xu[t][e])return Xu[t][e];let n="";switch(e){case"shortDate":n=zf(r,Pr.Short);break;case"mediumDate":n=zf(r,Pr.Medium);break;case"longDate":n=zf(r,Pr.Long);break;case"fullDate":n=zf(r,Pr.Full);break;case"shortTime":n=Wf(r,Pr.Short);break;case"mediumTime":n=Wf(r,Pr.Medium);break;case"longTime":n=Wf(r,Pr.Long);break;case"fullTime":n=Wf(r,Pr.Full);break;case"short":let i=Si(r,"shortTime"),s=Si(r,"shortDate");n=qf(Xf(r,Pr.Short),[i,s]);break;case"medium":let o=Si(r,"mediumTime"),a=Si(r,"mediumDate");n=qf(Xf(r,Pr.Medium),[o,a]);break;case"long":let l=Si(r,"longTime"),u=Si(r,"longDate");n=qf(Xf(r,Pr.Long),[l,u]);break;case"full":let c=Si(r,"fullTime"),h=Si(r,"fullDate");n=qf(Xf(r,Pr.Full),[c,h]);break}return n&&(Xu[t][e]=n),n}function qf(r,e){return e&&(r=r.replace(/\{([^}]+)}/g,function(t,n){return e!=null&&n in e?e[n]:t})),r}function Sn(r,e,t="-",n,i){let s="";(r<0||i&&r<=0)&&(i?r=-r+1:(r=-r,s=t));let o=String(r);for(;o.length<e;)o="0"+o;return n&&(o=o.slice(o.length-e)),s+o}function pU(r,e){return Sn(r,3).substring(0,e)}function pt(r,e,t=0,n=!1,i=!1){return function(s,o){let a=mU(r,s);if((t>0||a>-t)&&(a+=t),r===Ae.Hours)a===0&&t===-12&&(a=12);else if(r===Ae.FractionalSeconds)return pU(a,e);let l=Ai(o,gr.MinusSign);return Sn(a,e,l,n,i)}}function mU(r,e){switch(r){case Ae.FullYear:return e.getFullYear();case Ae.Month:return e.getMonth();case Ae.Date:return e.getDate();case Ae.Hours:return e.getHours();case Ae.Minutes:return e.getMinutes();case Ae.Seconds:return e.getSeconds();case Ae.FractionalSeconds:return e.getMilliseconds();case Ae.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${r}".`)}}function Ue(r,e,t=rr.Format,n=!1){return function(i,s){return gU(i,s,r,e,t,n)}}function gU(r,e,t,n,i,s){switch(t){case Ie.Months:return oU(e,i,n)[r.getMonth()];case Ie.Days:return sU(e,i,n)[r.getDay()];case Ie.DayPeriods:let o=r.getHours(),a=r.getMinutes();if(s){let u=uU(e),c=cU(e,i,n),h=u.findIndex(d=>{if(Array.isArray(d)){let[f,p]=d,m=o>=f.hours&&a>=f.minutes,g=o<p.hours||o===p.hours&&a<p.minutes;if(f.hours<p.hours){if(m&&g)return!0}else if(m||g)return!0}else if(d.hours===o&&d.minutes===a)return!0;return!1});if(h!==-1)return c[h]}return iU(e,i,n)[o<12?0:1];case Ie.Eras:return aU(e,n)[r.getFullYear()<=0?0:1];default:let l=t;throw new Error(`unexpected translation type ${l}`)}}function Yf(r){return function(e,t,n){let i=-1*n,s=Ai(t,gr.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(r){case Mi.Short:return(i>=0?"+":"")+Sn(o,2,s)+Sn(Math.abs(i%60),2,s);case Mi.ShortGMT:return"GMT"+(i>=0?"+":"")+Sn(o,1,s);case Mi.Long:return"GMT"+(i>=0?"+":"")+Sn(o,2,s)+":"+Sn(Math.abs(i%60),2,s);case Mi.Extended:return n===0?"Z":(i>=0?"+":"")+Sn(o,2,s)+":"+Sn(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${r}"`)}}}var yU=0,Kf=4;function vU(r){let e=Jf(r,yU,1).getDay();return Jf(r,0,1+(e<=Kf?Kf:Kf+7)-e)}function vS(r){return Jf(r.getFullYear(),r.getMonth(),r.getDate()+(Kf-r.getDay()))}function e_(r,e=!1){return function(t,n){let i;if(e){let s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,o=t.getDate();i=1+Math.floor((o+s)/7)}else{let s=vS(t),o=vU(s.getFullYear()),a=s.getTime()-o.getTime();i=1+Math.round(a/6048e5)}return Sn(i,r,Ai(n,gr.MinusSign))}}function Zf(r,e=!1){return function(t,n){let s=vS(t).getFullYear();return Sn(s,r,Ai(n,gr.MinusSign),e)}}var t_={};function _U(r){if(t_[r])return t_[r];let e;switch(r){case"G":case"GG":case"GGG":e=Ue(Ie.Eras,Fe.Abbreviated);break;case"GGGG":e=Ue(Ie.Eras,Fe.Wide);break;case"GGGGG":e=Ue(Ie.Eras,Fe.Narrow);break;case"y":e=pt(Ae.FullYear,1,0,!1,!0);break;case"yy":e=pt(Ae.FullYear,2,0,!0,!0);break;case"yyy":e=pt(Ae.FullYear,3,0,!1,!0);break;case"yyyy":e=pt(Ae.FullYear,4,0,!1,!0);break;case"Y":e=Zf(1);break;case"YY":e=Zf(2,!0);break;case"YYY":e=Zf(3);break;case"YYYY":e=Zf(4);break;case"M":case"L":e=pt(Ae.Month,1,1);break;case"MM":case"LL":e=pt(Ae.Month,2,1);break;case"MMM":e=Ue(Ie.Months,Fe.Abbreviated);break;case"MMMM":e=Ue(Ie.Months,Fe.Wide);break;case"MMMMM":e=Ue(Ie.Months,Fe.Narrow);break;case"LLL":e=Ue(Ie.Months,Fe.Abbreviated,rr.Standalone);break;case"LLLL":e=Ue(Ie.Months,Fe.Wide,rr.Standalone);break;case"LLLLL":e=Ue(Ie.Months,Fe.Narrow,rr.Standalone);break;case"w":e=e_(1);break;case"ww":e=e_(2);break;case"W":e=e_(1,!0);break;case"d":e=pt(Ae.Date,1);break;case"dd":e=pt(Ae.Date,2);break;case"c":case"cc":e=pt(Ae.Day,1);break;case"ccc":e=Ue(Ie.Days,Fe.Abbreviated,rr.Standalone);break;case"cccc":e=Ue(Ie.Days,Fe.Wide,rr.Standalone);break;case"ccccc":e=Ue(Ie.Days,Fe.Narrow,rr.Standalone);break;case"cccccc":e=Ue(Ie.Days,Fe.Short,rr.Standalone);break;case"E":case"EE":case"EEE":e=Ue(Ie.Days,Fe.Abbreviated);break;case"EEEE":e=Ue(Ie.Days,Fe.Wide);break;case"EEEEE":e=Ue(Ie.Days,Fe.Narrow);break;case"EEEEEE":e=Ue(Ie.Days,Fe.Short);break;case"a":case"aa":case"aaa":e=Ue(Ie.DayPeriods,Fe.Abbreviated);break;case"aaaa":e=Ue(Ie.DayPeriods,Fe.Wide);break;case"aaaaa":e=Ue(Ie.DayPeriods,Fe.Narrow);break;case"b":case"bb":case"bbb":e=Ue(Ie.DayPeriods,Fe.Abbreviated,rr.Standalone,!0);break;case"bbbb":e=Ue(Ie.DayPeriods,Fe.Wide,rr.Standalone,!0);break;case"bbbbb":e=Ue(Ie.DayPeriods,Fe.Narrow,rr.Standalone,!0);break;case"B":case"BB":case"BBB":e=Ue(Ie.DayPeriods,Fe.Abbreviated,rr.Format,!0);break;case"BBBB":e=Ue(Ie.DayPeriods,Fe.Wide,rr.Format,!0);break;case"BBBBB":e=Ue(Ie.DayPeriods,Fe.Narrow,rr.Format,!0);break;case"h":e=pt(Ae.Hours,1,-12);break;case"hh":e=pt(Ae.Hours,2,-12);break;case"H":e=pt(Ae.Hours,1);break;case"HH":e=pt(Ae.Hours,2);break;case"m":e=pt(Ae.Minutes,1);break;case"mm":e=pt(Ae.Minutes,2);break;case"s":e=pt(Ae.Seconds,1);break;case"ss":e=pt(Ae.Seconds,2);break;case"S":e=pt(Ae.FractionalSeconds,1);break;case"SS":e=pt(Ae.FractionalSeconds,2);break;case"SSS":e=pt(Ae.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Yf(Mi.Short);break;case"ZZZZZ":e=Yf(Mi.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Yf(Mi.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Yf(Mi.Long);break;default:return null}return t_[r]=e,e}function _S(r,e){r=r.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+r)/6e4;return isNaN(t)?e:t}function xU(r,e){return r=new Date(r.getTime()),r.setMinutes(r.getMinutes()+e),r}function bU(r,e,t){let n=t?-1:1,i=r.getTimezoneOffset(),s=_S(e,i);return xU(r,n*(s-i))}function wU(r){if(oS(r))return r;if(typeof r=="number"&&!isNaN(r))return new Date(r);if(typeof r=="string"){if(r=r.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(r)){let[i,s=1,o=1]=r.split("-").map(a=>+a);return Jf(i,s-1,o)}let t=parseFloat(r);if(!isNaN(r-t))return new Date(t);let n;if(n=r.match(hU))return EU(n)}let e=new Date(r);if(!oS(e))throw new Error(`Unable to convert "${r}" into a date`);return e}function EU(r){let e=new Date(0),t=0,n=0,i=r[8]?e.setUTCFullYear:e.setFullYear,s=r[8]?e.setUTCHours:e.setHours;r[9]&&(t=Number(r[9]+r[10]),n=Number(r[9]+r[11])),i.call(e,Number(r[1]),Number(r[2])-1,Number(r[3]));let o=Number(r[4]||0)-t,a=Number(r[5]||0)-n,l=Number(r[6]||0),u=Math.floor(parseFloat("0."+(r[7]||0))*1e3);return s.call(e,o,a,l,u),e}function oS(r){return r instanceof Date&&!isNaN(r.valueOf())}var TU=/^(\d+)?\.((\d+)(-(\d+))?)?$/,aS=22,ep=".",qu="0",CU=";",DU=",",r_="#";function SU(r,e,t,n,i,s,o=!1){let a="",l=!1;if(!isFinite(r))a=Ai(t,gr.Infinity);else{let u=RU(r);o&&(u=MU(u));let c=e.minInt,h=e.minFrac,d=e.maxFrac;if(s){let _=s.match(TU);if(_===null)throw new Error(`${s} is not a valid digit info`);let v=_[1],x=_[3],b=_[5];v!=null&&(c=n_(v)),x!=null&&(h=n_(x)),b!=null?d=n_(b):x!=null&&h>d&&(d=h)}PU(u,h,d);let f=u.digits,p=u.integerLen,m=u.exponent,g=[];for(l=f.every(_=>!_);p<c;p++)f.unshift(0);for(;p<0;p++)f.unshift(0);p>0?g=f.splice(p,f.length):(g=f,f=[0]);let y=[];for(f.length>=e.lgSize&&y.unshift(f.splice(-e.lgSize,f.length).join(""));f.length>e.gSize;)y.unshift(f.splice(-e.gSize,f.length).join(""));f.length&&y.unshift(f.join("")),a=y.join(Ai(t,n)),g.length&&(a+=Ai(t,i)+g.join("")),m&&(a+=Ai(t,gr.Exponential)+"+"+m)}return r<0&&!l?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function IU(r,e,t){let n=lU(e,gS.Decimal),i=AU(n,Ai(e,gr.MinusSign));return SU(r,i,e,gr.Group,gr.Decimal,t)}function AU(r,e="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},n=r.split(CU),i=n[0],s=n[1],o=i.indexOf(ep)!==-1?i.split(ep):[i.substring(0,i.lastIndexOf(qu)+1),i.substring(i.lastIndexOf(qu)+1)],a=o[0],l=o[1]||"";t.posPre=a.substring(0,a.indexOf(r_));for(let c=0;c<l.length;c++){let h=l.charAt(c);h===qu?t.minFrac=t.maxFrac=c+1:h===r_?t.maxFrac=c+1:t.posSuf+=h}let u=a.split(DU);if(t.gSize=u[1]?u[1].length:0,t.lgSize=u[2]||u[1]?(u[2]||u[1]).length:0,s){let c=i.length-t.posPre.length-t.posSuf.length,h=s.indexOf(r_);t.negPre=s.substring(0,h).replace(/'/g,""),t.negSuf=s.slice(h+c).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function MU(r){if(r.digits[0]===0)return r;let e=r.digits.length-r.integerLen;return r.exponent?r.exponent+=2:(e===0?r.digits.push(0,0):e===1&&r.digits.push(0),r.integerLen+=2),r}function RU(r){let e=Math.abs(r)+"",t=0,n,i,s,o,a;for((i=e.indexOf(ep))>-1&&(e=e.replace(ep,"")),(s=e.search(/e/i))>0?(i<0&&(i=s),i+=+e.slice(s+1),e=e.substring(0,s)):i<0&&(i=e.length),s=0;e.charAt(s)===qu;s++);if(s===(a=e.length))n=[0],i=1;else{for(a--;e.charAt(a)===qu;)a--;for(i-=s,n=[],o=0;s<=a;s++,o++)n[o]=Number(e.charAt(s))}return i>aS&&(n=n.splice(0,aS-1),t=i-1,i=1),{digits:n,exponent:t,integerLen:i}}function PU(r,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let n=r.digits,i=n.length-r.integerLen,s=Math.min(Math.max(e,i),t),o=s+r.integerLen,a=n[o];if(o>0){n.splice(Math.max(r.integerLen,o));for(let h=o;h<n.length;h++)n[h]=0}else{i=Math.max(0,i),r.integerLen=1,n.length=Math.max(1,o=s+1),n[0]=0;for(let h=1;h<o;h++)n[h]=0}if(a>=5)if(o-1<0){for(let h=0;h>o;h--)n.unshift(0),r.integerLen++;n.unshift(1),r.integerLen++}else n[o-1]++;for(;i<Math.max(0,s);i++)n.push(0);let l=s!==0,u=e+r.integerLen,c=n.reduceRight(function(h,d,f,p){return d=d+h,p[f]=d<10?d:d-10,l&&(p[f]===0&&f>=u?p.pop():l=!1),d>=10?1:0},0);c&&(n.unshift(c),r.integerLen++)}function n_(r){let e=parseInt(r);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+r);return e}function iQ(r,e,t){return VD(r,e,t)}function rp(r,e){e=encodeURIComponent(e);for(let t of r.split(";")){let n=t.indexOf("="),[i,s]=n==-1?[t,""]:[t.slice(0,n),t.slice(n+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var i_=/\s+/,lS=[],sQ=(()=>{let e=class e{constructor(n,i,s,o){this._iterableDiffers=n,this._keyValueDiffers=i,this._ngEl=s,this._renderer=o,this.initialClasses=lS,this.stateMap=new Map}set klass(n){this.initialClasses=n!=null?n.trim().split(i_):lS}set ngClass(n){this.rawClass=typeof n=="string"?n.trim().split(i_):n}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(let i of n)this._updateState(i,!0);else if(n!=null)for(let i of Object.keys(n))this._updateState(i,!!n[i]);this._applyStateDiff()}_updateState(n,i){let s=this.stateMap.get(n);s!==void 0?(s.enabled!==i&&(s.changed=!0,s.enabled=i),s.touched=!0):this.stateMap.set(n,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let n of this.stateMap){let i=n[0],s=n[1];s.changed?(this._toggleClass(i,s.enabled),s.changed=!1):s.touched||(s.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),s.touched=!1}}_toggleClass(n,i){n=n.trim(),n.length>0&&n.split(i_).forEach(s=>{i?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}};e.\u0275fac=function(i){return new(i||e)(we(Pf),we(Of),we(Zn),we(Ba))},e.\u0275dir=Wr({type:e,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0});let r=e;return r})();var o_=class{constructor(e,t,n,i){this.$implicit=e,this.ngForOf=t,this.index=n,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},oQ=(()=>{let e=class e{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,i,s){this._viewContainer=n,this._template=i,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;if(!this._differ&&n)if(!1)try{}catch{}else this._differ=this._differs.find(n).create(this.ngForTrackBy)}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let i=this._viewContainer;n.forEachOperation((s,o,a)=>{if(s.previousIndex==null)i.createEmbeddedView(this._template,new o_(s.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(o===null?void 0:o);else if(o!==null){let l=i.get(o);i.move(l,a),uS(l,s)}});for(let s=0,o=i.length;s<o;s++){let l=i.get(s).context;l.index=s,l.count=o,l.ngForOf=this._ngForOf}n.forEachIdentityChange(s=>{let o=i.get(s.currentIndex);uS(o,s)})}static ngTemplateContextGuard(n,i){return!0}};e.\u0275fac=function(i){return new(i||e)(we(Dn),we(Ti),we(Pf))},e.\u0275dir=Wr({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let r=e;return r})();function uS(r,e){r.context.$implicit=e.item}var aQ=(()=>{let e=class e{constructor(n,i){this._viewContainer=n,this._context=new a_,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){cS("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){cS("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,i){return!0}};e.\u0275fac=function(i){return new(i||e)(we(Dn),we(Ti))},e.\u0275dir=Wr({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let r=e;return r})(),a_=class{constructor(){this.$implicit=null,this.ngIf=null}};function cS(r,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${r} must be a TemplateRef, but received '${Bt(e)}'.`)}var OU=!0,tp=class{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}},xS=(()=>{let e=class e{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(n){this._ngSwitch=n,this._caseCount===0&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(n){this._defaultViews.push(n)}_matchCase(n){let i=OU?n===this._ngSwitch:n==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(n){if(this._defaultViews.length>0&&n!==this._defaultUsed){this._defaultUsed=n;for(let i of this._defaultViews)i.enforceState(n)}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Wr({type:e,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0});let r=e;return r})(),lQ=(()=>{let e=class e{constructor(n,i,s){this.ngSwitch=s,s._addCase(),this._view=new tp(n,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}};e.\u0275fac=function(i){return new(i||e)(we(Dn),we(Ti),we(xS,9))},e.\u0275dir=Wr({type:e,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0});let r=e;return r})(),uQ=(()=>{let e=class e{constructor(n,i,s){s._addDefault(new tp(n,i))}};e.\u0275fac=function(i){return new(i||e)(we(Dn),we(Ti),we(xS,9))},e.\u0275dir=Wr({type:e,selectors:[["","ngSwitchDefault",""]],standalone:!0});let r=e;return r})();var cQ=(()=>{let e=class e{constructor(n,i,s){this._ngEl=n,this._differs=i,this._renderer=s,this._ngStyle=null,this._differ=null}set ngStyle(n){this._ngStyle=n,!this._differ&&n&&(this._differ=this._differs.find(n).create())}ngDoCheck(){if(this._differ){let n=this._differ.diff(this._ngStyle);n&&this._applyChanges(n)}}_setStyle(n,i){let[s,o]=n.split("."),a=s.indexOf("-")===-1?void 0:zn.DashCase;i!=null?this._renderer.setStyle(this._ngEl.nativeElement,s,o?`${i}${o}`:i,a):this._renderer.removeStyle(this._ngEl.nativeElement,s,a)}_applyChanges(n){n.forEachRemovedItem(i=>this._setStyle(i.key,null)),n.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),n.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}};e.\u0275fac=function(i){return new(i||e)(we(Zn),we(Of),we(Ba))},e.\u0275dir=Wr({type:e,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0});let r=e;return r})(),hQ=(()=>{let e=class e{constructor(n){this._viewContainerRef=n,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(n){if(this._shouldRecreateView(n)){let i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let s=this._createContextForwardProxy();this._viewRef=i.createEmbeddedView(this.ngTemplateOutlet,s,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(n){return!!n.ngTemplateOutlet||!!n.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(n,i,s)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,i,s):!1,get:(n,i,s)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,i,s)}})}};e.\u0275fac=function(i){return new(i||e)(we(Dn))},e.\u0275dir=Wr({type:e,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Fa]});let r=e;return r})();function np(r,e){return new J(2100,!1)}var l_=class{createSubscription(e,t){return Ov(()=>e.subscribe({next:t,error:n=>{throw n}}))}dispose(e){Ov(()=>e.unsubscribe())}},u_=class{createSubscription(e,t){return e.then(t,n=>{throw n})}dispose(e){}},NU=new u_,FU=new l_,dQ=(()=>{let e=class e{constructor(n){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=n}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(n){return this._obj?n!==this._obj?(this._dispose(),this.transform(n)):this._latestValue:(n&&this._subscribe(n),this._latestValue)}_subscribe(n){this._obj=n,this._strategy=this._selectStrategy(n),this._subscription=this._strategy.createSubscription(n,i=>this._updateLatestValue(n,i))}_selectStrategy(n){if(Va(n))return NU;if(qv(n))return FU;throw np(e,n)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(n,i){n===this._obj&&(this._latestValue=i,this._ref.markForCheck())}};e.\u0275fac=function(i){return new(i||e)(we(Hu,16))},e.\u0275pipe=Nu({name:"async",type:e,pure:!1,standalone:!0});let r=e;return r})();var LU="mediumDate",kU=new ne("DATE_PIPE_DEFAULT_TIMEZONE"),BU=new ne("DATE_PIPE_DEFAULT_OPTIONS"),fQ=(()=>{let e=class e{constructor(n,i,s){this.locale=n,this.defaultTimezone=i,this.defaultOptions=s}transform(n,i,s,o){if(n==null||n===""||n!==n)return null;try{let a=i??this.defaultOptions?.dateFormat??LU,l=s??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return fU(n,a,o||this.locale,l)}catch(a){throw np(e,a.message)}}};e.\u0275fac=function(i){return new(i||e)(we(zu,16),we(kU,24),we(BU,24))},e.\u0275pipe=Nu({name:"date",type:e,pure:!0,standalone:!0});let r=e;return r})();var pQ=(()=>{let e=class e{constructor(n){this._locale=n}transform(n,i,s){if(!UU(n))return null;s=s||this._locale;try{let o=jU(n);return IU(o,s,i)}catch(o){throw np(e,o.message)}}};e.\u0275fac=function(i){return new(i||e)(we(zu,16))},e.\u0275pipe=Nu({name:"number",type:e,pure:!0,standalone:!0});let r=e;return r})();function UU(r){return!(r==null||r===""||r!==r)}function jU(r){if(typeof r=="string"&&!isNaN(Number(r)-parseFloat(r)))return Number(r);if(typeof r!="number")throw new Error(`${r} is not a number`);return r}var mQ=(()=>{let e=class e{transform(n,i,s){if(n==null)return null;if(!this.supports(n))throw np(e,n);return n.slice(i,s)}supports(n){return typeof n=="string"||Array.isArray(n)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275pipe=Nu({name:"slice",type:e,pure:!1,standalone:!0});let r=e;return r})();var bS=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Tn({type:e}),e.\u0275inj=En({});let r=e;return r})(),p_="browser",VU="server";function m_(r){return r===p_}function g_(r){return r===VU}var wS=(()=>{let e=class e{};e.\u0275prov=W({token:e,providedIn:"root",factory:()=>new c_(j(xt),window)});let r=e;return r})(),c_=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;let t=HU(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){let t=e.getBoundingClientRect(),n=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(n-s[0],i-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}};function HU(r,e){let t=r.getElementById(e)||r.getElementsByName(e)[0];if(t)return t;if(typeof r.createTreeWalker=="function"&&r.body&&typeof r.body.attachShadow=="function"){let n=r.createTreeWalker(r.body,NodeFilter.SHOW_ELEMENT),i=n.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=n.nextNode()}}return null}var Ga=class{};var Zu=class{},sp=class{},xo=class r{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let n=t.indexOf(":");if(n>0){let i=t.slice(0,n),s=i.toLowerCase(),o=t.slice(n+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,n)=>{this.setHeaderEntries(n,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,n])=>{this.setHeaderEntries(t,n)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof r?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new r;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof r?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let n=e.value;if(typeof n=="string"&&(n=[n]),n.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...n),this.headers.set(t,i);break;case"d":let s=e.value;if(!s)this.headers.delete(t),this.normalizedNames.delete(t);else{let o=this.headers.get(t);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}break}}setHeaderEntries(e,t){let n=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,n),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var v_=class{encodeKey(e){return TS(e)}encodeValue(e){return TS(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function zU(r,e){let t=new Map;return r.length>0&&r.replace(/^\?/,"").split("&").forEach(i=>{let s=i.indexOf("="),[o,a]=s==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],l=t.get(o)||[];l.push(a),t.set(o,l)}),t}var WU=/%(\d[a-f0-9])/gi,XU={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function TS(r){return encodeURIComponent(r).replace(WU,(e,t)=>XU[t]??e)}function ip(r){return`${r}`}var gs=class r{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new v_,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=zU(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let n=e.fromObject[t],i=Array.isArray(n)?n.map(ip):[ip(n)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(n=>{let i=e[n];Array.isArray(i)?i.forEach(s=>{t.push({param:n,value:s,op:"a"})}):t.push({param:n,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(n=>t+"="+this.encoder.encodeValue(n)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new r({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(ip(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let n=this.map.get(e.param)||[],i=n.indexOf(ip(e.value));i!==-1&&n.splice(i,1),n.length>0?this.map.set(e.param,n):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var __=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function qU(r){switch(r){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function CS(r){return typeof ArrayBuffer<"u"&&r instanceof ArrayBuffer}function DS(r){return typeof Blob<"u"&&r instanceof Blob}function SS(r){return typeof FormData<"u"&&r instanceof FormData}function YU(r){return typeof URLSearchParams<"u"&&r instanceof URLSearchParams}var Yu=class r{constructor(e,t,n,i){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let s;if(qU(this.method)||i?(this.body=n!==void 0?n:null,s=i):s=n,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers||(this.headers=new xo),this.context||(this.context=new __),!this.params)this.params=new gs,this.urlWithParams=t;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),l=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+l+o}}}serializeBody(){return this.body===null?null:CS(this.body)||DS(this.body)||SS(this.body)||YU(this.body)||typeof this.body=="string"?this.body:this.body instanceof gs?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||SS(this.body)?null:DS(this.body)?this.body.type||null:CS(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof gs?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,n=e.url||this.url,i=e.responseType||this.responseType,s=e.body!==void 0?e.body:this.body,o=e.withCredentials!==void 0?e.withCredentials:this.withCredentials,a=e.reportProgress!==void 0?e.reportProgress:this.reportProgress,l=e.headers||this.headers,u=e.params||this.params,c=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((h,d)=>h.set(d,e.setHeaders[d]),l)),e.setParams&&(u=Object.keys(e.setParams).reduce((h,d)=>h.set(d,e.setParams[d]),u)),new r(t,n,s,{params:u,headers:l,context:c,reportProgress:a,responseType:i,withCredentials:o})}},za=function(r){return r[r.Sent=0]="Sent",r[r.UploadProgress=1]="UploadProgress",r[r.ResponseHeader=2]="ResponseHeader",r[r.DownloadProgress=3]="DownloadProgress",r[r.Response=4]="Response",r[r.User=5]="User",r}(za||{}),Ku=class{constructor(e,t=200,n="OK"){this.headers=e.headers||new xo,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||n,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},x_=class r extends Ku{constructor(e={}){super(e),this.type=za.ResponseHeader}clone(e={}){return new r({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},op=class r extends Ku{constructor(e={}){super(e),this.type=za.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new r({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},ap=class extends Ku{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}};function y_(r,e){return{body:e,headers:r.headers,context:r.context,observe:r.observe,params:r.params,reportProgress:r.reportProgress,responseType:r.responseType,withCredentials:r.withCredentials,transferCache:r.transferCache}}var b_=(()=>{let e=class e{constructor(n){this.handler=n}request(n,i,s={}){let o;if(n instanceof Yu)o=n;else{let u;s.headers instanceof xo?u=s.headers:u=new xo(s.headers);let c;s.params&&(s.params instanceof gs?c=s.params:c=new gs({fromObject:s.params})),o=new Yu(n,i,s.body!==void 0?s.body:null,{headers:u,context:s.context,params:c,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache})}let a=q(o).pipe(_i(u=>this.handler.handle(u)));if(n instanceof Yu||s.observe==="events")return a;let l=a.pipe(vt(u=>u instanceof op));switch(s.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return l.pipe(he(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return l.pipe(he(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return l.pipe(he(u=>{if(u.body!==null&&typeof u.body!="string")throw new Error("Response is not a string.");return u.body}));case"json":default:return l.pipe(he(u=>u.body))}case"response":return l;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(n,i={}){return this.request("DELETE",n,i)}get(n,i={}){return this.request("GET",n,i)}head(n,i={}){return this.request("HEAD",n,i)}jsonp(n,i){return this.request("JSONP",n,{params:new gs().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,i={}){return this.request("OPTIONS",n,i)}patch(n,i,s={}){return this.request("PATCH",n,y_(s,i))}post(n,i,s={}){return this.request("POST",n,y_(s,i))}put(n,i,s={}){return this.request("PUT",n,y_(s,i))}};e.\u0275fac=function(i){return new(i||e)(j(Zu))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let r=e;return r})();function RS(r,e){return e(r)}function ZU(r,e){return(t,n)=>e.intercept(t,{handle:i=>r(i,n)})}function KU(r,e,t){return(n,i)=>qn(t,()=>e(n,s=>r(s,i)))}var QU=new ne(""),w_=new ne(""),JU=new ne(""),e3=new ne("");function t3(){let r=null;return(e,t)=>{r===null&&(r=(V(QU,{optional:!0})??[]).reduceRight(ZU,RS));let n=V(go),i=n.add();return r(e,t).pipe(xi(()=>n.remove(i)))}}var IS=(()=>{let e=class e extends Zu{constructor(n,i){super(),this.backend=n,this.injector=i,this.chain=null,this.pendingTasks=V(go);let s=V(e3,{optional:!0});this.backend=s??n}handle(n){if(this.chain===null){let s=Array.from(new Set([...this.injector.get(w_),...this.injector.get(JU,[])]));this.chain=s.reduceRight((o,a)=>KU(o,a,this.injector),RS)}let i=this.pendingTasks.add();return this.chain(n,s=>this.backend.handle(s)).pipe(xi(()=>this.pendingTasks.remove(i)))}};e.\u0275fac=function(i){return new(i||e)(j(sp),j(tr))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let r=e;return r})();var r3=/^\)\]\}',?\n/;function n3(r){return"responseURL"in r&&r.responseURL?r.responseURL:/^X-Request-URL:/m.test(r.getAllResponseHeaders())?r.getResponseHeader("X-Request-URL"):null}var AS=(()=>{let e=class e{constructor(n){this.xhrFactory=n}handle(n){if(n.method==="JSONP")throw new J(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?He(i.\u0275loadImpl()):q(null)).pipe(_t(()=>new ve(o=>{let a=i.build();if(a.open(n.method,n.urlWithParams),n.withCredentials&&(a.withCredentials=!0),n.headers.forEach((g,y)=>a.setRequestHeader(g,y.join(","))),n.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!n.headers.has("Content-Type")){let g=n.detectContentTypeHeader();g!==null&&a.setRequestHeader("Content-Type",g)}if(n.responseType){let g=n.responseType.toLowerCase();a.responseType=g!=="json"?g:"text"}let l=n.serializeBody(),u=null,c=()=>{if(u!==null)return u;let g=a.statusText||"OK",y=new xo(a.getAllResponseHeaders()),_=n3(a)||n.url;return u=new x_({headers:y,status:a.status,statusText:g,url:_}),u},h=()=>{let{headers:g,status:y,statusText:_,url:v}=c(),x=null;y!==204&&(x=typeof a.response>"u"?a.responseText:a.response),y===0&&(y=x?200:0);let b=y>=200&&y<300;if(n.responseType==="json"&&typeof x=="string"){let C=x;x=x.replace(r3,"");try{x=x!==""?JSON.parse(x):null}catch(E){x=C,b&&(b=!1,x={error:E,text:x})}}b?(o.next(new op({body:x,headers:g,status:y,statusText:_,url:v||void 0})),o.complete()):o.error(new ap({error:x,headers:g,status:y,statusText:_,url:v||void 0}))},d=g=>{let{url:y}=c(),_=new ap({error:g,status:a.status||0,statusText:a.statusText||"Unknown Error",url:y||void 0});o.error(_)},f=!1,p=g=>{f||(o.next(c()),f=!0);let y={type:za.DownloadProgress,loaded:g.loaded};g.lengthComputable&&(y.total=g.total),n.responseType==="text"&&a.responseText&&(y.partialText=a.responseText),o.next(y)},m=g=>{let y={type:za.UploadProgress,loaded:g.loaded};g.lengthComputable&&(y.total=g.total),o.next(y)};return a.addEventListener("load",h),a.addEventListener("error",d),a.addEventListener("timeout",d),a.addEventListener("abort",d),n.reportProgress&&(a.addEventListener("progress",p),l!==null&&a.upload&&a.upload.addEventListener("progress",m)),a.send(l),o.next({type:za.Sent}),()=>{a.removeEventListener("error",d),a.removeEventListener("abort",d),a.removeEventListener("load",h),a.removeEventListener("timeout",d),n.reportProgress&&(a.removeEventListener("progress",p),l!==null&&a.upload&&a.upload.removeEventListener("progress",m)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(i){return new(i||e)(j(Ga))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let r=e;return r})(),PS=new ne("XSRF_ENABLED"),i3="XSRF-TOKEN",s3=new ne("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>i3}),o3="X-XSRF-TOKEN",a3=new ne("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>o3}),lp=class{},l3=(()=>{let e=class e{constructor(n,i,s){this.doc=n,this.platform=i,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=rp(n,this.cookieName),this.lastCookieString=n),this.lastToken}};e.\u0275fac=function(i){return new(i||e)(j(xt),j(qr),j(s3))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let r=e;return r})();function u3(r,e){let t=r.url.toLowerCase();if(!V(PS)||r.method==="GET"||r.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(r);let n=V(lp).getToken(),i=V(a3);return n!=null&&!r.headers.has(i)&&(r=r.clone({headers:r.headers.set(i,n)})),e(r)}var OS=function(r){return r[r.Interceptors=0]="Interceptors",r[r.LegacyInterceptors=1]="LegacyInterceptors",r[r.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",r[r.NoXsrfProtection=3]="NoXsrfProtection",r[r.JsonpSupport=4]="JsonpSupport",r[r.RequestsMadeViaParent=5]="RequestsMadeViaParent",r[r.Fetch=6]="Fetch",r}(OS||{});function c3(r,e){return{\u0275kind:r,\u0275providers:e}}function h3(...r){let e=[b_,AS,IS,{provide:Zu,useExisting:IS},{provide:sp,useExisting:AS},{provide:w_,useValue:u3,multi:!0},{provide:PS,useValue:!0},{provide:lp,useClass:l3}];for(let t of r)e.push(...t.\u0275providers);return La(e)}var MS=new ne("LEGACY_INTERCEPTOR_FN");function d3(){return c3(OS.LegacyInterceptors,[{provide:MS,useFactory:t3},{provide:w_,useExisting:MS,multi:!0}])}var IQ=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Tn({type:e}),e.\u0275inj=En({providers:[h3(d3())]});let r=e;return r})();var C_=class extends Qf{constructor(){super(...arguments),this.supportsDOMEvents=!0}},D_=class r extends C_{static makeCurrent(){dS(new r)}onAndCancel(e,t,n){return e.addEventListener(t,n),()=>{e.removeEventListener(t,n)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=p3();return t==null?null:m3(t)}resetBaseElement(){Qu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return rp(document.cookie,e)}},Qu=null;function p3(){return Qu=Qu||document.querySelector("base"),Qu?Qu.getAttribute("href"):null}function m3(r){return new URL(r,document.baseURI).pathname}var S_=class{addToWindow(e){dt.getAngularTestability=(n,i=!0)=>{let s=e.findTestabilityInTree(n,i);if(s==null)throw new J(5103,!1);return s},dt.getAllAngularTestabilities=()=>e.getAllTestabilities(),dt.getAllAngularRootElements=()=>e.getAllRootElements();let t=n=>{let i=dt.getAllAngularTestabilities(),s=i.length,o=!1,a=function(l){o=o||l,s--,s==0&&n(o)};i.forEach(l=>{l.whenStable(a)})};dt.frameworkStabilizers||(dt.frameworkStabilizers=[]),dt.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,n){if(t==null)return null;let i=e.getTestability(t);return i??(n?_o().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},g3=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac});let r=e;return r})(),I_=new ne("EventManagerPlugins"),kS=(()=>{let e=class e{constructor(n,i){this._zone=i,this._eventNameToPlugin=new Map,n.forEach(s=>{s.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,i,s){return this._findPluginFor(i).addEventListener(n,i,s)}getZone(){return this._zone}_findPluginFor(n){let i=this._eventNameToPlugin.get(n);if(i)return i;if(i=this._plugins.find(o=>o.supports(n)),!i)throw new J(5101,!1);return this._eventNameToPlugin.set(n,i),i}};e.\u0275fac=function(i){return new(i||e)(j(I_),j(Se))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let r=e;return r})(),up=class{constructor(e){this._doc=e}},E_="ng-app-id",BS=(()=>{let e=class e{constructor(n,i,s,o={}){this.doc=n,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=g_(o),this.resetHostNodes()}addStyles(n){for(let i of n)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(n){for(let i of n)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let n=this.styleNodesInDOM;n&&(n.forEach(i=>i.remove()),n.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(let i of this.getAllStyles())this.addStyleToHost(n,i)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(let i of this.hostNodes)this.addStyleToHost(i,n)}onStyleRemoved(n){let i=this.styleRef;i.get(n)?.elements?.forEach(s=>s.remove()),i.delete(n)}collectServerRenderedStyles(){let n=this.doc.head?.querySelectorAll(`style[${E_}="${this.appId}"]`);if(n?.length){let i=new Map;return n.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(n,i){let s=this.styleRef;if(s.has(n)){let o=s.get(n);return o.usage+=i,o.usage}return s.set(n,{usage:i,elements:[]}),i}getStyleElement(n,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===n)return s.delete(i),o.removeAttribute(E_),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(E_,this.appId),n.appendChild(a),a}}addStyleToHost(n,i){let s=this.getStyleElement(n,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let n=this.hostNodes;n.clear(),n.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(j(xt),j(Sf),j(Cv,8),j(qr))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let r=e;return r})(),T_={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},M_=/%COMP%/g,US="%COMP%",y3=`_nghost-${US}`,v3=`_ngcontent-${US}`,_3=!0,x3=new ne("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>_3});function b3(r){return v3.replace(M_,r)}function w3(r){return y3.replace(M_,r)}function jS(r,e){return e.map(t=>t.replace(M_,r))}var NS=(()=>{let e=class e{constructor(n,i,s,o,a,l,u,c=null){this.eventManager=n,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=l,this.ngZone=u,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=g_(l),this.defaultRenderer=new Ju(n,a,u,this.platformIsServer)}createRenderer(n,i){if(!n||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Gn.ShadowDom&&(i=De(O({},i),{encapsulation:Gn.Emulated}));let s=this.getOrCreateRenderer(n,i);return s instanceof cp?s.applyToHost(n):s instanceof ec&&s.applyStyles(),s}getOrCreateRenderer(n,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,l=this.ngZone,u=this.eventManager,c=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(i.encapsulation){case Gn.Emulated:o=new cp(u,c,i,this.appId,h,a,l,d);break;case Gn.ShadowDom:return new A_(u,c,n,i,a,l,this.nonce,d);default:o=new ec(u,c,i,h,a,l,d);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(j(kS),j(BS),j(Sf),j(x3),j(xt),j(qr),j(Se),j(Cv))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let r=e;return r})(),Ju=class{constructor(e,t,n,i){this.eventManager=e,this.doc=t,this.ngZone=n,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(T_[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(FS(e)?e.content:e).appendChild(t)}insertBefore(e,t,n){e&&(FS(e)?e.content:e).insertBefore(t,n)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let n=typeof e=="string"?this.doc.querySelector(e):e;if(!n)throw new J(-5104,!1);return t||(n.textContent=""),n}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,n,i){if(i){t=i+":"+t;let s=T_[i];s?e.setAttributeNS(s,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}removeAttribute(e,t,n){if(n){let i=T_[n];i?e.removeAttributeNS(i,t):e.removeAttribute(`${n}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,n,i){i&(zn.DashCase|zn.Important)?e.style.setProperty(t,n,i&zn.Important?"important":""):e.style[t]=n}removeStyle(e,t,n){n&zn.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,n){e!=null&&(e[t]=n)}setValue(e,t){e.nodeValue=t}listen(e,t,n){if(typeof e=="string"&&(e=_o().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(n))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function FS(r){return r.tagName==="TEMPLATE"&&r.content!==void 0}var A_=class extends Ju{constructor(e,t,n,i,s,o,a,l){super(e,s,o,l),this.sharedStylesHost=t,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=jS(i.id,i.styles);for(let c of u){let h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=c,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,n){return super.insertBefore(this.nodeOrShadowRoot(e),t,n)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ec=class extends Ju{constructor(e,t,n,i,s,o,a,l){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=l?jS(l,n.styles):n.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},cp=class extends ec{constructor(e,t,n,i,s,o,a,l){let u=i+"-"+n.id;super(e,t,n,s,o,a,l,u),this.contentAttr=b3(u),this.hostAttr=w3(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let n=super.createElement(e,t);return super.setAttribute(n,this.contentAttr,""),n}},E3=(()=>{let e=class e extends up{constructor(n){super(n)}supports(n){return!0}addEventListener(n,i,s){return n.addEventListener(i,s,!1),()=>this.removeEventListener(n,i,s)}removeEventListener(n,i,s){return n.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(j(xt))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let r=e;return r})(),LS=["alt","control","meta","shift"],T3={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},C3={alt:r=>r.altKey,control:r=>r.ctrlKey,meta:r=>r.metaKey,shift:r=>r.shiftKey},D3=(()=>{let e=class e extends up{constructor(n){super(n)}supports(n){return e.parseEventName(n)!=null}addEventListener(n,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>_o().onAndCancel(n,o.domEventName,a))}static parseEventName(n){let i=n.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",l=i.indexOf("code");if(l>-1&&(i.splice(l,1),a="code."),LS.forEach(c=>{let h=i.indexOf(c);h>-1&&(i.splice(h,1),a+=c+".")}),a+=o,i.length!=0||o.length===0)return null;let u={};return u.domEventName=s,u.fullKey=a,u}static matchEventFullKeyCode(n,i){let s=T3[n.key]||n.key,o="";return i.indexOf("code.")>-1&&(s=n.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),LS.forEach(a=>{if(a!==s){let l=C3[a];l(n)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(n,i,s){return o=>{e.matchEventFullKeyCode(o,n)&&s.runGuarded(()=>i(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}};e.\u0275fac=function(i){return new(i||e)(j(xt))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let r=e;return r})();function VQ(r,e){return rS(O({rootComponent:r},S3(e)))}function S3(r){return{appProviders:[...VS,...r?.providers??[]],platformProviders:R3}}function I3(){D_.makeCurrent()}function A3(){return new Wn}function M3(){return CC(document),document}var R3=[{provide:qr,useValue:p_},{provide:Tv,useValue:I3,multi:!0},{provide:xt,useFactory:M3,deps:[]}];var P3=new ne(""),O3=[{provide:Gu,useClass:S_,deps:[]},{provide:Kv,useClass:Gf,deps:[Se,$f,Gu]},{provide:Gf,useClass:Gf,deps:[Se,$f,Gu]}],VS=[{provide:Df,useValue:"root"},{provide:Wn,useFactory:A3,deps:[]},{provide:I_,useClass:E3,multi:!0,deps:[xt,Se,qr]},{provide:I_,useClass:D3,multi:!0,deps:[xt]},NS,BS,kS,{provide:Au,useExisting:NS},{provide:Ga,useClass:g3,deps:[]},[]],HQ=(()=>{let e=class e{constructor(n){}static withServerTransition(n){return{ngModule:e,providers:[{provide:Sf,useValue:n.appId}]}}};e.\u0275fac=function(i){return new(i||e)(j(P3,12))},e.\u0275mod=Tn({type:e}),e.\u0275inj=En({providers:[...VS,...O3],imports:[bS,tS]});let r=e;return r})();function N3(){return new R_(j(xt))}var R_=(()=>{let e=class e{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}};e.\u0275fac=function(i){return new(i||e)(j(xt))},e.\u0275prov=W({token:e,factory:function(i){let s=null;return i?s=new i:s=N3(),s},providedIn:"root"});let r=e;return r})();var F3=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:function(i){let s=null;return i?s=new(i||e):s=j(HS),s},providedIn:"root"});let r=e;return r})();function L3(r){return new HS(r.get(xt))}var HS=(()=>{let e=class e extends F3{constructor(n){super(),this._doc=n}sanitize(n,i){if(i==null)return null;switch(n){case Cn.NONE:return i;case Cn.HTML:return Ci(i,"HTML")?Yr(i):Mv(this._doc,String(i)).toString();case Cn.STYLE:return Ci(i,"Style")?Yr(i):i;case Cn.SCRIPT:if(Ci(i,"Script"))return Yr(i);throw new J(5200,!1);case Cn.URL:return Ci(i,"URL")?Yr(i):Mf(String(i));case Cn.RESOURCE_URL:if(Ci(i,"ResourceURL"))return Yr(i);throw new J(5201,!1);default:throw new J(5202,!1)}}bypassSecurityTrustHtml(n){return $C(n)}bypassSecurityTrustStyle(n){return zC(n)}bypassSecurityTrustScript(n){return WC(n)}bypassSecurityTrustUrl(n){return XC(n)}bypassSecurityTrustResourceUrl(n){return qC(n)}};e.\u0275fac=function(i){return new(i||e)(j(xt))},e.\u0275prov=W({token:e,factory:function(i){let s=null;return i?s=new i:s=L3(j(Yn)),s},providedIn:"root"});let r=e;return r})();var pe="primary",gc=Symbol("RouteTitle"),L_=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Za(r){return new L_(r)}function B3(r,e,t){let n=t.path.split("/");if(n.length>r.length||t.pathMatch==="full"&&(e.hasChildren()||n.length<r.length))return null;let i={};for(let s=0;s<n.length;s++){let o=n[s],a=r[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:r.slice(0,n.length),posParams:i}}function U3(r,e){if(r.length!==e.length)return!1;for(let t=0;t<r.length;++t)if(!Kn(r[t],e[t]))return!1;return!0}function Kn(r,e){let t=r?k_(r):void 0,n=e?k_(e):void 0;if(!t||!n||t.length!=n.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!KS(r[i],e[i]))return!1;return!0}function k_(r){return[...Object.keys(r),...Object.getOwnPropertySymbols(r)]}function KS(r,e){if(Array.isArray(r)&&Array.isArray(e)){if(r.length!==e.length)return!1;let t=[...r].sort(),n=[...e].sort();return t.every((i,s)=>n[s]===i)}else return r===e}function QS(r){return r.length>0?r[r.length-1]:null}function bs(r){return Sg(r)?r:Va(r)?He(Promise.resolve(r)):q(r)}var j3={exact:eI,subset:tI},JS={exact:V3,subset:H3,ignored:()=>!0};function GS(r,e,t){return j3[t.paths](r.root,e.root,t.matrixParams)&&JS[t.queryParams](r.queryParams,e.queryParams)&&!(t.fragment==="exact"&&r.fragment!==e.fragment)}function V3(r,e){return Kn(r,e)}function eI(r,e,t){if(!wo(r.segments,e.segments)||!fp(r.segments,e.segments,t)||r.numberOfChildren!==e.numberOfChildren)return!1;for(let n in e.children)if(!r.children[n]||!eI(r.children[n],e.children[n],t))return!1;return!0}function H3(r,e){return Object.keys(e).length<=Object.keys(r).length&&Object.keys(e).every(t=>KS(r[t],e[t]))}function tI(r,e,t){return rI(r,e,e.segments,t)}function rI(r,e,t,n){if(r.segments.length>t.length){let i=r.segments.slice(0,t.length);return!(!wo(i,t)||e.hasChildren()||!fp(i,t,n))}else if(r.segments.length===t.length){if(!wo(r.segments,t)||!fp(r.segments,t,n))return!1;for(let i in e.children)if(!r.children[i]||!tI(r.children[i],e.children[i],n))return!1;return!0}else{let i=t.slice(0,r.segments.length),s=t.slice(r.segments.length);return!wo(r.segments,i)||!fp(r.segments,i,n)||!r.children[pe]?!1:rI(r.children[pe],e,s,n)}}function fp(r,e,t){return e.every((n,i)=>JS[t](r[i].parameters,n.parameters))}var ys=class{constructor(e=new Me([],{}),t={},n=null){this.root=e,this.queryParams=t,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Za(this.queryParams)),this._queryParamMap}toString(){return z3.serialize(this)}},Me=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(n=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return pp(this)}},bo=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Za(this.parameters)),this._parameterMap}toString(){return iI(this)}};function G3(r,e){return wo(r,e)&&r.every((t,n)=>Kn(t.parameters,e[n].parameters))}function wo(r,e){return r.length!==e.length?!1:r.every((t,n)=>t.path===e[n].path)}function $3(r,e){let t=[];return Object.entries(r.children).forEach(([n,i])=>{n===pe&&(t=t.concat(e(i,n)))}),Object.entries(r.children).forEach(([n,i])=>{n!==pe&&(t=t.concat(e(i,n)))}),t}var yc=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>(()=>new ac)(),providedIn:"root"});let r=e;return r})(),ac=class{parse(e){let t=new U_(e);return new ys(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${tc(e.root,!0)}`,n=q3(e.queryParams),i=typeof e.fragment=="string"?`#${W3(e.fragment)}`:"";return`${t}${n}${i}`}},z3=new ac;function pp(r){return r.segments.map(e=>iI(e)).join("/")}function tc(r,e){if(!r.hasChildren())return pp(r);if(e){let t=r.children[pe]?tc(r.children[pe],!1):"",n=[];return Object.entries(r.children).forEach(([i,s])=>{i!==pe&&n.push(`${i}:${tc(s,!1)}`)}),n.length>0?`${t}(${n.join("//")})`:t}else{let t=$3(r,(n,i)=>i===pe?[tc(r.children[pe],!1)]:[`${i}:${tc(n,!1)}`]);return Object.keys(r.children).length===1&&r.children[pe]!=null?`${pp(r)}/${t[0]}`:`${pp(r)}/(${t.join("//")})`}}function nI(r){return encodeURIComponent(r).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function hp(r){return nI(r).replace(/%3B/gi,";")}function W3(r){return encodeURI(r)}function B_(r){return nI(r).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function mp(r){return decodeURIComponent(r)}function $S(r){return mp(r.replace(/\+/g,"%20"))}function iI(r){return`${B_(r.path)}${X3(r.parameters)}`}function X3(r){return Object.keys(r).map(e=>`;${B_(e)}=${B_(r[e])}`).join("")}function q3(r){let e=Object.keys(r).map(t=>{let n=r[t];return Array.isArray(n)?n.map(i=>`${hp(t)}=${hp(i)}`).join("&"):`${hp(t)}=${hp(n)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}var Y3=/^[^\/()?;#]+/;function P_(r){let e=r.match(Y3);return e?e[0]:""}var Z3=/^[^\/()?;=#]+/;function K3(r){let e=r.match(Z3);return e?e[0]:""}var Q3=/^[^=?&#]+/;function J3(r){let e=r.match(Q3);return e?e[0]:""}var ej=/^[^&#]+/;function tj(r){let e=r.match(ej);return e?e[0]:""}var U_=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Me([],{}):new Me([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(n[pe]=new Me(e,t)),n}parseSegment(){let e=P_(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new J(4009,!1);return this.capture(e),new bo(mp(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=K3(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){let i=P_(this.remaining);i&&(n=i,this.capture(n))}e[mp(t)]=mp(n)}parseQueryParam(e){let t=J3(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){let o=tj(this.remaining);o&&(n=o,this.capture(n))}let i=$S(t),s=$S(n);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let n=P_(this.remaining),i=this.remaining[n.length];if(i!=="/"&&i!==")"&&i!==";")throw new J(4010,!1);let s;n.indexOf(":")>-1?(s=n.slice(0,n.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=pe);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[pe]:new Me([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new J(4011,!1)}};function sI(r){return r.segments.length>0?new Me([],{[pe]:r}):r}function oI(r){let e={};for(let n of Object.keys(r.children)){let i=r.children[n],s=oI(i);if(n===pe&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[n]=s)}let t=new Me(r.segments,e);return rj(t)}function rj(r){if(r.numberOfChildren===1&&r.children[pe]){let e=r.children[pe];return new Me(r.segments.concat(e.segments),e.children)}return r}function Ka(r){return r instanceof ys}function nj(r,e,t=null,n=null){let i=aI(r);return lI(i,e,t,n)}function aI(r){let e;function t(s){let o={};for(let l of s.children){let u=t(l);o[l.outlet]=u}let a=new Me(s.url,o);return s===r&&(e=a),a}let n=t(r.root),i=sI(n);return e??i}function lI(r,e,t,n){let i=r;for(;i.parent;)i=i.parent;if(e.length===0)return O_(i,i,i,t,n);let s=ij(e);if(s.toRoot())return O_(i,i,new Me([],{}),t,n);let o=sj(s,i,r),a=o.processChildren?ic(o.segmentGroup,o.index,s.commands):cI(o.segmentGroup,o.index,s.commands);return O_(i,o.segmentGroup,a,t,n)}function gp(r){return typeof r=="object"&&r!=null&&!r.outlets&&!r.segmentPath}function lc(r){return typeof r=="object"&&r!=null&&r.outlets}function O_(r,e,t,n,i){let s={};n&&Object.entries(n).forEach(([l,u])=>{s[l]=Array.isArray(u)?u.map(c=>`${c}`):`${u}`});let o;r===e?o=t:o=uI(r,e,t);let a=sI(oI(o));return new ys(a,s,i)}function uI(r,e,t){let n={};return Object.entries(r.children).forEach(([i,s])=>{s===e?n[i]=t:n[i]=uI(s,e,t)}),new Me(r.segments,n)}var yp=class{constructor(e,t,n){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=n,e&&n.length>0&&gp(n[0]))throw new J(4003,!1);let i=n.find(lc);if(i&&i!==QS(n))throw new J(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function ij(r){if(typeof r[0]=="string"&&r.length===1&&r[0]==="/")return new yp(!0,0,r);let e=0,t=!1,n=r.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([l,u])=>{a[l]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new yp(t,e,n)}var qa=class{constructor(e,t,n){this.segmentGroup=e,this.processChildren=t,this.index=n}};function sj(r,e,t){if(r.isAbsolute)return new qa(e,!0,0);if(!t)return new qa(e,!1,NaN);if(t.parent===null)return new qa(t,!0,0);let n=gp(r.commands[0])?0:1,i=t.segments.length-1+n;return oj(t,i,r.numberOfDoubleDots)}function oj(r,e,t){let n=r,i=e,s=t;for(;s>i;){if(s-=i,n=n.parent,!n)throw new J(4005,!1);i=n.segments.length}return new qa(n,!1,i-s)}function aj(r){return lc(r[0])?r[0].outlets:{[pe]:r}}function cI(r,e,t){if(r||(r=new Me([],{})),r.segments.length===0&&r.hasChildren())return ic(r,e,t);let n=lj(r,e,t),i=t.slice(n.commandIndex);if(n.match&&n.pathIndex<r.segments.length){let s=new Me(r.segments.slice(0,n.pathIndex),{});return s.children[pe]=new Me(r.segments.slice(n.pathIndex),r.children),ic(s,0,i)}else return n.match&&i.length===0?new Me(r.segments,{}):n.match&&!r.hasChildren()?j_(r,e,t):n.match?ic(r,0,i):j_(r,e,t)}function ic(r,e,t){if(t.length===0)return new Me(r.segments,{});{let n=aj(t),i={};if(Object.keys(n).some(s=>s!==pe)&&r.children[pe]&&r.numberOfChildren===1&&r.children[pe].segments.length===0){let s=ic(r.children[pe],e,t);return new Me(r.segments,s.children)}return Object.entries(n).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=cI(r.children[s],e,o))}),Object.entries(r.children).forEach(([s,o])=>{n[s]===void 0&&(i[s]=o)}),new Me(r.segments,i)}}function lj(r,e,t){let n=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<r.segments.length;){if(n>=t.length)return s;let o=r.segments[i],a=t[n];if(lc(a))break;let l=`${a}`,u=n<t.length-1?t[n+1]:null;if(i>0&&l===void 0)break;if(l&&u&&typeof u=="object"&&u.outlets===void 0){if(!WS(l,u,o))return s;n+=2}else{if(!WS(l,{},o))return s;n++}i++}return{match:!0,pathIndex:i,commandIndex:n}}function j_(r,e,t){let n=r.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(lc(s)){let l=uj(s.outlets);return new Me(n,l)}if(i===0&&gp(t[0])){let l=r.segments[e];n.push(new bo(l.path,zS(t[0]))),i++;continue}let o=lc(s)?s.outlets[pe]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&gp(a)?(n.push(new bo(o,zS(a))),i+=2):(n.push(new bo(o,{})),i++)}return new Me(n,{})}function uj(r){let e={};return Object.entries(r).forEach(([t,n])=>{typeof n=="string"&&(n=[n]),n!==null&&(e[t]=j_(new Me([],{}),0,n))}),e}function zS(r){let e={};return Object.entries(r).forEach(([t,n])=>e[t]=`${n}`),e}function WS(r,e,t){return r==t.path&&Kn(e,t.parameters)}var sc="imperative",Kr=class{constructor(e,t){this.id=e,this.url=t}},Qa=class extends Kr{constructor(e,t,n="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=n,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Qn=class extends Kr{constructor(e,t,n){super(e,t),this.urlAfterRedirects=n,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},vs=class extends Kr{constructor(e,t,n,i){super(e,t),this.reason=n,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},_s=class extends Kr{constructor(e,t,n,i){super(e,t),this.reason=n,this.code=i,this.type=16}},uc=class extends Kr{constructor(e,t,n,i){super(e,t),this.error=n,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},vp=class extends Kr{constructor(e,t,n,i){super(e,t),this.urlAfterRedirects=n,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},V_=class extends Kr{constructor(e,t,n,i){super(e,t),this.urlAfterRedirects=n,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},H_=class extends Kr{constructor(e,t,n,i,s){super(e,t),this.urlAfterRedirects=n,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},G_=class extends Kr{constructor(e,t,n,i){super(e,t),this.urlAfterRedirects=n,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},$_=class extends Kr{constructor(e,t,n,i){super(e,t),this.urlAfterRedirects=n,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},z_=class{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},W_=class{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},X_=class{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},q_=class{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Y_=class{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Z_=class{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},_p=class{constructor(e,t,n){this.routerEvent=e,this.position=t,this.anchor=n,this.type=15}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},cc=class{},hc=class{constructor(e){this.url=e}};var K_=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new vc,this.attachRef=null}},vc=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(n,i){let s=this.getOrCreateContext(n);s.outlet=i,this.contexts.set(n,s)}onChildOutletDestroyed(n){let i=this.getContext(n);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let i=this.getContext(n);return i||(i=new K_,this.contexts.set(n,i)),i}getContext(n){return this.contexts.get(n)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})(),xp=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Q_(e,this._root);return t?t.children.map(n=>n.value):[]}firstChild(e){let t=Q_(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=J_(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return J_(e,this._root).map(t=>t.value)}};function Q_(r,e){if(r===e.value)return e;for(let t of e.children){let n=Q_(r,t);if(n)return n}return null}function J_(r,e){if(r===e.value)return[e];for(let t of e.children){let n=J_(r,t);if(n.length)return n.unshift(e),n}return[]}var Or=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Xa(r){let e={};return r&&r.children.forEach(t=>e[t.value.outlet]=t),e}var bp=class extends xp{constructor(e,t){super(e),this.snapshot=t,u0(this,e)}toString(){return this.snapshot.toString()}};function hI(r,e){let t=cj(r,e),n=new Mt([new bo("",{})]),i=new Mt({}),s=new Mt({}),o=new Mt({}),a=new Mt(""),l=new xs(n,i,o,a,s,pe,e,t.root);return l.snapshot=t.root,new bp(new Or(l,[]),t)}function cj(r,e){let t={},n={},i={},s="",o=new dc([],t,i,s,n,pe,e,null,{});return new wp("",new Or(o,[]))}var xs=class{constructor(e,t,n,i,s,o,a,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=n,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(he(u=>u[gc]))??q(void 0),this.url=e,this.params=t,this.queryParams=n,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(he(e=>Za(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(he(e=>Za(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function l0(r,e,t="emptyOnly"){let n,{routeConfig:i}=r;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?n={params:O(O({},e.params),r.params),data:O(O({},e.data),r.data),resolve:O(O(O(O({},r.data),e.data),i?.data),r._resolvedData)}:n={params:O({},r.params),data:O({},r.data),resolve:O(O({},r.data),r._resolvedData??{})},i&&fI(i)&&(n.resolve[gc]=i.title),n}var dc=class{get title(){return this.data?.[gc]}constructor(e,t,n,i,s,o,a,l,u){this.url=e,this.params=t,this.queryParams=n,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Za(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Za(this.queryParams)),this._queryParamMap}toString(){let e=this.url.map(n=>n.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},wp=class extends xp{constructor(e,t){super(t),this.url=e,u0(this,t)}toString(){return dI(this._root)}};function u0(r,e){e.value._routerState=r,e.children.forEach(t=>u0(r,t))}function dI(r){let e=r.children.length>0?` { ${r.children.map(dI).join(", ")} } `:"";return`${r.value}${e}`}function N_(r){if(r.snapshot){let e=r.snapshot,t=r._futureSnapshot;r.snapshot=t,Kn(e.queryParams,t.queryParams)||r.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&r.fragmentSubject.next(t.fragment),Kn(e.params,t.params)||r.paramsSubject.next(t.params),U3(e.url,t.url)||r.urlSubject.next(t.url),Kn(e.data,t.data)||r.dataSubject.next(t.data)}else r.snapshot=r._futureSnapshot,r.dataSubject.next(r._futureSnapshot.data)}function e0(r,e){let t=Kn(r.params,e.params)&&G3(r.url,e.url),n=!r.parent!=!e.parent;return t&&!n&&(!r.parent||e0(r.parent,e.parent))}function fI(r){return typeof r.title=="string"||r.title===null}var hj=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=pe,this.activateEvents=new $r,this.deactivateEvents=new $r,this.attachEvents=new $r,this.detachEvents=new $r,this.parentContexts=V(vc),this.location=V(Dn),this.changeDetector=V(Hu),this.environmentInjector=V(tr),this.inputBinder=V(Dp,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){let{firstChange:i,previousValue:s}=n.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new J(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new J(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new J(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,i){this.activated=n,this._activatedRoute=i,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,i){if(this.isActivated)throw new J(4013,!1);this._activatedRoute=n;let s=this.location,a=n.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,u=new t0(n,l,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:u,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Wr({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Fa]});let r=e;return r})(),t0=class{constructor(e,t,n){this.route=e,this.childContexts=t,this.parent=n}get(e,t){return e===xs?this.route:e===vc?this.childContexts:this.parent.get(e,t)}},Dp=new ne(""),XS=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){let{activatedRoute:i}=n,s=vu([i.queryParams,i.params,i.data]).pipe(_t(([o,a,l],u)=>(l=O(O(O({},o),a),l),u===0?q(l):Promise.resolve(l)))).subscribe(o=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(n);return}let a=nS(i.component);if(!a){this.unsubscribeFromRouteData(n);return}for(let{templateName:l}of a.inputs)n.activatedComponentRef.setInput(l,o[l])});this.outletDataSubscriptions.set(n,s)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac});let r=e;return r})();function dj(r,e,t){let n=fc(r,e._root,t?t._root:void 0);return new bp(n,e)}function fc(r,e,t){if(t&&r.shouldReuseRoute(e.value,t.value.snapshot)){let n=t.value;n._futureSnapshot=e.value;let i=fj(r,e,t);return new Or(n,i)}else{if(r.shouldAttach(e.value)){let s=r.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>fc(r,a)),o}}let n=pj(e.value),i=e.children.map(s=>fc(r,s));return new Or(n,i)}}function fj(r,e,t){return e.children.map(n=>{for(let i of t.children)if(r.shouldReuseRoute(n.value,i.value.snapshot))return fc(r,n,i);return fc(r,n)})}function pj(r){return new xs(new Mt(r.url),new Mt(r.params),new Mt(r.queryParams),new Mt(r.fragment),new Mt(r.data),r.outlet,r.component,r)}var pI="ngNavigationCancelingError";function mI(r,e){let{redirectTo:t,navigationBehaviorOptions:n}=Ka(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=gI(!1,0,e);return i.url=t,i.navigationBehaviorOptions=n,i}function gI(r,e,t){let n=new Error("NavigationCancelingError: "+(r||""));return n[pI]=!0,n.cancellationCode=e,t&&(n.url=t),n}function mj(r){return yI(r)&&Ka(r.url)}function yI(r){return r&&r[pI]}var gj=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=OT({type:e,selectors:[["ng-component"]],standalone:!0,features:[WD],decls:1,vars:0,template:function(i,s){i&1&&Xv(0,"router-outlet")},dependencies:[hj],encapsulation:2});let r=e;return r})();function yj(r,e){return r.providers&&!r._injector&&(r._injector=Bf(r.providers,e,`Route: ${r.path}`)),r._injector??e}function c0(r){let e=r.children&&r.children.map(c0),t=e?De(O({},r),{children:e}):O({},r);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==pe&&(t.component=gj),t}function Jn(r){return r.outlet||pe}function vj(r,e){let t=r.filter(n=>Jn(n)===e);return t.push(...r.filter(n=>Jn(n)!==e)),t}function _c(r){if(!r)return null;if(r.routeConfig?._injector)return r.routeConfig._injector;for(let e=r.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var _j=(r,e,t,n)=>he(i=>(new r0(e,i.targetRouterState,i.currentRouterState,t,n).activate(r),i)),r0=class{constructor(e,t,n,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=n,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,n,e),N_(this.futureState.root),this.activateChildRoutes(t,n,e)}deactivateChildRoutes(e,t,n){let i=Xa(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],n),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,n)})}deactivateRoutes(e,t,n){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=n.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,n);else s&&this.deactivateRouteAndItsChildren(t,n)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let n=t.getContext(e.value.outlet),i=n&&e.value.component?n.children:t,s=Xa(e);for(let o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(n&&n.outlet){let o=n.outlet.detach(),a=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let n=t.getContext(e.value.outlet),i=n&&e.value.component?n.children:t,s=Xa(e);for(let o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);n&&(n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated()),n.attachRef=null,n.route=null)}activateChildRoutes(e,t,n){let i=Xa(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],n),this.forwardEvent(new Z_(s.value.snapshot))}),e.children.length&&this.forwardEvent(new q_(e.value.snapshot))}activateRoutes(e,t,n){let i=e.value,s=t?t.value:null;if(N_(i),i===s)if(i.component){let o=n.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,n);else if(i.component){let o=n.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),N_(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=_c(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,n)}},Ep=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ya=class{constructor(e,t){this.component=e,this.route=t}};function xj(r,e,t){let n=r._root,i=e?e._root:null;return rc(n,i,t,[n.value])}function bj(r){let e=r.routeConfig?r.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:r,guards:e}}function el(r,e){let t=Symbol(),n=e.get(r,t);return n===t?typeof r=="function"&&!wT(r)?r:e.get(r):n}function rc(r,e,t,n,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Xa(e);return r.children.forEach(o=>{wj(o,s[o.value.outlet],t,n.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>oc(a,t.getContext(o),i)),i}function wj(r,e,t,n,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=r.value,o=e?e.value:null,a=t?t.getContext(r.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let l=Ej(o,s,s.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new Ep(n)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?rc(r,e,a?a.children:null,n,i):rc(r,e,t,n,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ya(a.outlet.component,o))}else o&&oc(e,a,i),i.canActivateChecks.push(new Ep(n)),s.component?rc(r,null,a?a.children:null,n,i):rc(r,null,t,n,i);return i}function Ej(r,e,t){if(typeof t=="function")return t(r,e);switch(t){case"pathParamsChange":return!wo(r.url,e.url);case"pathParamsOrQueryParamsChange":return!wo(r.url,e.url)||!Kn(r.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!e0(r,e)||!Kn(r.queryParams,e.queryParams);case"paramsChange":default:return!e0(r,e)}}function oc(r,e,t){let n=Xa(r),i=r.value;Object.entries(n).forEach(([s,o])=>{i.component?e?oc(o,e.children.getContext(s),t):oc(o,null,t):oc(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Ya(e.outlet.component,i)):t.canDeactivateChecks.push(new Ya(null,i)):t.canDeactivateChecks.push(new Ya(null,i))}function xc(r){return typeof r=="function"}function Tj(r){return typeof r=="boolean"}function Cj(r){return r&&xc(r.canLoad)}function Dj(r){return r&&xc(r.canActivate)}function Sj(r){return r&&xc(r.canActivateChild)}function Ij(r){return r&&xc(r.canDeactivate)}function Aj(r){return r&&xc(r.canMatch)}function vI(r){return r instanceof vi||r?.name==="EmptyError"}var dp=Symbol("INITIAL_VALUE");function Ja(){return _t(r=>vu(r.map(e=>e.pipe(Sr(1),Lg(dp)))).pipe(he(e=>{for(let t of e)if(t!==!0){if(t===dp)return dp;if(t===!1||t instanceof ys)return t}return!0}),vt(e=>e!==dp),Sr(1)))}function Mj(r,e){return ze(t=>{let{targetSnapshot:n,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?q(De(O({},t),{guardsResult:!0})):Rj(o,n,i,r).pipe(ze(a=>a&&Tj(a)?Pj(n,s,r,e):q(a)),he(a=>De(O({},t),{guardsResult:a})))})}function Rj(r,e,t,n){return He(r).pipe(ze(i=>kj(i.component,i.route,t,e,n)),Un(i=>i!==!0,!0))}function Pj(r,e,t,n){return He(e).pipe(_i(i=>ss(Nj(i.route.parent,n),Oj(i.route,n),Lj(r,i.path,t),Fj(r,i.route,t))),Un(i=>i!==!0,!0))}function Oj(r,e){return r!==null&&e&&e(new Y_(r)),q(!0)}function Nj(r,e){return r!==null&&e&&e(new X_(r)),q(!0)}function Fj(r,e,t){let n=e.routeConfig?e.routeConfig.canActivate:null;if(!n||n.length===0)return q(!0);let i=n.map(s=>Pd(()=>{let o=_c(e)??t,a=el(s,o),l=Dj(a)?a.canActivate(e,r):qn(o,()=>a(e,r));return bs(l).pipe(Un())}));return q(i).pipe(Ja())}function Lj(r,e,t){let n=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>bj(o)).filter(o=>o!==null).map(o=>Pd(()=>{let a=o.guards.map(l=>{let u=_c(o.node)??t,c=el(l,u),h=Sj(c)?c.canActivateChild(n,r):qn(u,()=>c(n,r));return bs(h).pipe(Un())});return q(a).pipe(Ja())}));return q(s).pipe(Ja())}function kj(r,e,t,n,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return q(!0);let o=s.map(a=>{let l=_c(e)??i,u=el(a,l),c=Ij(u)?u.canDeactivate(r,e,t,n):qn(l,()=>u(r,e,t,n));return bs(c).pipe(Un())});return q(o).pipe(Ja())}function Bj(r,e,t,n){let i=e.canLoad;if(i===void 0||i.length===0)return q(!0);let s=i.map(o=>{let a=el(o,r),l=Cj(a)?a.canLoad(e,t):qn(r,()=>a(e,t));return bs(l)});return q(s).pipe(Ja(),_I(n))}function _I(r){return xg(it(e=>{if(Ka(e))throw mI(r,e)}),he(e=>e===!0))}function Uj(r,e,t,n){let i=e.canMatch;if(!i||i.length===0)return q(!0);let s=i.map(o=>{let a=el(o,r),l=Aj(a)?a.canMatch(e,t):qn(r,()=>a(e,t));return bs(l)});return q(s).pipe(Ja(),_I(n))}var pc=class{constructor(e){this.segmentGroup=e||null}},Tp=class extends Error{constructor(e){super(),this.urlTree=e}};function Wa(r){return ga(new pc(r))}function jj(r){return ga(new J(4e3,!1))}function Vj(r){return ga(gI(!1,3))}var n0=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let n=[],i=t.root;for(;;){if(n=n.concat(i.segments),i.numberOfChildren===0)return q(n);if(i.numberOfChildren>1||!i.children[pe])return jj(e.redirectTo);i=i.children[pe]}}applyRedirectCommands(e,t,n){let i=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,n);if(t.startsWith("/"))throw new Tp(i);return i}applyRedirectCreateUrlTree(e,t,n,i){let s=this.createSegmentGroup(e,t.root,n,i);return new ys(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let n={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);n[i]=t[a]}else n[i]=s}),n}createSegmentGroup(e,t,n,i){let s=this.createSegments(e,t.segments,n,i),o={};return Object.entries(t.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(e,l,n,i)}),new Me(s,o)}createSegments(e,t,n,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,n))}findPosParam(e,t,n){let i=n[t.path.substring(1)];if(!i)throw new J(4001,!1);return i}findOrReturn(e,t){let n=0;for(let i of t){if(i.path===e.path)return t.splice(n),i;n++}return e}},i0={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Hj(r,e,t,n,i){let s=h0(r,e,t);return s.matched?(n=yj(e,n),Uj(n,e,t,i).pipe(he(o=>o===!0?s:O({},i0)))):q(s)}function h0(r,e,t){if(e.path==="**")return Gj(t);if(e.path==="")return e.pathMatch==="full"&&(r.hasChildren()||t.length>0)?O({},i0):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||B3)(t,r,e);if(!i)return O({},i0);let s={};Object.entries(i.posParams??{}).forEach(([a,l])=>{s[a]=l.path});let o=i.consumed.length>0?O(O({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function Gj(r){return{matched:!0,parameters:r.length>0?QS(r).parameters:{},consumedSegments:r,remainingSegments:[],positionalParamSegments:{}}}function qS(r,e,t,n){return t.length>0&&Wj(r,t,n)?{segmentGroup:new Me(e,zj(n,new Me(t,r.children))),slicedSegments:[]}:t.length===0&&Xj(r,t,n)?{segmentGroup:new Me(r.segments,$j(r,e,t,n,r.children)),slicedSegments:t}:{segmentGroup:new Me(r.segments,r.children),slicedSegments:t}}function $j(r,e,t,n,i){let s={};for(let o of n)if(Sp(r,t,o)&&!i[Jn(o)]){let a=new Me([],{});s[Jn(o)]=a}return O(O({},i),s)}function zj(r,e){let t={};t[pe]=e;for(let n of r)if(n.path===""&&Jn(n)!==pe){let i=new Me([],{});t[Jn(n)]=i}return t}function Wj(r,e,t){return t.some(n=>Sp(r,e,n)&&Jn(n)!==pe)}function Xj(r,e,t){return t.some(n=>Sp(r,e,n))}function Sp(r,e,t){return(r.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function qj(r,e,t,n){return Jn(r)!==n&&(n===pe||!Sp(e,t,r))?!1:h0(e,r,t).matched}function Yj(r,e,t){return e.length===0&&!r.children[t]}var s0=class{};function Zj(r,e,t,n,i,s,o="emptyOnly"){return new o0(r,e,t,n,i,o,s).recognize()}var Kj=31,o0=class{constructor(e,t,n,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=n,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new n0(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new J(4002,`'${e.segmentGroup}'`)}recognize(){let e=qS(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(he(t=>{let n=new dc([],Object.freeze({}),Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,{},pe,this.rootComponentType,null,{}),i=new Or(n,t),s=new wp("",i),o=nj(n,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,pe).pipe(gn(n=>{if(n instanceof Tp)return this.urlTree=n.urlTree,this.match(n.urlTree.root);throw n instanceof pc?this.noMatchError(n):n}))}inheritParamsAndData(e,t){let n=e.value,i=l0(n,t,this.paramsInheritanceStrategy);n.params=Object.freeze(i.params),n.data=Object.freeze(i.data),e.children.forEach(s=>this.inheritParamsAndData(s,n))}processSegmentGroup(e,t,n,i){return n.segments.length===0&&n.hasChildren()?this.processChildren(e,t,n):this.processSegment(e,t,n,n.segments,i,!0).pipe(he(s=>s instanceof Or?[s]:[]))}processChildren(e,t,n){let i=[];for(let s of Object.keys(n.children))s==="primary"?i.unshift(s):i.push(s);return He(i).pipe(_i(s=>{let o=n.children[s],a=vj(t,s);return this.processSegmentGroup(e,a,o,s)}),Pg((s,o)=>(s.push(...o),s)),os(null),Rg(),ze(s=>{if(s===null)return Wa(n);let o=xI(s);return Qj(o),q(o)}))}processSegment(e,t,n,i,s,o){return He(t).pipe(_i(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,n,i,s,o).pipe(gn(l=>{if(l instanceof pc)return q(null);throw l}))),Un(a=>!!a),gn(a=>{if(vI(a))return Yj(n,i,s)?q(new s0):Wa(n);throw a}))}processSegmentAgainstRoute(e,t,n,i,s,o,a){return qj(n,i,s,o)?n.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,n,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,n,s,o):Wa(i):Wa(i)}expandSegmentAgainstRouteUsingRedirect(e,t,n,i,s,o){let{matched:a,consumedSegments:l,positionalParamSegments:u,remainingSegments:c}=h0(t,i,s);if(!a)return Wa(t);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Kj&&(this.allowRedirects=!1));let h=this.applyRedirects.applyRedirectCommands(l,i.redirectTo,u);return this.applyRedirects.lineralizeSegments(i,h).pipe(ze(d=>this.processSegment(e,n,t,d.concat(c),o,!1)))}matchSegmentAgainstRoute(e,t,n,i,s){let o=Hj(t,n,i,e,this.urlSerializer);return n.path==="**"&&(t.children={}),o.pipe(_t(a=>a.matched?(e=n._injector??e,this.getChildConfig(e,n,i).pipe(_t(({routes:l})=>{let u=n._loadedInjector??e,{consumedSegments:c,remainingSegments:h,parameters:d}=a,f=new dc(c,d,Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,eV(n),Jn(n),n.component??n._loadedComponent??null,n,tV(n)),{segmentGroup:p,slicedSegments:m}=qS(t,c,h,l);if(m.length===0&&p.hasChildren())return this.processChildren(u,l,p).pipe(he(y=>y===null?null:new Or(f,y)));if(l.length===0&&m.length===0)return q(new Or(f,[]));let g=Jn(n)===s;return this.processSegment(u,l,p,m,g?pe:s,!0).pipe(he(y=>new Or(f,y instanceof Or?[y]:[])))}))):Wa(t)))}getChildConfig(e,t,n){return t.children?q({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?q({routes:t._loadedRoutes,injector:t._loadedInjector}):Bj(e,t,n,this.urlSerializer).pipe(ze(i=>i?this.configLoader.loadChildren(e,t).pipe(it(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):Vj(t))):q({routes:[],injector:e})}};function Qj(r){r.sort((e,t)=>e.value.outlet===pe?-1:t.value.outlet===pe?1:e.value.outlet.localeCompare(t.value.outlet))}function Jj(r){let e=r.value.routeConfig;return e&&e.path===""}function xI(r){let e=[],t=new Set;for(let n of r){if(!Jj(n)){e.push(n);continue}let i=e.find(s=>n.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...n.children),t.add(i)):e.push(n)}for(let n of t){let i=xI(n.children);e.push(new Or(n.value,i))}return e.filter(n=>!t.has(n))}function eV(r){return r.data||{}}function tV(r){return r.resolve||{}}function rV(r,e,t,n,i,s){return ze(o=>Zj(r,e,t,n,o.extractedUrl,i,s).pipe(he(({state:a,tree:l})=>De(O({},o),{targetSnapshot:a,urlAfterRedirects:l}))))}function nV(r,e){return ze(t=>{let{targetSnapshot:n,guards:{canActivateChecks:i}}=t;if(!i.length)return q(t);let s=new Set(i.map(l=>l.route)),o=new Set;for(let l of s)if(!o.has(l))for(let u of bI(l))o.add(u);let a=0;return He(o).pipe(_i(l=>s.has(l)?iV(l,n,r,e):(l.data=l0(l,l.parent,r).resolve,q(void 0))),it(()=>a++),va(1),ze(l=>a===o.size?q(t):dr))})}function bI(r){let e=r.children.map(t=>bI(t)).flat();return[r,...e]}function iV(r,e,t,n){let i=r.routeConfig,s=r._resolve;return i?.title!==void 0&&!fI(i)&&(s[gc]=i.title),sV(s,r,e,n).pipe(he(o=>(r._resolvedData=o,r.data=l0(r,r.parent,t).resolve,null)))}function sV(r,e,t,n){let i=k_(r);if(i.length===0)return q({});let s={};return He(i).pipe(ze(o=>oV(r[o],e,t,n).pipe(Un(),it(a=>{s[o]=a}))),va(1),_u(s),gn(o=>vI(o)?dr:ga(o)))}function oV(r,e,t,n){let i=_c(e)??n,s=el(r,i),o=s.resolve?s.resolve(e,t):qn(i,()=>s(e,t));return bs(o)}function F_(r){return _t(e=>{let t=r(e);return t?He(t).pipe(he(()=>e)):q(e)})}var wI=(()=>{let e=class e{buildTitle(n){let i,s=n.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===pe);return i}getResolvedTitleForRoute(n){return n.data[gc]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>(()=>V(aV))(),providedIn:"root"});let r=e;return r})(),aV=(()=>{let e=class e extends wI{constructor(n){super(),this.title=n}updateTitle(n){let i=this.buildTitle(n);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(j(R_))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})(),bc=new ne("",{providedIn:"root",factory:()=>({})}),mc=new ne("ROUTES"),d0=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=V(Hf)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return q(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let i=bs(n.loadComponent()).pipe(he(EI),it(o=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=o}),xi(()=>{this.componentLoaders.delete(n)})),s=new ha(i,()=>new nt).pipe(ca());return this.componentLoaders.set(n,s),s}loadChildren(n,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return q({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=lV(i,this.compiler,n,this.onLoadEndListener).pipe(xi(()=>{this.childrenLoaders.delete(i)})),a=new ha(o,()=>new nt).pipe(ca());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})();function lV(r,e,t,n){return bs(r.loadChildren()).pipe(he(EI),ze(i=>i instanceof Pu||Array.isArray(i)?q(i):He(e.compileModuleAsync(i))),he(i=>{n&&n(r);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(t).injector,o=s.get(mc,[],{optional:!0,self:!0}).flat()),{routes:o.map(c0),injector:s}}))}function uV(r){return r&&typeof r=="object"&&"default"in r}function EI(r){return uV(r)?r.default:r}var f0=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>(()=>V(cV))(),providedIn:"root"});let r=e;return r})(),cV=(()=>{let e=class e{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,i){return n}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})(),TI=new ne(""),CI=new ne("");function hV(r,e,t){let n=r.get(CI),i=r.get(xt);return r.get(Se).runOutsideAngular(()=>{if(!i.startViewTransition||n.skipNextTransition)return n.skipNextTransition=!1,Promise.resolve();let s,o=new Promise(u=>{s=u}),a=i.startViewTransition(()=>(s(),dV(r))),{onViewTransitionCreated:l}=n;return l&&qn(r,()=>l({transition:a,from:e,to:t})),o})}function dV(r){return new Promise(e=>{Gv(e,{injector:r})})}var p0=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new nt,this.transitionAbortSubject=new nt,this.configLoader=V(d0),this.environmentInjector=V(tr),this.urlSerializer=V(yc),this.rootContexts=V(vc),this.location=V($a),this.inputBindingEnabled=V(Dp,{optional:!0})!==null,this.titleStrategy=V(wI),this.options=V(bc,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=V(f0),this.createViewTransition=V(TI,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>q(void 0),this.rootComponentType=null;let n=s=>this.events.next(new z_(s)),i=s=>this.events.next(new W_(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=n}complete(){this.transitions?.complete()}handleNavigationRequest(n){let i=++this.navigationId;this.transitions?.next(De(O(O({},this.transitions.value),n),{id:i}))}setupNavigations(n,i,s){return this.transitions=new Mt({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:sc,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(vt(o=>o.id!==0),he(o=>De(O({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),_t(o=>{this.currentTransition=o;let a=!1,l=!1;return q(o).pipe(it(u=>{this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?De(O({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),_t(u=>{let c=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=u.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!c&&h!=="reload"){let d="";return this.events.next(new _s(u.id,this.urlSerializer.serialize(u.rawUrl),d,0)),u.resolve(null),dr}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return q(u).pipe(_t(d=>{let f=this.transitions?.getValue();return this.events.next(new Qa(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),f!==this.transitions?.getValue()?dr:Promise.resolve(d)}),rV(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),it(d=>{o.targetSnapshot=d.targetSnapshot,o.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation=De(O({},this.currentNavigation),{finalUrl:d.urlAfterRedirects});let f=new vp(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:d,extractedUrl:f,source:p,restoredState:m,extras:g}=u,y=new Qa(d,this.urlSerializer.serialize(f),p,m);this.events.next(y);let _=hI(f,this.rootComponentType).snapshot;return this.currentTransition=o=De(O({},u),{targetSnapshot:_,urlAfterRedirects:f,extras:De(O({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,q(o)}else{let d="";return this.events.next(new _s(u.id,this.urlSerializer.serialize(u.extractedUrl),d,1)),u.resolve(null),dr}}),it(u=>{let c=new V_(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(c)}),he(u=>(this.currentTransition=o=De(O({},u),{guards:xj(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),Mj(this.environmentInjector,u=>this.events.next(u)),it(u=>{if(o.guardsResult=u.guardsResult,Ka(u.guardsResult))throw mI(this.urlSerializer,u.guardsResult);let c=new H_(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(c)}),vt(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",3),!1)),F_(u=>{if(u.guards.canActivateChecks.length)return q(u).pipe(it(c=>{let h=new G_(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(h)}),_t(c=>{let h=!1;return q(c).pipe(nV(this.paramsInheritanceStrategy,this.environmentInjector),it({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(c,"",2)}}))}),it(c=>{let h=new $_(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(h)}))}),F_(u=>{let c=h=>{let d=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(h.routeConfig).pipe(it(f=>{h.component=f}),he(()=>{})));for(let f of h.children)d.push(...c(f));return d};return vu(c(u.targetSnapshot.root)).pipe(os(null),Sr(1))}),F_(()=>this.afterPreactivation()),_t(()=>{let{currentSnapshot:u,targetSnapshot:c}=o,h=this.createViewTransition?.(this.environmentInjector,u.root,c.root);return h?He(h).pipe(he(()=>o)):q(o)}),he(u=>{let c=dj(n.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=De(O({},u),{targetRouterState:c}),this.currentNavigation.targetRouterState=c,o}),it(()=>{this.events.next(new cc)}),_j(this.rootContexts,n.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Sr(1),it({next:u=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Qn(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{a=!0}}),kg(this.transitionAbortSubject.pipe(it(u=>{throw u}))),xi(()=>{if(!a&&!l){let u="";this.cancelNavigationTransition(o,u,1)}this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),gn(u=>{if(l=!0,yI(u))this.events.next(new vs(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),mj(u)?this.events.next(new hc(u.url)):o.resolve(!1);else{this.events.next(new uc(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0));try{o.resolve(n.errorHandler(u))}catch(c){o.reject(c)}}return dr}))}))}cancelNavigationTransition(n,i,s){let o=new vs(n.id,this.urlSerializer.serialize(n.extractedUrl),i,s);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})();function fV(r){return r!==sc}var pV=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>(()=>V(mV))(),providedIn:"root"});let r=e;return r})(),a0=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},mV=(()=>{let e=class e extends a0{};e.\u0275fac=(()=>{let n;return function(s){return(n||(n=yv(e)))(s||e)}})(),e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})(),DI=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>(()=>V(gV))(),providedIn:"root"});let r=e;return r})(),gV=(()=>{let e=class e extends DI{constructor(){super(...arguments),this.location=V($a),this.urlSerializer=V(yc),this.options=V(bc,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=V(f0),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new ys,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=hI(this.currentUrlTree,null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(i=>{i.type==="popstate"&&n(i.url,i.state)})}handleRouterEvent(n,i){if(n instanceof Qa)this.stateMemento=this.createStateMemento();else if(n instanceof _s)this.rawUrlTree=i.initialUrl;else if(n instanceof vp){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(s,i)}}else n instanceof cc?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):n instanceof vs&&(n.code===3||n.code===2)?this.restoreHistory(i):n instanceof uc?this.restoreHistory(i,!0):n instanceof Qn&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,i){let s=this.urlSerializer.serialize(n);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=O(O({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=O(O({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(n,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===n.finalUrl&&o===0&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,i){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:i}:{navigationId:n}}};e.\u0275fac=(()=>{let n;return function(s){return(n||(n=yv(e)))(s||e)}})(),e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})(),nc=function(r){return r[r.COMPLETE=0]="COMPLETE",r[r.FAILED=1]="FAILED",r[r.REDIRECTING=2]="REDIRECTING",r}(nc||{});function SI(r,e){r.events.pipe(vt(t=>t instanceof Qn||t instanceof vs||t instanceof uc||t instanceof _s),he(t=>t instanceof Qn||t instanceof _s?nc.COMPLETE:(t instanceof vs?t.code===0||t.code===1:!1)?nc.REDIRECTING:nc.FAILED),vt(t=>t!==nc.REDIRECTING),Sr(1)).subscribe(()=>{e()})}function yV(r){throw r}var vV={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},_V={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},In=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=V(Vf),this.stateManager=V(DI),this.options=V(bc,{optional:!0})||{},this.pendingTasks=V(go),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=V(p0),this.urlSerializer=V(yc),this.location=V($a),this.urlHandlingStrategy=V(f0),this._events=new nt,this.errorHandler=this.options.errorHandler||yV,this.navigated=!1,this.routeReuseStrategy=V(pV),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=V(mc,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!V(Dp,{optional:!0}),this.eventsSubscription=new Ye,this.isNgZoneEnabled=V(Se)instanceof Se&&Se.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof vs&&i.code!==0&&i.code!==1)this.navigated=!0;else if(i instanceof Qn)this.navigated=!0;else if(i instanceof hc){let a=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),l={skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||fV(s.source)};this.scheduleNavigation(a,sc,null,l,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}bV(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),sc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription||(this.nonRouterCurrentEntryChangeSubscription=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",i)},0)}))}navigateToSyncWithBrowser(n,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let u=O({},s);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let l=this.parseUrl(n);this.scheduleNavigation(l,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(c0),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:l,preserveFragment:u}=i,c=u?this.currentUrlTree.fragment:a,h=null;switch(l){case"merge":h=O(O({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let d;try{let f=s?s.snapshot:this.routerState.snapshot.root;d=aI(f)}catch{(typeof n[0]!="string"||!n[0].startsWith("/"))&&(n=[]),d=this.currentUrlTree.root}return lI(d,n,h,c??null)}navigateByUrl(n,i={skipLocationChange:!1}){let s=Ka(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,sc,null,i)}navigate(n,i={skipLocationChange:!1}){return xV(n),this.navigateByUrl(this.createUrlTree(n,i),i)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,i){let s;if(i===!0?s=O({},vV):i===!1?s=O({},_V):s=i,Ka(n))return GS(this.currentUrlTree,n,s);let o=this.parseUrl(n);return GS(this.currentUrlTree,o,s)}removeEmptyProps(n){return Object.keys(n).reduce((i,s)=>{let o=n[s];return o!=null&&(i[s]=o),i},{})}scheduleNavigation(n,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let l,u,c;a?(l=a.resolve,u=a.reject,c=a.promise):c=new Promise((d,f)=>{l=d,u=f});let h=this.pendingTasks.add();return SI(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:l,reject:u,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})();function xV(r){for(let e=0;e<r.length;e++)if(r[e]==null)throw new J(4008,!1)}function bV(r){return!(r instanceof cc)&&!(r instanceof hc)}var oJ=(()=>{let e=class e{constructor(n,i,s,o,a,l){this.router=n,this.route=i,this.tabIndexAttribute=s,this.renderer=o,this.el=a,this.locationStrategy=l,this.href=null,this.commands=null,this.onChanges=new nt,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let u=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area",this.isAnchorElement?this.subscription=n.events.subscribe(c=>{c instanceof Qn&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(n){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(n){n!=null?(this.commands=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(n,i,s,o,a){if(this.urlTree===null||this.isAnchorElement&&(n!==0||i||s||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state};return this.router.navigateByUrl(this.urlTree,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=this.urlTree!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;let n=this.href===null?null:JC(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",n)}applyAttributeValue(n,i){let s=this.renderer,o=this.el.nativeElement;i!==null?s.setAttribute(o,n,i):s.removeAttribute(o,n)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(i){return new(i||e)(we(In),we(xs),vv("tabindex"),we(Ba),we(Zn),we(Ri))},e.\u0275dir=Wr({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,s){i&1&&Yv("click",function(a){return s.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),i&2&&Wv("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",Wu],skipLocationChange:["skipLocationChange","skipLocationChange",Wu],replaceUrl:["replaceUrl","replaceUrl",Wu],routerLink:"routerLink"},standalone:!0,features:[zv,Fa]});let r=e;return r})();var Cp=class{};var wV=(()=>{let e=class e{constructor(n,i,s,o,a){this.router=n,this.injector=s,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(vt(n=>n instanceof Qn),_i(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,i){let s=[];for(let o of i){o.providers&&!o._injector&&(o._injector=Bf(o.providers,n,`Route: ${o.path}`));let a=o._injector??n,l=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&s.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&s.push(this.processRoutes(l,o.children??o._loadedRoutes))}return He(s).pipe(is())}preloadConfig(n,i){return this.preloadingStrategy.preload(i,()=>{let s;i.loadChildren&&i.canLoad===void 0?s=this.loader.loadChildren(n,i):s=q(null);let o=s.pipe(ze(a=>a===null?q(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??n,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return He([o,a]).pipe(is())}else return o})}};e.\u0275fac=function(i){return new(i||e)(j(In),j(Hf),j(tr),j(Cp),j(d0))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})(),II=new ne(""),EV=(()=>{let e=class e{constructor(n,i,s,o,a={}){this.urlSerializer=n,this.transitions=i,this.viewportScroller=s,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration=a.scrollPositionRestoration||"disabled",a.anchorScrolling=a.anchorScrolling||"disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof Qa?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof Qn?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof _s&&n.code===0&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof _p&&(n.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(n.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new _p(n,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(i){sD()},e.\u0275prov=W({token:e,factory:e.\u0275fac});let r=e;return r})();function aJ(r,...e){return La([{provide:mc,multi:!0,useValue:r},[],{provide:xs,useFactory:AI,deps:[In]},{provide:$u,multi:!0,useFactory:MI},e.map(t=>t.\u0275providers)])}function AI(r){return r.routerState.root}function wc(r,e){return{\u0275kind:r,\u0275providers:e}}function MI(){let r=V(Yn);return e=>{let t=r.get(yo);if(e!==t.components[0])return;let n=r.get(In),i=r.get(RI);r.get(m0)===1&&n.initialNavigation(),r.get(PI,null,ye.Optional)?.setUpPreloading(),r.get(II,null,ye.Optional)?.init(),n.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var RI=new ne("",{factory:()=>new nt}),m0=new ne("",{providedIn:"root",factory:()=>1});function TV(){return wc(2,[{provide:m0,useValue:0},{provide:Ha,multi:!0,deps:[Yn],useFactory:e=>{let t=e.get(fS,Promise.resolve());return()=>t.then(()=>new Promise(n=>{let i=e.get(In),s=e.get(RI);SI(i,()=>{n(!0)}),e.get(p0).afterPreactivation=()=>(n(!0),s.closed?q(void 0):s),i.initialNavigation()}))}}])}function CV(){return wc(3,[{provide:Ha,multi:!0,useFactory:()=>{let e=V(In);return()=>{e.setUpLocationChangeListener()}}},{provide:m0,useValue:2}])}var PI=new ne("");function DV(r){return wc(0,[{provide:PI,useExisting:wV},{provide:Cp,useExisting:r}])}function SV(){return wc(8,[XS,{provide:Dp,useExisting:XS}])}function IV(r){let e=[{provide:TI,useValue:hV},{provide:CI,useValue:O({skipNextTransition:!!r?.skipInitialTransition},r)}];return wc(9,e)}var YS=new ne("ROUTER_FORROOT_GUARD"),AV=[$a,{provide:yc,useClass:ac},In,vc,{provide:xs,useFactory:AI,deps:[In]},d0,[]],lJ=(()=>{let e=class e{constructor(n){}static forRoot(n,i){return{ngModule:e,providers:[AV,[],{provide:mc,multi:!0,useValue:n},{provide:YS,useFactory:OV,deps:[[In,new Uu,new Cf]]},{provide:bc,useValue:i||{}},i?.useHash?RV():PV(),MV(),i?.preloadingStrategy?DV(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?NV(i):[],i?.bindToComponentInputs?SV().\u0275providers:[],i?.enableViewTransitions?IV().\u0275providers:[],FV()]}}static forChild(n){return{ngModule:e,providers:[{provide:mc,multi:!0,useValue:n}]}}};e.\u0275fac=function(i){return new(i||e)(j(YS,8))},e.\u0275mod=Tn({type:e}),e.\u0275inj=En({});let r=e;return r})();function MV(){return{provide:II,useFactory:()=>{let r=V(wS),e=V(Se),t=V(bc),n=V(p0),i=V(yc);return t.scrollOffset&&r.setOffset(t.scrollOffset),new EV(i,n,r,e,t)}}}function RV(){return{provide:Ri,useClass:mS}}function PV(){return{provide:Ri,useClass:f_}}function OV(r){return"guarded"}function NV(r){return[r.initialNavigation==="disabled"?CV().\u0275providers:[],r.initialNavigation==="enabledBlocking"?TV().\u0275providers:[]]}var ZS=new ne("");function FV(){return[{provide:ZS,useFactory:MI},{provide:$u,multi:!0,useExisting:ZS}]}var Ec={socket:"/",homeUrl:"/",apiUrl:"/api/v1/",assetsUrl:"/assets/",avatarUrl:"/assets/avatar/",uploadUrl:"/uploads/",uploadAvatarUrl:"/uploads/avatar/"};var Nr=(r=>(r[r.WEBGL_LEGACY=0]="WEBGL_LEGACY",r[r.WEBGL=1]="WEBGL",r[r.WEBGL2=2]="WEBGL2",r))(Nr||{}),g0=(r=>(r[r.UNKNOWN=0]="UNKNOWN",r[r.WEBGL=1]="WEBGL",r[r.CANVAS=2]="CANVAS",r))(g0||{}),Ip=(r=>(r[r.COLOR=16384]="COLOR",r[r.DEPTH=256]="DEPTH",r[r.STENCIL=1024]="STENCIL",r))(Ip||{}),re=(r=>(r[r.NORMAL=0]="NORMAL",r[r.ADD=1]="ADD",r[r.MULTIPLY=2]="MULTIPLY",r[r.SCREEN=3]="SCREEN",r[r.OVERLAY=4]="OVERLAY",r[r.DARKEN=5]="DARKEN",r[r.LIGHTEN=6]="LIGHTEN",r[r.COLOR_DODGE=7]="COLOR_DODGE",r[r.COLOR_BURN=8]="COLOR_BURN",r[r.HARD_LIGHT=9]="HARD_LIGHT",r[r.SOFT_LIGHT=10]="SOFT_LIGHT",r[r.DIFFERENCE=11]="DIFFERENCE",r[r.EXCLUSION=12]="EXCLUSION",r[r.HUE=13]="HUE",r[r.SATURATION=14]="SATURATION",r[r.COLOR=15]="COLOR",r[r.LUMINOSITY=16]="LUMINOSITY",r[r.NORMAL_NPM=17]="NORMAL_NPM",r[r.ADD_NPM=18]="ADD_NPM",r[r.SCREEN_NPM=19]="SCREEN_NPM",r[r.NONE=20]="NONE",r[r.SRC_OVER=0]="SRC_OVER",r[r.SRC_IN=21]="SRC_IN",r[r.SRC_OUT=22]="SRC_OUT",r[r.SRC_ATOP=23]="SRC_ATOP",r[r.DST_OVER=24]="DST_OVER",r[r.DST_IN=25]="DST_IN",r[r.DST_OUT=26]="DST_OUT",r[r.DST_ATOP=27]="DST_ATOP",r[r.ERASE=26]="ERASE",r[r.SUBTRACT=28]="SUBTRACT",r[r.XOR=29]="XOR",r))(re||{}),yr=(r=>(r[r.POINTS=0]="POINTS",r[r.LINES=1]="LINES",r[r.LINE_LOOP=2]="LINE_LOOP",r[r.LINE_STRIP=3]="LINE_STRIP",r[r.TRIANGLES=4]="TRIANGLES",r[r.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",r[r.TRIANGLE_FAN=6]="TRIANGLE_FAN",r))(yr||{}),F=(r=>(r[r.RGBA=6408]="RGBA",r[r.RGB=6407]="RGB",r[r.RG=33319]="RG",r[r.RED=6403]="RED",r[r.RGBA_INTEGER=36249]="RGBA_INTEGER",r[r.RGB_INTEGER=36248]="RGB_INTEGER",r[r.RG_INTEGER=33320]="RG_INTEGER",r[r.RED_INTEGER=36244]="RED_INTEGER",r[r.ALPHA=6406]="ALPHA",r[r.LUMINANCE=6409]="LUMINANCE",r[r.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",r[r.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",r[r.DEPTH_STENCIL=34041]="DEPTH_STENCIL",r))(F||{}),Pi=(r=>(r[r.TEXTURE_2D=3553]="TEXTURE_2D",r[r.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",r[r.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",r[r.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",r[r.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",r[r.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",r[r.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",r))(Pi||{}),$=(r=>(r[r.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",r[r.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",r[r.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",r[r.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",r[r.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",r[r.UNSIGNED_INT=5125]="UNSIGNED_INT",r[r.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",r[r.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",r[r.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",r[r.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",r[r.BYTE=5120]="BYTE",r[r.SHORT=5122]="SHORT",r[r.INT=5124]="INT",r[r.FLOAT=5126]="FLOAT",r[r.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",r[r.HALF_FLOAT=36193]="HALF_FLOAT",r))($||{}),G=(r=>(r[r.FLOAT=0]="FLOAT",r[r.INT=1]="INT",r[r.UINT=2]="UINT",r))(G||{}),Qr=(r=>(r[r.NEAREST=0]="NEAREST",r[r.LINEAR=1]="LINEAR",r))(Qr||{}),Fr=(r=>(r[r.CLAMP=33071]="CLAMP",r[r.REPEAT=10497]="REPEAT",r[r.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",r))(Fr||{}),Rt=(r=>(r[r.OFF=0]="OFF",r[r.POW2=1]="POW2",r[r.ON=2]="ON",r[r.ON_MANUAL=3]="ON_MANUAL",r))(Rt||{}),Ke=(r=>(r[r.NPM=0]="NPM",r[r.UNPACK=1]="UNPACK",r[r.PMA=2]="PMA",r[r.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",r[r.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",r[r.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",r))(Ke||{}),Lr=(r=>(r[r.NO=0]="NO",r[r.YES=1]="YES",r[r.AUTO=2]="AUTO",r[r.BLEND=0]="BLEND",r[r.CLEAR=1]="CLEAR",r[r.BLIT=2]="BLIT",r))(Lr||{}),Ap=(r=>(r[r.AUTO=0]="AUTO",r[r.MANUAL=1]="MANUAL",r))(Ap||{}),nr=(r=>(r.LOW="lowp",r.MEDIUM="mediump",r.HIGH="highp",r))(nr||{}),st=(r=>(r[r.NONE=0]="NONE",r[r.SCISSOR=1]="SCISSOR",r[r.STENCIL=2]="STENCIL",r[r.SPRITE=3]="SPRITE",r[r.COLOR=4]="COLOR",r))(st||{});var Pe=(r=>(r[r.NONE=0]="NONE",r[r.LOW=2]="LOW",r[r.MEDIUM=4]="MEDIUM",r[r.HIGH=8]="HIGH",r))(Pe||{}),vr=(r=>(r[r.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",r[r.ARRAY_BUFFER=34962]="ARRAY_BUFFER",r[r.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",r))(vr||{});var y0={createCanvas:(r,e)=>{let t=document.createElement("canvas");return t.width=r,t.height=e,t},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(r,e)=>fetch(r,e),parseXML:r=>new DOMParser().parseFromString(r,"text/xml")};var I={ADAPTER:y0,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var v0=/iPhone/i,OI=/iPod/i,NI=/iPad/i,FI=/\biOS-universal(?:.+)Mac\b/i,_0=/\bAndroid(?:.+)Mobile\b/i,LI=/Android/i,tl=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Mp=/Silk/i,Oi=/Windows Phone/i,kI=/\bWindows(?:.+)ARM\b/i,BI=/BlackBerry/i,UI=/BB10/i,jI=/Opera Mini/i,VI=/\b(CriOS|Chrome)(?:.+)Mobile/i,HI=/Mobile(?:.+)Firefox\b/i,GI=function(r){return typeof r<"u"&&r.platform==="MacIntel"&&typeof r.maxTouchPoints=="number"&&r.maxTouchPoints>1&&typeof MSStream>"u"};function kV(r){return function(e){return e.test(r)}}function Tc(r){var e={userAgent:"",platform:"",maxTouchPoints:0};!r&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof r=="string"?e.userAgent=r:r&&r.userAgent&&(e={userAgent:r.userAgent,platform:r.platform,maxTouchPoints:r.maxTouchPoints||0});var t=e.userAgent,n=t.split("[FBAN");typeof n[1]<"u"&&(t=n[0]),n=t.split("Twitter"),typeof n[1]<"u"&&(t=n[0]);var i=kV(t),s={apple:{phone:i(v0)&&!i(Oi),ipod:i(OI),tablet:!i(v0)&&(i(NI)||GI(e))&&!i(Oi),universal:i(FI),device:(i(v0)||i(OI)||i(NI)||i(FI)||GI(e))&&!i(Oi)},amazon:{phone:i(tl),tablet:!i(tl)&&i(Mp),device:i(tl)||i(Mp)},android:{phone:!i(Oi)&&i(tl)||!i(Oi)&&i(_0),tablet:!i(Oi)&&!i(tl)&&!i(_0)&&(i(Mp)||i(LI)),device:!i(Oi)&&(i(tl)||i(Mp)||i(_0)||i(LI))||i(/\bokhttp\b/i)},windows:{phone:i(Oi),tablet:i(kI),device:i(Oi)||i(kI)},other:{blackberry:i(BI),blackberry10:i(UI),opera:i(jI),firefox:i(HI),chrome:i(VI),device:i(BI)||i(UI)||i(jI)||i(HI)||i(VI)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}var BV=Tc.default??Tc,Jr=BV(globalThis.navigator);var N={};pO(N,{BaseTextureCache:()=>sr,BoundingBox:()=>Hc,CanvasRenderTarget:()=>Jp,DATA_URI:()=>Kp,EventEmitter:()=>Is.default,ProgramCache:()=>Gc,TextureCache:()=>Ct,clearTextureCache:()=>J1,correctBlendMode:()=>z1,createIndicesForQuads:()=>Y1,decomposeDataUri:()=>nM,deprecation:()=>le,destroyTextureCache:()=>Q1,detectVideoAlphaMode:()=>D1,determineCrossOrigin:()=>tm,earcut:()=>iM.default,getBufferType:()=>Ds,getCanvasBoundingBox:()=>em,getResolutionOfUrl:()=>$c,hex2rgb:()=>V1,hex2string:()=>H1,interleaveTypedArrays:()=>Z1,isMobile:()=>Jr,isPow2:()=>jc,isWebGLSupported:()=>qp,log2:()=>Vc,nextPow2:()=>Ss,path:()=>tx,premultiplyBlendMode:()=>Uc,premultiplyRgba:()=>W1,premultiplyTint:()=>X1,premultiplyTintToRgba:()=>q1,removeItems:()=>Qp,rgb2hex:()=>$1,sayHello:()=>I1,sign:()=>K1,skipHello:()=>S1,string2hex:()=>G1,trimCanvas:()=>rM,uid:()=>ri,url:()=>C1});I.RETINA_PREFIX=/@([0-9\.]+)x/;I.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var Is=cg(zI(),1),iM=cg(ZI(),1);var gl=cg(E1(),1);var T1={};function le(r,e,t=3){if(T1[e])return;let n=new Error().stack;typeof n>"u"?console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${r}`):(n=n.split(`
`).splice(t).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${e}
Deprecated since v${r}`),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${r}`),console.warn(n))),T1[e]=!0}var C1={get parse(){return le("7.3.0","utils.url.parse is deprecated, use native URL API instead."),gl.parse},get format(){return le("7.3.0","utils.url.format is deprecated, use native URL API instead."),gl.format},get resolve(){return le("7.3.0","utils.url.resolve is deprecated, use native URL API instead."),gl.resolve}};function An(r){if(typeof r!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(r)}`)}function kc(r){return r.split("?")[0].split("#")[0]}function a$(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function l$(r,e,t){return r.replace(new RegExp(a$(e),"g"),t)}function u$(r,e){let t="",n=0,i=-1,s=0,o=-1;for(let a=0;a<=r.length;++a){if(a<r.length)o=r.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(i===a-1||s===1))if(i!==a-1&&s===2){if(t.length<2||n!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){let l=t.lastIndexOf("/");if(l!==t.length-1){l===-1?(t="",n=0):(t=t.slice(0,l),n=t.length-1-t.lastIndexOf("/")),i=a,s=0;continue}}else if(t.length===2||t.length===1){t="",n=0,i=a,s=0;continue}}e&&(t.length>0?t+="/..":t="..",n=2)}else t.length>0?t+=`/${r.slice(i+1,a)}`:t=r.slice(i+1,a),n=a-i-1;i=a,s=0}else o===46&&s!==-1?++s:s=-1}return t}var tx={toPosix(r){return l$(r,"\\","/")},isUrl(r){return/^https?:/.test(this.toPosix(r))},isDataUrl(r){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(r)},isBlobUrl(r){return r.startsWith("blob:")},hasProtocol(r){return/^[^/:]+:/.test(this.toPosix(r))},getProtocol(r){An(r),r=this.toPosix(r);let e=/^file:\/\/\//.exec(r);if(e)return e[0];let t=/^[^/:]+:\/{0,2}/.exec(r);return t?t[0]:""},toAbsolute(r,e,t){if(An(r),this.isDataUrl(r)||this.isBlobUrl(r))return r;let n=kc(this.toPosix(e??I.ADAPTER.getBaseUrl())),i=kc(this.toPosix(t??this.rootname(n)));return r=this.toPosix(r),r.startsWith("/")?tx.join(i,r.slice(1)):this.isAbsolute(r)?r:this.join(n,r)},normalize(r){if(An(r),r.length===0)return".";if(this.isDataUrl(r)||this.isBlobUrl(r))return r;r=this.toPosix(r);let e="",t=r.startsWith("/");this.hasProtocol(r)&&(e=this.rootname(r),r=r.slice(e.length));let n=r.endsWith("/");return r=u$(r,!1),r.length>0&&n&&(r+="/"),t?`/${r}`:e+r},isAbsolute(r){return An(r),r=this.toPosix(r),this.hasProtocol(r)?!0:r.startsWith("/")},join(...r){if(r.length===0)return".";let e;for(let t=0;t<r.length;++t){let n=r[t];if(An(n),n.length>0)if(e===void 0)e=n;else{let i=r[t-1]??"";this.extname(i)?e+=`/../${n}`:e+=`/${n}`}}return e===void 0?".":this.normalize(e)},dirname(r){if(An(r),r.length===0)return".";r=this.toPosix(r);let e=r.charCodeAt(0),t=e===47,n=-1,i=!0,s=this.getProtocol(r),o=r;r=r.slice(s.length);for(let a=r.length-1;a>=1;--a)if(e=r.charCodeAt(a),e===47){if(!i){n=a;break}}else i=!1;return n===-1?t?"/":this.isUrl(o)?s+r:s:t&&n===1?"//":s+r.slice(0,n)},rootname(r){An(r),r=this.toPosix(r);let e="";if(r.startsWith("/")?e="/":e=this.getProtocol(r),this.isUrl(r)){let t=r.indexOf("/",e.length);t!==-1?e=r.slice(0,t):e=r,e.endsWith("/")||(e+="/")}return e},basename(r,e){An(r),e&&An(e),r=kc(this.toPosix(r));let t=0,n=-1,i=!0,s;if(e!==void 0&&e.length>0&&e.length<=r.length){if(e.length===r.length&&e===r)return"";let o=e.length-1,a=-1;for(s=r.length-1;s>=0;--s){let l=r.charCodeAt(s);if(l===47){if(!i){t=s+1;break}}else a===-1&&(i=!1,a=s+1),o>=0&&(l===e.charCodeAt(o)?--o===-1&&(n=s):(o=-1,n=a))}return t===n?n=a:n===-1&&(n=r.length),r.slice(t,n)}for(s=r.length-1;s>=0;--s)if(r.charCodeAt(s)===47){if(!i){t=s+1;break}}else n===-1&&(i=!1,n=s+1);return n===-1?"":r.slice(t,n)},extname(r){An(r),r=kc(this.toPosix(r));let e=-1,t=0,n=-1,i=!0,s=0;for(let o=r.length-1;o>=0;--o){let a=r.charCodeAt(o);if(a===47){if(!i){t=o+1;break}continue}n===-1&&(i=!1,n=o+1),a===46?e===-1?e=o:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||n===-1||s===0||s===1&&e===n-1&&e===t+1?"":r.slice(e,n)},parse(r){An(r);let e={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return e;r=kc(this.toPosix(r));let t=r.charCodeAt(0),n=this.isAbsolute(r),i,s="";e.root=this.rootname(r),n||this.hasProtocol(r)?i=1:i=0;let o=-1,a=0,l=-1,u=!0,c=r.length-1,h=0;for(;c>=i;--c){if(t=r.charCodeAt(c),t===47){if(!u){a=c+1;break}continue}l===-1&&(u=!1,l=c+1),t===46?o===-1?o=c:h!==1&&(h=1):o!==-1&&(h=-1)}return o===-1||l===-1||h===0||h===1&&o===l-1&&o===a+1?l!==-1&&(a===0&&n?e.base=e.name=r.slice(1,l):e.base=e.name=r.slice(a,l)):(a===0&&n?(e.name=r.slice(1,o),e.base=r.slice(1,l)):(e.name=r.slice(a,o),e.base=r.slice(a,l)),e.ext=r.slice(o,l)),e.dir=this.dirname(r),s&&(e.dir=s+e.dir),e},sep:"/",delimiter:":"};var rx;function D1(){return L(this,null,function*(){return rx??(rx=(()=>L(this,null,function*(){let r=document.createElement("canvas").getContext("webgl");if(!r)return Ke.UNPACK;let e=yield new Promise(s=>{let o=document.createElement("video");o.onloadeddata=()=>s(o),o.onerror=()=>s(null),o.autoplay=!1,o.crossOrigin="anonymous",o.preload="auto",o.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",o.load()});if(!e)return Ke.UNPACK;let t=r.createTexture();r.bindTexture(r.TEXTURE_2D,t);let n=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,n),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,t,0),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,r.NONE),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,e);let i=new Uint8Array(4);return r.readPixels(0,0,1,1,r.RGBA,r.UNSIGNED_BYTE,i),r.deleteFramebuffer(n),r.deleteTexture(t),r.getExtension("WEBGL_lose_context")?.loseContext(),i[0]<=i[3]?Ke.PMA:Ke.UNPACK}))()),rx})}function S1(){le("7.0.0","skipHello is deprecated, please use settings.RENDER_OPTIONS.hello")}function I1(){le("7.0.0",`sayHello is deprecated, please use Renderer's "hello" option`)}var nx;function qp(){return typeof nx>"u"&&(nx=function(){let r={stencil:!0,failIfMajorPerformanceCaveat:I.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!I.ADAPTER.getWebGLRenderingContext())return!1;let e=I.ADAPTER.createCanvas(),t=e.getContext("webgl",r)||e.getContext("experimental-webgl",r),n=!!t?.getContextAttributes()?.stencil;if(t){let i=t.getExtension("WEBGL_lose_context");i&&i.loseContext()}return t=null,n}catch{return!1}}()),nx}var c$={grad:.9,turn:360,rad:360/(2*Math.PI)},Fi=function(r){return typeof r=="string"?r.length>0:typeof r=="number"},Tt=function(r,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*r)/t+0},tn=function(r,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),r>t?t:r>e?r:e},L1=function(r){return(r=isFinite(r)?r%360:0)>0?r:r+360},A1=function(r){return{r:tn(r.r,0,255),g:tn(r.g,0,255),b:tn(r.b,0,255),a:tn(r.a)}},ix=function(r){return{r:Tt(r.r),g:Tt(r.g),b:Tt(r.b),a:Tt(r.a,3)}},h$=/^#([0-9a-f]{3,8})$/i,Yp=function(r){var e=r.toString(16);return e.length<2?"0"+e:e},k1=function(r){var e=r.r,t=r.g,n=r.b,i=r.a,s=Math.max(e,t,n),o=s-Math.min(e,t,n),a=o?s===e?(t-n)/o:s===t?2+(n-e)/o:4+(e-t)/o:0;return{h:60*(a<0?a+6:a),s:s?o/s*100:0,v:s/255*100,a:i}},B1=function(r){var e=r.h,t=r.s,n=r.v,i=r.a;e=e/360*6,t/=100,n/=100;var s=Math.floor(e),o=n*(1-t),a=n*(1-(e-s)*t),l=n*(1-(1-e+s)*t),u=s%6;return{r:255*[n,a,o,o,l,n][u],g:255*[l,n,n,a,o,o][u],b:255*[o,o,l,n,n,a][u],a:i}},M1=function(r){return{h:L1(r.h),s:tn(r.s,0,100),l:tn(r.l,0,100),a:tn(r.a)}},R1=function(r){return{h:Tt(r.h),s:Tt(r.s),l:Tt(r.l),a:Tt(r.a,3)}},P1=function(r){return B1((t=(e=r).s,{h:e.h,s:(t*=((n=e.l)<50?n:100-n)/100)>0?2*t/(n+t)*100:0,v:n+t,a:e.a}));var e,t,n},Bc=function(r){return{h:(e=k1(r)).h,s:(i=(200-(t=e.s))*(n=e.v)/100)>0&&i<200?t*n/100/(i<=100?i:200-i)*100:0,l:i/2,a:e.a};var e,t,n,i},d$=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,f$=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,p$=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,m$=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,ax={string:[[function(r){var e=h$.exec(r);return e?(r=e[1]).length<=4?{r:parseInt(r[0]+r[0],16),g:parseInt(r[1]+r[1],16),b:parseInt(r[2]+r[2],16),a:r.length===4?Tt(parseInt(r[3]+r[3],16)/255,2):1}:r.length===6||r.length===8?{r:parseInt(r.substr(0,2),16),g:parseInt(r.substr(2,2),16),b:parseInt(r.substr(4,2),16),a:r.length===8?Tt(parseInt(r.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(r){var e=p$.exec(r)||m$.exec(r);return e?e[2]!==e[4]||e[4]!==e[6]?null:A1({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(r){var e=d$.exec(r)||f$.exec(r);if(!e)return null;var t,n,i=M1({h:(t=e[1],n=e[2],n===void 0&&(n="deg"),Number(t)*(c$[n]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return P1(i)},"hsl"]],object:[[function(r){var e=r.r,t=r.g,n=r.b,i=r.a,s=i===void 0?1:i;return Fi(e)&&Fi(t)&&Fi(n)?A1({r:Number(e),g:Number(t),b:Number(n),a:Number(s)}):null},"rgb"],[function(r){var e=r.h,t=r.s,n=r.l,i=r.a,s=i===void 0?1:i;if(!Fi(e)||!Fi(t)||!Fi(n))return null;var o=M1({h:Number(e),s:Number(t),l:Number(n),a:Number(s)});return P1(o)},"hsl"],[function(r){var e=r.h,t=r.s,n=r.v,i=r.a,s=i===void 0?1:i;if(!Fi(e)||!Fi(t)||!Fi(n))return null;var o=function(a){return{h:L1(a.h),s:tn(a.s,0,100),v:tn(a.v,0,100),a:tn(a.a)}}({h:Number(e),s:Number(t),v:Number(n),a:Number(s)});return B1(o)},"hsv"]]},O1=function(r,e){for(var t=0;t<e.length;t++){var n=e[t][0](r);if(n)return[n,e[t][1]]}return[null,void 0]},g$=function(r){return typeof r=="string"?O1(r.trim(),ax.string):typeof r=="object"&&r!==null?O1(r,ax.object):[null,void 0]};var sx=function(r,e){var t=Bc(r);return{h:t.h,s:tn(t.s+100*e,0,100),l:t.l,a:t.a}},ox=function(r){return(299*r.r+587*r.g+114*r.b)/1e3/255},N1=function(r,e){var t=Bc(r);return{h:t.h,s:t.s,l:tn(t.l+100*e,0,100),a:t.a}},lx=function(){function r(e){this.parsed=g$(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return r.prototype.isValid=function(){return this.parsed!==null},r.prototype.brightness=function(){return Tt(ox(this.rgba),2)},r.prototype.isDark=function(){return ox(this.rgba)<.5},r.prototype.isLight=function(){return ox(this.rgba)>=.5},r.prototype.toHex=function(){return e=ix(this.rgba),t=e.r,n=e.g,i=e.b,o=(s=e.a)<1?Yp(Tt(255*s)):"","#"+Yp(t)+Yp(n)+Yp(i)+o;var e,t,n,i,s,o},r.prototype.toRgb=function(){return ix(this.rgba)},r.prototype.toRgbString=function(){return e=ix(this.rgba),t=e.r,n=e.g,i=e.b,(s=e.a)<1?"rgba("+t+", "+n+", "+i+", "+s+")":"rgb("+t+", "+n+", "+i+")";var e,t,n,i,s},r.prototype.toHsl=function(){return R1(Bc(this.rgba))},r.prototype.toHslString=function(){return e=R1(Bc(this.rgba)),t=e.h,n=e.s,i=e.l,(s=e.a)<1?"hsla("+t+", "+n+"%, "+i+"%, "+s+")":"hsl("+t+", "+n+"%, "+i+"%)";var e,t,n,i,s},r.prototype.toHsv=function(){return e=k1(this.rgba),{h:Tt(e.h),s:Tt(e.s),v:Tt(e.v),a:Tt(e.a,3)};var e},r.prototype.invert=function(){return Mn({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},r.prototype.saturate=function(e){return e===void 0&&(e=.1),Mn(sx(this.rgba,e))},r.prototype.desaturate=function(e){return e===void 0&&(e=.1),Mn(sx(this.rgba,-e))},r.prototype.grayscale=function(){return Mn(sx(this.rgba,-1))},r.prototype.lighten=function(e){return e===void 0&&(e=.1),Mn(N1(this.rgba,e))},r.prototype.darken=function(e){return e===void 0&&(e=.1),Mn(N1(this.rgba,-e))},r.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},r.prototype.alpha=function(e){return typeof e=="number"?Mn({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):Tt(this.rgba.a,3);var t},r.prototype.hue=function(e){var t=Bc(this.rgba);return typeof e=="number"?Mn({h:e,s:t.s,l:t.l,a:t.a}):Tt(t.h)},r.prototype.isEqual=function(e){return this.toHex()===Mn(e).toHex()},r}(),Mn=function(r){return r instanceof lx?r:new lx(r)},F1=[],U1=function(r){r.forEach(function(e){F1.indexOf(e)<0&&(e(lx,ax),F1.push(e))})};function j1(r,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},n={};for(var i in t)n[t[i]]=i;var s={};r.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,l,u=n[this.toHex()];if(u)return u;if(o?.closest){var c=this.toRgb(),h=1/0,d="black";if(!s.length)for(var f in t)s[f]=new r(t[f]).toRgb();for(var p in t){var m=(a=c,l=s[p],Math.pow(a.r-l.r,2)+Math.pow(a.g-l.g,2)+Math.pow(a.b-l.b,2));m<h&&(h=m,d=p)}return d}},e.string.push([function(o){var a=o.toLowerCase(),l=a==="transparent"?"#0000":t[a];return l?new r(l).toRgb():null},"name"])}U1([j1]);var yl=class Zp{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof Zp)this._value=this.cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,e))&&(this.normalize(e),this._value=this.cloneSource(e))}}get value(){return this._value}cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?O({},e):e}isSourceEqual(e,t){let n=typeof e;if(n!==typeof t)return!1;if(n==="number"||n==="string"||e instanceof Number)return e===t;if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length!==t.length?!1:e.every((i,s)=>i===t[s]);if(e!==null&&t!==null){let i=Object.keys(e),s=Object.keys(t);return i.length!==s.length?!1:i.every(o=>e[o]===t[o])}return e===t}toRgba(){let[e,t,n,i]=this._components;return{r:e,g:t,b:n,a:i}}toRgb(){let[e,t,n]=this._components;return{r:e,g:t,b:n}}toRgbaString(){let[e,t,n]=this.toUint8RgbArray();return`rgba(${e},${t},${n},${this.alpha})`}toUint8RgbArray(e){let[t,n,i]=this._components;return e=e??[],e[0]=Math.round(t*255),e[1]=Math.round(n*255),e[2]=Math.round(i*255),e}toRgbArray(e){e=e??[];let[t,n,i]=this._components;return e[0]=t,e[1]=n,e[2]=i,e}toNumber(){return this._int}toLittleEndianNumber(){let e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){let[t,n,i,s]=Zp.temp.setValue(e)._components;return this._components[0]*=t,this._components[1]*=n,this._components[2]*=i,this._components[3]*=s,this.refreshInt(),this._value=null,this}premultiply(e,t=!0){return t&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this.refreshInt(),this._value=null,this}toPremultiplied(e,t=!0){if(e===1)return(255<<24)+this._int;if(e===0)return t?0:this._int;let n=this._int>>16&255,i=this._int>>8&255,s=this._int&255;return t&&(n=n*e+.5|0,i=i*e+.5|0,s=s*e+.5|0),(e*255<<24)+(n<<16)+(i<<8)+s}toHex(){let e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){let e=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}setAlpha(e){return this._components[3]=this._clamp(e),this}round(e){let[t,n,i]=this._components;return this._components[0]=Math.round(t*e)/e,this._components[1]=Math.round(n*e)/e,this._components[2]=Math.round(i*e)/e,this.refreshInt(),this._value=null,this}toArray(e){e=e??[];let[t,n,i,s]=this._components;return e[0]=t,e[1]=n,e[2]=i,e[3]=s,e}normalize(e){let t,n,i,s;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){let o=e;t=(o>>16&255)/255,n=(o>>8&255)/255,i=(o&255)/255,s=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[t,n,i,s=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[t,n,i,s=255]=e,t/=255,n/=255,i/=255,s/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){let a=Zp.HEX_PATTERN.exec(e);a&&(e=`#${a[2]}`)}let o=Mn(e);o.isValid()&&({r:t,g:n,b:i,a:s}=o.rgba,t/=255,n/=255,i/=255)}if(t!==void 0)this._components[0]=t,this._components[1]=n,this._components[2]=i,this._components[3]=s,this.refreshInt();else throw new Error(`Unable to convert color ${e}`)}refreshInt(){this._clamp(this._components);let[e,t,n]=this._components;this._int=(e*255<<16)+(t*255<<8)+(n*255|0)}_clamp(e,t=0,n=1){return typeof e=="number"?Math.min(Math.max(e,t),n):(e.forEach((i,s)=>{e[s]=Math.min(Math.max(i,t),n)}),e)}};yl.shared=new yl,yl.temp=new yl,yl.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;var ue=yl;function V1(r,e=[]){return le("7.2.0","utils.hex2rgb is deprecated, use Color#toRgbArray instead"),ue.shared.setValue(r).toRgbArray(e)}function H1(r){return le("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),ue.shared.setValue(r).toHex()}function G1(r){return le("7.2.0","utils.string2hex is deprecated, use Color#toNumber instead"),ue.shared.setValue(r).toNumber()}function $1(r){return le("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),ue.shared.setValue(r).toNumber()}function y$(){let r=[],e=[];for(let n=0;n<32;n++)r[n]=n,e[n]=n;r[re.NORMAL_NPM]=re.NORMAL,r[re.ADD_NPM]=re.ADD,r[re.SCREEN_NPM]=re.SCREEN,e[re.NORMAL]=re.NORMAL_NPM,e[re.ADD]=re.ADD_NPM,e[re.SCREEN]=re.SCREEN_NPM;let t=[];return t.push(e),t.push(r),t}var Uc=y$();function z1(r,e){return Uc[e?1:0][r]}function W1(r,e,t,n=!0){return le("7.2.0","utils.premultiplyRgba has moved to Color.premultiply"),ue.shared.setValue(r).premultiply(e,n).toArray(t??new Float32Array(4))}function X1(r,e){return le("7.2.0","utils.premultiplyTint has moved to Color.toPremultiplied"),ue.shared.setValue(r).toPremultiplied(e)}function q1(r,e,t,n=!0){return le("7.2.0","utils.premultiplyTintToRgba has moved to Color.premultiply"),ue.shared.setValue(r).premultiply(e,n).toArray(t??new Float32Array(4))}var Kp=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function Y1(r,e=null){let t=r*6;if(e=e||new Uint16Array(t),e.length!==t)throw new Error(`Out buffer length is incorrect, got ${e.length} and expected ${t}`);for(let n=0,i=0;n<t;n+=6,i+=4)e[n+0]=i+0,e[n+1]=i+1,e[n+2]=i+2,e[n+3]=i+0,e[n+4]=i+2,e[n+5]=i+3;return e}function Ds(r){if(r.BYTES_PER_ELEMENT===4)return r instanceof Float32Array?"Float32Array":r instanceof Uint32Array?"Uint32Array":"Int32Array";if(r.BYTES_PER_ELEMENT===2){if(r instanceof Uint16Array)return"Uint16Array"}else if(r.BYTES_PER_ELEMENT===1&&r instanceof Uint8Array)return"Uint8Array";return null}var v$={Float32Array,Uint32Array,Int32Array,Uint8Array};function Z1(r,e){let t=0,n=0,i={};for(let l=0;l<r.length;l++)n+=e[l],t+=r[l].length;let s=new ArrayBuffer(t*4),o=null,a=0;for(let l=0;l<r.length;l++){let u=e[l],c=r[l],h=Ds(c);i[h]||(i[h]=new v$[h](s)),o=i[h];for(let d=0;d<c.length;d++){let f=(d/u|0)*n+a,p=d%u;o[f+p]=c[d]}a+=u}return new Float32Array(s)}function Ss(r){return r+=r===0?1:0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r+1}function jc(r){return!(r&r-1)&&!!r}function Vc(r){let e=(r>65535?1:0)<<4;r>>>=e;let t=(r>255?1:0)<<3;return r>>>=t,e|=t,t=(r>15?1:0)<<2,r>>>=t,e|=t,t=(r>3?1:0)<<1,r>>>=t,e|=t,e|r>>1}function Qp(r,e,t){let n=r.length,i;if(e>=n||t===0)return;t=e+t>n?n-e:t;let s=n-t;for(i=e;i<s;++i)r[i]=r[i+t];r.length=s}function K1(r){return r===0?0:r<0?-1:1}var _$=0;function ri(){return++_$}var ux=class{constructor(r,e,t,n){this.left=r,this.top=e,this.right=t,this.bottom=n}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};ux.EMPTY=new ux(0,0,0,0);var Hc=ux;var Gc={},Ct=Object.create(null),sr=Object.create(null);function Q1(){let r;for(r in Ct)Ct[r].destroy();for(r in sr)sr[r].destroy()}function J1(){let r;for(r in Ct)delete Ct[r];for(r in sr)delete sr[r]}var Jp=class{constructor(e,t,n){this._canvas=I.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=n||I.RESOLUTION,this.resize(e,t)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(e,t){this._checkDestroyed(),this._canvas.width=Math.round(e*this.resolution),this._canvas.height=Math.round(t*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(e){this._checkDestroyed(),this._canvas.width=Math.round(e)}get height(){return this._checkDestroyed(),this._canvas.height}set height(e){this._checkDestroyed(),this._canvas.height=Math.round(e)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}};function eM(r,e,t){for(let n=0,i=4*t*e;n<e;++n,i+=4)if(r[i+3]!==0)return!1;return!0}function tM(r,e,t,n,i){let s=4*e;for(let o=n,a=n*s+4*t;o<=i;++o,a+=s)if(r[a+3]!==0)return!1;return!0}function em(r){let{width:e,height:t}=r,n=r.getContext("2d",{willReadFrequently:!0});if(n===null)throw new TypeError("Failed to get canvas 2D context");let i=n.getImageData(0,0,e,t).data,s=0,o=0,a=e-1,l=t-1;for(;o<t&&eM(i,e,o);)++o;if(o===t)return Hc.EMPTY;for(;eM(i,e,l);)--l;for(;tM(i,e,s,o,l);)++s;for(;tM(i,e,a,o,l);)--a;return++a,++l,new Hc(s,o,a,l)}function rM(r){let e=em(r),{width:t,height:n}=e,i=null;if(!e.isEmpty()){let s=r.getContext("2d");if(s===null)throw new TypeError("Failed to get canvas 2D context");i=s.getImageData(e.left,e.top,t,n)}return{width:t,height:n,data:i}}function nM(r){let e=Kp.exec(r);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,charset:e[3]?e[3].toLowerCase():void 0,encoding:e[4]?e[4].toLowerCase():void 0,data:e[5]}}function tm(r,e=globalThis.location){if(r.startsWith("data:"))return"";e=e||globalThis.location;let t=new URL(r,document.baseURI);return t.hostname!==e.hostname||t.port!==e.port||t.protocol!==e.protocol?"anonymous":""}function $c(r,e=1){let t=I.RETINA_PREFIX?.exec(r);return t?parseFloat(t[1]):e}var S=(r=>(r.Renderer="renderer",r.Application="application",r.RendererSystem="renderer-webgl-system",r.RendererPlugin="renderer-webgl-plugin",r.CanvasRendererSystem="renderer-canvas-system",r.CanvasRendererPlugin="renderer-canvas-plugin",r.Asset="asset",r.LoadParser="load-parser",r.ResolveParser="resolve-parser",r.CacheParser="cache-parser",r.DetectionParser="detection-parser",r))(S||{}),cx=r=>{if(typeof r=="function"||typeof r=="object"&&r.extension){if(!r.extension)throw new Error("Extension class must have an extension object");r=De(O({},typeof r.extension!="object"?{type:r.extension}:r.extension),{ref:r})}if(typeof r=="object")r=O({},r);else throw new Error("Invalid extension type");return typeof r.type=="string"&&(r.type=[r.type]),r},sM=(r,e)=>cx(r).priority??e,M={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...r){return r.map(cx).forEach(e=>{e.type.forEach(t=>this._removeHandlers[t]?.(e))}),this},add(...r){return r.map(cx).forEach(e=>{e.type.forEach(t=>{let n=this._addHandlers,i=this._queue;n[t]?n[t](e):(i[t]=i[t]||[],i[t].push(e))})}),this},handle(r,e,t){let n=this._addHandlers,i=this._removeHandlers;if(n[r]||i[r])throw new Error(`Extension type ${r} already has a handler`);n[r]=e,i[r]=t;let s=this._queue;return s[r]&&(s[r].forEach(o=>e(o)),delete s[r]),this},handleByMap(r,e){return this.handle(r,t=>{e[t.name]=t.ref},t=>{delete e[t.name]})},handleByList(r,e,t=-1){return this.handle(r,n=>{e.includes(n.ref)||(e.push(n.ref),e.sort((i,s)=>sM(s,t)-sM(i,t)))},n=>{let i=e.indexOf(n.ref);i!==-1&&e.splice(i,1)})}};var As=class{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}};var x$=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function b$(r){let e="";for(let t=0;t<r;++t)t>0&&(e+=`
else `),t<r-1&&(e+=`if(test == ${t}.0){}`);return e}function rm(r,e){if(r===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");let t=e.createShader(e.FRAGMENT_SHADER);for(;;){let n=x$.replace(/%forloop%/gi,b$(r));if(e.shaderSource(t,n),e.compileShader(t),!e.getShaderParameter(t,e.COMPILE_STATUS))r=r/2|0;else break}return r}var hx=0,dx=1,fx=2,px=3,mx=4,gx=5,Dt=class r{constructor(){this.data=0,this.blendMode=re.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<hx)}set blend(e){!!(this.data&1<<hx)!==e&&(this.data^=1<<hx)}get offsets(){return!!(this.data&1<<dx)}set offsets(e){!!(this.data&1<<dx)!==e&&(this.data^=1<<dx)}get culling(){return!!(this.data&1<<fx)}set culling(e){!!(this.data&1<<fx)!==e&&(this.data^=1<<fx)}get depthTest(){return!!(this.data&1<<px)}set depthTest(e){!!(this.data&1<<px)!==e&&(this.data^=1<<px)}get depthMask(){return!!(this.data&1<<gx)}set depthMask(e){!!(this.data&1<<gx)!==e&&(this.data^=1<<gx)}get clockwiseFrontFace(){return!!(this.data&1<<mx)}set clockwiseFrontFace(e){!!(this.data&1<<mx)!==e&&(this.data^=1<<mx)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!==re.NONE,this._blendMode=e}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}static for2d(){let e=new r;return e.depthTest=!1,e.blend=!0,e}};Dt.prototype.toString=function(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`};var zc=[];function vl(r,e){if(!r)return null;let t="";if(typeof r=="string"){let n=/\.(\w{3,4})(?:$|\?|#)/i.exec(r);n&&(t=n[1].toLowerCase())}for(let n=zc.length-1;n>=0;--n){let i=zc[n];if(i.test&&i.test(r,t))return new i(r,e)}throw new Error("Unrecognized source type to auto-detect Resource")}var ut=class{constructor(e){this.items=[],this._name=e,this._aliasCount=0}emit(e,t,n,i,s,o,a,l){if(arguments.length>8)throw new Error("max arguments reached");let{name:u,items:c}=this;this._aliasCount++;for(let h=0,d=c.length;h<d;h++)c[h][u](e,t,n,i,s,o,a,l);return c===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this}remove(e){let t=this.items.indexOf(e);return t!==-1&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this}contains(e){return this.items.includes(e)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}};Object.defineProperties(ut.prototype,{dispatch:{value:ut.prototype.emit},run:{value:ut.prototype.emit}});var kr=class{constructor(e=0,t=0){this._width=e,this._height=t,this.destroyed=!1,this.internal=!1,this.onResize=new ut("setRealSize"),this.onUpdate=new ut("update"),this.onError=new ut("onError")}bind(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)}resize(e,t){(e!==this._width||t!==this._height)&&(this._width=e,this._height=t,this.onResize.emit(e,t))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(e,t,n){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(e,t){return!1}};var Rn=class extends kr{constructor(e,t){let{width:n,height:i}=t||{};if(!n||!i)throw new Error("BufferResource width or height invalid");super(n,i),this.data=e,this.unpackAlignment=t.unpackAlignment??4}upload(e,t,n){let i=e.gl;i.pixelStorei(i.UNPACK_ALIGNMENT,this.unpackAlignment),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===Ke.UNPACK);let s=t.realWidth,o=t.realHeight;return n.width===s&&n.height===o?i.texSubImage2D(t.target,0,0,0,s,o,t.format,n.type,this.data):(n.width=s,n.height=o,i.texImage2D(t.target,0,n.internalFormat,s,o,0,t.format,n.type,this.data)),!0}dispose(){this.data=null}static test(e){return e===null||e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}};var w$={scaleMode:Qr.NEAREST,alphaMode:Ke.NPM},yx=class _l extends Is.default{constructor(e=null,t=null){super(),t=Object.assign({},_l.defaultOptions,t);let{alphaMode:n,mipmap:i,anisotropicLevel:s,scaleMode:o,width:a,height:l,wrapMode:u,format:c,type:h,target:d,resolution:f,resourceOptions:p}=t;e&&!(e instanceof kr)&&(e=vl(e,p),e.internal=!0),this.resolution=f||I.RESOLUTION,this.width=Math.round((a||0)*this.resolution)/this.resolution,this.height=Math.round((l||0)*this.resolution)/this.resolution,this._mipmap=i,this.anisotropicLevel=s,this._wrapMode=u,this._scaleMode=o,this.format=c,this.type=h,this.target=d,this.alphaMode=n,this.uid=ri(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=a>0&&l>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(e)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)}setStyle(e,t){let n;return e!==void 0&&e!==this.scaleMode&&(this.scaleMode=e,n=!0),t!==void 0&&t!==this.mipmap&&(this.mipmap=t,n=!0),n&&this.dirtyStyleId++,this}setSize(e,t,n){return n=n||this.resolution,this.setRealSize(e*n,t*n,n)}setRealSize(e,t,n){return this.resolution=n||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(t)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=jc(this.realWidth)&&jc(this.realHeight)}setResolution(e){let t=this.resolution;return t===e?this:(this.resolution=e,this.valid&&(this.width=Math.round(this.width*t)/e,this.height=Math.round(this.height*t)/e,this.emit("update",this)),this._refreshPOT(),this)}setResource(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(e){this.emit("error",this,e)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete sr[this.cacheId],delete Ct[this.cacheId],this.cacheId=null),this.valid=!1,this.dispose(),_l.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(e,t,n=I.STRICT_TEXTURE_CACHE){let i=typeof e=="string",s=null;if(i)s=e;else{if(!e._pixiId){let a=t?.pixiIdPrefix||"pixiid";e._pixiId=`${a}_${ri()}`}s=e._pixiId}let o=sr[s];if(i&&n&&!o)throw new Error(`The cacheId "${s}" does not exist in BaseTextureCache.`);return o||(o=new _l(e,t),o.cacheId=s,_l.addToCache(o,s)),o}static fromBuffer(e,t,n,i){e=e||new Float32Array(t*n*4);let s=new Rn(e,O({width:t,height:n},i?.resourceOptions)),o,a;return e instanceof Float32Array?(o=F.RGBA,a=$.FLOAT):e instanceof Int32Array?(o=F.RGBA_INTEGER,a=$.INT):e instanceof Uint32Array?(o=F.RGBA_INTEGER,a=$.UNSIGNED_INT):e instanceof Int16Array?(o=F.RGBA_INTEGER,a=$.SHORT):e instanceof Uint16Array?(o=F.RGBA_INTEGER,a=$.UNSIGNED_SHORT):e instanceof Int8Array?(o=F.RGBA,a=$.BYTE):(o=F.RGBA,a=$.UNSIGNED_BYTE),s.internal=!0,new _l(s,Object.assign({},w$,{type:a,format:o},i))}static addToCache(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),sr[t]&&sr[t]!==e&&console.warn(`BaseTexture added to the cache with an id [${t}] that already had an entry`),sr[t]=e)}static removeFromCache(e){if(typeof e=="string"){let t=sr[e];if(t){let n=t.textureCacheIds.indexOf(e);return n>-1&&t.textureCacheIds.splice(n,1),delete sr[e],t}}else if(e?.textureCacheIds){for(let t=0;t<e.textureCacheIds.length;++t)delete sr[e.textureCacheIds[t]];return e.textureCacheIds.length=0,e}return null}};yx.defaultOptions={mipmap:Rt.POW2,anisotropicLevel:0,scaleMode:Qr.LINEAR,wrapMode:Fr.CLAMP,alphaMode:Ke.UNPACK,target:Pi.TEXTURE_2D,format:F.RGBA,type:$.UNSIGNED_BYTE},yx._globalBatch=0;var Y=yx;var Ms=class{constructor(){this.texArray=null,this.blend=0,this.type=yr.TRIANGLES,this.start=0,this.size=0,this.data=null}};var E$=0,Oe=class r{constructor(e,t=!0,n=!1){this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=n,this.static=t,this.id=E$++,this.disposeRunner=new ut("disposeBuffer")}update(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(e){this.type=e?vr.ELEMENT_ARRAY_BUFFER:vr.ARRAY_BUFFER}get index(){return this.type===vr.ELEMENT_ARRAY_BUFFER}static from(e){return e instanceof Array&&(e=new Float32Array(e)),new r(e)}};var xl=class r{constructor(e,t=0,n=!1,i=$.FLOAT,s,o,a,l=1){this.buffer=e,this.size=t,this.normalized=n,this.type=i,this.stride=s,this.start=o,this.instance=a,this.divisor=l}destroy(){this.buffer=null}static from(e,t,n,i,s){return new r(e,t,n,i,s)}};var T$={Float32Array,Uint32Array,Int32Array,Uint8Array};function oM(r,e){let t=0,n=0,i={};for(let l=0;l<r.length;l++)n+=e[l],t+=r[l].length;let s=new ArrayBuffer(t*4),o=null,a=0;for(let l=0;l<r.length;l++){let u=e[l],c=r[l],h=Ds(c);i[h]||(i[h]=new T$[h](s)),o=i[h];for(let d=0;d<c.length;d++){let f=(d/u|0)*n+a,p=d%u;o[f+p]=c[d]}a+=u}return new Float32Array(s)}var aM={5126:4,5123:2,5121:1},C$=0,D$={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},Br=class r{constructor(e=[],t={}){this.buffers=e,this.indexBuffer=null,this.attributes=t,this.glVertexArrayObjects={},this.id=C$++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new ut("disposeGeometry"),this.refCount=0}addAttribute(e,t,n=0,i=!1,s,o,a,l=!1){if(!t)throw new Error("You must pass a buffer when creating an attribute");t instanceof Oe||(t instanceof Array&&(t=new Float32Array(t)),t=new Oe(t));let u=e.split("|");if(u.length>1){for(let h=0;h<u.length;h++)this.addAttribute(u[h],t,n,i,s);return this}let c=this.buffers.indexOf(t);return c===-1&&(this.buffers.push(t),c=this.buffers.length-1),this.attributes[e]=new xl(c,n,i,s,o,a,l),this.instanced=this.instanced||l,this}getAttribute(e){return this.attributes[e]}getBuffer(e){return this.buffers[this.getAttribute(e).buffer]}addIndex(e){return e instanceof Oe||(e instanceof Array&&(e=new Uint16Array(e)),e=new Oe(e)),e.type=vr.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,this.buffers.includes(e)||this.buffers.push(e),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;let e=[],t=[],n=new Oe,i;for(i in this.attributes){let s=this.attributes[i],o=this.buffers[s.buffer];e.push(o.data),t.push(s.size*aM[s.type]/4),s.buffer=0}for(n.data=oM(e,t),i=0;i<this.buffers.length;i++)this.buffers[i]!==this.indexBuffer&&this.buffers[i].destroy();return this.buffers=[n],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(let e in this.attributes){let t=this.attributes[e];return this.buffers[t.buffer].data.length/(t.stride/4||t.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){let e=new r;for(let t=0;t<this.buffers.length;t++)e.buffers[t]=new Oe(this.buffers[t].data.slice(0));for(let t in this.attributes){let n=this.attributes[t];e.attributes[t]=new xl(n.buffer,n.size,n.normalized,n.type,n.stride,n.start,n.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=vr.ELEMENT_ARRAY_BUFFER),e}static merge(e){let t=new r,n=[],i=[],s=[],o;for(let a=0;a<e.length;a++){o=e[a];for(let l=0;l<o.buffers.length;l++)i[l]=i[l]||0,i[l]+=o.buffers[l].data.length,s[l]=0}for(let a=0;a<o.buffers.length;a++)n[a]=new D$[Ds(o.buffers[a].data)](i[a]),t.buffers[a]=new Oe(n[a]);for(let a=0;a<e.length;a++){o=e[a];for(let l=0;l<o.buffers.length;l++)n[l].set(o.buffers[l].data,s[l]),s[l]+=o.buffers[l].data.length}if(t.attributes=o.attributes,o.indexBuffer){t.indexBuffer=t.buffers[o.buffers.indexOf(o.indexBuffer)],t.indexBuffer.type=vr.ELEMENT_ARRAY_BUFFER;let a=0,l=0,u=0,c=0;for(let h=0;h<o.buffers.length;h++)if(o.buffers[h]!==o.indexBuffer){c=h;break}for(let h in o.attributes){let d=o.attributes[h];(d.buffer|0)===c&&(l+=d.size*aM[d.type]/4)}for(let h=0;h<e.length;h++){let d=e[h].indexBuffer.data;for(let f=0;f<d.length;f++)t.indexBuffer.data[f+u]+=a;a+=e[h].buffers[c].data.length/l,u+=d.length}}return t}};var So=class extends Br{constructor(e=!1){super(),this._buffer=new Oe(null,e,!1),this._indexBuffer=new Oe(null,e,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,$.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,$.FLOAT).addAttribute("aColor",this._buffer,4,!0,$.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,$.FLOAT).addIndex(this._indexBuffer)}};var Rs=Math.PI*2,vx=180/Math.PI,_x=Math.PI/180,Le=(r=>(r[r.POLY=0]="POLY",r[r.RECT=1]="RECT",r[r.CIRC=2]="CIRC",r[r.ELIP=3]="ELIP",r[r.RREC=4]="RREC",r))(Le||{});var oe=class r{constructor(e=0,t=0){this.x=0,this.y=0,this.x=e,this.y=t}clone(){return new r(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,t=e){return this.x=e,this.y=t,this}};oe.prototype.toString=function(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`};var nm=[new oe,new oe,new oe,new oe],Z=class r{constructor(e=0,t=0,n=0,i=0){this.x=Number(e),this.y=Number(t),this.width=Number(n),this.height=Number(i),this.type=Le.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new r(0,0,0,0)}clone(){return new r(this.x,this.y,this.width,this.height)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}contains(e,t){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height}intersects(e,t){if(!t){let w=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=w)return!1;let T=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>T}let n=this.left,i=this.right,s=this.top,o=this.bottom;if(i<=n||o<=s)return!1;let a=nm[0].set(e.left,e.top),l=nm[1].set(e.left,e.bottom),u=nm[2].set(e.right,e.top),c=nm[3].set(e.right,e.bottom);if(u.x<=a.x||l.y<=a.y)return!1;let h=Math.sign(t.a*t.d-t.b*t.c);if(h===0||(t.apply(a,a),t.apply(l,l),t.apply(u,u),t.apply(c,c),Math.max(a.x,l.x,u.x,c.x)<=n||Math.min(a.x,l.x,u.x,c.x)>=i||Math.max(a.y,l.y,u.y,c.y)<=s||Math.min(a.y,l.y,u.y,c.y)>=o))return!1;let d=h*(l.y-a.y),f=h*(a.x-l.x),p=d*n+f*s,m=d*i+f*s,g=d*n+f*o,y=d*i+f*o;if(Math.max(p,m,g,y)<=d*a.x+f*a.y||Math.min(p,m,g,y)>=d*c.x+f*c.y)return!1;let _=h*(a.y-u.y),v=h*(u.x-a.x),x=_*n+v*s,b=_*i+v*s,C=_*n+v*o,E=_*i+v*o;return!(Math.max(x,b,C,E)<=_*a.x+v*a.y||Math.min(x,b,C,E)>=_*c.x+v*c.y)}pad(e=0,t=e){return this.x-=e,this.y-=t,this.width+=e*2,this.height+=t*2,this}fit(e){let t=Math.max(this.x,e.x),n=Math.min(this.x+this.width,e.x+e.width),i=Math.max(this.y,e.y),s=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(n-t,0),this.y=i,this.height=Math.max(s-i,0),this}ceil(e=1,t=.001){let n=Math.ceil((this.x+this.width-t)*e)/e,i=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=n-this.x,this.height=i-this.y,this}enlarge(e){let t=Math.min(this.x,e.x),n=Math.max(this.x+this.width,e.x+e.width),i=Math.min(this.y,e.y),s=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=n-t,this.y=i,this.height=s-i,this}};Z.prototype.toString=function(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};var bl=class r{constructor(e=0,t=0,n=0){this.x=e,this.y=t,this.radius=n,this.type=Le.CIRC}clone(){return new r(this.x,this.y,this.radius)}contains(e,t){if(this.radius<=0)return!1;let n=this.radius*this.radius,i=this.x-e,s=this.y-t;return i*=i,s*=s,i+s<=n}getBounds(){return new Z(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}};bl.prototype.toString=function(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`};var wl=class r{constructor(e=0,t=0,n=0,i=0){this.x=e,this.y=t,this.width=n,this.height=i,this.type=Le.ELIP}clone(){return new r(this.x,this.y,this.width,this.height)}contains(e,t){if(this.width<=0||this.height<=0)return!1;let n=(e-this.x)/this.width,i=(t-this.y)/this.height;return n*=n,i*=i,n+i<=1}getBounds(){return new Z(this.x-this.width,this.y-this.height,this.width,this.height)}};wl.prototype.toString=function(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};var ni=class r{constructor(...e){let t=Array.isArray(e[0])?e[0]:e;if(typeof t[0]!="number"){let n=[];for(let i=0,s=t.length;i<s;i++)n.push(t[i].x,t[i].y);t=n}this.points=t,this.type=Le.POLY,this.closeStroke=!0}clone(){let e=this.points.slice(),t=new r(e);return t.closeStroke=this.closeStroke,t}contains(e,t){let n=!1,i=this.points.length/2;for(let s=0,o=i-1;s<i;o=s++){let a=this.points[s*2],l=this.points[s*2+1],u=this.points[o*2],c=this.points[o*2+1];l>t!=c>t&&e<(u-a)*((t-l)/(c-l))+a&&(n=!n)}return n}};ni.prototype.toString=function(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((r,e)=>`${r}, ${e}`,"")}]`};var El=class r{constructor(e=0,t=0,n=0,i=0,s=20){this.x=e,this.y=t,this.width=n,this.height=i,this.radius=s,this.type=Le.RREC}clone(){return new r(this.x,this.y,this.width,this.height,this.radius)}contains(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){let n=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(t>=this.y+n&&t<=this.y+this.height-n||e>=this.x+n&&e<=this.x+this.width-n)return!0;let i=e-(this.x+n),s=t-(this.y+n),o=n*n;if(i*i+s*s<=o||(i=e-(this.x+this.width-n),i*i+s*s<=o)||(s=t-(this.y+this.height-n),i*i+s*s<=o)||(i=e-(this.x+n),i*i+s*s<=o))return!0}return!1}};El.prototype.toString=function(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`};var me=class r{constructor(e=1,t=0,n=0,i=1,s=0,o=0){this.array=null,this.a=e,this.b=t,this.c=n,this.d=i,this.tx=s,this.ty=o}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,t,n,i,s,o){return this.a=e,this.b=t,this.c=n,this.d=i,this.tx=s,this.ty=o,this}toArray(e,t){this.array||(this.array=new Float32Array(9));let n=t||this.array;return e?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n}apply(e,t){t=t||new oe;let n=e.x,i=e.y;return t.x=this.a*n+this.c*i+this.tx,t.y=this.b*n+this.d*i+this.ty,t}applyInverse(e,t){t=t||new oe;let n=1/(this.a*this.d+this.c*-this.b),i=e.x,s=e.y;return t.x=this.d*n*i+-this.c*n*s+(this.ty*this.c-this.tx*this.d)*n,t.y=this.a*n*s+-this.b*n*i+(-this.ty*this.a+this.tx*this.b)*n,t}translate(e,t){return this.tx+=e,this.ty+=t,this}scale(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this}rotate(e){let t=Math.cos(e),n=Math.sin(e),i=this.a,s=this.c,o=this.tx;return this.a=i*t-this.b*n,this.b=i*n+this.b*t,this.c=s*t-this.d*n,this.d=s*n+this.d*t,this.tx=o*t-this.ty*n,this.ty=o*n+this.ty*t,this}append(e){let t=this.a,n=this.b,i=this.c,s=this.d;return this.a=e.a*t+e.b*i,this.b=e.a*n+e.b*s,this.c=e.c*t+e.d*i,this.d=e.c*n+e.d*s,this.tx=e.tx*t+e.ty*i+this.tx,this.ty=e.tx*n+e.ty*s+this.ty,this}setTransform(e,t,n,i,s,o,a,l,u){return this.a=Math.cos(a+u)*s,this.b=Math.sin(a+u)*s,this.c=-Math.sin(a-l)*o,this.d=Math.cos(a-l)*o,this.tx=e-(n*this.a+i*this.c),this.ty=t-(n*this.b+i*this.d),this}prepend(e){let t=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){let n=this.a,i=this.c;this.a=n*e.a+this.b*e.c,this.b=n*e.b+this.b*e.d,this.c=i*e.a+this.d*e.c,this.d=i*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this}decompose(e){let t=this.a,n=this.b,i=this.c,s=this.d,o=e.pivot,a=-Math.atan2(-i,s),l=Math.atan2(n,t),u=Math.abs(a+l);return u<1e-5||Math.abs(Rs-u)<1e-5?(e.rotation=l,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=a,e.skew.y=l),e.scale.x=Math.sqrt(t*t+n*n),e.scale.y=Math.sqrt(i*i+s*s),e.position.x=this.tx+(o.x*t+o.y*i),e.position.y=this.ty+(o.x*n+o.y*s),e}invert(){let e=this.a,t=this.b,n=this.c,i=this.d,s=this.tx,o=e*i-t*n;return this.a=i/o,this.b=-t/o,this.c=-n/o,this.d=e/o,this.tx=(n*this.ty-i*s)/o,this.ty=-(e*this.ty-t*s)/o,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){let e=new r;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}static get IDENTITY(){return new r}static get TEMP_MATRIX(){return new r}};me.prototype.toString=function(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`};var Io=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Ao=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Mo=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Ro=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],xx=[],lM=[],im=Math.sign;function S$(){for(let r=0;r<16;r++){let e=[];xx.push(e);for(let t=0;t<16;t++){let n=im(Io[r]*Io[t]+Mo[r]*Ao[t]),i=im(Ao[r]*Io[t]+Ro[r]*Ao[t]),s=im(Io[r]*Mo[t]+Mo[r]*Ro[t]),o=im(Ao[r]*Mo[t]+Ro[r]*Ro[t]);for(let a=0;a<16;a++)if(Io[a]===n&&Ao[a]===i&&Mo[a]===s&&Ro[a]===o){e.push(a);break}}}for(let r=0;r<16;r++){let e=new me;e.set(Io[r],Ao[r],Mo[r],Ro[r],0,0),lM.push(e)}}S$();var Ge={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:r=>Io[r],uY:r=>Ao[r],vX:r=>Mo[r],vY:r=>Ro[r],inv:r=>r&8?r&15:-r&7,add:(r,e)=>xx[r][e],sub:(r,e)=>xx[r][Ge.inv(e)],rotate180:r=>r^4,isVertical:r=>(r&3)===2,byDirection:(r,e)=>Math.abs(r)*2<=Math.abs(e)?e>=0?Ge.S:Ge.N:Math.abs(e)*2<=Math.abs(r)?r>0?Ge.E:Ge.W:e>0?r>0?Ge.SE:Ge.SW:r>0?Ge.NE:Ge.NW,matrixAppendRotationInv:(r,e,t=0,n=0)=>{let i=lM[Ge.inv(e)];i.tx=t,i.ty=n,r.append(i)}};var Ur=class r{constructor(e,t,n=0,i=0){this._x=n,this._y=i,this.cb=e,this.scope=t}clone(e=this.cb,t=this.scope){return new r(e,t,this._x,this._y)}set(e=0,t=e){return(this._x!==e||this._y!==t)&&(this._x=e,this._y=t,this.cb.call(this.scope)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}};Ur.prototype.toString=function(){return`[@pixi/math:ObservablePoint x=${this.x} y=${this.y} scope=${this.scope}]`};var bx=class{constructor(){this.worldTransform=new me,this.localTransform=new me,this.position=new Ur(this.onChange,this,0,0),this.scale=new Ur(this.onChange,this,1,1),this.pivot=new Ur(this.onChange,this,0,0),this.skew=new Ur(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){let r=this.localTransform;this._localID!==this._currentLocalID&&(r.a=this._cx*this.scale.x,r.b=this._sx*this.scale.x,r.c=this._cy*this.scale.y,r.d=this._sy*this.scale.y,r.tx=this.position.x-(this.pivot.x*r.a+this.pivot.y*r.c),r.ty=this.position.y-(this.pivot.x*r.b+this.pivot.y*r.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(r){let e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==r._worldID){let t=r.worldTransform,n=this.worldTransform;n.a=e.a*t.a+e.b*t.c,n.b=e.a*t.b+e.b*t.d,n.c=e.c*t.a+e.d*t.c,n.d=e.c*t.b+e.d*t.d,n.tx=e.tx*t.a+e.ty*t.c+t.tx,n.ty=e.tx*t.b+e.ty*t.d+t.ty,this._parentID=r._worldID,this._worldID++}}setFromMatrix(r){r.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(r){this._rotation!==r&&(this._rotation=r,this.updateSkew())}};bx.IDENTITY=new bx;var Po=bx;Po.prototype.toString=function(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`};var uM=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`;var cM=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function sm(r,e,t){let n=r.createShader(e);return r.shaderSource(n,t),r.compileShader(n),n}function wx(r){let e=new Array(r);for(let t=0;t<e.length;t++)e[t]=!1;return e}function Wc(r,e){switch(r){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return wx(2*e);case"bvec3":return wx(3*e);case"bvec4":return wx(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var ii=[{test:r=>r.type==="float"&&r.size===1&&!r.isArray,code:r=>`
            if(uv["${r}"] !== ud["${r}"].value)
            {
                ud["${r}"].value = uv["${r}"]
                gl.uniform1f(ud["${r}"].location, uv["${r}"])
            }
            `},{test:(r,e)=>(r.type==="sampler2D"||r.type==="samplerCube"||r.type==="sampler2DArray")&&r.size===1&&!r.isArray&&(e==null||e.castToBaseTexture!==void 0),code:r=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${r}"], t);

            if(ud["${r}"].value !== t)
            {
                ud["${r}"].value = t;
                gl.uniform1i(ud["${r}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(r,e)=>r.type==="mat3"&&r.size===1&&!r.isArray&&e.a!==void 0,code:r=>`
            gl.uniformMatrix3fv(ud["${r}"].location, false, uv["${r}"].toArray(true));
            `,codeUbo:r=>`
                var ${r}_matrix = uv.${r}.toArray(true);

                data[offset] = ${r}_matrix[0];
                data[offset+1] = ${r}_matrix[1];
                data[offset+2] = ${r}_matrix[2];
        
                data[offset + 4] = ${r}_matrix[3];
                data[offset + 5] = ${r}_matrix[4];
                data[offset + 6] = ${r}_matrix[5];
        
                data[offset + 8] = ${r}_matrix[6];
                data[offset + 9] = ${r}_matrix[7];
                data[offset + 10] = ${r}_matrix[8];
            `},{test:(r,e)=>r.type==="vec2"&&r.size===1&&!r.isArray&&e.x!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${r}"].location, v.x, v.y);
                }`,codeUbo:r=>`
                v = uv.${r};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:r=>r.type==="vec2"&&r.size===1&&!r.isArray,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${r}"].location, v[0], v[1]);
                }
            `},{test:(r,e)=>r.type==="vec4"&&r.size===1&&!r.isArray&&e.width!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${r}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:r=>`
                    v = uv.${r};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(r,e)=>r.type==="vec4"&&r.size===1&&!r.isArray&&e.red!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${r}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:r=>`
                    v = uv.${r};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(r,e)=>r.type==="vec3"&&r.size===1&&!r.isArray&&e.red!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${r}"].location, v.red, v.green, v.blue)
                }`,codeUbo:r=>`
                    v = uv.${r};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:r=>r.type==="vec4"&&r.size===1&&!r.isArray,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${r}"].location, v[0], v[1], v[2], v[3])
                }`}];var I$={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},A$={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function Ex(r,e){let t=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(let n in r.uniforms){let i=e[n];if(!i){r.uniforms[n]?.group===!0&&(r.uniforms[n].ubo?t.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${n}, '${n}');
                    `):t.push(`
                        renderer.shader.syncUniformGroup(uv.${n}, syncData);
                    `));continue}let s=r.uniforms[n],o=!1;for(let a=0;a<ii.length;a++)if(ii[a].test(i,s)){t.push(ii[a].code(n,s)),o=!0;break}if(!o){let a=(i.size===1&&!i.isArray?I$:A$)[i.type].replace("location",`ud["${n}"].location`);t.push(`
            cu = ud["${n}"];
            cv = cu.value;
            v = uv["${n}"];
            ${a};`)}}return new Function("ud","uv","renderer","syncData",t.join(`
`))}var hM={},om=hM;function am(){if(om===hM||om?.isContextLost()){let r=I.ADAPTER.createCanvas(),e;I.PREFER_ENV>=Nr.WEBGL2&&(e=r.getContext("webgl2",{})),e||(e=r.getContext("webgl",{})||r.getContext("experimental-webgl",{}),e?e.getExtension("WEBGL_draw_buffers"):e=null),om=e}return om}var lm;function Tx(){if(!lm){lm=nr.MEDIUM;let r=am();if(r&&r.getShaderPrecisionFormat){let e=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);e&&(lm=e.precision?nr.HIGH:nr.MEDIUM)}}return lm}function dM(r,e){let t=r.getShaderSource(e).split(`
`).map((u,c)=>`${c}: ${u}`),n=r.getShaderInfoLog(e),i=n.split(`
`),s={},o=i.map(u=>parseFloat(u.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(u=>u&&!s[u]?(s[u]=!0,!0):!1),a=[""];o.forEach(u=>{t[u-1]=`%c${t[u-1]}%c`,a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});let l=t.join(`
`);a[0]=l,console.error(n),console.groupCollapsed("click to view full shader code"),console.warn(...a),console.groupEnd()}function Cx(r,e,t,n){r.getProgramParameter(e,r.LINK_STATUS)||(r.getShaderParameter(t,r.COMPILE_STATUS)||dM(r,t),r.getShaderParameter(n,r.COMPILE_STATUS)||dM(r,n),console.error("PixiJS Error: Could not initialize shader."),r.getProgramInfoLog(e)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",r.getProgramInfoLog(e)))}var M$={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function Xc(r){return M$[r]}var um=null,fM={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function qc(r,e){if(!um){let t=Object.keys(fM);um={};for(let n=0;n<t.length;++n){let i=t[n];um[r[i]]=fM[i]}}return um[e]}function cm(r,e,t){if(r.substring(0,9)!=="precision"){let n=e;return e===nr.HIGH&&t!==nr.HIGH&&(n=nr.MEDIUM),`precision ${n} float;
${r}`}else if(t!==nr.HIGH&&r.substring(0,15)==="precision highp")return r.replace("precision highp","precision mediump");return r}var Yc;function hm(){if(typeof Yc=="boolean")return Yc;try{Yc=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{Yc=!1}return Yc}var R$=0,dm={},Dx=class Tl{constructor(e,t,n="pixi-shader",i={}){this.extra={},this.id=R$++,this.vertexSrc=e||Tl.defaultVertexSrc,this.fragmentSrc=t||Tl.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=i,this.vertexSrc.substring(0,8)!=="#version"&&(n=n.replace(/\s+/g,"-"),dm[n]?(dm[n]++,n+=`-${dm[n]}`):dm[n]=1,this.vertexSrc=`#define SHADER_NAME ${n}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${n}
${this.fragmentSrc}`,this.vertexSrc=cm(this.vertexSrc,Tl.defaultVertexPrecision,nr.HIGH),this.fragmentSrc=cm(this.fragmentSrc,Tl.defaultFragmentPrecision,Tx())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return cM}static get defaultFragmentSrc(){return uM}static from(e,t,n){let i=e+t,s=Gc[i];return s||(Gc[i]=s=new Tl(e,t,n)),s}};Dx.defaultVertexPrecision=nr.HIGH,Dx.defaultFragmentPrecision=Jr.apple.device?nr.HIGH:nr.MEDIUM;var Gt=Dx;var P$=0,or=class r{constructor(e,t,n){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=P$++,this.static=!!t,this.ubo=!!n,e instanceof Oe?(this.buffer=e,this.buffer.type=vr.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new Oe(new Float32Array(1)),this.buffer.type=vr.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(e,t,n){if(!this.ubo)this.uniforms[e]=new r(t,n);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(e,t,n){return new r(e,t,n)}static uboFrom(e,t){return new r(e,t??!0,!0)}};var Pt=class r{constructor(e,t){this.uniformBindCount=0,this.program=e,t?t instanceof or?this.uniformGroup=t:this.uniformGroup=new or(t):this.uniformGroup=new or({}),this.disposeRunner=new ut("disposeShader")}checkUniformExists(e,t){if(t.uniforms[e])return!0;for(let n in t.uniforms){let i=t.uniforms[n];if(i.group===!0&&this.checkUniformExists(e,i))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(e,t,n){let i=Gt.from(e,t);return new r(i,n)}};var Zc=class{constructor(e,t){if(this.vertexSrc=e,this.fragTemplate=t,this.programCache={},this.defaultGroupCache={},!t.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!t.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(e){if(!this.programCache[e]){let n=new Int32Array(e);for(let s=0;s<e;s++)n[s]=s;this.defaultGroupCache[e]=or.from({uSamplers:n},!0);let i=this.fragTemplate;i=i.replace(/%count%/gi,`${e}`),i=i.replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new Gt(this.vertexSrc,i)}let t={tint:new Float32Array([1,1,1,1]),translationMatrix:new me,default:this.defaultGroupCache[e]};return new Pt(this.programCache[e],t)}generateSampleSrc(e){let t="";t+=`
`,t+=`
`;for(let n=0;n<e;n++)n>0&&(t+=`
else `),n<e-1&&(t+=`if(vTextureId < ${n}.5)`),t+=`
{`,t+=`
	color = texture2D(uSamplers[${n}], vTextureCoord);`,t+=`
}`;return t+=`
`,t+=`
`,t}};var Ps=class{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let e=0;e<this.count;e++)this.elements[e]=null;this.count=0}};function pM(){return!Jr.apple.device}function mM(r){let e=!0,t=I.ADAPTER.getNavigator();if(Jr.tablet||Jr.phone){if(Jr.apple.device){let n=t.userAgent.match(/OS (\d+)_(\d+)?/);n&&parseInt(n[1],10)<11&&(e=!1)}if(Jr.android.device){let n=t.userAgent.match(/Android\s([0-9.]*)/);n&&parseInt(n[1],10)<7&&(e=!1)}}return e?r:4}var Pn=class{constructor(e){this.renderer=e}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(e){}};var gM=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`;var yM=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;var Kc=class On extends Pn{constructor(e){super(e),this.setShaderGenerator(),this.geometryClass=So,this.vertexSize=6,this.state=Dt.for2d(),this.size=On.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),e.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??mM(32),this._defaultMaxTextures}static set defaultMaxTextures(e){this._defaultMaxTextures=e}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??pM(),this._canUploadSameBuffer}static set canUploadSameBuffer(e){this._canUploadSameBuffer=e}get MAX_TEXTURES(){return le("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return yM}static get defaultFragmentTemplate(){return gM}setShaderGenerator({vertex:e=On.defaultVertexSrc,fragment:t=On.defaultFragmentTemplate}={}){this.shaderGenerator=new Zc(e,t)}contextChange(){let e=this.renderer.gl;I.PREFER_ENV===Nr.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),On.defaultMaxTextures),this.maxTextures=rm(this.maxTextures,e)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){let{_drawCallPool:e,_textureArrayPool:t}=On,n=this.size/4,i=Math.floor(n/this.maxTextures)+1;for(;e.length<n;)e.push(new Ms);for(;t.length<i;)t.push(new Ps);for(let s=0;s<this.maxTextures;s++)this._tempBoundTextures[s]=null}onPrerender(){this._flushId=0}render(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)}buildTexturesAndDrawCalls(){let{_bufferedTextures:e,maxTextures:t}=this,n=On._textureArrayPool,i=this.renderer.batch,s=this._tempBoundTextures,o=this.renderer.textureGC.count,a=++Y._globalBatch,l=0,u=n[0],c=0;i.copyBoundTextures(s,t);for(let h=0;h<this._bufferSize;++h){let d=e[h];e[h]=null,d._batchEnabled!==a&&(u.count>=t&&(i.boundArray(u,s,a,t),this.buildDrawCalls(u,c,h),c=h,u=n[++l],++a),d._batchEnabled=a,d.touched=o,u.elements[u.count++]=d)}u.count>0&&(i.boundArray(u,s,a,t),this.buildDrawCalls(u,c,this._bufferSize),++l,++a);for(let h=0;h<s.length;h++)s[h]=null;Y._globalBatch=a}buildDrawCalls(e,t,n){let{_bufferedElements:i,_attributeBuffer:s,_indexBuffer:o,vertexSize:a}=this,l=On._drawCallPool,u=this._dcIndex,c=this._aIndex,h=this._iIndex,d=l[u];d.start=this._iIndex,d.texArray=e;for(let f=t;f<n;++f){let p=i[f],m=p._texture.baseTexture,g=Uc[m.alphaMode?1:0][p.blendMode];i[f]=null,t<f&&d.blend!==g&&(d.size=h-d.start,t=f,d=l[++u],d.texArray=e,d.start=h),this.packInterleavedGeometry(p,s,o,c,h),c+=p.vertexData.length/2*a,h+=p.indices.length,d.blend=g}t<n&&(d.size=h-d.start,++u),this._dcIndex=u,this._aIndex=c,this._iIndex=h}bindAndClearTexArray(e){let t=this.renderer.texture;for(let n=0;n<e.count;n++)t.bind(e.elements[n],e.ids[n]),e.elements[n]=null;e.count=0}updateGeometry(){let{_packedGeometries:e,_attributeBuffer:t,_indexBuffer:n}=this;On.canUploadSameBuffer?(e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(n),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,e[this._flushId]=new this.geometryClass),e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(n),this.renderer.geometry.bind(e[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){let e=this._dcIndex,{gl:t,state:n}=this.renderer,i=On._drawCallPool,s=null;for(let o=0;o<e;o++){let{texArray:a,type:l,size:u,start:c,blend:h}=i[o];s!==a&&(s=a,this.bindAndClearTexArray(a)),this.state.blendMode=h,n.set(this.state),t.drawElements(l,u,t.UNSIGNED_SHORT,c*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),On.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(e){let t=Ss(Math.ceil(e/8)),n=Vc(t),i=t*8;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);let s=this._aBuffers[i];return s||(this._aBuffers[i]=s=new As(i*this.vertexSize*4)),s}getIndexBuffer(e){let t=Ss(Math.ceil(e/12)),n=Vc(t),i=t*12;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);let s=this._iBuffers[n];return s||(this._iBuffers[n]=s=new Uint16Array(i)),s}packInterleavedGeometry(e,t,n,i,s){let{uint32View:o,float32View:a}=t,l=i/this.vertexSize,u=e.uvs,c=e.indices,h=e.vertexData,d=e._texture.baseTexture._batchLocation,f=Math.min(e.worldAlpha,1),p=ue.shared.setValue(e._tintRGB).toPremultiplied(f,e._texture.baseTexture.alphaMode>0);for(let m=0;m<h.length;m+=2)a[i++]=h[m],a[i++]=h[m+1],a[i++]=u[m],a[i++]=u[m+1],o[i++]=p,a[i++]=d;for(let m=0;m<c.length;m++)n[s++]=l+c[m]}};Kc.defaultBatchSize=4096,Kc.extension={name:"batch",type:S.RendererPlugin},Kc._drawCallPool=[],Kc._textureArrayPool=[];var Li=Kc;M.add(Li);var vM=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`;var _M=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;var Sx=class Qc extends Pt{constructor(e,t,n){let i=Gt.from(e||Qc.defaultVertexSrc,t||Qc.defaultFragmentSrc);super(i,n),this.padding=0,this.resolution=Qc.defaultResolution,this.multisample=Qc.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new Dt}apply(e,t,n,i,s){e.applyFilter(this,t,n,i)}get blendMode(){return this.state.blendMode}set blendMode(e){this.state.blendMode=e}get resolution(){return this._resolution}set resolution(e){this._resolution=e}static get defaultVertexSrc(){return _M}static get defaultFragmentSrc(){return vM}};Sx.defaultResolution=1,Sx.defaultMultisample=Pe.NONE;var je=Sx;var ki=class{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new ue(0),this.alpha=1}init(e){this.clearBeforeRender=e.clearBeforeRender;let{backgroundColor:t,background:n,backgroundAlpha:i}=e,s=n??t;s!==void 0&&(this.color=s),this.alpha=i}get color(){return this._backgroundColor.value}set color(e){this._backgroundColor.setValue(e)}get alpha(){return this._backgroundColor.alpha}set alpha(e){this._backgroundColor.setAlpha(e)}get backgroundColor(){return this._backgroundColor}destroy(){}};ki.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},ki.extension={type:[S.RendererSystem,S.CanvasRendererSystem],name:"background"};M.add(ki);var Cl=class{constructor(e){this.renderer=e,this.emptyRenderer=new Pn(e),this.currentRenderer=this.emptyRenderer}setObjectRenderer(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(e,t){let{boundTextures:n}=this.renderer.texture;for(let i=t-1;i>=0;--i)e[i]=n[i]||null,e[i]&&(e[i]._batchLocation=i)}boundArray(e,t,n,i){let{elements:s,ids:o,count:a}=e,l=0;for(let u=0;u<a;u++){let c=s[u],h=c._batchLocation;if(h>=0&&h<i&&t[h]===c){o[u]=h;continue}for(;l<i;){let d=t[l];if(d&&d._batchEnabled===n&&d._batchLocation===l){l++;continue}o[u]=l,c._batchLocation=l,t[l]=c;break}}}destroy(){this.renderer=null}};Cl.extension={type:S.RendererSystem,name:"batch"};M.add(Cl);var xM=0,Bi=class{constructor(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=xM++}init(e){if(e.context)this.initFromContext(e.context);else{let t=this.renderer.background.alpha<1,n=e.premultipliedAlpha;this.preserveDrawingBuffer=e.preserveDrawingBuffer,this.useContextAlpha=e.useContextAlpha,this.powerPreference=e.powerPreference,this.initFromOptions({alpha:t,premultipliedAlpha:n,antialias:e.antialias,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:e.powerPreference})}}initFromContext(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=xM++,this.renderer.runners.contextChange.emit(e);let t=this.renderer.view;t.addEventListener!==void 0&&(t.addEventListener("webglcontextlost",this.handleContextLost,!1),t.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(e){let t=this.createContext(this.renderer.view,e);this.initFromContext(t)}createContext(e,t){let n;if(I.PREFER_ENV>=Nr.WEBGL2&&(n=e.getContext("webgl2",t)),n)this.webGLVersion=2;else if(this.webGLVersion=1,n=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),!n)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=n,this.getExtensions(),this.gl}getExtensions(){let{gl:e}=this,t={loseContext:e.getExtension("WEBGL_lose_context"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,t,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,t,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})}handleContextLost(e){e.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){let e=this.renderer.view;this.renderer=null,e.removeEventListener!==void 0&&(e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(e){let t=e.getContextAttributes(),n="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;n&&(this.webGLVersion=2),t&&!t.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");let i=n||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=i,i||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}};Bi.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},Bi.extension={type:S.RendererSystem,name:"context"};M.add(Bi);var Os=class{constructor(e,t){if(this.width=Math.round(e),this.height=Math.round(t),!this.width||!this.height)throw new Error("Framebuffer width or height is zero");this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new ut("disposeFramebuffer"),this.multisample=Pe.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(e=0,t){return this.colorTextures[e]=t||new Y(null,{scaleMode:Qr.NEAREST,resolution:1,mipmap:Rt.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(e){return this.depthTexture=e||new Y(null,{scaleMode:Qr.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Rt.OFF,format:F.DEPTH_COMPONENT,type:$.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(e,t){if(e=Math.round(e),t=Math.round(t),!e||!t)throw new Error("Framebuffer width and height must not be zero");if(!(e===this.width&&t===this.height)){this.width=e,this.height=t,this.dirtyId++,this.dirtySize++;for(let n=0;n<this.colorTextures.length;n++){let i=this.colorTextures[n],s=i.resolution;i.setSize(e/s,t/s)}if(this.depthTexture){let n=this.depthTexture.resolution;this.depthTexture.setSize(e/n,t/n)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}};var Oo=class extends Y{constructor(e={}){if(typeof e=="number"){let t=arguments[0],n=arguments[1],i=arguments[2],s=arguments[3];e={width:t,height:n,scaleMode:i,resolution:s}}e.width=e.width??100,e.height=e.height??100,e.multisample??(e.multisample=Pe.NONE),super(null,e),this.mipmap=Rt.OFF,this.valid=!0,this._clear=new ue([0,0,0,0]),this.framebuffer=new Os(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=e.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(e){this._clear.setValue(e)}get clearColor(){return this._clear.value}get clear(){return this._clear}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,t){this.framebuffer.resize(e*this.resolution,t*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}};var Ot=class extends kr{constructor(e){let t=e,n=t.naturalWidth||t.videoWidth||t.width,i=t.naturalHeight||t.videoHeight||t.height;super(n,i),this.source=e,this.noSubImage=!1}static crossOrigin(e,t,n){n===void 0&&!t.startsWith("data:")?e.crossOrigin=tm(t):n!==!1&&(e.crossOrigin=typeof n=="string"?n:"anonymous")}upload(e,t,n,i){let s=e.gl,o=t.realWidth,a=t.realHeight;if(i=i||this.source,typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement){if(!i.complete||i.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement&&i.readyState<=1)return!1;return s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===Ke.UNPACK),!this.noSubImage&&t.target===s.TEXTURE_2D&&n.width===o&&n.height===a?s.texSubImage2D(s.TEXTURE_2D,0,0,0,t.format,n.type,i):(n.width=o,n.height=a,s.texImage2D(t.target,0,n.internalFormat,t.format,n.type,i)),!0}update(){if(this.destroyed)return;let e=this.source,t=e.naturalWidth||e.videoWidth||e.width,n=e.naturalHeight||e.videoHeight||e.height;this.resize(t,n),super.update()}dispose(){this.source=null}};var No=class extends Ot{constructor(e,t){if(t=t||{},typeof e=="string"){let n=new Image;Ot.crossOrigin(n,e,t.crossorigin),n.src=e,e=n}super(e),!e.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=e.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(t.createBitmap??I.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof t.alphaMode=="number"?t.alphaMode:null,this.bitmap=null,this._load=null,t.autoLoad!==!1&&this.load()}load(e){return this._load?this._load:(e!==void 0&&(this.createBitmap=e),this._load=new Promise((t,n)=>{let i=this.source;this.url=i.src;let s=()=>{this.destroyed||(i.onload=null,i.onerror=null,this.update(),this._load=null,this.createBitmap?t(this.process()):t(this))};i.complete&&i.src?s():(i.onload=s,i.onerror=o=>{n(o),this.onError.emit(o)})}),this._load)}process(){let e=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);let t=globalThis.createImageBitmap,n=!e.crossOrigin||e.crossOrigin==="anonymous";return this._process=fetch(e.src,{mode:n?"cors":"no-cors"}).then(i=>i.blob()).then(i=>t(i,0,0,e.width,e.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===Ke.UNPACK?"premultiply":"none"})).then(i=>this.destroyed?Promise.reject():(this.bitmap=i,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(e,t,n){if(typeof this.alphaMode=="number"&&(t.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(e,t,n);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(e,t,n,this.bitmap),!this.preserveBitmap){let i=!0,s=t._glTextures;for(let o in s){let a=s[o];if(a!==n&&a.dirtyId!==t.dirtyId){i=!1;break}}i&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(e){return typeof HTMLImageElement<"u"&&(typeof e=="string"||e instanceof HTMLImageElement)}};var Fo=class{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(e,t,n){let i=t.width,s=t.height;if(n){let o=e.width/2/i,a=e.height/2/s,l=e.x/i+o,u=e.y/s+a;n=Ge.add(n,Ge.NW),this.x0=l+o*Ge.uX(n),this.y0=u+a*Ge.uY(n),n=Ge.add(n,2),this.x1=l+o*Ge.uX(n),this.y1=u+a*Ge.uY(n),n=Ge.add(n,2),this.x2=l+o*Ge.uX(n),this.y2=u+a*Ge.uY(n),n=Ge.add(n,2),this.x3=l+o*Ge.uX(n),this.y3=u+a*Ge.uY(n)}else this.x0=e.x/i,this.y0=e.y/s,this.x1=(e.x+e.width)/i,this.y1=e.y/s,this.x2=(e.x+e.width)/i,this.y2=(e.y+e.height)/s,this.x3=e.x/i,this.y3=(e.y+e.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}};Fo.prototype.toString=function(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`};var bM=new Fo;function fm(r){r.destroy=function(){},r.on=function(){},r.once=function(){},r.emit=function(){}}var se=class r extends Is.default{constructor(e,t,n,i,s,o,a){if(super(),this.noFrame=!1,t||(this.noFrame=!0,t=new Z(0,0,1,1)),e instanceof r&&(e=e.baseTexture),this.baseTexture=e,this._frame=t,this.trim=i,this.valid=!1,this.destroyed=!1,this._uvs=bM,this.uvMatrix=null,this.orig=n||t,this._rotate=Number(s||0),s===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=o?new oe(o.x,o.y):new oe(0,0),this.defaultBorders=a,this._updateID=0,this.textureCacheIds=[],e.valid?this.noFrame?e.valid&&this.onBaseTextureUpdated(e):this.frame=t:e.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&e.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(e){if(this.baseTexture){if(e){let{resource:t}=this.baseTexture;t?.url&&Ct[t.url]&&r.removeFromCache(t.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,r.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}clone(){let e=this._frame.clone(),t=this._frame===this.orig?e:this.orig.clone(),n=new r(this.baseTexture,!this.noFrame&&e,t,this.trim?.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(n._frame=e),n}updateUvs(){this._uvs===bM&&(this._uvs=new Fo),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(e,t={},n=I.STRICT_TEXTURE_CACHE){let i=typeof e=="string",s=null;if(i)s=e;else if(e instanceof Y){if(!e.cacheId){let a=t?.pixiIdPrefix||"pixiid";e.cacheId=`${a}-${ri()}`,Y.addToCache(e,e.cacheId)}s=e.cacheId}else{if(!e._pixiId){let a=t?.pixiIdPrefix||"pixiid";e._pixiId=`${a}_${ri()}`}s=e._pixiId}let o=Ct[s];if(i&&n&&!o)throw new Error(`The cacheId "${s}" does not exist in TextureCache.`);return!o&&!(e instanceof Y)?(t.resolution||(t.resolution=$c(e)),o=new r(new Y(e,t)),o.baseTexture.cacheId=s,Y.addToCache(o.baseTexture,s),r.addToCache(o,s)):!o&&e instanceof Y&&(o=new r(e),r.addToCache(o,s)),o}static fromURL(e,t){let n=Object.assign({autoLoad:!1},t?.resourceOptions),i=r.from(e,Object.assign({resourceOptions:n},t),!1),s=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):s.load().then(()=>Promise.resolve(i))}static fromBuffer(e,t,n,i){return new r(Y.fromBuffer(e,t,n,i))}static fromLoader(e,t,n,i){let s=new Y(e,Object.assign({scaleMode:Y.defaultOptions.scaleMode,resolution:$c(t)},i)),{resource:o}=s;o instanceof No&&(o.url=t);let a=new r(s);return n||(n=t),Y.addToCache(a.baseTexture,n),r.addToCache(a,n),n!==t&&(Y.addToCache(a.baseTexture,t),r.addToCache(a,t)),a.baseTexture.valid?Promise.resolve(a):new Promise(l=>{a.baseTexture.once("loaded",()=>l(a))})}static addToCache(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),Ct[t]&&Ct[t]!==e&&console.warn(`Texture added to the cache with an id [${t}] that already had an entry`),Ct[t]=e)}static removeFromCache(e){if(typeof e=="string"){let t=Ct[e];if(t){let n=t.textureCacheIds.indexOf(e);return n>-1&&t.textureCacheIds.splice(n,1),delete Ct[e],t}}else if(e?.textureCacheIds){for(let t=0;t<e.textureCacheIds.length;++t)Ct[e.textureCacheIds[t]]===e&&delete Ct[e.textureCacheIds[t]];return e.textureCacheIds.length=0,e}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(e){this._frame=e,this.noFrame=!1;let{x:t,y:n,width:i,height:s}=e,o=t+i>this.baseTexture.width,a=n+s>this.baseTexture.height;if(o||a){let l=o&&a?"and":"or",u=`X: ${t} + ${i} = ${t+i} > ${this.baseTexture.width}`,c=`Y: ${n} + ${s} = ${n+s} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${u} ${l} ${c}`)}this.valid=i&&s&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(e){this._rotate=e,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return r._EMPTY||(r._EMPTY=new r(new Y),fm(r._EMPTY),fm(r._EMPTY.baseTexture)),r._EMPTY}static get WHITE(){if(!r._WHITE){let e=I.ADAPTER.createCanvas(16,16),t=e.getContext("2d");e.width=16,e.height=16,t.fillStyle="white",t.fillRect(0,0,16,16),r._WHITE=new r(Y.from(e)),fm(r._WHITE),fm(r._WHITE.baseTexture)}return r._WHITE}};var rn=class r extends se{constructor(e,t){super(e,t),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,t,n=!0){let i=this.baseTexture.resolution,s=Math.round(e*i)/i,o=Math.round(t*i)/i;this.valid=s>0&&o>0,this._frame.width=this.orig.width=s,this._frame.height=this.orig.height=o,n&&this.baseTexture.resize(s,o),this.updateUvs()}setResolution(e){let{baseTexture:t}=this;t.resolution!==e&&(t.setResolution(e),this.resize(t.width,t.height,!1))}static create(e){return new r(new Oo(e))}};var Ix=(()=>{class r{constructor(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(t,n,i=Pe.NONE){let s=new Oo(Object.assign({width:t,height:n,resolution:1,multisample:i},this.textureOptions));return new rn(s)}getOptimalTexture(t,n,i=1,s=Pe.NONE){let o;t=Math.max(Math.ceil(t*i-1e-6),1),n=Math.max(Math.ceil(n*i-1e-6),1),!this.enableFullScreen||t!==this._pixelsWidth||n!==this._pixelsHeight?(t=Ss(t),n=Ss(n),o=((t&65535)<<16|n&65535)>>>0,s>1&&(o+=s*4294967296)):o=s>1?-s:-1,this.texturePool[o]||(this.texturePool[o]=[]);let a=this.texturePool[o].pop();return a||(a=this.createTexture(t,n,s)),a.filterPoolKey=o,a.setResolution(i),a}getFilterTexture(t,n,i){let s=this.getOptimalTexture(t.width,t.height,n||t.resolution,i||Pe.NONE);return s.filterFrame=t.filterFrame,s}returnTexture(t){let n=t.filterPoolKey;t.filterFrame=null,this.texturePool[n].push(t)}returnFilterTexture(t){this.returnTexture(t)}clear(t){if(t=t!==!1,t)for(let n in this.texturePool){let i=this.texturePool[n];if(i)for(let s=0;s<i.length;s++)i[s].destroy(!0)}this.texturePool={}}setScreenSize(t){if(!(t.width===this._pixelsWidth&&t.height===this._pixelsHeight)){this.enableFullScreen=t.width>0&&t.height>0;for(let n in this.texturePool){if(!(Number(n)<0))continue;let i=this.texturePool[n];if(i)for(let s=0;s<i.length;s++)i[s].destroy(!0);this.texturePool[n]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}}}return r.SCREEN_KEY=-1,r})();var Jc=class extends Br{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}};var Lo=class extends Br{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new Oe(this.vertices),this.uvBuffer=new Oe(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(e,t){let n=0,i=0;return this.uvs[0]=n,this.uvs[1]=i,this.uvs[2]=n+t.width/e.width,this.uvs[3]=i,this.uvs[4]=n+t.width/e.width,this.uvs[5]=i+t.height/e.height,this.uvs[6]=n,this.uvs[7]=i+t.height/e.height,n=t.x,i=t.y,this.vertices[0]=n,this.vertices[1]=i,this.vertices[2]=n+t.width,this.vertices[3]=i,this.vertices[4]=n+t.width,this.vertices[5]=i+t.height,this.vertices[6]=n,this.vertices[7]=i+t.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}};var eh=class{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=Pe.NONE,this.sourceFrame=new Z,this.destinationFrame=new Z,this.bindingSourceFrame=new Z,this.bindingDestinationFrame=new Z,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}};var pm=[new oe,new oe,new oe,new oe],Ax=new me,Dl=class{constructor(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new Ix,this.statePool=[],this.quad=new Jc,this.quadUv=new Lo,this.tempRect=new Z,this.activeState={},this.globalUniforms=new or({outputFrame:new Z,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(e,t){let n=this.renderer,i=this.defaultFilterStack,s=this.statePool.pop()||new eh,o=n.renderTexture,a,l;if(o.current){let g=o.current;a=g.resolution,l=g.multisample}else a=n.resolution,l=n.multisample;let u=t[0].resolution||a,c=t[0].multisample??l,h=t[0].padding,d=t[0].autoFit,f=t[0].legacy??!0;for(let g=1;g<t.length;g++){let y=t[g];u=Math.min(u,y.resolution||a),c=Math.min(c,y.multisample??l),h=this.useMaxPadding?Math.max(h,y.padding):h+y.padding,d=d&&y.autoFit,f=f||(y.legacy??!0)}i.length===1&&(this.defaultFilterStack[0].renderTexture=o.current),i.push(s),s.resolution=u,s.multisample=c,s.legacy=f,s.target=e,s.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),s.sourceFrame.pad(h);let p=this.tempRect.copyFrom(o.sourceFrame);n.projection.transform&&this.transformAABB(Ax.copyFrom(n.projection.transform).invert(),p),d?(s.sourceFrame.fit(p),(s.sourceFrame.width<=0||s.sourceFrame.height<=0)&&(s.sourceFrame.width=0,s.sourceFrame.height=0)):s.sourceFrame.intersects(p)||(s.sourceFrame.width=0,s.sourceFrame.height=0),this.roundFrame(s.sourceFrame,o.current?o.current.resolution:n.resolution,o.sourceFrame,o.destinationFrame,n.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,u,c),s.filters=t,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;let m=this.tempRect;m.x=0,m.y=0,m.width=s.sourceFrame.width,m.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(o.sourceFrame),s.bindingDestinationFrame.copyFrom(o.destinationFrame),s.transform=n.projection.transform,n.projection.transform=null,o.bind(s.renderTexture,s.sourceFrame,m),n.framebuffer.clear(0,0,0,0)}pop(){let e=this.defaultFilterStack,t=e.pop(),n=t.filters;this.activeState=t;let i=this.globalUniforms.uniforms;i.outputFrame=t.sourceFrame,i.resolution=t.resolution;let s=i.inputSize,o=i.inputPixel,a=i.inputClamp;if(s[0]=t.destinationFrame.width,s[1]=t.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],o[0]=Math.round(s[0]*t.resolution),o[1]=Math.round(s[1]*t.resolution),o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=t.sourceFrame.width*s[2]-.5*o[2],a[3]=t.sourceFrame.height*s[3]-.5*o[3],t.legacy){let u=i.filterArea;u[0]=t.destinationFrame.width,u[1]=t.destinationFrame.height,u[2]=t.sourceFrame.x,u[3]=t.sourceFrame.y,i.filterClamp=i.inputClamp}this.globalUniforms.update();let l=e[e.length-1];if(this.renderer.framebuffer.blit(),n.length===1)n[0].apply(this,t.renderTexture,l.renderTexture,Lr.BLEND,t),this.returnFilterTexture(t.renderTexture);else{let u=t.renderTexture,c=this.getOptimalFilterTexture(u.width,u.height,t.resolution);c.filterFrame=u.filterFrame;let h=0;for(h=0;h<n.length-1;++h){h===1&&t.multisample>1&&(c=this.getOptimalFilterTexture(u.width,u.height,t.resolution),c.filterFrame=u.filterFrame),n[h].apply(this,u,c,Lr.CLEAR,t);let d=u;u=c,c=d}n[h].apply(this,u,l.renderTexture,Lr.BLEND,t),h>1&&t.multisample>1&&this.returnFilterTexture(t.renderTexture),this.returnFilterTexture(u),this.returnFilterTexture(c)}t.clear(),this.statePool.push(t)}bindAndClear(e,t=Lr.CLEAR){let{renderTexture:n,state:i}=this.renderer;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,e?.filterFrame){let o=this.tempRect;o.x=0,o.y=0,o.width=e.filterFrame.width,o.height=e.filterFrame.height,n.bind(e,e.filterFrame,o)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?n.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);let s=i.stateId&1||this.forceClear;(t===Lr.CLEAR||t===Lr.BLIT&&s)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(e,t,n,i){let s=this.renderer;s.state.set(e.state),this.bindAndClear(n,i),e.uniforms.uSampler=t,e.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(t._frame,t.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(yr.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(yr.TRIANGLE_STRIP))}calculateSpriteMatrix(e,t){let{sourceFrame:n,destinationFrame:i}=this.activeState,{orig:s}=t._texture,o=e.set(i.width,0,0,i.height,n.x,n.y),a=t.worldTransform.copyTo(me.TEMP_MATRIX);return a.invert(),o.prepend(a),o.scale(1/s.width,1/s.height),o.translate(t.anchor.x,t.anchor.y),o}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(e,t,n=1,i=Pe.NONE){return this.texturePool.getOptimalTexture(e,t,n,i)}getFilterTexture(e,t,n){if(typeof e=="number"){let s=e;e=t,t=s}e=e||this.activeState.renderTexture;let i=this.texturePool.getOptimalTexture(e.width,e.height,t||e.resolution,n||Pe.NONE);return i.filterFrame=e.filterFrame,i}returnFilterTexture(e){this.texturePool.returnTexture(e)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(e,t){let n=pm[0],i=pm[1],s=pm[2],o=pm[3];n.set(t.left,t.top),i.set(t.left,t.bottom),s.set(t.right,t.top),o.set(t.right,t.bottom),e.apply(n,n),e.apply(i,i),e.apply(s,s),e.apply(o,o);let a=Math.min(n.x,i.x,s.x,o.x),l=Math.min(n.y,i.y,s.y,o.y),u=Math.max(n.x,i.x,s.x,o.x),c=Math.max(n.y,i.y,s.y,o.y);t.x=a,t.y=l,t.width=u-a,t.height=c-l}roundFrame(e,t,n,i,s){if(!(e.width<=0||e.height<=0||n.width<=0||n.height<=0)){if(s){let{a:o,b:a,c:l,d:u}=s;if((Math.abs(a)>1e-4||Math.abs(l)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(u)>1e-4))return}s=s?Ax.copyFrom(s):Ax.identity(),s.translate(-n.x,-n.y).scale(i.width/n.width,i.height/n.height).translate(i.x,i.y),this.transformAABB(s,e),e.ceil(t),this.transformAABB(s.invert(),e)}}};Dl.extension={type:S.RendererSystem,name:"filter"};M.add(Dl);var th=class{constructor(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=Pe.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}};var O$=new Z,Sl=class{constructor(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new Os(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);let e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Z,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let t=this.renderer.context.extensions.drawBuffers,n=this.renderer.context.extensions.depthTexture;I.PREFER_ENV===Nr.WEBGL_LEGACY&&(t=null,n=null),t?e.drawBuffers=i=>t.drawBuffersWEBGL(i):(this.hasMRT=!1,e.drawBuffers=()=>{}),n||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)}bind(e,t,n=0){let{gl:i}=this;if(e){let s=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,i.bindFramebuffer(i.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==n&&(e.dirtyId++,e.dirtyFormat++,s.mipLevel=n),s.dirtyId!==e.dirtyId&&(s.dirtyId=e.dirtyId,s.dirtyFormat!==e.dirtyFormat?(s.dirtyFormat=e.dirtyFormat,s.dirtySize=e.dirtySize,this.updateFramebuffer(e,n)):s.dirtySize!==e.dirtySize&&(s.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(let o=0;o<e.colorTextures.length;o++){let a=e.colorTextures[o];this.renderer.texture.unbind(a.parentTextureArray||a)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),t){let o=t.width>>n,a=t.height>>n,l=o/t.width;this.setViewport(t.x*l,t.y*l,o,a)}else{let o=e.width>>n,a=e.height>>n;this.setViewport(0,0,o,a)}}else this.current&&(this.current=null,i.bindFramebuffer(i.FRAMEBUFFER,null)),t?this.setViewport(t.x,t.y,t.width,t.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(e,t,n,i){let s=this.viewport;e=Math.round(e),t=Math.round(t),n=Math.round(n),i=Math.round(i),(s.width!==n||s.height!==i||s.x!==e||s.y!==t)&&(s.x=e,s.y=t,s.width=n,s.height=i,this.gl.viewport(e,t,n,i))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(e,t,n,i,s=Ip.COLOR|Ip.DEPTH){let{gl:o}=this;o.clearColor(e,t,n,i),o.clear(s)}initFramebuffer(e){let{gl:t}=this,n=new th(t.createFramebuffer());return n.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=n,this.managedFramebuffers.push(e),e.disposeRunner.add(this),n}resizeFramebuffer(e){let{gl:t}=this,n=e.glFramebuffers[this.CONTEXT_UID];if(n.stencil){t.bindRenderbuffer(t.RENDERBUFFER,n.stencil);let o;this.renderer.context.webGLVersion===1?o=t.DEPTH_STENCIL:e.depth&&e.stencil?o=t.DEPTH24_STENCIL8:e.depth?o=t.DEPTH_COMPONENT24:o=t.STENCIL_INDEX8,n.msaaBuffer?t.renderbufferStorageMultisample(t.RENDERBUFFER,n.multisample,o,e.width,e.height):t.renderbufferStorage(t.RENDERBUFFER,o,e.width,e.height)}let i=e.colorTextures,s=i.length;t.drawBuffers||(s=Math.min(s,1));for(let o=0;o<s;o++){let a=i[o],l=a.parentTextureArray||a;this.renderer.texture.bind(l,0),o===0&&n.msaaBuffer&&(t.bindRenderbuffer(t.RENDERBUFFER,n.msaaBuffer),t.renderbufferStorageMultisample(t.RENDERBUFFER,n.multisample,l._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height))}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)}updateFramebuffer(e,t){let{gl:n}=this,i=e.glFramebuffers[this.CONTEXT_UID],s=e.colorTextures,o=s.length;n.drawBuffers||(o=Math.min(o,1)),i.multisample>1&&this.canMultisampleFramebuffer(e)?i.msaaBuffer=i.msaaBuffer||n.createRenderbuffer():i.msaaBuffer&&(n.deleteRenderbuffer(i.msaaBuffer),i.msaaBuffer=null,i.blitFramebuffer&&(i.blitFramebuffer.dispose(),i.blitFramebuffer=null));let a=[];for(let l=0;l<o;l++){let u=s[l],c=u.parentTextureArray||u;this.renderer.texture.bind(c,0),l===0&&i.msaaBuffer?(n.bindRenderbuffer(n.RENDERBUFFER,i.msaaBuffer),n.renderbufferStorageMultisample(n.RENDERBUFFER,i.multisample,c._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,i.msaaBuffer)):(n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+l,u.target,c._glTextures[this.CONTEXT_UID].texture,t),a.push(n.COLOR_ATTACHMENT0+l))}if(a.length>1&&n.drawBuffers(a),e.depthTexture&&this.writeDepthTexture){let l=e.depthTexture;this.renderer.texture.bind(l,0),n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,l._glTextures[this.CONTEXT_UID].texture,t)}if((e.stencil||e.depth)&&!(e.depthTexture&&this.writeDepthTexture)){i.stencil=i.stencil||n.createRenderbuffer();let l,u;this.renderer.context.webGLVersion===1?(l=n.DEPTH_STENCIL_ATTACHMENT,u=n.DEPTH_STENCIL):e.depth&&e.stencil?(l=n.DEPTH_STENCIL_ATTACHMENT,u=n.DEPTH24_STENCIL8):e.depth?(l=n.DEPTH_ATTACHMENT,u=n.DEPTH_COMPONENT24):(l=n.STENCIL_ATTACHMENT,u=n.STENCIL_INDEX8),n.bindRenderbuffer(n.RENDERBUFFER,i.stencil),i.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,i.multisample,u,e.width,e.height):n.renderbufferStorage(n.RENDERBUFFER,u,e.width,e.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,l,n.RENDERBUFFER,i.stencil)}else i.stencil&&(n.deleteRenderbuffer(i.stencil),i.stencil=null)}canMultisampleFramebuffer(e){return this.renderer.context.webGLVersion!==1&&e.colorTextures.length<=1&&!e.depthTexture}detectSamples(e){let{msaaSamples:t}=this,n=Pe.NONE;if(e<=1||t===null)return n;for(let i=0;i<t.length;i++)if(t[i]<=e){n=t[i];break}return n===1&&(n=Pe.NONE),n}blit(e,t,n){let{current:i,renderer:s,gl:o,CONTEXT_UID:a}=this;if(s.context.webGLVersion!==2||!i)return;let l=i.glFramebuffers[a];if(!l)return;if(!e){if(!l.msaaBuffer)return;let c=i.colorTextures[0];if(!c)return;l.blitFramebuffer||(l.blitFramebuffer=new Os(i.width,i.height),l.blitFramebuffer.addColorTexture(0,c)),e=l.blitFramebuffer,e.colorTextures[0]!==c&&(e.colorTextures[0]=c,e.dirtyId++,e.dirtyFormat++),(e.width!==i.width||e.height!==i.height)&&(e.width=i.width,e.height=i.height,e.dirtyId++,e.dirtySize++)}t||(t=O$,t.width=i.width,t.height=i.height),n||(n=t);let u=t.width===n.width&&t.height===n.height;this.bind(e),o.bindFramebuffer(o.READ_FRAMEBUFFER,l.framebuffer),o.blitFramebuffer(t.left,t.top,t.right,t.bottom,n.left,n.top,n.right,n.bottom,o.COLOR_BUFFER_BIT,u?o.NEAREST:o.LINEAR),o.bindFramebuffer(o.READ_FRAMEBUFFER,e.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(e,t){let n=e.glFramebuffers[this.CONTEXT_UID],i=this.gl;if(!n)return;delete e.glFramebuffers[this.CONTEXT_UID];let s=this.managedFramebuffers.indexOf(e);s>=0&&this.managedFramebuffers.splice(s,1),e.disposeRunner.remove(this),t||(i.deleteFramebuffer(n.framebuffer),n.msaaBuffer&&i.deleteRenderbuffer(n.msaaBuffer),n.stencil&&i.deleteRenderbuffer(n.stencil)),n.blitFramebuffer&&this.disposeFramebuffer(n.blitFramebuffer,t)}disposeAll(e){let t=this.managedFramebuffers;this.managedFramebuffers=[];for(let n=0;n<t.length;n++)this.disposeFramebuffer(t[n],e)}forceStencil(){let e=this.current;if(!e)return;let t=e.glFramebuffers[this.CONTEXT_UID];if(!t||t.stencil&&e.stencil)return;e.stencil=!0;let n=e.width,i=e.height,s=this.gl,o=t.stencil=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,o);let a,l;this.renderer.context.webGLVersion===1?(a=s.DEPTH_STENCIL_ATTACHMENT,l=s.DEPTH_STENCIL):e.depth?(a=s.DEPTH_STENCIL_ATTACHMENT,l=s.DEPTH24_STENCIL8):(a=s.STENCIL_ATTACHMENT,l=s.STENCIL_INDEX8),t.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,t.multisample,l,n,i):s.renderbufferStorage(s.RENDERBUFFER,l,n,i),s.framebufferRenderbuffer(s.FRAMEBUFFER,a,s.RENDERBUFFER,o)}reset(){this.current=this.unknownFramebuffer,this.viewport=new Z}destroy(){this.renderer=null}};Sl.extension={type:S.RendererSystem,name:"framebuffer"};M.add(Sl);var Mx={5126:4,5123:2,5121:1},Il=class{constructor(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);let e=this.gl=this.renderer.gl,t=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,t.webGLVersion!==2){let n=this.renderer.context.extensions.vertexArrayObject;I.PREFER_ENV===Nr.WEBGL_LEGACY&&(n=null),n?(e.createVertexArray=()=>n.createVertexArrayOES(),e.bindVertexArray=i=>n.bindVertexArrayOES(i),e.deleteVertexArray=i=>n.deleteVertexArrayOES(i)):(this.hasVao=!1,e.createVertexArray=()=>null,e.bindVertexArray=()=>null,e.deleteVertexArray=()=>null)}if(t.webGLVersion!==2){let n=e.getExtension("ANGLE_instanced_arrays");n?(e.vertexAttribDivisor=(i,s)=>n.vertexAttribDivisorANGLE(i,s),e.drawElementsInstanced=(i,s,o,a,l)=>n.drawElementsInstancedANGLE(i,s,o,a,l),e.drawArraysInstanced=(i,s,o,a)=>n.drawArraysInstancedANGLE(i,s,o,a)):this.hasInstance=!1}this.canUseUInt32ElementIndex=t.webGLVersion===2||!!t.extensions.uint32ElementIndex}bind(e,t){t=t||this.renderer.shader.shader;let{gl:n}=this,i=e.glVertexArrayObjects[this.CONTEXT_UID],s=!1;i||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=i={},s=!0);let o=i[t.program.id]||this.initGeometryVao(e,t,s);this._activeGeometry=e,this._activeVao!==o&&(this._activeVao=o,this.hasVao?n.bindVertexArray(o):this.activateVao(e,t.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){let e=this._activeGeometry,t=this.renderer.buffer;for(let n=0;n<e.buffers.length;n++){let i=e.buffers[n];t.update(i)}}checkCompatibility(e,t){let n=e.attributes,i=t.attributeData;for(let s in i)if(!n[s])throw new Error(`shader and geometry incompatible, geometry missing the "${s}" attribute`)}getSignature(e,t){let n=e.attributes,i=t.attributeData,s=["g",e.id];for(let o in n)i[o]&&s.push(o,i[o].location);return s.join("-")}initGeometryVao(e,t,n=!0){let i=this.gl,s=this.CONTEXT_UID,o=this.renderer.buffer,a=t.program;a.glPrograms[s]||this.renderer.shader.generateProgram(t),this.checkCompatibility(e,a);let l=this.getSignature(e,a),u=e.glVertexArrayObjects[this.CONTEXT_UID],c=u[l];if(c)return u[a.id]=c,c;let h=e.buffers,d=e.attributes,f={},p={};for(let m in h)f[m]=0,p[m]=0;for(let m in d)!d[m].size&&a.attributeData[m]?d[m].size=a.attributeData[m].size:d[m].size||console.warn(`PIXI Geometry attribute '${m}' size cannot be determined (likely the bound shader does not have the attribute)`),f[d[m].buffer]+=d[m].size*Mx[d[m].type];for(let m in d){let g=d[m],y=g.size;g.stride===void 0&&(f[g.buffer]===y*Mx[g.type]?g.stride=0:g.stride=f[g.buffer]),g.start===void 0&&(g.start=p[g.buffer],p[g.buffer]+=y*Mx[g.type])}c=i.createVertexArray(),i.bindVertexArray(c);for(let m=0;m<h.length;m++){let g=h[m];o.bind(g),n&&g._glBuffers[s].refCount++}return this.activateVao(e,a),u[a.id]=c,u[l]=c,i.bindVertexArray(null),o.unbind(vr.ARRAY_BUFFER),c}disposeGeometry(e,t){if(!this.managedGeometries[e.id])return;delete this.managedGeometries[e.id];let n=e.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,s=e.buffers,o=this.renderer?.buffer;if(e.disposeRunner.remove(this),!!n){if(o)for(let a=0;a<s.length;a++){let l=s[a]._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,l.refCount===0&&!t&&o.dispose(s[a],t))}if(!t){for(let a in n)if(a[0]==="g"){let l=n[a];this._activeVao===l&&this.unbind(),i.deleteVertexArray(l)}}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(e){let t=Object.keys(this.managedGeometries);for(let n=0;n<t.length;n++)this.disposeGeometry(this.managedGeometries[t[n]],e)}activateVao(e,t){let n=this.gl,i=this.CONTEXT_UID,s=this.renderer.buffer,o=e.buffers,a=e.attributes;e.indexBuffer&&s.bind(e.indexBuffer);let l=null;for(let u in a){let c=a[u],h=o[c.buffer],d=h._glBuffers[i];if(t.attributeData[u]){l!==d&&(s.bind(h),l=d);let f=t.attributeData[u].location;if(n.enableVertexAttribArray(f),n.vertexAttribPointer(f,c.size,c.type||n.FLOAT,c.normalized,c.stride,c.start),c.instance)if(this.hasInstance)n.vertexAttribDivisor(f,c.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(e,t,n,i){let{gl:s}=this,o=this._activeGeometry;if(o.indexBuffer){let a=o.indexBuffer.data.BYTES_PER_ELEMENT,l=a===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;a===2||a===4&&this.canUseUInt32ElementIndex?o.instanced?s.drawElementsInstanced(e,t||o.indexBuffer.data.length,l,(n||0)*a,i||1):s.drawElements(e,t||o.indexBuffer.data.length,l,(n||0)*a):console.warn("unsupported index buffer type: uint32")}else o.instanced?s.drawArraysInstanced(e,n,t||o.getSize(),i||1):s.drawArrays(e,n,t||o.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}};Il.extension={type:S.RendererSystem,name:"geometry"};M.add(Il);var wM=new me,Ns=class{constructor(e,t){this._texture=e,this.mapCoord=new me,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof t>"u"?.5:t,this.isSimple=!1}get texture(){return this._texture}set texture(e){this._texture=e,this._textureID=-1}multiplyUvs(e,t){t===void 0&&(t=e);let n=this.mapCoord;for(let i=0;i<e.length;i+=2){let s=e[i],o=e[i+1];t[i]=s*n.a+o*n.c+n.tx,t[i+1]=s*n.b+o*n.d+n.ty}return t}update(e){let t=this._texture;if(!t||!t.valid||!e&&this._textureID===t._updateID)return!1;this._textureID=t._updateID,this._updateID++;let n=t._uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);let i=t.orig,s=t.trim;s&&(wM.set(i.width/s.width,0,0,i.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(wM));let o=t.baseTexture,a=this.uClampFrame,l=this.clampMargin/o.resolution,u=this.clampOffset;return a[0]=(t._frame.x+l+u)/o.width,a[1]=(t._frame.y+l+u)/o.height,a[2]=(t._frame.x+t._frame.width-l+u)/o.width,a[3]=(t._frame.y+t._frame.height-l+u)/o.height,this.uClampOffset[0]=u/o.realWidth,this.uClampOffset[1]=u/o.realHeight,this.isSimple=t._frame.width===o.width&&t._frame.height===o.height&&t.rotate===0,!0}};var EM=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`;var TM=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;var rh=class extends je{constructor(e,t,n){let i=null;typeof e!="string"&&t===void 0&&n===void 0&&(i=e,e=void 0,t=void 0,n=void 0),super(e||TM,t||EM,n),this.maskSprite=i,this.maskMatrix=new me}get maskSprite(){return this._maskSprite}set maskSprite(e){this._maskSprite=e,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(e,t,n,i){let s=this._maskSprite,o=s._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new Ns(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,s).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=s.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,e.applyFilter(this,t,n,i))}};var nh=class{constructor(e=null){this.type=st.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=je.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=st.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}};var Al=class{constructor(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)}push(e,t){let n=t;if(!n.isMaskData){let s=this.maskDataPool.pop()||new nh;s.pooled=!0,s.maskObject=t,n=s}let i=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(n.copyCountersOrReset(i),n._colorMask=i?i._colorMask:15,n.autoDetect&&this.detect(n),n._target=e,n.type!==st.SPRITE&&this.maskStack.push(n),n.enabled)switch(n.type){case st.SCISSOR:this.renderer.scissor.push(n);break;case st.STENCIL:this.renderer.stencil.push(n);break;case st.SPRITE:n.copyCountersOrReset(null),this.pushSpriteMask(n);break;case st.COLOR:this.pushColorMask(n);break;default:break}n.type===st.SPRITE&&this.maskStack.push(n)}pop(e){let t=this.maskStack.pop();if(!(!t||t._target!==e)){if(t.enabled)switch(t.type){case st.SCISSOR:this.renderer.scissor.pop(t);break;case st.STENCIL:this.renderer.stencil.pop(t.maskObject);break;case st.SPRITE:this.popSpriteMask(t);break;case st.COLOR:this.popColorMask(t);break;default:break}if(t.reset(),t.pooled&&this.maskDataPool.push(t),this.maskStack.length!==0){let n=this.maskStack[this.maskStack.length-1];n.type===st.SPRITE&&n._filters&&(n._filters[0].maskSprite=n.maskObject)}}}detect(e){let t=e.maskObject;t?t.isSprite?e.type=st.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=st.SCISSOR:e.type=st.STENCIL:e.type=st.COLOR}pushSpriteMask(e){let{maskObject:t}=e,n=e._target,i=e._filters;i||(i=this.alphaMaskPool[this.alphaMaskIndex],i||(i=this.alphaMaskPool[this.alphaMaskIndex]=[new rh])),i[0].resolution=e.resolution,i[0].multisample=e.multisample,i[0].maskSprite=t;let s=n.filterArea;n.filterArea=t.getBounds(!0),this.renderer.filter.push(n,i),n.filterArea=s,e._filters||this.alphaMaskIndex++}popSpriteMask(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(e){let t=e._colorMask,n=e._colorMask=t&e.colorMask;n!==t&&this.renderer.gl.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)}popColorMask(e){let t=e._colorMask,n=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;n!==t&&this.renderer.gl.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)}destroy(){this.renderer=null}};Al.extension={type:S.RendererSystem,name:"mask"};M.add(Al);var Ml=class{constructor(e){this.renderer=e,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(e){let{gl:t}=this.renderer,n=this.getStackLength();this.maskStack=e;let i=this.getStackLength();i!==n&&(i===0?t.disable(this.glConst):(t.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}};var CM=new me,DM=[],SM=class mm extends Ml{constructor(e){super(e),this.glConst=I.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){let e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0}calcScissorRect(e){if(e._scissorRectLocal)return;let t=e._scissorRect,{maskObject:n}=e,{renderer:i}=this,s=i.renderTexture,o=n.getBounds(!0,DM.pop()??new Z);this.roundFrameToPixels(o,s.current?s.current.resolution:i.resolution,s.sourceFrame,s.destinationFrame,i.projection.transform),t&&o.fit(t),e._scissorRectLocal=o}static isMatrixRotated(e){if(!e)return!1;let{a:t,b:n,c:i,d:s}=e;return(Math.abs(n)>1e-4||Math.abs(i)>1e-4)&&(Math.abs(t)>1e-4||Math.abs(s)>1e-4)}testScissor(e){let{maskObject:t}=e;if(!t.isFastRect||!t.isFastRect()||mm.isMatrixRotated(t.worldTransform)||mm.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(e);let n=e._scissorRectLocal;return n.width>0&&n.height>0}roundFrameToPixels(e,t,n,i,s){mm.isMatrixRotated(s)||(s=s?CM.copyFrom(s):CM.identity(),s.translate(-n.x,-n.y).scale(i.width/n.width,i.height/n.height).translate(i.x,i.y),this.renderer.filter.transformAABB(s,e),e.fit(i),e.x=Math.round(e.x*t),e.y=Math.round(e.y*t),e.width=Math.round(e.width*t),e.height=Math.round(e.height*t))}push(e){e._scissorRectLocal||this.calcScissorRect(e);let{gl:t}=this.renderer;e._scissorRect||t.enable(t.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=e._scissorRectLocal,this._useCurrent()}pop(e){let{gl:t}=this.renderer;e&&DM.push(e._scissorRectLocal),this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)}_useCurrent(){let e=this.maskStack[this.maskStack.length-1]._scissorRect,t;this.renderer.renderTexture.current?t=e.y:t=this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,t,e.width,e.height)}};SM.extension={type:S.RendererSystem,name:"scissor"};var Rx=SM;M.add(Rx);var Rl=class extends Ml{constructor(e){super(e),this.glConst=I.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){let e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0}push(e){let t=e.maskObject,{gl:n}=this.renderer,i=e._stencilCounter;i===0&&(this.renderer.framebuffer.forceStencil(),n.clearStencil(0),n.clear(n.STENCIL_BUFFER_BIT),n.enable(n.STENCIL_TEST)),e._stencilCounter++;let s=e._colorMask;s!==0&&(e._colorMask=0,n.colorMask(!1,!1,!1,!1)),n.stencilFunc(n.EQUAL,i,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.INCR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,s!==0&&(e._colorMask=s,n.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)),this._useCurrent()}pop(e){let t=this.renderer.gl;if(this.getStackLength()===0)t.disable(t.STENCIL_TEST);else{let n=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,i=n?n._colorMask:15;i!==0&&(n._colorMask=0,t.colorMask(!1,!1,!1,!1)),t.stencilOp(t.KEEP,t.KEEP,t.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,i!==0&&(n._colorMask=i,t.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)),this._useCurrent()}}_useCurrent(){let e=this.renderer.gl;e.stencilFunc(e.EQUAL,this.getStackLength(),4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)}};Rl.extension={type:S.RendererSystem,name:"stencil"};M.add(Rl);var Pl=class{constructor(e){this.renderer=e,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return le("7.0.0","renderer.plugins.extract has moved to renderer.extract"),e.extract}},prepare:{enumerable:!1,get(){return le("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),e.prepare}},interaction:{enumerable:!1,get(){return le("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),e.events}}})}init(){let e=this.rendererPlugins;for(let t in e)this.plugins[t]=new e[t](this.renderer)}destroy(){for(let e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null}};Pl.extension={type:[S.RendererSystem,S.CanvasRendererSystem],name:"_plugin"};M.add(Pl);var Ol=class{constructor(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new me,this.transform=null}update(e,t,n,i){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=t||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,n,i),this.transform&&this.projectionMatrix.append(this.transform);let s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)}calculateProjection(e,t,n,i){let s=this.projectionMatrix,o=i?-1:1;s.identity(),s.a=1/t.width*2,s.d=o*(1/t.height*2),s.tx=-1-t.x*s.a,s.ty=-o-t.y*s.d}setTransform(e){}destroy(){this.renderer=null}};Ol.extension={type:S.RendererSystem,name:"projection"};M.add(Ol);var N$=new Po,IM=new Z,Nl=class{constructor(e){this.renderer=e,this._tempMatrix=new me}generateTexture(e,t){let u=t||{},{region:n}=u,i=pu(u,["region"]),s=n?.copyTo(IM)||e.getLocalBounds(IM,!0),o=i.resolution||this.renderer.resolution;s.width=Math.max(s.width,1/o),s.height=Math.max(s.height,1/o),i.width=s.width,i.height=s.height,i.resolution=o,i.multisample??(i.multisample=this.renderer.multisample);let a=rn.create(i);this._tempMatrix.tx=-s.x,this._tempMatrix.ty=-s.y;let l=e.transform;return e.transform=N$,this.renderer.render(e,{renderTexture:a,transform:this._tempMatrix,skipUpdateTransform:!!e.parent,blit:!0}),e.transform=l,a}destroy(){}};Nl.extension={type:[S.RendererSystem,S.CanvasRendererSystem],name:"textureGenerator"};M.add(Nl);var ko=new Z,ih=new Z,Fl=class{constructor(e){this.renderer=e,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Z,this.destinationFrame=new Z,this.viewportFrame=new Z}contextChange(){let e=this.renderer?.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}bind(e=null,t,n){let i=this.renderer;this.current=e;let s,o,a;e?(s=e.baseTexture,a=s.resolution,t||(ko.width=e.frame.width,ko.height=e.frame.height,t=ko),n||(ih.x=e.frame.x,ih.y=e.frame.y,ih.width=t.width,ih.height=t.height,n=ih),o=s.framebuffer):(a=i.resolution,t||(ko.width=i._view.screen.width,ko.height=i._view.screen.height,t=ko),n||(n=ko,n.width=t.width,n.height=t.height));let l=this.viewportFrame;l.x=n.x*a,l.y=n.y*a,l.width=n.width*a,l.height=n.height*a,e||(l.y=i.view.height-(l.y+l.height)),l.ceil(),this.renderer.framebuffer.bind(o,l),this.renderer.projection.update(n,t,a,!o),e?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(t),this.destinationFrame.copyFrom(n)}clear(e,t){let n=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,i=ue.shared.setValue(e||n);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&i.premultiply(i.alpha);let s=this.destinationFrame,o=this.current?this.current.baseTexture:this.renderer._view.screen,a=s.width!==o.width||s.height!==o.height;if(a){let{x:l,y:u,width:c,height:h}=this.viewportFrame;l=Math.round(l),u=Math.round(u),c=Math.round(c),h=Math.round(h),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(l,u,c,h)}this.renderer.framebuffer.clear(i.red,i.green,i.blue,i.alpha,t),a&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}};Fl.extension={type:S.RendererSystem,name:"renderTexture"};M.add(Fl);var sh=class{constructor(e,t){this.program=e,this.uniformData=t,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}};function AM(r,e){let t={},n=e.getProgramParameter(r,e.ACTIVE_ATTRIBUTES);for(let i=0;i<n;i++){let s=e.getActiveAttrib(r,i);if(s.name.startsWith("gl_"))continue;let o=qc(e,s.type),a={type:o,name:s.name,size:Xc(o),location:e.getAttribLocation(r,s.name)};t[s.name]=a}return t}function MM(r,e){let t={},n=e.getProgramParameter(r,e.ACTIVE_UNIFORMS);for(let i=0;i<n;i++){let s=e.getActiveUniform(r,i),o=s.name.replace(/\[.*?\]$/,""),a=!!s.name.match(/\[.*?\]$/),l=qc(e,s.type);t[o]={name:o,index:i,type:l,size:s.size,isArray:a,value:Wc(l,s.size)}}return t}function Px(r,e){let t=sm(r,r.VERTEX_SHADER,e.vertexSrc),n=sm(r,r.FRAGMENT_SHADER,e.fragmentSrc),i=r.createProgram();r.attachShader(i,t),r.attachShader(i,n);let s=e.extra?.transformFeedbackVaryings;if(s&&(typeof r.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):r.transformFeedbackVaryings(i,s.names,s.bufferMode==="separate"?r.SEPARATE_ATTRIBS:r.INTERLEAVED_ATTRIBS)),r.linkProgram(i),r.getProgramParameter(i,r.LINK_STATUS)||Cx(r,i,t,n),e.attributeData=AM(i,r),e.uniformData=MM(i,r),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){let a=Object.keys(e.attributeData);a.sort((l,u)=>l>u?1:-1);for(let l=0;l<a.length;l++)e.attributeData[a[l]].location=l,r.bindAttribLocation(i,l,a[l]);r.linkProgram(i)}r.deleteShader(t),r.deleteShader(n);let o={};for(let a in e.uniformData){let l=e.uniformData[a];o[a]={location:r.getUniformLocation(i,a),value:Wc(l.type,l.size)}}return new sh(i,o)}function F$(r,e,t,n,i){t.buffer.update(i)}var L$={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},RM={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function PM(r){let e=r.map(s=>({data:s,offset:0,dataLen:0,dirty:0})),t=0,n=0,i=0;for(let s=0;s<e.length;s++){let o=e[s];if(t=RM[o.data.type],o.data.size>1&&(t=Math.max(t,16)*o.data.size),o.dataLen=t,n%t!==0&&n<16){let a=n%t%16;n+=a,i+=a}n+t>16?(i=Math.ceil(i/16)*16,o.offset=i,i+=t,n=t):(o.offset=i,n+=t,i+=t)}return i=Math.ceil(i/16)*16,{uboElements:e,size:i}}function OM(r,e){let t=[];for(let n in r)e[n]&&t.push(e[n]);return t.sort((n,i)=>n.index-i.index),t}function Ox(r,e){if(!r.autoManage)return{size:0,syncFunc:F$};let t=OM(r.uniforms,e),{uboElements:n,size:i}=PM(t),s=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let o=0;o<n.length;o++){let a=n[o],l=r.uniforms[a.data.name],u=a.data.name,c=!1;for(let h=0;h<ii.length;h++){let d=ii[h];if(d.codeUbo&&d.test(a.data,l)){s.push(`offset = ${a.offset/4};`,ii[h].codeUbo(a.data.name,l)),c=!0;break}}if(!c)if(a.data.size>1){let h=Xc(a.data.type),d=Math.max(RM[a.data.type]/16,1),f=h/d,p=(4-f%4)%4;s.push(`
                cv = ud.${u}.value;
                v = uv.${u};
                offset = ${a.offset/4};

                t = 0;

                for(var i=0; i < ${a.data.size*d}; i++)
                {
                    for(var j = 0; j < ${f}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${p};
                }

                `)}else{let h=L$[a.data.type];s.push(`
                cv = ud.${u}.value;
                v = uv.${u};
                offset = ${a.offset/4};
                ${h};
                `)}}return s.push(`
       renderer.buffer.update(buffer);
    `),{size:i,syncFunc:new Function("ud","uv","renderer","syncData","buffer",s.join(`
`))}}var k$=0,gm={textureCount:0,uboCount:0},Ll=class{constructor(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=k$++}systemCheck(){if(!hm())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(e){this.gl=e,this.reset()}bind(e,t){e.disposeRunner.add(this),e.uniforms.globals=this.renderer.globalUniforms;let n=e.program,i=n.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==n&&(this.program=n,this.gl.useProgram(i.program)),t||(gm.textureCount=0,gm.uboCount=0,this.syncUniformGroup(e.uniformGroup,gm)),i}setUniforms(e){let t=this.shader.program,n=t.glPrograms[this.renderer.CONTEXT_UID];t.syncUniforms(n.uniformData,e,this.renderer)}syncUniformGroup(e,t){let n=this.getGlProgram();(!e.static||e.dirtyId!==n.uniformDirtyGroups[e.id])&&(n.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,n,t))}syncUniforms(e,t,n){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(t.uniformData,e.uniforms,this.renderer,n)}createSyncGroups(e){let t=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[t]||(this.cache[t]=Ex(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[t],e.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(e,t){let n=this.getGlProgram();if(!e.static||e.dirtyId!==0||!n.uniformGroups[e.id]){e.dirtyId=0;let i=n.uniformGroups[e.id]||this.createSyncBufferGroup(e,n,t);e.buffer.update(),i(n.uniformData,e.uniforms,this.renderer,gm,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,n.uniformBufferBindings[t])}createSyncBufferGroup(e,t,n){let{gl:i}=this.renderer;this.renderer.buffer.bind(e.buffer);let s=this.gl.getUniformBlockIndex(t.program,n);t.uniformBufferBindings[n]=this.shader.uniformBindCount,i.uniformBlockBinding(t.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;let o=this.getSignature(e,this.shader.program.uniformData,"ubo"),a=this._uboCache[o];if(a||(a=this._uboCache[o]=Ox(e,this.shader.program.uniformData)),e.autoManage){let l=new Float32Array(a.size/4);e.buffer.update(l)}return t.uniformGroups[e.id]=a.syncFunc,t.uniformGroups[e.id]}getSignature(e,t,n){let i=e.uniforms,s=[`${n}-`];for(let o in i)s.push(o),t[o]&&s.push(t[o].type);return s.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(e){let t=this.gl,n=e.program,i=Px(t,n);return n.glPrograms[this.renderer.CONTEXT_UID]=i,i}reset(){this.program=null,this.shader=null}disposeShader(e){this.shader===e&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}};Ll.extension={type:S.RendererSystem,name:"shader"};M.add(Ll);var Ui=class{constructor(e){this.renderer=e}run(e){let{renderer:t}=this;t.runners.init.emit(t.options),e.hello&&console.log(`PixiJS 7.3.2 - ${t.rendererLogId} - https://pixijs.com`),t.resize(t.screen.width,t.screen.height)}destroy(){}};Ui.defaultOptions={hello:!1},Ui.extension={type:[S.RendererSystem,S.CanvasRendererSystem],name:"startup"};M.add(Ui);function NM(r,e=[]){return e[re.NORMAL]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[re.ADD]=[r.ONE,r.ONE],e[re.MULTIPLY]=[r.DST_COLOR,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],e[re.SCREEN]=[r.ONE,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],e[re.OVERLAY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[re.DARKEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[re.LIGHTEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[re.COLOR_DODGE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[re.COLOR_BURN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[re.HARD_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[re.SOFT_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[re.DIFFERENCE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[re.EXCLUSION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[re.HUE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[re.SATURATION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[re.COLOR]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[re.LUMINOSITY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[re.NONE]=[0,0],e[re.NORMAL_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],e[re.ADD_NPM]=[r.SRC_ALPHA,r.ONE,r.ONE,r.ONE],e[re.SCREEN_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],e[re.SRC_IN]=[r.DST_ALPHA,r.ZERO],e[re.SRC_OUT]=[r.ONE_MINUS_DST_ALPHA,r.ZERO],e[re.SRC_ATOP]=[r.DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],e[re.DST_OVER]=[r.ONE_MINUS_DST_ALPHA,r.ONE],e[re.DST_IN]=[r.ZERO,r.SRC_ALPHA],e[re.DST_OUT]=[r.ZERO,r.ONE_MINUS_SRC_ALPHA],e[re.DST_ATOP]=[r.ONE_MINUS_DST_ALPHA,r.SRC_ALPHA],e[re.XOR]=[r.ONE_MINUS_DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],e[re.SUBTRACT]=[r.ONE,r.ONE,r.ONE,r.ONE,r.FUNC_REVERSE_SUBTRACT,r.FUNC_ADD],e}var B$=0,U$=1,j$=2,V$=3,H$=4,G$=5,FM=class Nx{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=re.NONE,this._blendEq=!1,this.map=[],this.map[B$]=this.setBlend,this.map[U$]=this.setOffset,this.map[j$]=this.setCullFace,this.map[V$]=this.setDepthTest,this.map[H$]=this.setFrontFace,this.map[G$]=this.setDepthMask,this.checks=[],this.defaultState=new Dt,this.defaultState.blend=!0}contextChange(e){this.gl=e,this.blendModes=NM(e),this.set(this.defaultState),this.reset()}set(e){if(e=e||this.defaultState,this.stateId!==e.data){let t=this.stateId^e.data,n=0;for(;t;)t&1&&this.map[n].call(this,!!(e.data&1<<n)),t=t>>1,n++;this.stateId=e.data}for(let t=0;t<this.checks.length;t++)this.checks[t](this,e)}forceState(e){e=e||this.defaultState;for(let t=0;t<this.map.length;t++)this.map[t].call(this,!!(e.data&1<<t));for(let t=0;t<this.checks.length;t++)this.checks[t](this,e);this.stateId=e.data}setBlend(e){this.updateCheck(Nx.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)}setOffset(e){this.updateCheck(Nx.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(e){this.gl.depthMask(e)}setCullFace(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])}setBlendMode(e){if(e===this.blendMode)return;this.blendMode=e;let t=this.blendModes[e],n=this.gl;t.length===2?n.blendFunc(t[0],t[1]):n.blendFuncSeparate(t[0],t[1],t[2],t[3]),t.length===6?(this._blendEq=!0,n.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}setPolygonOffset(e,t){this.gl.polygonOffset(e,t)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(e,t){let n=this.checks.indexOf(e);t&&n===-1?this.checks.push(e):!t&&n!==-1&&this.checks.splice(n,1)}static checkBlendMode(e,t){e.setBlendMode(t.blendMode)}static checkPolygonOffset(e,t){e.setPolygonOffset(1,t.polygonOffset)}destroy(){this.gl=null}};FM.extension={type:S.RendererSystem,name:"state"};var Fx=FM;M.add(Fx);var kl=class extends Is.default{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(e){this.addRunners(...e.runners);let t=(e.priority??[]).filter(i=>e.systems[i]),n=[...t,...Object.keys(e.systems).filter(i=>!t.includes(i))];for(let i of n)this.addSystem(e.systems[i],i)}addRunners(...e){e.forEach(t=>{this.runners[t]=new ut(t)})}addSystem(e,t){let n=new e(this);if(this[t])throw new Error(`Whoops! The name "${t}" is already in use`);this[t]=n,this._systemsHash[t]=n;for(let i in this.runners)this.runners[i].add(n);return this}emitWithCustomOptions(e,t){let n=Object.keys(this._systemsHash);e.items.forEach(i=>{let s=n.find(o=>this._systemsHash[o]===i);i[e.name](t[s])})}destroy(){Object.values(this.runners).forEach(e=>{e.destroy()}),this._systemsHash={}}};var oh=class ym{constructor(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=ym.defaultMaxIdle,this.checkCountMax=ym.defaultCheckCountMax,this.mode=ym.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==Ap.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){let e=this.renderer.texture,t=e.managedTextures,n=!1;for(let i=0;i<t.length;i++){let s=t[i];s.resource&&this.count-s.touched>this.maxIdle&&(e.destroyTexture(s,!0),t[i]=null,n=!0)}if(n){let i=0;for(let s=0;s<t.length;s++)t[s]!==null&&(t[i++]=t[s]);t.length=i}}unload(e){let t=this.renderer.texture,n=e._texture;n&&!n.framebuffer&&t.destroyTexture(n);for(let i=e.children.length-1;i>=0;i--)this.unload(e.children[i])}destroy(){this.renderer=null}};oh.defaultMode=Ap.AUTO,oh.defaultMaxIdle=60*60,oh.defaultCheckCountMax=60*10,oh.extension={type:S.RendererSystem,name:"textureGC"};var si=oh;M.add(si);var Bo=class{constructor(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=$.UNSIGNED_BYTE,this.internalFormat=F.RGBA,this.samplerType=0}};function LM(r){let e;return"WebGL2RenderingContext"in globalThis&&r instanceof globalThis.WebGL2RenderingContext?e={[r.RGB]:G.FLOAT,[r.RGBA]:G.FLOAT,[r.ALPHA]:G.FLOAT,[r.LUMINANCE]:G.FLOAT,[r.LUMINANCE_ALPHA]:G.FLOAT,[r.R8]:G.FLOAT,[r.R8_SNORM]:G.FLOAT,[r.RG8]:G.FLOAT,[r.RG8_SNORM]:G.FLOAT,[r.RGB8]:G.FLOAT,[r.RGB8_SNORM]:G.FLOAT,[r.RGB565]:G.FLOAT,[r.RGBA4]:G.FLOAT,[r.RGB5_A1]:G.FLOAT,[r.RGBA8]:G.FLOAT,[r.RGBA8_SNORM]:G.FLOAT,[r.RGB10_A2]:G.FLOAT,[r.RGB10_A2UI]:G.FLOAT,[r.SRGB8]:G.FLOAT,[r.SRGB8_ALPHA8]:G.FLOAT,[r.R16F]:G.FLOAT,[r.RG16F]:G.FLOAT,[r.RGB16F]:G.FLOAT,[r.RGBA16F]:G.FLOAT,[r.R32F]:G.FLOAT,[r.RG32F]:G.FLOAT,[r.RGB32F]:G.FLOAT,[r.RGBA32F]:G.FLOAT,[r.R11F_G11F_B10F]:G.FLOAT,[r.RGB9_E5]:G.FLOAT,[r.R8I]:G.INT,[r.R8UI]:G.UINT,[r.R16I]:G.INT,[r.R16UI]:G.UINT,[r.R32I]:G.INT,[r.R32UI]:G.UINT,[r.RG8I]:G.INT,[r.RG8UI]:G.UINT,[r.RG16I]:G.INT,[r.RG16UI]:G.UINT,[r.RG32I]:G.INT,[r.RG32UI]:G.UINT,[r.RGB8I]:G.INT,[r.RGB8UI]:G.UINT,[r.RGB16I]:G.INT,[r.RGB16UI]:G.UINT,[r.RGB32I]:G.INT,[r.RGB32UI]:G.UINT,[r.RGBA8I]:G.INT,[r.RGBA8UI]:G.UINT,[r.RGBA16I]:G.INT,[r.RGBA16UI]:G.UINT,[r.RGBA32I]:G.INT,[r.RGBA32UI]:G.UINT,[r.DEPTH_COMPONENT16]:G.FLOAT,[r.DEPTH_COMPONENT24]:G.FLOAT,[r.DEPTH_COMPONENT32F]:G.FLOAT,[r.DEPTH_STENCIL]:G.FLOAT,[r.DEPTH24_STENCIL8]:G.FLOAT,[r.DEPTH32F_STENCIL8]:G.FLOAT}:e={[r.RGB]:G.FLOAT,[r.RGBA]:G.FLOAT,[r.ALPHA]:G.FLOAT,[r.LUMINANCE]:G.FLOAT,[r.LUMINANCE_ALPHA]:G.FLOAT,[r.DEPTH_STENCIL]:G.FLOAT},e}function kM(r){let e;return"WebGL2RenderingContext"in globalThis&&r instanceof globalThis.WebGL2RenderingContext?e={[$.UNSIGNED_BYTE]:{[F.RGBA]:r.RGBA8,[F.RGB]:r.RGB8,[F.RG]:r.RG8,[F.RED]:r.R8,[F.RGBA_INTEGER]:r.RGBA8UI,[F.RGB_INTEGER]:r.RGB8UI,[F.RG_INTEGER]:r.RG8UI,[F.RED_INTEGER]:r.R8UI,[F.ALPHA]:r.ALPHA,[F.LUMINANCE]:r.LUMINANCE,[F.LUMINANCE_ALPHA]:r.LUMINANCE_ALPHA},[$.BYTE]:{[F.RGBA]:r.RGBA8_SNORM,[F.RGB]:r.RGB8_SNORM,[F.RG]:r.RG8_SNORM,[F.RED]:r.R8_SNORM,[F.RGBA_INTEGER]:r.RGBA8I,[F.RGB_INTEGER]:r.RGB8I,[F.RG_INTEGER]:r.RG8I,[F.RED_INTEGER]:r.R8I},[$.UNSIGNED_SHORT]:{[F.RGBA_INTEGER]:r.RGBA16UI,[F.RGB_INTEGER]:r.RGB16UI,[F.RG_INTEGER]:r.RG16UI,[F.RED_INTEGER]:r.R16UI,[F.DEPTH_COMPONENT]:r.DEPTH_COMPONENT16},[$.SHORT]:{[F.RGBA_INTEGER]:r.RGBA16I,[F.RGB_INTEGER]:r.RGB16I,[F.RG_INTEGER]:r.RG16I,[F.RED_INTEGER]:r.R16I},[$.UNSIGNED_INT]:{[F.RGBA_INTEGER]:r.RGBA32UI,[F.RGB_INTEGER]:r.RGB32UI,[F.RG_INTEGER]:r.RG32UI,[F.RED_INTEGER]:r.R32UI,[F.DEPTH_COMPONENT]:r.DEPTH_COMPONENT24},[$.INT]:{[F.RGBA_INTEGER]:r.RGBA32I,[F.RGB_INTEGER]:r.RGB32I,[F.RG_INTEGER]:r.RG32I,[F.RED_INTEGER]:r.R32I},[$.FLOAT]:{[F.RGBA]:r.RGBA32F,[F.RGB]:r.RGB32F,[F.RG]:r.RG32F,[F.RED]:r.R32F,[F.DEPTH_COMPONENT]:r.DEPTH_COMPONENT32F},[$.HALF_FLOAT]:{[F.RGBA]:r.RGBA16F,[F.RGB]:r.RGB16F,[F.RG]:r.RG16F,[F.RED]:r.R16F},[$.UNSIGNED_SHORT_5_6_5]:{[F.RGB]:r.RGB565},[$.UNSIGNED_SHORT_4_4_4_4]:{[F.RGBA]:r.RGBA4},[$.UNSIGNED_SHORT_5_5_5_1]:{[F.RGBA]:r.RGB5_A1},[$.UNSIGNED_INT_2_10_10_10_REV]:{[F.RGBA]:r.RGB10_A2,[F.RGBA_INTEGER]:r.RGB10_A2UI},[$.UNSIGNED_INT_10F_11F_11F_REV]:{[F.RGB]:r.R11F_G11F_B10F},[$.UNSIGNED_INT_5_9_9_9_REV]:{[F.RGB]:r.RGB9_E5},[$.UNSIGNED_INT_24_8]:{[F.DEPTH_STENCIL]:r.DEPTH24_STENCIL8},[$.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[F.DEPTH_STENCIL]:r.DEPTH32F_STENCIL8}}:e={[$.UNSIGNED_BYTE]:{[F.RGBA]:r.RGBA,[F.RGB]:r.RGB,[F.ALPHA]:r.ALPHA,[F.LUMINANCE]:r.LUMINANCE,[F.LUMINANCE_ALPHA]:r.LUMINANCE_ALPHA},[$.UNSIGNED_SHORT_5_6_5]:{[F.RGB]:r.RGB},[$.UNSIGNED_SHORT_4_4_4_4]:{[F.RGBA]:r.RGBA},[$.UNSIGNED_SHORT_5_5_5_1]:{[F.RGBA]:r.RGBA}},e}var Bl=class{constructor(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Y,this.hasIntegerTextures=!1}contextChange(){let e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=kM(e),this.samplerTypes=LM(e);let t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=t;for(let i=0;i<t;i++)this.boundTextures[i]=null;this.emptyTextures={};let n=new Bo(e.createTexture());e.bindTexture(e.TEXTURE_2D,n.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=n,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new Bo(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(let i=0;i<6;i++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(let i=0;i<this.boundTextures.length;i++)this.bind(null,i)}bind(e,t=0){let{gl:n}=this;if(e=e?.castToBaseTexture(),e?.valid&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;let i=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[t]!==e&&(this.currentLocation!==t&&(this.currentLocation=t,n.activeTexture(n.TEXTURE0+t)),n.bindTexture(e.target,i.texture)),i.dirtyId!==e.dirtyId?(this.currentLocation!==t&&(this.currentLocation=t,n.activeTexture(n.TEXTURE0+t)),this.updateTexture(e)):i.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(e),this.boundTextures[t]=e}else this.currentLocation!==t&&(this.currentLocation=t,n.activeTexture(n.TEXTURE0+t)),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[n.TEXTURE_2D].texture),this.boundTextures[t]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture}unbind(e){let{gl:t,boundTextures:n}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let i=0;i<n.length;i++)n[i]===this.unknownTexture&&this.bind(null,i)}for(let i=0;i<n.length;i++)n[i]===e&&(this.currentLocation!==i&&(t.activeTexture(t.TEXTURE0+i),this.currentLocation=i),t.bindTexture(e.target,this.emptyTextures[e.target].texture),n[i]=null)}ensureSamplerType(e){let{boundTextures:t,hasIntegerTextures:n,CONTEXT_UID:i}=this;if(n)for(let s=e-1;s>=0;--s){let o=t[s];o&&o._glTextures[i].samplerType!==G.FLOAT&&this.renderer.texture.unbind(o)}}initTexture(e){let t=new Bo(this.gl.createTexture());return t.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=t,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),t}initTextureType(e,t){t.internalFormat=this.internalFormats[e.type]?.[e.format]??e.format,t.samplerType=this.samplerTypes[t.internalFormat]??G.FLOAT,this.webGLVersion===2&&e.type===$.HALF_FLOAT?t.type=this.gl.HALF_FLOAT:t.type=e.type}updateTexture(e){let t=e._glTextures[this.CONTEXT_UID];if(!t)return;let n=this.renderer;if(this.initTextureType(e,t),e.resource?.upload(n,e,t))t.samplerType!==G.FLOAT&&(this.hasIntegerTextures=!0);else{let i=e.realWidth,s=e.realHeight,o=n.gl;(t.width!==i||t.height!==s||t.dirtyId<0)&&(t.width=i,t.height=s,o.texImage2D(e.target,0,t.internalFormat,i,s,0,e.format,t.type,null))}e.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(e),t.dirtyId=e.dirtyId}destroyTexture(e,t){let{gl:n}=this;if(e=e.castToBaseTexture(),e._glTextures[this.CONTEXT_UID]&&(this.unbind(e),n.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!t)){let i=this.managedTextures.indexOf(e);i!==-1&&Qp(this.managedTextures,i,1)}}updateTextureStyle(e){let t=e._glTextures[this.CONTEXT_UID];t&&((e.mipmap===Rt.POW2||this.webGLVersion!==2)&&!e.isPowerOfTwo?t.mipmap=!1:t.mipmap=e.mipmap>=1,this.webGLVersion!==2&&!e.isPowerOfTwo?t.wrapMode=Fr.CLAMP:t.wrapMode=e.wrapMode,e.resource?.style(this.renderer,e,t)||this.setStyle(e,t),t.dirtyStyleId=e.dirtyStyleId)}setStyle(e,t){let n=this.gl;if(t.mipmap&&e.mipmap!==Rt.ON_MANUAL&&n.generateMipmap(e.target),n.texParameteri(e.target,n.TEXTURE_WRAP_S,t.wrapMode),n.texParameteri(e.target,n.TEXTURE_WRAP_T,t.wrapMode),t.mipmap){n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===Qr.LINEAR?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST);let i=this.renderer.context.extensions.anisotropicFiltering;if(i&&e.anisotropicLevel>0&&e.scaleMode===Qr.LINEAR){let s=Math.min(e.anisotropicLevel,n.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT));n.texParameterf(e.target,i.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===Qr.LINEAR?n.LINEAR:n.NEAREST);n.texParameteri(e.target,n.TEXTURE_MAG_FILTER,e.scaleMode===Qr.LINEAR?n.LINEAR:n.NEAREST)}destroy(){this.renderer=null}};Bl.extension={type:S.RendererSystem,name:"texture"};M.add(Bl);var Ul=class{constructor(e){this.renderer=e}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){let{gl:t,CONTEXT_UID:n}=this,i=e._glTransformFeedbacks[n]||this.createGLTransformFeedback(e);t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,i)}unbind(){let{gl:e}=this;e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(e,t){let{gl:n,renderer:i}=this;t&&i.shader.bind(t),n.beginTransformFeedback(e)}endTransformFeedback(){let{gl:e}=this;e.endTransformFeedback()}createGLTransformFeedback(e){let{gl:t,renderer:n,CONTEXT_UID:i}=this,s=t.createTransformFeedback();e._glTransformFeedbacks[i]=s,t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,s);for(let o=0;o<e.buffers.length;o++){let a=e.buffers[o];a&&(n.buffer.update(a),a._glBuffers[i].refCount++,t.bindBufferBase(t.TRANSFORM_FEEDBACK_BUFFER,o,a._glBuffers[i].buffer||null))}return t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null),e.disposeRunner.add(this),s}disposeTransformFeedback(e,t){let n=e._glTransformFeedbacks[this.CONTEXT_UID],i=this.gl;e.disposeRunner.remove(this);let s=this.renderer.buffer;if(s)for(let o=0;o<e.buffers.length;o++){let a=e.buffers[o];if(!a)continue;let l=a._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,l.refCount===0&&!t&&s.dispose(a,t))}n&&(t||i.deleteTransformFeedback(n),delete e._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}};Ul.extension={type:S.RendererSystem,name:"transformFeedback"};M.add(Ul);var ji=class{constructor(e){this.renderer=e}init(e){this.screen=new Z(0,0,e.width,e.height),this.element=e.view||I.ADAPTER.createCanvas(),this.resolution=e.resolution||I.RESOLUTION,this.autoDensity=!!e.autoDensity}resizeView(e,t){this.element.width=Math.round(e*this.resolution),this.element.height=Math.round(t*this.resolution);let n=this.element.width/this.resolution,i=this.element.height/this.resolution;this.screen.width=n,this.screen.height=i,this.autoDensity&&(this.element.style.width=`${n}px`,this.element.style.height=`${i}px`),this.renderer.emit("resize",n,i),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(e){e&&this.element.parentNode?.removeChild(this.element),this.renderer=null,this.element=null,this.screen=null}};ji.defaultOptions={width:800,height:600,resolution:void 0,autoDensity:!1},ji.extension={type:[S.RendererSystem,S.CanvasRendererSystem],name:"_view"};M.add(ji);I.PREFER_ENV=Nr.WEBGL2;I.STRICT_TEXTURE_CACHE=!1;I.RENDER_OPTIONS=O(O(O(O({},Bi.defaultOptions),ki.defaultOptions),ji.defaultOptions),Ui.defaultOptions);Object.defineProperties(I,{WRAP_MODE:{get(){return Y.defaultOptions.wrapMode},set(r){le("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),Y.defaultOptions.wrapMode=r}},SCALE_MODE:{get(){return Y.defaultOptions.scaleMode},set(r){le("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),Y.defaultOptions.scaleMode=r}},MIPMAP_TEXTURES:{get(){return Y.defaultOptions.mipmap},set(r){le("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),Y.defaultOptions.mipmap=r}},ANISOTROPIC_LEVEL:{get(){return Y.defaultOptions.anisotropicLevel},set(r){le("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),Y.defaultOptions.anisotropicLevel=r}},FILTER_RESOLUTION:{get(){return le("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),je.defaultResolution},set(r){je.defaultResolution=r}},FILTER_MULTISAMPLE:{get(){return le("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),je.defaultMultisample},set(r){je.defaultMultisample=r}},SPRITE_MAX_TEXTURES:{get(){return Li.defaultMaxTextures},set(r){le("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),Li.defaultMaxTextures=r}},SPRITE_BATCH_SIZE:{get(){return Li.defaultBatchSize},set(r){le("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),Li.defaultBatchSize=r}},CAN_UPLOAD_SAME_BUFFER:{get(){return Li.canUploadSameBuffer},set(r){le("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),Li.canUploadSameBuffer=r}},GC_MODE:{get(){return si.defaultMode},set(r){le("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),si.defaultMode=r}},GC_MAX_IDLE:{get(){return si.defaultMaxIdle},set(r){le("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),si.defaultMaxIdle=r}},GC_MAX_CHECK_COUNT:{get(){return si.defaultCheckCountMax},set(r){le("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),si.defaultCheckCountMax=r}},PRECISION_VERTEX:{get(){return Gt.defaultVertexPrecision},set(r){le("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),Gt.defaultVertexPrecision=r}},PRECISION_FRAGMENT:{get(){return Gt.defaultFragmentPrecision},set(r){le("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),Gt.defaultFragmentPrecision=r}}});var jr=(r=>(r[r.INTERACTION=50]="INTERACTION",r[r.HIGH=25]="HIGH",r[r.NORMAL=0]="NORMAL",r[r.LOW=-25]="LOW",r[r.UTILITY=-50]="UTILITY",r))(jr||{});var jl=class{constructor(e,t=null,n=0,i=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=t,this.priority=n,this.once=i}match(e,t=null){return this.fn===e&&this.context===t}emit(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));let t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);let t=this.next;return this.next=e?null:t,this.previous=null,t}};var BM=class Vr{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new jl(null,null,1/0),this.deltaMS=1/Vr.targetFPMS,this.elapsedMS=1/Vr.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t,n=jr.NORMAL){return this._addListener(new jl(e,t,n))}addOnce(e,t,n=jr.NORMAL){return this._addListener(new jl(e,t,n,!0))}_addListener(e){let t=this._head.next,n=this._head;if(!t)e.connect(n);else{for(;t;){if(e.priority>t.priority){e.connect(n);break}n=t,t=t.next}e.previous||e.connect(n)}return this._startIfPossible(),this}remove(e,t){let n=this._head.next;for(;n;)n.match(e,t)?n=n.destroy():n=n.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,t=this._head;for(;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let t;if(e>this.lastTime){if(t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){let s=e-this._lastFrame|0;if(s<this._minElapsedMS)return;this._lastFrame=e-s%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*Vr.targetFPMS;let n=this._head,i=n.next;for(;i;)i=i.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){let t=Math.min(this.maxFPS,e),n=Math.min(Math.max(0,t)/1e3,Vr.targetFPMS);this._maxElapsedMS=1/n}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{let t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!Vr._shared){let e=Vr._shared=new Vr;e.autoStart=!0,e._protected=!0}return Vr._shared}static get system(){if(!Vr._system){let e=Vr._system=new Vr;e.autoStart=!0,e._protected=!0}return Vr._system}};BM.targetFPMS=.06;var mt=BM;Object.defineProperties(I,{TARGET_FPMS:{get(){return mt.targetFPMS},set(r){le("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),mt.targetFPMS=r}}});var ah=class{static init(e){e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,jr.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?mt.shared:new mt,e.autoStart&&this.start()}static destroy(){if(this._ticker){let e=this._ticker;this.ticker=null,e.destroy()}}};ah.extension=S.Application;M.add(ah);var UM=[];M.handleByList(S.Renderer,UM);function Lx(r){for(let e of UM)if(e.test(r))return new e(r);throw new Error("Unable to auto-detect a suitable renderer.")}var jM=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`;var VM=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;var kx=jM,lh=VM;var uh=class{constructor(e){this.renderer=e}contextChange(e){let t;if(this.renderer.context.webGLVersion===1){let n=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,n)}else{let n=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,n)}t>=Pe.HIGH?this.multisample=Pe.HIGH:t>=Pe.MEDIUM?this.multisample=Pe.MEDIUM:t>=Pe.LOW?this.multisample=Pe.LOW:this.multisample=Pe.NONE}destroy(){}};uh.extension={type:S.RendererSystem,name:"_multisample"};M.add(uh);var vm=class{constructor(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}};var ch=class{constructor(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){let{gl:t,CONTEXT_UID:n}=this,i=e._glBuffers[n]||this.createGLBuffer(e);t.bindBuffer(e.type,i.buffer)}unbind(e){let{gl:t}=this;t.bindBuffer(e,null)}bindBufferBase(e,t){let{gl:n,CONTEXT_UID:i}=this;if(this.boundBufferBases[t]!==e){let s=e._glBuffers[i]||this.createGLBuffer(e);this.boundBufferBases[t]=e,n.bindBufferBase(n.UNIFORM_BUFFER,t,s.buffer)}}bindBufferRange(e,t,n){let{gl:i,CONTEXT_UID:s}=this;n=n||0;let o=e._glBuffers[s]||this.createGLBuffer(e);i.bindBufferRange(i.UNIFORM_BUFFER,t||0,o.buffer,n*256,256)}update(e){let{gl:t,CONTEXT_UID:n}=this,i=e._glBuffers[n]||this.createGLBuffer(e);if(e._updateID!==i.updateID)if(i.updateID=e._updateID,t.bindBuffer(e.type,i.buffer),i.byteLength>=e.data.byteLength)t.bufferSubData(e.type,0,e.data);else{let s=e.static?t.STATIC_DRAW:t.DYNAMIC_DRAW;i.byteLength=e.data.byteLength,t.bufferData(e.type,e.data,s)}}dispose(e,t){if(!this.managedBuffers[e.id])return;delete this.managedBuffers[e.id];let n=e._glBuffers[this.CONTEXT_UID],i=this.gl;e.disposeRunner.remove(this),n&&(t||i.deleteBuffer(n.buffer),delete e._glBuffers[this.CONTEXT_UID])}disposeAll(e){let t=Object.keys(this.managedBuffers);for(let n=0;n<t.length;n++)this.dispose(this.managedBuffers[t[n]],e)}createGLBuffer(e){let{CONTEXT_UID:t,gl:n}=this;return e._glBuffers[t]=new vm(n.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[t]}};ch.extension={type:S.RendererSystem,name:"buffer"};M.add(ch);var hh=class{constructor(e){this.renderer=e}render(e,t){let n=this.renderer,i,s,o,a;if(t&&(i=t.renderTexture,s=t.clear,o=t.transform,a=t.skipUpdateTransform),this.renderingToScreen=!i,n.runners.prerender.emit(),n.emit("prerender"),n.projection.transform=o,!n.context.isLost){if(i||(this.lastObjectRendered=e),!a){let l=e.enableTempParent();e.updateTransform(),e.disableTempParent(l)}n.renderTexture.bind(i),n.batch.currentRenderer.start(),(s??n.background.clearBeforeRender)&&n.renderTexture.clear(),e.render(n),n.batch.currentRenderer.flush(),i&&(t.blit&&n.framebuffer.blit(),i.baseTexture.update()),n.runners.postrender.emit(),n.projection.transform=null,n.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}};hh.extension={type:S.RendererSystem,name:"objectRenderer"};M.add(hh);var _m=class Bx extends kl{constructor(e){super(),this.type=g0.WEBGL,e=Object.assign({},I.RENDER_OPTIONS,e),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new or({projectionMatrix:new me},!0);let t={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:Bx.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(t),"useContextAlpha"in e&&(le("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),e.premultipliedAlpha=e.useContextAlpha&&e.useContextAlpha!=="notMultiplied",e.backgroundAlpha=e.useContextAlpha===!1?1:e.backgroundAlpha),this._plugin.rendererPlugins=Bx.__plugins,this.options=e,this.startup.run(this.options)}static test(e){return e?.forceCanvas?!1:qp()}render(e,t){this.objectRenderer.render(e,t)}resize(e,t){this._view.resizeView(e,t)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(e=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:e}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(e){this._view.resolution=e,this.runners.resolutionChange.emit(e)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return le("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return le("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return le("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return le("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(e){le("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=e}get backgroundAlpha(){return le("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(e){le("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=e}get powerPreference(){return le("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(e,t){return this.textureGenerator.generateTexture(e,t)}};_m.extension={type:S.Renderer,priority:1},_m.__plugins={},_m.__systems={};var xm=_m;M.handleByMap(S.RendererPlugin,xm.__plugins);M.handleByMap(S.RendererSystem,xm.__systems);M.add(xm);var Fs=class extends kr{constructor(e,t){let{width:n,height:i}=t||{};super(n,i),this.items=[],this.itemDirtyIds=[];for(let s=0;s<e;s++){let o=new Y;this.items.push(o),this.itemDirtyIds.push(-2)}this.length=e,this._load=null,this.baseTexture=null}initFromArray(e,t){for(let n=0;n<this.length;n++)e[n]&&(e[n].castToBaseTexture?this.addBaseTextureAt(e[n].castToBaseTexture(),n):e[n]instanceof kr?this.addResourceAt(e[n],n):this.addResourceAt(vl(e[n],t),n))}dispose(){for(let e=0,t=this.length;e<t;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(e,t){if(!this.items[t])throw new Error(`Index ${t} is out of bounds`);return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[t].setResource(e),this}bind(e){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(e);for(let t=0;t<this.length;t++)this.items[t].parentTextureArray=e,this.items[t].on("update",e.update,e)}unbind(e){super.unbind(e);for(let t=0;t<this.length;t++)this.items[t].parentTextureArray=null,this.items[t].off("update",e.update,e)}load(){if(this._load)return this._load;let e=this.items.map(t=>t.resource).filter(t=>t).map(t=>t.load());return this._load=Promise.all(e).then(()=>{let{realWidth:t,realHeight:n}=this.items[0];return this.resize(t,n),this.update(),Promise.resolve(this)}),this._load}};var dh=class extends Fs{constructor(e,t){let{width:n,height:i}=t||{},s,o;Array.isArray(e)?(s=e,o=e.length):o=e,super(o,{width:n,height:i}),s&&this.initFromArray(s,t)}addBaseTextureAt(e,t){if(e.resource)this.addResourceAt(e.resource,t);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(e){super.bind(e),e.target=Pi.TEXTURE_2D_ARRAY}upload(e,t,n){let{length:i,itemDirtyIds:s,items:o}=this,{gl:a}=e;n.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,n.internalFormat,this._width,this._height,i,0,t.format,n.type,null);for(let l=0;l<i;l++){let u=o[l];s[l]<u.dirtyId&&(s[l]=u.dirtyId,u.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,l,u.resource.width,u.resource.height,1,t.format,n.type,u.resource.source))}return!0}};var fh=class extends Ot{constructor(e){super(e)}static test(e){let{OffscreenCanvas:t}=globalThis;return t&&e instanceof t?!0:globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement}};var HM=class ph extends Fs{constructor(e,t){let{width:n,height:i,autoLoad:s,linkBaseTexture:o}=t||{};if(e&&e.length!==ph.SIDES)throw new Error(`Invalid length. Got ${e.length}, expected 6`);super(6,{width:n,height:i});for(let a=0;a<ph.SIDES;a++)this.items[a].target=Pi.TEXTURE_CUBE_MAP_POSITIVE_X+a;this.linkBaseTexture=o!==!1,e&&this.initFromArray(e,t),s!==!1&&this.load()}bind(e){super.bind(e),e.target=Pi.TEXTURE_CUBE_MAP}addBaseTextureAt(e,t,n){if(n===void 0&&(n=this.linkBaseTexture),!this.items[t])throw new Error(`Index ${t} is out of bounds`);if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0)if(e.resource)this.addResourceAt(e.resource,t);else throw new Error("CubeResource does not support copying of renderTexture.");else e.target=Pi.TEXTURE_CUBE_MAP_POSITIVE_X+t,e.parentTextureArray=this.baseTexture,this.items[t]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[t]=e,this}upload(e,t,n){let i=this.itemDirtyIds;for(let s=0;s<ph.SIDES;s++){let o=this.items[s];(i[s]<o.dirtyId||n.dirtyId<t.dirtyId)&&(o.valid&&o.resource?(o.resource.upload(e,o,n),i[s]=o.dirtyId):i[s]<-1&&(e.gl.texImage2D(o.target,0,n.internalFormat,t.realWidth,t.realHeight,0,t.format,n.type,null),i[s]=-1))}return!0}static test(e){return Array.isArray(e)&&e.length===ph.SIDES}};HM.SIDES=6;var Ux=HM;var mh=class r extends Ot{constructor(e,t){t=t||{};let n,i,s;typeof e=="string"?(n=r.EMPTY,i=e,s=!0):(n=e,i=null,s=!1),super(n),this.url=i,this.crossOrigin=t.crossOrigin??!0,this.alphaMode=typeof t.alphaMode=="number"?t.alphaMode:null,this.ownsImageBitmap=t.ownsImageBitmap??s,this._load=null,t.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise((e,t)=>L(this,null,function*(){if(this.url===null){e(this);return}try{let n=yield I.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;let i=yield n.blob();if(this.destroyed)return;let s=yield createImageBitmap(i,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===Ke.UNPACK?"premultiply":"none"});if(this.destroyed){s.close();return}this.source=s,this.update(),e(this)}catch(n){if(this.destroyed)return;t(n),this.onError.emit(n)}})),this._load)}upload(e,t,n){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(t.alphaMode=this.alphaMode),super.upload(e,t,n)):(this.load(),!1)}dispose(){this.ownsImageBitmap&&this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(e){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof e=="string"||e instanceof ImageBitmap)}static get EMPTY(){return r._EMPTY=r._EMPTY??I.ADAPTER.createCanvas(0,0),r._EMPTY}};var jx=class bm extends Ot{constructor(e,t){t=t||{},super(I.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=e,this.scale=t.scale||1,this._overrideWidth=t.width,this._overrideHeight=t.height,this._resolve=null,this._crossorigin=t.crossorigin,this._load=null,t.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(e=>{if(this._resolve=()=>{this.update(),e(this)},bm.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){let e=new Image;Ot.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=t=>{this._resolve&&(e.onerror=null,this.onError.emit(t))},e.onload=()=>{if(!this._resolve)return;let t=e.width,n=e.height;if(!t||!n)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let i=t*this.scale,s=n*this.scale;(this._overrideWidth||this._overrideHeight)&&(i=this._overrideWidth||this._overrideHeight/n*t,s=this._overrideHeight||this._overrideWidth/t*n),i=Math.round(i),s=Math.round(s);let o=this.source;o.width=i,o.height=s,o._pixiId=`canvas_${ri()}`,o.getContext("2d").drawImage(e,0,0,t,n,0,0,i,s),this._resolve(),this._resolve=null}}static getSize(e){let t=bm.SVG_SIZE.exec(e),n={};return t&&(n[t[1]]=Math.round(parseFloat(t[3])),n[t[5]]=Math.round(parseFloat(t[7]))),n}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(e,t){return t==="svg"||typeof e=="string"&&e.startsWith("data:image/svg+xml")||typeof e=="string"&&bm.SVG_XML.test(e)}};jx.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,jx.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;var Vl=jx;var Vx=class Hx extends Ot{constructor(e,t){if(t=t||{},!(e instanceof HTMLVideoElement)){let n=document.createElement("video");t.autoLoad!==!1&&n.setAttribute("preload","auto"),t.playsinline!==!1&&(n.setAttribute("webkit-playsinline",""),n.setAttribute("playsinline","")),t.muted===!0&&(n.setAttribute("muted",""),n.muted=!0),t.loop===!0&&n.setAttribute("loop",""),t.autoPlay!==!1&&n.setAttribute("autoplay",""),typeof e=="string"&&(e=[e]);let i=e[0].src||e[0];Ot.crossOrigin(n,i,t.crossorigin);for(let s=0;s<e.length;++s){let o=document.createElement("source"),{src:a,mime:l}=e[s];if(a=a||e[s],a.startsWith("data:"))l=a.slice(5,a.indexOf(";"));else if(!a.startsWith("blob:")){let u=a.split("?").shift().toLowerCase(),c=u.slice(u.lastIndexOf(".")+1);l=l||Hx.MIME_TYPES[c]||`video/${c}`}o.src=a,l&&(o.type=l),n.appendChild(o)}e=n}super(e),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=t.autoPlay!==!1,this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),t.autoLoad!==!1&&this.load()}update(e=0){if(!this.destroyed){if(this._updateFPS){let t=mt.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t)}(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}_videoFrameRequestCallback(){this.update(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}load(){if(this._load)return this._load;let e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise((t,n)=>{this.valid?t(this):(this._resolve=t,this._reject=n,e.load())}),this._load}_onError(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){let e=this.source;return!e.paused&&!e.ended}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0)}_onCanPlay(){let e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);let t=this.valid;this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0,!t&&this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()}dispose(){this._configureAutoUpdate();let e=this.source;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(mt.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(mt.shared.add(this.update,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(mt.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e,t){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement||Hx.TYPES.includes(t)}};Vx.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],Vx.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};var gh=Vx;zc.push(mh,No,fh,gh,Vl,Rn,Ux,dh);var oi=class{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(e){return this.minX>this.maxX||this.minY>this.maxY?Z.EMPTY:(e=e||new Z(0,0,1,1),e.x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)}addPoint(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)}addPointMatrix(e,t){let{a:n,b:i,c:s,d:o,tx:a,ty:l}=e,u=n*t.x+s*t.y+a,c=i*t.x+o*t.y+l;this.minX=Math.min(this.minX,u),this.maxX=Math.max(this.maxX,u),this.minY=Math.min(this.minY,c),this.maxY=Math.max(this.maxY,c)}addQuad(e){let t=this.minX,n=this.minY,i=this.maxX,s=this.maxY,o=e[0],a=e[1];t=o<t?o:t,n=a<n?a:n,i=o>i?o:i,s=a>s?a:s,o=e[2],a=e[3],t=o<t?o:t,n=a<n?a:n,i=o>i?o:i,s=a>s?a:s,o=e[4],a=e[5],t=o<t?o:t,n=a<n?a:n,i=o>i?o:i,s=a>s?a:s,o=e[6],a=e[7],t=o<t?o:t,n=a<n?a:n,i=o>i?o:i,s=a>s?a:s,this.minX=t,this.minY=n,this.maxX=i,this.maxY=s}addFrame(e,t,n,i,s){this.addFrameMatrix(e.worldTransform,t,n,i,s)}addFrameMatrix(e,t,n,i,s){let o=e.a,a=e.b,l=e.c,u=e.d,c=e.tx,h=e.ty,d=this.minX,f=this.minY,p=this.maxX,m=this.maxY,g=o*t+l*n+c,y=a*t+u*n+h;d=g<d?g:d,f=y<f?y:f,p=g>p?g:p,m=y>m?y:m,g=o*i+l*n+c,y=a*i+u*n+h,d=g<d?g:d,f=y<f?y:f,p=g>p?g:p,m=y>m?y:m,g=o*t+l*s+c,y=a*t+u*s+h,d=g<d?g:d,f=y<f?y:f,p=g>p?g:p,m=y>m?y:m,g=o*i+l*s+c,y=a*i+u*s+h,d=g<d?g:d,f=y<f?y:f,p=g>p?g:p,m=y>m?y:m,this.minX=d,this.minY=f,this.maxX=p,this.maxY=m}addVertexData(e,t,n){let i=this.minX,s=this.minY,o=this.maxX,a=this.maxY;for(let l=t;l<n;l+=2){let u=e[l],c=e[l+1];i=u<i?u:i,s=c<s?c:s,o=u>o?u:o,a=c>a?c:a}this.minX=i,this.minY=s,this.maxX=o,this.maxY=a}addVertices(e,t,n,i){this.addVerticesMatrix(e.worldTransform,t,n,i)}addVerticesMatrix(e,t,n,i,s=0,o=s){let a=e.a,l=e.b,u=e.c,c=e.d,h=e.tx,d=e.ty,f=this.minX,p=this.minY,m=this.maxX,g=this.maxY;for(let y=n;y<i;y+=2){let _=t[y],v=t[y+1],x=a*_+u*v+h,b=c*v+l*_+d;f=Math.min(f,x-s),m=Math.max(m,x+s),p=Math.min(p,b-o),g=Math.max(g,b+o)}this.minX=f,this.minY=p,this.maxX=m,this.maxY=g}addBounds(e){let t=this.minX,n=this.minY,i=this.maxX,s=this.maxY;this.minX=e.minX<t?e.minX:t,this.minY=e.minY<n?e.minY:n,this.maxX=e.maxX>i?e.maxX:i,this.maxY=e.maxY>s?e.maxY:s}addBoundsMask(e,t){let n=e.minX>t.minX?e.minX:t.minX,i=e.minY>t.minY?e.minY:t.minY,s=e.maxX<t.maxX?e.maxX:t.maxX,o=e.maxY<t.maxY?e.maxY:t.maxY;if(n<=s&&i<=o){let a=this.minX,l=this.minY,u=this.maxX,c=this.maxY;this.minX=n<a?n:a,this.minY=i<l?i:l,this.maxX=s>u?s:u,this.maxY=o>c?o:c}}addBoundsMatrix(e,t){this.addFrameMatrix(t,e.minX,e.minY,e.maxX,e.maxY)}addBoundsArea(e,t){let n=e.minX>t.x?e.minX:t.x,i=e.minY>t.y?e.minY:t.y,s=e.maxX<t.x+t.width?e.maxX:t.x+t.width,o=e.maxY<t.y+t.height?e.maxY:t.y+t.height;if(n<=s&&i<=o){let a=this.minX,l=this.minY,u=this.maxX,c=this.maxY;this.minX=n<a?n:a,this.minY=i<l?i:l,this.maxX=s>u?s:u,this.maxY=o>c?o:c}}pad(e=0,t=e){this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t)}addFramePad(e,t,n,i,s,o){e-=s,t-=o,n+=s,i+=o,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>n?this.maxX:n,this.minY=this.minY<t?this.minY:t,this.maxY=this.maxY>i?this.maxY:i}};var Re=class r extends N.EventEmitter{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new Po,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new oi,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(e){let t=Object.keys(e);for(let n=0;n<t.length;++n){let i=t[n];Object.defineProperty(r.prototype,i,Object.getOwnPropertyDescriptor(e,i))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(e,t){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),t||(this._boundsRect||(this._boundsRect=new Z),t=this._boundsRect),this._bounds.getRectangle(t)}getLocalBounds(e){e||(this._localBoundsRect||(this._localBoundsRect=new Z),e=this._localBoundsRect),this._localBounds||(this._localBounds=new oi);let t=this.transform,n=this.parent;this.parent=null,this._tempDisplayObjectParent.worldAlpha=n?.worldAlpha??1,this.transform=this._tempDisplayObjectParent.transform;let i=this._bounds,s=this._boundsID;this._bounds=this._localBounds;let o=this.getBounds(!1,e);return this.parent=n,this.transform=t,this._bounds=i,this._bounds.updateID+=this._boundsID-s,o}toGlobal(e,t,n=!1){return n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,t)}toLocal(e,t,n,i){return t&&(e=t.toGlobal(e,n,i)),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,n)}setParent(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e}removeFromParent(){this.parent?.removeChild(this)}setTransform(e=0,t=0,n=1,i=1,s=0,o=0,a=0,l=0,u=0){return this.position.x=e,this.position.y=t,this.scale.x=n||1,this.scale.y=i||1,this.rotation=s,this.skew.x=o,this.skew.y=a,this.pivot.x=l,this.pivot.y=u,this}destroy(e){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new wm),this.tempDisplayObjectParent}enableTempParent(){let e=this.parent;return this.parent=this._tempDisplayObjectParent,e}disableTempParent(e){this.parent=e}get x(){return this.position.x}set x(e){this.transform.position.x=e}get y(){return this.position.y}set y(e){this.transform.position.y=e}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(e){this.transform.position.copyFrom(e)}get scale(){return this.transform.scale}set scale(e){this.transform.scale.copyFrom(e)}get pivot(){return this.transform.pivot}set pivot(e){this.transform.pivot.copyFrom(e)}get skew(){return this.transform.skew}set skew(e){this.transform.skew.copyFrom(e)}get rotation(){return this.transform.rotation}set rotation(e){this.transform.rotation=e}get angle(){return this.transform.rotation*vx}set angle(e){this.transform.rotation=e*_x}get zIndex(){return this._zIndex}set zIndex(e){this._zIndex=e,this.parent&&(this.parent.sortDirty=!0)}get worldVisible(){let e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}get mask(){return this._mask}set mask(e){if(this._mask!==e){if(this._mask){let t=this._mask.isMaskData?this._mask.maskObject:this._mask;t&&(t._maskRefCount--,t._maskRefCount===0&&(t.renderable=!0,t.isMask=!1))}if(this._mask=e,this._mask){let t=this._mask.isMaskData?this._mask.maskObject:this._mask;t&&(t._maskRefCount===0&&(t.renderable=!1,t.isMask=!0),t._maskRefCount++)}}}},wm=class extends Re{constructor(){super(...arguments),this.sortDirty=null}};Re.prototype.displayObjectUpdateTransform=Re.prototype.updateTransform;var $$=new me;function z$(r,e){return r.zIndex===e.zIndex?r._lastSortedIndex-e._lastSortedIndex:r.zIndex-e.zIndex}var GM=class Gx extends Re{constructor(){super(),this.children=[],this.sortableChildren=Gx.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(e){}addChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.addChild(e[t]);else{let t=e[0];t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this)}return e[0]}addChildAt(e,t){if(t<0||t>this.children.length)throw new Error(`${e}addChildAt: The index ${t} supplied is out of bounds ${this.children.length}`);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(t,0,e),this._boundsID++,this.onChildrenChange(t),e.emit("added",this),this.emit("childAdded",e,this,t),e}swapChildren(e,t){if(e===t)return;let n=this.getChildIndex(e),i=this.getChildIndex(t);this.children[n]=t,this.children[i]=e,this.onChildrenChange(n<i?n:i)}getChildIndex(e){let t=this.children.indexOf(e);if(t===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return t}setChildIndex(e,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);let n=this.getChildIndex(e);N.removeItems(this.children,n,1),this.children.splice(t,0,e),this.onChildrenChange(t)}getChildAt(e){if(e<0||e>=this.children.length)throw new Error(`getChildAt: Index (${e}) does not exist.`);return this.children[e]}removeChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.removeChild(e[t]);else{let t=e[0],n=this.children.indexOf(t);if(n===-1)return null;t.parent=null,t.transform._parentID=-1,N.removeItems(this.children,n,1),this._boundsID++,this.onChildrenChange(n),t.emit("removed",this),this.emit("childRemoved",t,this,n)}return e[0]}removeChildAt(e){let t=this.getChildAt(e);return t.parent=null,t.transform._parentID=-1,N.removeItems(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),this.emit("childRemoved",t,this,e),t}removeChildren(e=0,t=this.children.length){let n=e,i=t,s=i-n,o;if(s>0&&s<=i){o=this.children.splice(n,s);for(let a=0;a<o.length;++a)o[a].parent=null,o[a].transform&&(o[a].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(let a=0;a<o.length;++a)o[a].emit("removed",this),this.emit("childRemoved",o[a],this,a);return o}else if(s===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let e=!1;for(let t=0,n=this.children.length;t<n;++t){let i=this.children[t];i._lastSortedIndex=t,!e&&i.zIndex!==0&&(e=!0)}e&&this.children.length>1&&this.children.sort(z$),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let e=0,t=this.children.length;e<t;++e){let n=this.children[e];n.visible&&n.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let e=0;e<this.children.length;e++){let t=this.children[e];if(!(!t.visible||!t.renderable))if(t.calculateBounds(),t._mask){let n=t._mask.isMaskData?t._mask.maskObject:t._mask;n?(n.calculateBounds(),this._bounds.addBoundsMask(t._bounds,n._bounds)):this._bounds.addBounds(t._bounds)}else t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(e,t=!1){let n=super.getLocalBounds(e);if(!t)for(let i=0,s=this.children.length;i<s;++i){let o=this.children[i];o.visible&&o.updateTransform()}return n}_calculateBounds(){}_renderWithCulling(e){let t=e.renderTexture.sourceFrame;if(!(t.width>0&&t.height>0))return;let n,i;this.cullArea?(n=this.cullArea,i=this.worldTransform):this._render!==Gx.prototype._render&&(n=this.getBounds(!0));let s=e.projection.transform;if(s&&(i?(i=$$.copyFrom(i),i.prepend(s)):i=s),n&&t.intersects(n,i))this._render(e);else if(this.cullArea)return;for(let o=0,a=this.children.length;o<a;++o){let l=this.children[o],u=l.cullable;l.cullable=u||!this.cullArea,l.render(e),l.cullable=u}}render(e){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters?.length)this.renderAdvanced(e);else if(this.cullable)this._renderWithCulling(e);else{this._render(e);for(let t=0,n=this.children.length;t<n;++t)this.children[t].render(e)}}renderAdvanced(e){let t=this.filters,n=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let s=0;s<t.length;s++)t[s].enabled&&this._enabledFilters.push(t[s])}let i=t&&this._enabledFilters?.length||n&&(!n.isMaskData||n.enabled&&(n.autoDetect||n.type!==st.NONE));if(i&&e.batch.flush(),t&&this._enabledFilters?.length&&e.filter.push(this,this._enabledFilters),n&&e.mask.push(this,this._mask),this.cullable)this._renderWithCulling(e);else{this._render(e);for(let s=0,o=this.children.length;s<o;++s)this.children[s].render(e)}i&&e.batch.flush(),n&&e.mask.pop(this),t&&this._enabledFilters?.length&&e.filter.pop()}_render(e){}destroy(e){super.destroy(),this.sortDirty=!1;let t=typeof e=="boolean"?e:e?.children,n=this.removeChildren(0,this.children.length);if(t)for(let i=0;i<n.length;++i)n[i].destroy(e)}get width(){return this.scale.x*this.getLocalBounds().width}set width(e){let t=this.getLocalBounds().width;t!==0?this.scale.x=e/t:this.scale.x=1,this._width=e}get height(){return this.scale.y*this.getLocalBounds().height}set height(e){let t=this.getLocalBounds().height;t!==0?this.scale.y=e/t:this.scale.y=1,this._height=e}};GM.defaultSortableChildren=!1;var Je=GM;Je.prototype.containerUpdateTransform=Je.prototype.updateTransform;Object.defineProperties(I,{SORTABLE_CHILDREN:{get(){return Je.defaultSortableChildren},set(r){N.deprecation("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),Je.defaultSortableChildren=r}}});var yh=new oe,W$=new Uint16Array([0,1,2,0,2,3]),_r=class r extends Je{constructor(e){super(),this._anchor=new Ur(this._onAnchorUpdate,this,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new ue(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=re.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=e||se.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=W$,this.pluginName="batch",this.isSprite=!0,this._roundPixels=I.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=N.sign(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=N.sign(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){let e=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===e._updateID)return;this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;let t=this.transform.worldTransform,n=t.a,i=t.b,s=t.c,o=t.d,a=t.tx,l=t.ty,u=this.vertexData,c=e.trim,h=e.orig,d=this._anchor,f=0,p=0,m=0,g=0;if(c?(p=c.x-d._x*h.width,f=p+c.width,g=c.y-d._y*h.height,m=g+c.height):(p=-d._x*h.width,f=p+h.width,g=-d._y*h.height,m=g+h.height),u[0]=n*p+s*g+a,u[1]=o*g+i*p+l,u[2]=n*f+s*g+a,u[3]=o*g+i*f+l,u[4]=n*f+s*m+a,u[5]=o*m+i*f+l,u[6]=n*p+s*m+a,u[7]=o*m+i*p+l,this._roundPixels){let y=I.RESOLUTION;for(let _=0;_<u.length;++_)u[_]=Math.round(u[_]*y)/y}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;let e=this._texture,t=this.vertexTrimmedData,n=e.orig,i=this._anchor,s=this.transform.worldTransform,o=s.a,a=s.b,l=s.c,u=s.d,c=s.tx,h=s.ty,d=-i._x*n.width,f=d+n.width,p=-i._y*n.height,m=p+n.height;if(t[0]=o*d+l*p+c,t[1]=u*p+a*d+h,t[2]=o*f+l*p+c,t[3]=u*p+a*f+h,t[4]=o*f+l*m+c,t[5]=u*m+a*f+h,t[6]=o*d+l*m+c,t[7]=u*m+a*d+h,this._roundPixels){let g=I.RESOLUTION;for(let y=0;y<t.length;++y)t[y]=Math.round(t[y]*g)/g}}_render(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)}_calculateBounds(){let e=this._texture.trim,t=this._texture.orig;!e||e.width===t.width&&e.height===t.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(e){return this.children.length===0?(this._localBounds||(this._localBounds=new oi),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new Z),e=this._localBoundsRect),this._localBounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,yh);let t=this._texture.orig.width,n=this._texture.orig.height,i=-t*this.anchor.x,s=0;return yh.x>=i&&yh.x<i+t&&(s=-n*this.anchor.y,yh.y>=s&&yh.y<s+n)}destroy(e){if(super.destroy(e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof e=="boolean"?e:e?.texture){let t=typeof e=="boolean"?e:e?.baseTexture;this._texture.destroy(!!t)}this._texture=null}static from(e,t){let n=e instanceof se?e:se.from(e,t);return new r(n)}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1,this._transformTrimmedID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){let t=N.sign(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){let t=N.sign(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}get anchor(){return this._anchor}set anchor(e){this._anchor.copyFrom(e)}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||se.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}};var $M=new me;Re.prototype._cacheAsBitmap=!1;Re.prototype._cacheData=null;Re.prototype._cacheAsBitmapResolution=null;Re.prototype._cacheAsBitmapMultisample=null;var $x=class{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}};Object.defineProperties(Re.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(r){r!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=r,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(r){r!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=r,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(r){if(this._cacheAsBitmap===r)return;this._cacheAsBitmap=r;let e;r?(this._cacheData||(this._cacheData=new $x),e=this._cacheData,e.originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}});Re.prototype._renderCached=function(r){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(r),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(r))};Re.prototype._initCachedDisplayObject=function(r){if(this._cacheData?.sprite)return;let e=this.alpha;this.alpha=1,r.batch.flush();let t=this.getLocalBounds(new Z,!0);if(this.filters?.length){let d=this.filters[0].padding;t.pad(d)}let n=this.cacheAsBitmapResolution||r.resolution;t.ceil(n),t.width=Math.max(t.width,1/n),t.height=Math.max(t.height,1/n);let i=r.renderTexture.current,s=r.renderTexture.sourceFrame.clone(),o=r.renderTexture.destinationFrame.clone(),a=r.projection.transform,l=rn.create({width:t.width,height:t.height,resolution:n,multisample:this.cacheAsBitmapMultisample??r.multisample}),u=`cacheAsBitmap_${N.uid()}`;this._cacheData.textureCacheId=u,Y.addToCache(l.baseTexture,u),se.addToCache(l,u);let c=this.transform.localTransform.copyTo($M).invert().translate(-t.x,-t.y);this.render=this._cacheData.originalRender,r.render(this,{renderTexture:l,clear:!0,transform:c,skipUpdateTransform:!1}),r.framebuffer.blit(),r.projection.transform=a,r.renderTexture.bind(i,s,o),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=e;let h=new _r(l);h.transform.worldTransform=this.transform.worldTransform,h.anchor.x=-(t.x/t.width),h.anchor.y=-(t.y/t.height),h.alpha=e,h._bounds=this._bounds,this._cacheData.sprite=h,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=h.containsPoint.bind(h)};Re.prototype._renderCachedCanvas=function(r){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(r),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(r))};Re.prototype._initCachedDisplayObjectCanvas=function(r){if(this._cacheData?.sprite)return;let e=this.getLocalBounds(new Z,!0),t=this.alpha;this.alpha=1;let n=r.canvasContext.activeContext,i=r._projTransform,s=this.cacheAsBitmapResolution||r.resolution;e.ceil(s),e.width=Math.max(e.width,1/s),e.height=Math.max(e.height,1/s);let o=rn.create({width:e.width,height:e.height,resolution:s}),a=`cacheAsBitmap_${N.uid()}`;this._cacheData.textureCacheId=a,Y.addToCache(o.baseTexture,a),se.addToCache(o,a);let l=$M;this.transform.localTransform.copyTo(l),l.invert(),l.tx-=e.x,l.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,r.render(this,{renderTexture:o,clear:!0,transform:l,skipUpdateTransform:!1}),r.canvasContext.activeContext=n,r._projTransform=i,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=t;let u=new _r(o);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-(e.x/e.width),u.anchor.y=-(e.y/e.height),u.alpha=t,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=r._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=u.containsPoint.bind(u)};Re.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};Re.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};Re.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,Y.removeFromCache(this._cacheData.textureCacheId),se.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};Re.prototype._cacheAsBitmapDestroy=function(r){this.cacheAsBitmap=!1,this.destroy(r)};Re.prototype.name=null;Je.prototype.getChildByName=function(r,e){for(let t=0,n=this.children.length;t<n;t++)if(this.children[t].name===r)return this.children[t];if(e)for(let t=0,n=this.children.length;t<n;t++){let i=this.children[t];if(!i.getChildByName)continue;let s=i.getChildByName(r,!0);if(s)return s}return null};Re.prototype.getGlobalPosition=function(r=new oe,e=!1){return this.parent?this.parent.toGlobal(this.position,r,e):(r.x=this.position.x,r.y=this.position.y),r};var zM=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;var vh=class extends je{constructor(e=1){super(kx,zM,{uAlpha:1}),this.alpha=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}};var X$={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},q$=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function WM(r){let e=X$[r],t=e.length,n=q$,i="",s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;",o;for(let a=0;a<r;a++){let l=s.replace("%index%",a.toString());o=a,a>=t&&(o=r-a-1),l=l.replace("%value%",e[o].toString()),i+=l,i+=`
`}return n=n.replace("%blur%",i),n=n.replace("%size%",r.toString()),n}var Y$=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function XM(r,e){let t=Math.ceil(r/2),n=Y$,i="",s;e?s="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":s="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let o=0;o<r;o++){let a=s.replace("%index%",o.toString());a=a.replace("%sampleIndex%",`${o-(t-1)}.0`),i+=a,i+=`
`}return n=n.replace("%blur%",i),n=n.replace("%size%",r.toString()),n}var Ls=class extends je{constructor(e,t=8,n=4,i=je.defaultResolution,s=5){let o=XM(s,e),a=WM(s);super(o,a),this.horizontal=e,this.resolution=i,this._quality=0,this.quality=n,this.blur=t}apply(e,t,n,i){if(n?this.horizontal?this.uniforms.strength=1/n.width*(n.width/t.width):this.uniforms.strength=1/n.height*(n.height/t.height):this.horizontal?this.uniforms.strength=1/e.renderer.width*(e.renderer.width/t.width):this.uniforms.strength=1/e.renderer.height*(e.renderer.height/t.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)e.applyFilter(this,t,n,i);else{let s=e.getFilterTexture(),o=e.renderer,a=t,l=s;this.state.blend=!1,e.applyFilter(this,a,l,Lr.CLEAR);for(let u=1;u<this.passes-1;u++){e.bindAndClear(a,Lr.BLIT),this.uniforms.uSampler=l;let c=l;l=a,a=c,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,e.applyFilter(this,l,n,i),e.returnFilterTexture(s)}}get blur(){return this.strength}set blur(e){this.padding=1+Math.abs(e)*2,this.strength=e}get quality(){return this._quality}set quality(e){this._quality=e,this.passes=e}};var _h=class extends je{constructor(e=8,t=4,n=je.defaultResolution,i=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new Ls(!0,e,t,n,i),this.blurYFilter=new Ls(!1,e,t,n,i),this.resolution=n,this.quality=t,this.blur=e,this.repeatEdgePixels=!1}apply(e,t,n,i){let s=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(s&&o){let a=e.getFilterTexture();this.blurXFilter.apply(e,t,a,Lr.CLEAR),this.blurYFilter.apply(e,a,n,i),e.returnFilterTexture(a)}else o?this.blurYFilter.apply(e,t,n,i):this.blurXFilter.apply(e,t,n,i)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(e){this.blurXFilter.quality=this.blurYFilter.quality=e}get blurX(){return this.blurXFilter.blur}set blurX(e){this.blurXFilter.blur=e,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(e){this.blurYFilter.blur=e,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(e){this.blurYFilter.blendMode=e}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(e){this._repeatEdgePixels=e,this.updatePadding()}};var qM=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;var Uo=class extends je{constructor(){let e={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(lh,qM,e),this.alpha=1}_loadMatrix(e,t=!1){let n=e;t&&(this._multiply(n,this.uniforms.m,e),n=this._colorMatrix(n)),this.uniforms.m=n}_multiply(e,t,n){return e[0]=t[0]*n[0]+t[1]*n[5]+t[2]*n[10]+t[3]*n[15],e[1]=t[0]*n[1]+t[1]*n[6]+t[2]*n[11]+t[3]*n[16],e[2]=t[0]*n[2]+t[1]*n[7]+t[2]*n[12]+t[3]*n[17],e[3]=t[0]*n[3]+t[1]*n[8]+t[2]*n[13]+t[3]*n[18],e[4]=t[0]*n[4]+t[1]*n[9]+t[2]*n[14]+t[3]*n[19]+t[4],e[5]=t[5]*n[0]+t[6]*n[5]+t[7]*n[10]+t[8]*n[15],e[6]=t[5]*n[1]+t[6]*n[6]+t[7]*n[11]+t[8]*n[16],e[7]=t[5]*n[2]+t[6]*n[7]+t[7]*n[12]+t[8]*n[17],e[8]=t[5]*n[3]+t[6]*n[8]+t[7]*n[13]+t[8]*n[18],e[9]=t[5]*n[4]+t[6]*n[9]+t[7]*n[14]+t[8]*n[19]+t[9],e[10]=t[10]*n[0]+t[11]*n[5]+t[12]*n[10]+t[13]*n[15],e[11]=t[10]*n[1]+t[11]*n[6]+t[12]*n[11]+t[13]*n[16],e[12]=t[10]*n[2]+t[11]*n[7]+t[12]*n[12]+t[13]*n[17],e[13]=t[10]*n[3]+t[11]*n[8]+t[12]*n[13]+t[13]*n[18],e[14]=t[10]*n[4]+t[11]*n[9]+t[12]*n[14]+t[13]*n[19]+t[14],e[15]=t[15]*n[0]+t[16]*n[5]+t[17]*n[10]+t[18]*n[15],e[16]=t[15]*n[1]+t[16]*n[6]+t[17]*n[11]+t[18]*n[16],e[17]=t[15]*n[2]+t[16]*n[7]+t[17]*n[12]+t[18]*n[17],e[18]=t[15]*n[3]+t[16]*n[8]+t[17]*n[13]+t[18]*n[18],e[19]=t[15]*n[4]+t[16]*n[9]+t[17]*n[14]+t[18]*n[19]+t[19],e}_colorMatrix(e){let t=new Float32Array(e);return t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,t}brightness(e,t){let n=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(n,t)}tint(e,t){let[n,i,s]=ue.shared.setValue(e).toArray(),o=[n,0,0,0,0,0,i,0,0,0,0,0,s,0,0,0,0,0,1,0];this._loadMatrix(o,t)}greyscale(e,t){let n=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(n,t)}blackAndWhite(e){let t=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(t,e)}hue(e,t){e=(e||0)/180*Math.PI;let n=Math.cos(e),i=Math.sin(e),s=Math.sqrt,o=1/3,a=s(o),l=n+(1-n)*o,u=o*(1-n)-a*i,c=o*(1-n)+a*i,h=o*(1-n)+a*i,d=n+o*(1-n),f=o*(1-n)-a*i,p=o*(1-n)-a*i,m=o*(1-n)+a*i,g=n+o*(1-n),y=[l,u,c,0,0,h,d,f,0,0,p,m,g,0,0,0,0,0,1,0];this._loadMatrix(y,t)}contrast(e,t){let n=(e||0)+1,i=-.5*(n-1),s=[n,0,0,0,i,0,n,0,0,i,0,0,n,0,i,0,0,0,1,0];this._loadMatrix(s,t)}saturate(e=0,t){let n=e*2/3+1,i=(n-1)*-.5,s=[n,i,i,0,0,i,n,i,0,0,i,i,n,0,0,0,0,0,1,0];this._loadMatrix(s,t)}desaturate(){this.saturate(-1)}negative(e){let t=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(t,e)}sepia(e){let t=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(t,e)}technicolor(e){let t=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(t,e)}polaroid(e){let t=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(t,e)}toBGR(e){let t=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(t,e)}kodachrome(e){let t=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(t,e)}browni(e){let t=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(t,e)}vintage(e){let t=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(t,e)}colorTone(e,t,n,i,s){e=e||.2,t=t||.15,n=n||16770432,i=i||3375104;let o=ue.shared,[a,l,u]=o.setValue(n).toArray(),[c,h,d]=o.setValue(i).toArray(),f=[.3,.59,.11,0,0,a,l,u,e,0,c,h,d,t,0,a-c,l-h,u-d,0,0];this._loadMatrix(f,s)}night(e,t){e=e||.1;let n=[e*-2,-e,0,0,0,-e,0,e,0,0,0,e,e*2,0,0,0,0,0,1,0];this._loadMatrix(n,t)}predator(e,t){let n=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(n,t)}lsd(e){let t=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(t,e)}reset(){let e=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(e,!1)}get matrix(){return this.uniforms.m}set matrix(e){this.uniforms.m=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}};Uo.prototype.grayscale=Uo.prototype.greyscale;var YM=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`;var ZM=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;var xh=class extends je{constructor(e,t){let n=new me;e.renderable=!1,super(ZM,YM,{mapSampler:e._texture,filterMatrix:n,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=e,this.maskMatrix=n,t==null&&(t=20),this.scale=new oe(t,t)}apply(e,t,n,i){this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;let s=this.maskSprite.worldTransform,o=Math.sqrt(s.a*s.a+s.b*s.b),a=Math.sqrt(s.c*s.c+s.d*s.d);o!==0&&a!==0&&(this.uniforms.rotation[0]=s.a/o,this.uniforms.rotation[1]=s.b/o,this.uniforms.rotation[2]=s.c/a,this.uniforms.rotation[3]=s.d/a),e.applyFilter(this,t,n,i)}get map(){return this.uniforms.mapSampler}set map(e){this.uniforms.mapSampler=e}};var KM=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`;var QM=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;var bh=class extends je{constructor(){super(QM,KM)}};var JM=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;var wh=class extends je{constructor(e=.5,t=Math.random()){super(lh,JM,{uNoise:0,uSeed:0}),this.noise=e,this.seed=t}get noise(){return this.uniforms.uNoise}set noise(e){this.uniforms.uNoise=e}get seed(){return this.uniforms.uSeed}set seed(e){this.uniforms.uSeed=e}};var zx={AlphaFilter:vh,BlurFilter:_h,BlurFilterPass:Ls,ColorMatrixFilter:Uo,DisplacementFilter:xh,FXAAFilter:bh,NoiseFilter:wh};Object.entries(zx).forEach(([r,e])=>{Object.defineProperty(zx,r,{get(){return N.deprecation("7.1.0",`filters.${r} has moved to ${r}`),e}})});var Wx=class{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(e){this.removeTickerListener(),this.events=e,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(e){this._pauseUpdate=e}addTickerListener(){this.tickerAdded||!this.domElement||(mt.system.add(this.tickerUpdate,this,jr.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(mt.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}let e=this.events.rootPointerEvent;this.events.supportsTouchEvents&&e.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:e.clientX,clientY:e.clientY}))}tickerUpdate(e){this._deltaTime+=e,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}},ai=new Wx;var Vi=class r{constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=r.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new oe,this.page=new oe,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(e,t,n){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(e,t,n,i,s){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}};var li=class extends Vi{constructor(){super(...arguments),this.client=new oe,this.movement=new oe,this.offset=new oe,this.global=new oe,this.screen=new oe}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(e,t,n){return e.worldTransform.applyInverse(n||this.global,t)}getModifierState(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,t,n,i,s,o,a,l,u,c,h,d,f,p,m){throw new Error("Method not implemented.")}};var $t=class extends li{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}};var Nn=class extends li{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}};Nn.DOM_DELTA_PIXEL=0,Nn.DOM_DELTA_LINE=1,Nn.DOM_DELTA_PAGE=2;var Z$=2048,K$=new oe,Xx=new oe,Eh=class{constructor(e){this.dispatch=new N.EventEmitter,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=e,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(e,t){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:t,priority:0}),this.mappingTable[e].sort((n,i)=>n.priority-i.priority)}dispatchEvent(e,t){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,t),this.dispatch.emit(t||e.type,e)}mapEvent(e){if(!this.rootTarget)return;let t=this.mappingTable[e.type];if(t)for(let n=0,i=t.length;n<i;n++)t[n].fn(e);else console.warn(`[EventBoundary]: Event mapping not defined for ${e.type}`)}hitTest(e,t){ai.pauseUpdate=!0;let n=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",i=this[n](this.rootTarget,this.rootTarget.eventMode,K$.set(e,t),this.hitTestFn,this.hitPruneFn);return i&&i[0]}propagate(e,t){if(!e.target)return;let n=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(let i=0,s=n.length-1;i<s;i++)if(e.currentTarget=n[i],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,t),!(e.propagationStopped||e.propagationImmediatelyStopped)){e.eventPhase=e.BUBBLING_PHASE;for(let i=n.length-2;i>=0;i--)if(e.currentTarget=n[i],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return}}all(e,t,n=this._allInteractiveElements){if(n.length===0)return;e.eventPhase=e.BUBBLING_PHASE;let i=Array.isArray(t)?t:[t];for(let s=n.length-1;s>=0;s--)i.forEach(o=>{e.currentTarget=n[s],this.notifyTarget(e,o)})}propagationPath(e){let t=[e];for(let n=0;n<Z$&&e!==this.rootTarget;n++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");t.push(e.parent),e=e.parent}return t.reverse(),t}hitTestMoveRecursive(e,t,n,i,s,o=!1){let a=!1;if(this._interactivePrune(e))return null;if((e.eventMode==="dynamic"||t==="dynamic")&&(ai.pauseUpdate=!1),e.interactiveChildren&&e.children){let c=e.children;for(let h=c.length-1;h>=0;h--){let d=c[h],f=this.hitTestMoveRecursive(d,this._isInteractive(t)?t:d.eventMode,n,i,s,o||s(e,n));if(f){if(f.length>0&&!f[f.length-1].parent)continue;let p=e.isInteractive();(f.length>0||p)&&(p&&this._allInteractiveElements.push(e),f.push(e)),this._hitElements.length===0&&(this._hitElements=f),a=!0}}}let l=this._isInteractive(t),u=e.isInteractive();return l&&u&&this._allInteractiveElements.push(e),o||this._hitElements.length>0?null:a?this._hitElements:l&&!s(e,n)&&i(e,n)?u?[e]:[]:null}hitTestRecursive(e,t,n,i,s){if(this._interactivePrune(e)||s(e,n))return null;if((e.eventMode==="dynamic"||t==="dynamic")&&(ai.pauseUpdate=!1),e.interactiveChildren&&e.children){let l=e.children;for(let u=l.length-1;u>=0;u--){let c=l[u],h=this.hitTestRecursive(c,this._isInteractive(t)?t:c.eventMode,n,i,s);if(h){if(h.length>0&&!h[h.length-1].parent)continue;let d=e.isInteractive();return(h.length>0||d)&&h.push(e),h}}}let o=this._isInteractive(t),a=e.isInteractive();return o&&i(e,n)?a?[e]:[]:null}_isInteractive(e){return e==="static"||e==="dynamic"}_interactivePrune(e){return!!(!e||e.isMask||!e.visible||!e.renderable||e.eventMode==="none"||e.eventMode==="passive"&&!e.interactiveChildren||e.isMask)}hitPruneFn(e,t){if(e.hitArea&&(e.worldTransform.applyInverse(t,Xx),!e.hitArea.contains(Xx.x,Xx.y)))return!0;if(e._mask){let n=e._mask.isMaskData?e._mask.maskObject:e._mask;if(n&&!n.containsPoint?.(t))return!0}return!1}hitTestFn(e,t){return e.eventMode==="passive"?!1:e.hitArea?!0:e.containsPoint?e.containsPoint(t):!1}notifyTarget(e,t){t=t??e.type;let n=`on${t}`;e.currentTarget[n]?.(e);let i=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?`${t}capture`:t;this.notifyListeners(e,i),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,t)}mapPointerDown(e){if(!(e instanceof $t)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}let t=this.createPointerEvent(e);if(this.dispatchEvent(t,"pointerdown"),t.pointerType==="touch")this.dispatchEvent(t,"touchstart");else if(t.pointerType==="mouse"||t.pointerType==="pen"){let i=t.button===2;this.dispatchEvent(t,i?"rightdown":"mousedown")}let n=this.trackingData(e.pointerId);n.pressTargetsByButton[e.button]=t.composedPath(),this.freeEvent(t)}mapPointerMove(e){if(!(e instanceof $t)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;let t=this.createPointerEvent(e);this._isPointerMoveEvent=!1;let n=t.pointerType==="mouse"||t.pointerType==="pen",i=this.trackingData(e.pointerId),s=this.findMountedTarget(i.overTargets);if(i.overTargets?.length>0&&s!==t.target){let l=e.type==="mousemove"?"mouseout":"pointerout",u=this.createPointerEvent(e,l,s);if(this.dispatchEvent(u,"pointerout"),n&&this.dispatchEvent(u,"mouseout"),!t.composedPath().includes(s)){let c=this.createPointerEvent(e,"pointerleave",s);for(c.eventPhase=c.AT_TARGET;c.target&&!t.composedPath().includes(c.target);)c.currentTarget=c.target,this.notifyTarget(c),n&&this.notifyTarget(c,"mouseleave"),c.target=c.target.parent;this.freeEvent(c)}this.freeEvent(u)}if(s!==t.target){let l=e.type==="mousemove"?"mouseover":"pointerover",u=this.clonePointerEvent(t,l);this.dispatchEvent(u,"pointerover"),n&&this.dispatchEvent(u,"mouseover");let c=s?.parent;for(;c&&c!==this.rootTarget.parent&&c!==t.target;)c=c.parent;if(!c||c===this.rootTarget.parent){let h=this.clonePointerEvent(t,"pointerenter");for(h.eventPhase=h.AT_TARGET;h.target&&h.target!==s&&h.target!==this.rootTarget.parent;)h.currentTarget=h.target,this.notifyTarget(h),n&&this.notifyTarget(h,"mouseenter"),h.target=h.target.parent;this.freeEvent(h)}this.freeEvent(u)}let o=[],a=this.enableGlobalMoveEvents??!0;this.moveOnAll?o.push("pointermove"):this.dispatchEvent(t,"pointermove"),a&&o.push("globalpointermove"),t.pointerType==="touch"&&(this.moveOnAll?o.splice(1,0,"touchmove"):this.dispatchEvent(t,"touchmove"),a&&o.push("globaltouchmove")),n&&(this.moveOnAll?o.splice(1,0,"mousemove"):this.dispatchEvent(t,"mousemove"),a&&o.push("globalmousemove"),this.cursor=t.target?.cursor),o.length>0&&this.all(t,o),this._allInteractiveElements.length=0,this._hitElements.length=0,i.overTargets=t.composedPath(),this.freeEvent(t)}mapPointerOver(e){if(!(e instanceof $t)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}let t=this.trackingData(e.pointerId),n=this.createPointerEvent(e),i=n.pointerType==="mouse"||n.pointerType==="pen";this.dispatchEvent(n,"pointerover"),i&&this.dispatchEvent(n,"mouseover"),n.pointerType==="mouse"&&(this.cursor=n.target?.cursor);let s=this.clonePointerEvent(n,"pointerenter");for(s.eventPhase=s.AT_TARGET;s.target&&s.target!==this.rootTarget.parent;)s.currentTarget=s.target,this.notifyTarget(s),i&&this.notifyTarget(s,"mouseenter"),s.target=s.target.parent;t.overTargets=n.composedPath(),this.freeEvent(n),this.freeEvent(s)}mapPointerOut(e){if(!(e instanceof $t)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}let t=this.trackingData(e.pointerId);if(t.overTargets){let n=e.pointerType==="mouse"||e.pointerType==="pen",i=this.findMountedTarget(t.overTargets),s=this.createPointerEvent(e,"pointerout",i);this.dispatchEvent(s),n&&this.dispatchEvent(s,"mouseout");let o=this.createPointerEvent(e,"pointerleave",i);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),n&&this.notifyTarget(o,"mouseleave"),o.target=o.target.parent;t.overTargets=null,this.freeEvent(s),this.freeEvent(o)}this.cursor=null}mapPointerUp(e){if(!(e instanceof $t)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}let t=performance.now(),n=this.createPointerEvent(e);if(this.dispatchEvent(n,"pointerup"),n.pointerType==="touch")this.dispatchEvent(n,"touchend");else if(n.pointerType==="mouse"||n.pointerType==="pen"){let a=n.button===2;this.dispatchEvent(n,a?"rightup":"mouseup")}let i=this.trackingData(e.pointerId),s=this.findMountedTarget(i.pressTargetsByButton[e.button]),o=s;if(s&&!n.composedPath().includes(s)){let a=s;for(;a&&!n.composedPath().includes(a);){if(n.currentTarget=a,this.notifyTarget(n,"pointerupoutside"),n.pointerType==="touch")this.notifyTarget(n,"touchendoutside");else if(n.pointerType==="mouse"||n.pointerType==="pen"){let l=n.button===2;this.notifyTarget(n,l?"rightupoutside":"mouseupoutside")}a=a.parent}delete i.pressTargetsByButton[e.button],o=a}if(o){let a=this.clonePointerEvent(n,"click");a.target=o,a.path=null,i.clicksByButton[e.button]||(i.clicksByButton[e.button]={clickCount:0,target:a.target,timeStamp:t});let l=i.clicksByButton[e.button];if(l.target===a.target&&t-l.timeStamp<200?++l.clickCount:l.clickCount=1,l.target=a.target,l.timeStamp=t,a.detail=l.clickCount,a.pointerType==="mouse"){let u=a.button===2;this.dispatchEvent(a,u?"rightclick":"click")}else a.pointerType==="touch"&&this.dispatchEvent(a,"tap");this.dispatchEvent(a,"pointertap"),this.freeEvent(a)}this.freeEvent(n)}mapPointerUpOutside(e){if(!(e instanceof $t)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}let t=this.trackingData(e.pointerId),n=this.findMountedTarget(t.pressTargetsByButton[e.button]),i=this.createPointerEvent(e);if(n){let s=n;for(;s;)i.currentTarget=s,this.notifyTarget(i,"pointerupoutside"),i.pointerType==="touch"?this.notifyTarget(i,"touchendoutside"):(i.pointerType==="mouse"||i.pointerType==="pen")&&this.notifyTarget(i,i.button===2?"rightupoutside":"mouseupoutside"),s=s.parent;delete t.pressTargetsByButton[e.button]}this.freeEvent(i)}mapWheel(e){if(!(e instanceof Nn)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}let t=this.createWheelEvent(e);this.dispatchEvent(t),this.freeEvent(t)}findMountedTarget(e){if(!e)return null;let t=e[0];for(let n=1;n<e.length&&e[n].parent===t;n++)t=e[n];return t}createPointerEvent(e,t,n){let i=this.allocateEvent($t);return this.copyPointerData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.nativeEvent=e.nativeEvent,i.originalEvent=e,i.target=n??this.hitTest(i.global.x,i.global.y)??this._hitElements[0],typeof t=="string"&&(i.type=t),i}createWheelEvent(e){let t=this.allocateEvent(Nn);return this.copyWheelData(e,t),this.copyMouseData(e,t),this.copyData(e,t),t.nativeEvent=e.nativeEvent,t.originalEvent=e,t.target=this.hitTest(t.global.x,t.global.y),t}clonePointerEvent(e,t){let n=this.allocateEvent($t);return n.nativeEvent=e.nativeEvent,n.originalEvent=e.originalEvent,this.copyPointerData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.target=e.target,n.path=e.composedPath().slice(),n.type=t??n.type,n}copyWheelData(e,t){t.deltaMode=e.deltaMode,t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ}copyPointerData(e,t){e instanceof $t&&t instanceof $t&&(t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist)}copyMouseData(e,t){e instanceof li&&t instanceof li&&(t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.copyFrom(e.client),t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.copyFrom(e.movement),t.screen.copyFrom(e.screen),t.shiftKey=e.shiftKey,t.global.copyFrom(e.global))}copyData(e,t){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.detail=e.detail,t.view=e.view,t.which=e.which,t.layer.copyFrom(e.layer),t.page.copyFrom(e.page)}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){this.eventPool.has(e)||this.eventPool.set(e,[]);let t=this.eventPool.get(e).pop()||new e(this);return t.eventPhase=t.NONE,t.currentTarget=null,t.path=null,t.target=null,t}freeEvent(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");let t=e.constructor;this.eventPool.has(t)||this.eventPool.set(t,[]),this.eventPool.get(t).push(e)}notifyListeners(e,t){let n=e.currentTarget._events[t];if(n&&e.currentTarget.isInteractive())if("fn"in n)n.once&&e.currentTarget.removeListener(t,n.fn,void 0,!0),n.fn.call(n.context,e);else for(let i=0,s=n.length;i<s&&!e.propagationImmediatelyStopped;i++)n[i].once&&e.currentTarget.removeListener(t,n[i].fn,void 0,!0),n[i].fn.call(n[i].context,e)}};var Q$=1,J$={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},qx=class Yx{constructor(e){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=e,this.rootBoundary=new Eh(null),ai.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new $t(null),this.rootWheelEvent=new Nn(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy(O({},Yx.defaultEventFeatures),{set:(t,n,i)=>(n==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=i),t[n]=i,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(e){let{view:t,resolution:n}=this.renderer;this.setTargetElement(t),this.resolution=n,Yx._defaultEventMode=e.eventMode??"auto",Object.assign(this.features,e.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(e){this.resolution=e}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(e){e=e||"default";let t=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(t=!1),this.currentCursor===e)return;this.currentCursor=e;let n=this.cursorStyles[e];if(n)switch(typeof n){case"string":t&&(this.domElement.style.cursor=n);break;case"function":n(e);break;case"object":t&&Object.assign(this.domElement.style,n);break}else t&&typeof e=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}get pointer(){return this.rootPointerEvent}onPointerDown(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let t=this.normalizeToPointerData(e);this.autoPreventDefault&&t[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(let n=0,i=t.length;n<i;n++){let s=t[n],o=this.bootstrapEvent(this.rootPointerEvent,s);this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(e){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,ai.pointerMoved();let t=this.normalizeToPointerData(e);for(let n=0,i=t.length;n<i;n++){let s=this.bootstrapEvent(this.rootPointerEvent,t[n]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let t=e.target;e.composedPath&&e.composedPath().length>0&&(t=e.composedPath()[0]);let n=t!==this.domElement?"outside":"",i=this.normalizeToPointerData(e);for(let s=0,o=i.length;s<o;s++){let a=this.bootstrapEvent(this.rootPointerEvent,i[s]);a.type+=n,this.rootBoundary.mapEvent(a)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let t=this.normalizeToPointerData(e);for(let n=0,i=t.length;n<i;n++){let s=this.bootstrapEvent(this.rootPointerEvent,t[n]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onWheel(e){if(!this.features.wheel)return;let t=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(t)}setTargetElement(e){this.removeEvents(),this.domElement=e,ai.domElement=e,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;ai.addTickerListener();let e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;ai.removeTickerListener();let e=this.domElement.style;globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(e,t,n){let i=this.domElement.isConnected?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0},s=1/this.resolution;e.x=(t-i.left)*(this.domElement.width/i.width)*s,e.y=(n-i.top)*(this.domElement.height/i.height)*s}normalizeToPointerData(e){let t=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let n=0,i=e.changedTouches.length;n<i;n++){let s=e.changedTouches[n];typeof s.button>"u"&&(s.button=0),typeof s.buttons>"u"&&(s.buttons=1),typeof s.isPrimary>"u"&&(s.isPrimary=e.touches.length===1&&e.type==="touchstart"),typeof s.width>"u"&&(s.width=s.radiusX||1),typeof s.height>"u"&&(s.height=s.radiusY||1),typeof s.tiltX>"u"&&(s.tiltX=0),typeof s.tiltY>"u"&&(s.tiltY=0),typeof s.pointerType>"u"&&(s.pointerType="touch"),typeof s.pointerId>"u"&&(s.pointerId=s.identifier||0),typeof s.pressure>"u"&&(s.pressure=s.force||.5),typeof s.twist>"u"&&(s.twist=0),typeof s.tangentialPressure>"u"&&(s.tangentialPressure=0),typeof s.layerX>"u"&&(s.layerX=s.offsetX=s.clientX),typeof s.layerY>"u"&&(s.layerY=s.offsetY=s.clientY),s.isNormalized=!0,s.type=e.type,t.push(s)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&(!this.supportsPointerEvents||!(e instanceof globalThis.PointerEvent))){let n=e;typeof n.isPrimary>"u"&&(n.isPrimary=!0),typeof n.width>"u"&&(n.width=1),typeof n.height>"u"&&(n.height=1),typeof n.tiltX>"u"&&(n.tiltX=0),typeof n.tiltY>"u"&&(n.tiltY=0),typeof n.pointerType>"u"&&(n.pointerType="mouse"),typeof n.pointerId>"u"&&(n.pointerId=Q$),typeof n.pressure>"u"&&(n.pressure=.5),typeof n.twist>"u"&&(n.twist=0),typeof n.tangentialPressure>"u"&&(n.tangentialPressure=0),n.isNormalized=!0,t.push(n)}else t.push(e);return t}normalizeWheelEvent(e){let t=this.rootWheelEvent;return this.transferMouseData(t,e),t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ,t.deltaMode=e.deltaMode,this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.nativeEvent=e,t.type=e.type,t}bootstrapEvent(e,t){return e.originalEvent=null,e.nativeEvent=t,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this.transferMouseData(e,t),this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=t.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=J$[e.type]||e.type),e}transferMouseData(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.relatedTarget=null,e.shiftKey=t.shiftKey}};qx.extension={name:"events",type:[S.RendererSystem,S.CanvasRendererSystem]},qx.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};var Th=qx;M.add(Th);function eR(r){return r==="dynamic"||r==="static"}var tR={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??eR(Th.defaultEventMode)},set interactive(r){N.deprecation("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=r,this.eventMode=r?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??Th.defaultEventMode},set eventMode(r){this._internalInteractive=eR(r),this._internalEventMode=r},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(r,e,t){let n=typeof t=="boolean"&&t||typeof t=="object"&&t.capture,i=typeof e=="function"?void 0:e;r=n?`${r}capture`:r,e=typeof e=="function"?e:e.handleEvent,this.on(r,e,i)},removeEventListener(r,e,t){let n=typeof t=="boolean"&&t||typeof t=="object"&&t.capture,i=typeof e=="function"?void 0:e;r=n?`${r}capture`:r,e=typeof e=="function"?e:e.handleEvent,this.off(r,e,i)},dispatchEvent(r){if(!(r instanceof Vi))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return r.defaultPrevented=!1,r.path=null,r.target=this,r.manager.dispatchEvent(r),!r.defaultPrevented}};Re.mixin(tR);var Zx={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};Re.mixin(Zx);var e4=9,Em=100,t4=0,r4=0,rR=2,nR=1,n4=-1e3,i4=-1e3,s4=2,Ch=class{constructor(e){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(N.isMobile.tablet||N.isMobile.phone)&&this.createTouchHook();let t=document.createElement("div");t.style.width=`${Em}px`,t.style.height=`${Em}px`,t.style.position="absolute",t.style.top=`${t4}px`,t.style.left=`${r4}px`,t.style.zIndex=rR.toString(),this.div=t,this.renderer=e,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){let e=document.createElement("button");e.style.width=`${nR}px`,e.style.height=`${nR}px`,e.style.position="absolute",e.style.top=`${n4}px`,e.style.left=`${i4}px`,e.style.zIndex=s4.toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode?.appendChild(this.div))}deactivate(){!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode?.removeChild(this.div))}updateAccessibleObjects(e){if(!e.visible||!e.accessibleChildren)return;e.accessible&&e.isInteractive()&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);let t=e.children;if(t)for(let n=0;n<t.length;n++)this.updateAccessibleObjects(t[n])}update(){let e=performance.now();if(N.isMobile.android.device&&e<this.androidUpdateCount||(this.androidUpdateCount=e+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);let{x:t,y:n,width:i,height:s}=this.renderer.view.getBoundingClientRect(),{width:o,height:a,resolution:l}=this.renderer,u=i/o*l,c=s/a*l,h=this.div;h.style.left=`${t}px`,h.style.top=`${n}px`,h.style.width=`${o}px`,h.style.height=`${a}px`;for(let d=0;d<this.children.length;d++){let f=this.children[d];if(f.renderId!==this.renderId)f._accessibleActive=!1,N.removeItems(this.children,d,1),this.div.removeChild(f._accessibleDiv),this.pool.push(f._accessibleDiv),f._accessibleDiv=null,d--;else{h=f._accessibleDiv;let p=f.hitArea,m=f.worldTransform;f.hitArea?(h.style.left=`${(m.tx+p.x*m.a)*u}px`,h.style.top=`${(m.ty+p.y*m.d)*c}px`,h.style.width=`${p.width*m.a*u}px`,h.style.height=`${p.height*m.d*c}px`):(p=f.getBounds(),this.capHitArea(p),h.style.left=`${p.x*u}px`,h.style.top=`${p.y*c}px`,h.style.width=`${p.width*u}px`,h.style.height=`${p.height*c}px`,h.title!==f.accessibleTitle&&f.accessibleTitle!==null&&(h.title=f.accessibleTitle),h.getAttribute("aria-label")!==f.accessibleHint&&f.accessibleHint!==null&&h.setAttribute("aria-label",f.accessibleHint)),(f.accessibleTitle!==h.title||f.tabIndex!==h.tabIndex)&&(h.title=f.accessibleTitle,h.tabIndex=f.tabIndex,this.debug&&this.updateDebugHTML(h))}}this.renderId++}updateDebugHTML(e){e.innerHTML=`type: ${e.type}</br> title : ${e.title}</br> tabIndex: ${e.tabIndex}`}capHitArea(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);let{width:t,height:n}=this.renderer;e.x+e.width>t&&(e.width=t-e.x),e.y+e.height>n&&(e.height=n-e.y)}addChild(e){let t=this.pool.pop();t||(t=document.createElement("button"),t.style.width=`${Em}px`,t.style.height=`${Em}px`,t.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=rR.toString(),t.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?t.setAttribute("aria-live","off"):t.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?t.setAttribute("aria-relevant","additions"):t.setAttribute("aria-relevant","text"),t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),t.style.pointerEvents=e.accessiblePointerEvents,t.type=e.accessibleType,e.accessibleTitle&&e.accessibleTitle!==null?t.title=e.accessibleTitle:(!e.accessibleHint||e.accessibleHint===null)&&(t.title=`displayObject ${e.tabIndex}`),e.accessibleHint&&e.accessibleHint!==null&&t.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(t),e._accessibleActive=!0,e._accessibleDiv=t,t.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex}_dispatchEvent(e,t){let{displayObject:n}=e.target,i=this.renderer.events.rootBoundary,s=Object.assign(new Vi(i),{target:n});i.rootTarget=this.renderer.lastObjectRendered,t.forEach(o=>i.dispatchEvent(s,o))}_onClick(e){this._dispatchEvent(e,["click","pointertap","tap"])}_onFocus(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive"),this._dispatchEvent(e,["mouseover"])}_onFocusOut(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite"),this._dispatchEvent(e,["mouseout"])}_onKeyDown(e){e.keyCode===e4&&this.activate()}_onMouseMove(e){e.movementX===0&&e.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}};Ch.extension={name:"accessibility",type:[S.RendererPlugin,S.CanvasRendererPlugin]};M.add(Ch);var iR=class Kx{constructor(e){this.stage=new Je,e=Object.assign({forceCanvas:!1},e),this.renderer=Lx(e),Kx._plugins.forEach(t=>{t.init.call(this,e)})}render(){this.renderer.render(this.stage)}get view(){return this.renderer?.view}get screen(){return this.renderer?.screen}destroy(e,t){let n=Kx._plugins.slice(0);n.reverse(),n.forEach(i=>{i.destroy.call(this)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null}};iR._plugins=[];var sR=iR;M.handleByList(S.Application,sR._plugins);var Dh=class{static init(e){Object.defineProperty(this,"resizeTo",{set(t){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=t,t&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let t,n;if(this._resizeTo===globalThis.window)t=globalThis.innerWidth,n=globalThis.innerHeight;else{let{clientWidth:i,clientHeight:s}=this._resizeTo;t=i,n=s}this.renderer.resize(t,n),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}};Dh.extension=S.Application;M.add(Dh);var oR={loader:S.LoadParser,resolver:S.ResolveParser,cache:S.CacheParser,detection:S.DetectionParser};M.handle(S.Asset,r=>{let e=r.ref;Object.entries(oR).filter(([t])=>!!e[t]).forEach(([t,n])=>M.add(Object.assign(e[t],{extension:e[t].extension??n})))},r=>{let e=r.ref;Object.keys(oR).filter(t=>!!e[t]).forEach(t=>M.remove(e[t]))});var Tm=class{constructor(e,t=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=t}add(e){e.forEach(t=>{this._assetList.push(t)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}_next(){return L(this,null,function*(){if(this._assetList.length&&this._isActive){this._isLoading=!0;let e=[],t=Math.min(this._assetList.length,this._maxConcurrent);for(let n=0;n<t;n++)e.push(this._assetList.pop());yield this._loader.load(e),this._isLoading=!1,this._next()}})}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}};function xr(r,e){if(Array.isArray(e)){for(let t of e)if(r.startsWith(`data:${t}`))return!0;return!1}return r.startsWith(`data:${e}`)}function St(r,e){let t=r.split("?")[0],n=N.path.extname(t).toLowerCase();return Array.isArray(e)?e.includes(n):n===e}var Nt=(r,e,t=!1)=>(Array.isArray(r)||(r=[r]),e?r.map(n=>typeof n=="string"||t?e(n):n):r);var jo=(r,e)=>{let t=e.split("?")[1];return t&&(r+=`?${t}`),r};function aR(r,e,t,n,i){let s=e[t];for(let o=0;o<s.length;o++){let a=s[o];t<e.length-1?aR(r.replace(n[t],a),e,t+1,n,i):i.push(r.replace(n[t],a))}}function Cm(r){let e=/\{(.*?)\}/g,t=r.match(e),n=[];if(t){let i=[];t.forEach(s=>{let o=s.substring(1,s.length-1).split(",");i.push(o)}),aR(r,i,0,t,n)}else n.push(r);return n}var Hi=r=>!Array.isArray(r);var Qx=class{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){let t=this._cache.get(e);return t||console.warn(`[Assets] Asset id ${e} was not found in the Cache`),t}set(e,t){let n=Nt(e),i;for(let a=0;a<this.parsers.length;a++){let l=this.parsers[a];if(l.test(t)){i=l.getCacheableAssets(n,t);break}}i||(i={},n.forEach(a=>{i[a]=t}));let s=Object.keys(i),o={cacheKeys:s,keys:n};if(n.forEach(a=>{this._cacheMap.set(a,o)}),s.forEach(a=>{this._cache.has(a)&&this._cache.get(a)!==t&&console.warn("[Cache] already has key:",a),this._cache.set(a,i[a])}),t instanceof se){let a=t;n.forEach(l=>{a.baseTexture!==se.EMPTY.baseTexture&&Y.addToCache(a.baseTexture,l),se.addToCache(a,l)})}}remove(e){if(!this._cacheMap.has(e)){console.warn(`[Assets] Asset id ${e} was not found in the Cache`);return}let t=this._cacheMap.get(e);t.cacheKeys.forEach(n=>{this._cache.delete(n)}),t.keys.forEach(n=>{this._cacheMap.delete(n)})}get parsers(){return this._parsers}},Fn=new Qx;var Dm=class{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,t,n)=>(this._parsersValidated=!1,e[t]=n,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,t){let n={promise:null,parser:null};return n.promise=(()=>L(this,null,function*(){let i=null,s=null;if(t.loadParser&&(s=this._parserHash[t.loadParser],s||console.warn(`[Assets] specified load parser "${t.loadParser}" not found while loading ${e}`)),!s){for(let o=0;o<this.parsers.length;o++){let a=this.parsers[o];if(a.load&&a.test?.(e,t,this)){s=a;break}}if(!s)return console.warn(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}i=yield s.load(e,t,this),n.parser=s;for(let o=0;o<this.parsers.length;o++){let a=this.parsers[o];a.parse&&a.parse&&(yield a.testParse?.(i,t,this))&&(i=(yield a.parse(i,t,this))||i,n.parser=a)}return i}))(),n}load(e,t){return L(this,null,function*(){this._parsersValidated||this._validateParsers();let n=0,i={},s=Hi(e),o=Nt(e,u=>({alias:[u],src:u})),a=o.length,l=o.map(u=>L(this,null,function*(){let c=N.path.toAbsolute(u.src);if(!i[u.src])try{this.promiseCache[c]||(this.promiseCache[c]=this._getLoadPromiseAndParser(c,u)),i[u.src]=yield this.promiseCache[c].promise,t&&t(++n/a)}catch(h){throw delete this.promiseCache[c],delete i[u.src],new Error(`[Loader.load] Failed to load ${c}.
${h}`)}}));return yield Promise.all(l),s?i[o[0].src]:i})}unload(e){return L(this,null,function*(){let t=Nt(e,n=>({alias:[n],src:n})).map(n=>L(this,null,function*(){let i=N.path.toAbsolute(n.src),s=this.promiseCache[i];if(s){let o=yield s.promise;delete this.promiseCache[i],s.parser?.unload?.(o,n,this)}}));yield Promise.all(t)})}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name).reduce((e,t)=>(e[t.name]&&console.warn(`[Assets] loadParser name conflict "${t.name}"`),De(O({},e),{[t.name]:t})),{})}};var et=(r=>(r[r.Low=0]="Low",r[r.Normal=1]="Normal",r[r.High=2]="High",r))(et||{});var o4=".json",a4="application/json",Jx={extension:{type:S.LoadParser,priority:et.Low},name:"loadJson",test(r){return xr(r,a4)||St(r,o4)},load(r){return L(this,null,function*(){return yield(yield I.ADAPTER.fetch(r)).json()})}};M.add(Jx);var l4=".txt",u4="text/plain",eb={name:"loadTxt",extension:{type:S.LoadParser,priority:et.Low},test(r){return xr(r,u4)||St(r,l4)},load(r){return L(this,null,function*(){return yield(yield I.ADAPTER.fetch(r)).text()})}};M.add(eb);var c4=["normal","bold","100","200","300","400","500","600","700","800","900"],h4=[".ttf",".otf",".woff",".woff2"],d4=["font/ttf","font/otf","font/woff","font/woff2"],f4=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function tb(r){let e=N.path.extname(r),t=N.path.basename(r,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(s=>s.charAt(0).toUpperCase()+s.slice(1)),n=t.length>0;for(let s of t)if(!s.match(f4)){n=!1;break}let i=t.join(" ");return n||(i=`"${i.replace(/[\\"]/g,"\\$&")}"`),i}var p4=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function m4(r){return p4.test(r)?r:encodeURI(r)}var rb={extension:{type:S.LoadParser,priority:et.Low},name:"loadWebFont",test(r){return xr(r,d4)||St(r,h4)},load(r,e){return L(this,null,function*(){let t=I.ADAPTER.getFontFaceSet();if(t){let n=[],i=e.data?.family??tb(r),s=e.data?.weights?.filter(a=>c4.includes(a))??["normal"],o=e.data??{};for(let a=0;a<s.length;a++){let l=s[a],u=new FontFace(i,`url(${m4(r)})`,De(O({},o),{weight:l}));yield u.load(),t.add(u),n.push(u)}return n.length===1?n[0]:n}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null})},unload(r){(Array.isArray(r)?r:[r]).forEach(e=>I.ADAPTER.getFontFaceSet().delete(e))}};M.add(rb);var lR=0,nb,g4="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=",y4={id:"checkImageBitmap",code:`
    async function checkImageBitmap()
    {
        try
        {
            if (typeof createImageBitmap !== 'function') return false;

            const response = await fetch('${g4}');
            const imageBlob =  await response.blob();
            const imageBitmap = await createImageBitmap(imageBlob);

            return imageBitmap.width === 1 && imageBitmap.height === 1;
        }
        catch (e)
        {
            return false;
        }
    }
    checkImageBitmap().then((result) => { self.postMessage(result); });
    `},v4={id:"loadImageBitmap",code:`
    async function loadImageBitmap(url)
    {
        const response = await fetch(url);

        if (!response.ok)
        {
            throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \`
                + \`\${response.status} \${response.statusText}\`);
        }

        const imageBlob =  await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);

        return imageBitmap;
    }
    self.onmessage = async (event) =>
    {
        try
        {
            const imageBitmap = await loadImageBitmap(event.data.data[0]);

            self.postMessage({
                data: imageBitmap,
                uuid: event.data.uuid,
                id: event.data.id,
            }, [imageBitmap]);
        }
        catch(e)
        {
            self.postMessage({
                error: e,
                uuid: event.data.uuid,
                id: event.data.id,
            });
        }
    };`},ib,sb=class{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(e=>{let t=URL.createObjectURL(new Blob([y4.code],{type:"application/javascript"})),n=new Worker(t);n.addEventListener("message",i=>{n.terminate(),URL.revokeObjectURL(t),e(i.data)})}),this._isImageBitmapSupported)}loadImageBitmap(e){return this._run("loadImageBitmap",[e])}_initWorkers(){return L(this,null,function*(){this._initialized||(this._initialized=!0)})}getWorker(){nb===void 0&&(nb=navigator.hardwareConcurrency||4);let e=this.workerPool.pop();return!e&&this._createdWorkers<nb&&(ib||(ib=URL.createObjectURL(new Blob([v4.code],{type:"application/javascript"}))),this._createdWorkers++,e=new Worker(ib),e.addEventListener("message",t=>{this.complete(t.data),this.returnWorker(t.target),this.next()})),e}returnWorker(e){this.workerPool.push(e)}complete(e){e.error!==void 0?this.resolveHash[e.uuid].reject(e.error):this.resolveHash[e.uuid].resolve(e.data),this.resolveHash[e.uuid]=null}_run(e,t){return L(this,null,function*(){yield this._initWorkers();let n=new Promise((i,s)=>{this.queue.push({id:e,arguments:t,resolve:i,reject:s})});return this.next(),n})}next(){if(!this.queue.length)return;let e=this.getWorker();if(!e)return;let t=this.queue.pop(),n=t.id;this.resolveHash[lR]={resolve:t.resolve,reject:t.reject},e.postMessage({data:t.arguments,uuid:lR++,id:n})}},ob=new sb;function nn(r,e,t){r.resource.internal=!0;let n=new se(r),i=()=>{delete e.promiseCache[t],Fn.has(t)&&Fn.remove(t)};return n.baseTexture.once("destroyed",()=>{t in e.promiseCache&&(console.warn("[Assets] A BaseTexture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the BaseTexture."),i())}),n.once("destroyed",()=>{r.destroyed||(console.warn("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),i())}),n}var _4=[".jpeg",".jpg",".png",".webp",".avif"],x4=["image/jpeg","image/png","image/webp","image/avif"];function ab(r){return L(this,null,function*(){let e=yield I.ADAPTER.fetch(r);if(!e.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${r}: ${e.status} ${e.statusText}`);let t=yield e.blob();return yield createImageBitmap(t)})}var Gi={name:"loadTextures",extension:{type:S.LoadParser,priority:et.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(r){return xr(r,x4)||St(r,_4)},load(r,e,t){return L(this,null,function*(){let n=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap,i;n?this.config.preferWorkers&&(yield ob.isImageBitmapSupported())?i=yield ob.loadImageBitmap(r):i=yield ab(r):i=yield new Promise((a,l)=>{let u=new Image;u.crossOrigin=this.config.crossOrigin,u.src=r,u.complete?a(u):(u.onload=()=>a(u),u.onerror=c=>l(c))});let s=O({},e.data);s.resolution??(s.resolution=N.getResolutionOfUrl(r)),n&&s.resourceOptions?.ownsImageBitmap===void 0&&(s.resourceOptions=O({},s.resourceOptions),s.resourceOptions.ownsImageBitmap=!0);let o=new Y(i,s);return o.resource.src=r,nn(o,t,r)})},unload(r){r.destroy(!0)}};M.add(Gi);var b4=".svg",w4="image/svg+xml",lb={extension:{type:S.LoadParser,priority:et.High},name:"loadSVG",test(r){return xr(r,w4)||St(r,b4)},testParse(r){return L(this,null,function*(){return Vl.test(r)})},parse(r,e,t){return L(this,null,function*(){let n=new Vl(r,e?.data?.resourceOptions);yield n.load();let i=new Y(n,O({resolution:N.getResolutionOfUrl(r)},e?.data));return i.resource.src=e.src,nn(i,t,e.src)})},load(r,e){return L(this,null,function*(){return(yield I.ADAPTER.fetch(r)).text()})},unload:Gi.unload};M.add(lb);var E4=[".mp4",".m4v",".webm",".ogv"],T4=["video/mp4","video/webm","video/ogg"],ub={name:"loadVideo",extension:{type:S.LoadParser,priority:et.High},config:{defaultAutoPlay:!0},test(r){return xr(r,T4)||St(r,E4)},load(r,e,t){return L(this,null,function*(){let n,i=yield(yield I.ADAPTER.fetch(r)).blob(),s=URL.createObjectURL(i);try{let o=O({autoPlay:this.config.defaultAutoPlay},e?.data?.resourceOptions),a=new gh(s,o);yield a.load();let l=new Y(a,O({alphaMode:yield N.detectVideoAlphaMode(),resolution:N.getResolutionOfUrl(r)},e?.data));l.resource.src=r,n=nn(l,t,r),n.baseTexture.once("destroyed",()=>{URL.revokeObjectURL(s)})}catch(o){throw URL.revokeObjectURL(s),o}return n})},unload(r){r.destroy(!0)}};M.add(ub);var Sm=class{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,t)=>`${e}${this._bundleIdConnector}${t}`,extractAssetIdFromBundle:(e,t)=>t.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(t=>{this._preferredOrder.push(t),t.priority||(t.priority=Object.keys(t.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{let t=e;this._defaultSearchParams=Object.keys(t).map(n=>`${encodeURIComponent(n)}=${encodeURIComponent(t[n])}`).join("&")}}getAlias(e){let{alias:t,name:n,src:i,srcs:s}=e;return Nt(t||n||i||s,o=>typeof o=="string"?o:Array.isArray(o)?o.map(a=>a?.src??a?.srcs??a):o?.src||o?.srcs?o.src??o.srcs:o,!0)}addManifest(e){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(t=>{this.addBundle(t.name,t.assets)})}addBundle(e,t){let n=[];Array.isArray(t)?t.forEach(i=>{let s=i.src??i.srcs,o=i.alias??i.name,a;if(typeof o=="string"){let l=this._createBundleAssetId(e,o);n.push(l),a=[o,l]}else{let l=o.map(u=>this._createBundleAssetId(e,u));n.push(...l),a=[...o,...l]}this.add(De(O({},i),{alias:a,src:s}))}):Object.keys(t).forEach(i=>{let s=[i,this._createBundleAssetId(e,i)];if(typeof t[i]=="string")this.add({alias:s,src:t[i]});else if(Array.isArray(t[i]))this.add({alias:s,src:t[i]});else{let o=t[i],a=o.src??o.srcs;this.add(De(O({},o),{alias:s,src:Array.isArray(a)?a:[a]}))}n.push(...s)}),this._bundles[e]=n}add(e,t,n,i,s){let o=[];typeof e=="string"||Array.isArray(e)&&typeof e[0]=="string"?(N.deprecation("7.2.0",`Assets.add now uses an object instead of individual parameters.
Please use Assets.add({ alias, src, data, format, loadParser }) instead.`),o.push({alias:e,src:t,data:n,format:i,loadParser:s})):Array.isArray(e)?o.push(...e):o.push(e);let a;a=l=>{this.hasKey(l)&&console.warn(`[Resolver] already has key: ${l} overwriting`)},Nt(o).forEach(l=>{let{src:u,srcs:c}=l,{data:h,format:d,loadParser:f}=l,p=Nt(u||c).map(y=>typeof y=="string"?Cm(y):Array.isArray(y)?y:[y]),m=this.getAlias(l);Array.isArray(m)?m.forEach(a):a(m);let g=[];p.forEach(y=>{y.forEach(_=>{let v={};if(typeof _!="object"){v.src=_;for(let x=0;x<this._parsers.length;x++){let b=this._parsers[x];if(b.test(_)){v=b.parse(_);break}}}else h=_.data??h,d=_.format??d,f=_.loadParser??f,v=O(O({},v),_);if(!m)throw new Error(`[Resolver] alias is undefined for this asset: ${v.src}`);v=this.buildResolvedAsset(v,{aliases:m,data:h,format:d,loadParser:f}),g.push(v)})}),m.forEach(y=>{this._assetMap[y]=g})})}resolveBundle(e){let t=Hi(e);e=Nt(e);let n={};return e.forEach(i=>{let s=this._bundles[i];if(s){let o=this.resolve(s),a={};for(let l in o){let u=o[l];a[this._extractAssetIdFromBundle(i,l)]=u}n[i]=a}}),t?n[e[0]]:n}resolveUrl(e){let t=this.resolve(e);if(typeof e!="string"){let n={};for(let i in t)n[i]=t[i].src;return n}return t.src}resolve(e){let t=Hi(e);e=Nt(e);let n={};return e.forEach(i=>{if(!this._resolverHash[i])if(this._assetMap[i]){let s=this._assetMap[i],o=s[0],a=this._getPreferredOrder(s);a?.priority.forEach(l=>{a.params[l].forEach(u=>{let c=s.filter(h=>h[l]?h[l]===u:!1);c.length&&(s=c)})}),this._resolverHash[i]=s[0]??o}else this._resolverHash[i]=this.buildResolvedAsset({alias:[i],src:i},{});n[i]=this._resolverHash[i]}),t?n[e[0]]:n}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let t=0;t<e.length;t++){let n=e[0],i=this._preferredOrder.find(s=>s.params.format.includes(n.format));if(i)return i}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;let t=/\?/.test(e)?"&":"?";return`${e}${t}${this._defaultSearchParams}`}buildResolvedAsset(e,t){let{aliases:n,data:i,loadParser:s,format:o}=t;return(this._basePath||this._rootPath)&&(e.src=N.path.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=n??e.alias??[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data=O(O({},i||{}),e.data),e.loadParser=s??e.loadParser,e.format=o??N.path.extname(e.src).slice(1),e.srcs=e.src,e.name=e.alias,e}};var Im=class{constructor(){this._detections=[],this._initialized=!1,this.resolver=new Sm,this.loader=new Dm,this.cache=Fn,this._backgroundLoader=new Tm(this.loader),this._backgroundLoader.active=!0,this.reset()}init(){return L(this,arguments,function*(e={}){if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Asset.init()?");return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let s=e.manifest;typeof s=="string"&&(s=yield this.load(s)),this.resolver.addManifest(s)}let t=e.texturePreference?.resolution??1,n=typeof t=="number"?[t]:t,i=yield this._detectFormats({preferredFormats:e.texturePreference?.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:i,resolution:n}}),e.preferences&&this.setPreferences(e.preferences)})}add(e,t,n,i,s){this.resolver.add(e,t,n,i,s)}load(e,t){return L(this,null,function*(){this._initialized||(yield this.init());let n=Hi(e),i=Nt(e).map(a=>{if(typeof a!="string"){let l=this.resolver.getAlias(a);return l.some(u=>!this.resolver.hasKey(u))&&this.add(a),Array.isArray(l)?l[0]:l}return this.resolver.hasKey(a)||this.add({alias:a,src:a}),a}),s=this.resolver.resolve(i),o=yield this._mapLoadToResolve(s,t);return n?o[i[0]]:o})}addBundle(e,t){this.resolver.addBundle(e,t)}loadBundle(e,t){return L(this,null,function*(){this._initialized||(yield this.init());let n=!1;typeof e=="string"&&(n=!0,e=[e]);let i=this.resolver.resolveBundle(e),s={},o=Object.keys(i),a=0,l=0,u=()=>{t?.(++a/l)},c=o.map(h=>{let d=i[h];return l+=Object.keys(d).length,this._mapLoadToResolve(d,u).then(f=>{s[h]=f})});return yield Promise.all(c),n?s[e[0]]:s})}backgroundLoad(e){return L(this,null,function*(){this._initialized||(yield this.init()),typeof e=="string"&&(e=[e]);let t=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(t))})}backgroundLoadBundle(e){return L(this,null,function*(){this._initialized||(yield this.init()),typeof e=="string"&&(e=[e]);let t=this.resolver.resolveBundle(e);Object.values(t).forEach(n=>{this._backgroundLoader.add(Object.values(n))})})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return Fn.get(e);let t={};for(let n=0;n<e.length;n++)t[n]=Fn.get(e[n]);return t}_mapLoadToResolve(e,t){return L(this,null,function*(){let n=Object.values(e),i=Object.keys(e);this._backgroundLoader.active=!1;let s=yield this.loader.load(n,t);this._backgroundLoader.active=!0;let o={};return n.forEach((a,l)=>{let u=s[a.src],c=[a.src];a.alias&&c.push(...a.alias),o[i[l]]=u,Fn.set(c,u)}),o})}unload(e){return L(this,null,function*(){this._initialized||(yield this.init());let t=Nt(e).map(i=>typeof i!="string"?i.src:i),n=this.resolver.resolve(t);yield this._unloadFromResolved(n)})}unloadBundle(e){return L(this,null,function*(){this._initialized||(yield this.init()),e=Nt(e);let t=this.resolver.resolveBundle(e),n=Object.keys(t).map(i=>this._unloadFromResolved(t[i]));yield Promise.all(n)})}_unloadFromResolved(e){return L(this,null,function*(){let t=Object.values(e);t.forEach(n=>{Fn.remove(n.src)}),yield this.loader.unload(t)})}_detectFormats(e){return L(this,null,function*(){let t=[];e.preferredFormats&&(t=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(let n of e.detections)e.skipDetections||(yield n.test())?t=yield n.add(t):e.skipDetections||(t=yield n.remove(t));return t=t.filter((n,i)=>t.indexOf(n)===i),t})}get detections(){return this._detections}get preferWorkers(){return Gi.config.preferWorkers}set preferWorkers(e){N.deprecation("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:e})}setPreferences(e){this.loader.parsers.forEach(t=>{t.config&&Object.keys(t.config).filter(n=>n in e).forEach(n=>{t.config[n]=e[n]})})}},ks=new Im;M.handleByList(S.LoadParser,ks.loader.parsers).handleByList(S.ResolveParser,ks.resolver.parsers).handleByList(S.CacheParser,ks.cache.parsers).handleByList(S.DetectionParser,ks.detections);var cb={extension:S.CacheParser,test:r=>Array.isArray(r)&&r.every(e=>e instanceof se),getCacheableAssets:(r,e)=>{let t={};return r.forEach(n=>{e.forEach((i,s)=>{t[n+(s===0?"":s+1)]=i})}),t}};M.add(cb);function Am(r){return L(this,null,function*(){if("Image"in globalThis)return new Promise(e=>{let t=new Image;t.onload=()=>{e(!0)},t.onerror=()=>{e(!1)},t.src=r});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{let e=yield(yield fetch(r)).blob();yield createImageBitmap(e)}catch{return!1}return!0}return!1})}var hb={extension:{type:S.DetectionParser,priority:1},test:()=>L(void 0,null,function*(){return Am("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=")}),add:r=>L(void 0,null,function*(){return[...r,"avif"]}),remove:r=>L(void 0,null,function*(){return r.filter(e=>e!=="avif")})};M.add(hb);var db={extension:{type:S.DetectionParser,priority:0},test:()=>L(void 0,null,function*(){return Am("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=")}),add:r=>L(void 0,null,function*(){return[...r,"webp"]}),remove:r=>L(void 0,null,function*(){return r.filter(e=>e!=="webp")})};M.add(db);var uR=["png","jpg","jpeg"],fb={extension:{type:S.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:r=>L(void 0,null,function*(){return[...r,...uR]}),remove:r=>L(void 0,null,function*(){return r.filter(e=>!uR.includes(e))})};M.add(fb);var C4="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function Hl(r){return C4?!1:document.createElement("video").canPlayType(r)!==""}var pb={extension:{type:S.DetectionParser,priority:0},test:()=>L(void 0,null,function*(){return Hl("video/webm")}),add:r=>L(void 0,null,function*(){return[...r,"webm"]}),remove:r=>L(void 0,null,function*(){return r.filter(e=>e!=="webm")})};M.add(pb);var mb={extension:{type:S.DetectionParser,priority:0},test:()=>L(void 0,null,function*(){return Hl("video/mp4")}),add:r=>L(void 0,null,function*(){return[...r,"mp4","m4v"]}),remove:r=>L(void 0,null,function*(){return r.filter(e=>e!=="mp4"&&e!=="m4v")})};M.add(mb);var gb={extension:{type:S.DetectionParser,priority:0},test:()=>L(void 0,null,function*(){return Hl("video/ogg")}),add:r=>L(void 0,null,function*(){return[...r,"ogv"]}),remove:r=>L(void 0,null,function*(){return r.filter(e=>e!=="ogv")})};M.add(gb);var yb={extension:S.ResolveParser,test:Gi.test,parse:r=>({resolution:parseFloat(I.RETINA_PREFIX.exec(r)?.[1]??"1"),format:N.path.extname(r).slice(1),src:r})};M.add(yb);var ar=(r=>(r[r.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",r[r.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",r[r.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",r[r.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",r[r.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",r[r.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",r[r.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",r[r.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",r[r.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",r[r.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",r[r.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",r[r.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",r[r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",r[r.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",r[r.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",r[r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",r[r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",r[r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",r[r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",r[r.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",r[r.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",r[r.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",r[r.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",r[r.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",r))(ar||{}),Bs={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35986:1,34798:1,37808:1};var $i,Gl;function cR(){Gl={s3tc:$i.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:$i.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:$i.getExtension("WEBGL_compressed_texture_etc"),etc1:$i.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:$i.getExtension("WEBGL_compressed_texture_pvrtc")||$i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:$i.getExtension("WEBGL_compressed_texture_atc"),astc:$i.getExtension("WEBGL_compressed_texture_astc")}}var vb={extension:{type:S.DetectionParser,priority:2},test:()=>L(void 0,null,function*(){let r=I.ADAPTER.createCanvas().getContext("webgl");return r?($i=r,!0):(console.warn("WebGL not available for compressed textures."),!1)}),add:r=>L(void 0,null,function*(){Gl||cR();let e=[];for(let t in Gl)Gl[t]&&e.push(t);return[...e,...r]}),remove:r=>L(void 0,null,function*(){return Gl||cR(),r.filter(e=>!(e in Gl))})};M.add(vb);var $l=class extends Rn{constructor(e,t={width:1,height:1,autoLoad:!0}){let n,i;typeof e=="string"?(n=e,i=new Uint8Array):(n=null,i=e),super(i,t),this.origin=n,this.buffer=i?new As(i):null,this._load=null,this.loaded=!1,this.origin!==null&&t.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(e){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(e=>e.blob()).then(e=>e.arrayBuffer()).then(e=>(this.data=new Uint32Array(e),this.buffer=new As(e),this.loaded=!0,this.onBlobLoaded(e),this.update(),this)),this._load)}};var zi=class r extends $l{constructor(e,t){super(e,t),this.format=t.format,this.levels=t.levels||1,this._width=t.width,this._height=t.height,this._extension=r._formatToExtension(this.format),(t.levelBuffers||this.buffer)&&(this._levelBuffers=t.levelBuffers||r._createLevelBuffers(e instanceof Uint8Array?e:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(e,t,n){let i=e.gl;if(!e.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;i.pixelStorei(i.UNPACK_ALIGNMENT,4);for(let s=0,o=this.levels;s<o;s++){let{levelID:a,levelWidth:l,levelHeight:u,levelBuffer:c}=this._levelBuffers[s];i.compressedTexImage2D(i.TEXTURE_2D,a,this.format,l,u,0,c)}return!0}onBlobLoaded(){this._levelBuffers=r._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(e){if(e>=33776&&e<=33779)return"s3tc";if(e>=37488&&e<=37497)return"etc";if(e>=35840&&e<=35843)return"pvrtc";if(e>=36196)return"etc1";if(e>=35986&&e<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")}static _createLevelBuffers(e,t,n,i,s,o,a){let l=new Array(n),u=e.byteOffset,c=o,h=a,d=c+i-1&~(i-1),f=h+s-1&~(s-1),p=d*f*Bs[t];for(let m=0;m<n;m++)l[m]={levelID:m,levelWidth:n>1?c:d,levelHeight:n>1?h:f,levelBuffer:new Uint8Array(e.buffer,u,p)},u+=p,c=c>>1||1,h=h>>1||1,d=c+i-1&~(i-1),f=h+s-1&~(s-1),p=d*f*Bs[t];return l}};var _b=4,Mm=124,D4=32,hR=20,S4=542327876,Rm={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},I4={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},Pm={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},A4=1,M4=2,R4=4,P4=64,O4=512,N4=131072,F4=827611204,L4=861165636,k4=894720068,B4=808540228,U4=4,j4={[F4]:ar.COMPRESSED_RGBA_S3TC_DXT1_EXT,[L4]:ar.COMPRESSED_RGBA_S3TC_DXT3_EXT,[k4]:ar.COMPRESSED_RGBA_S3TC_DXT5_EXT},V4={70:ar.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:ar.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:ar.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:ar.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:ar.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:ar.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:ar.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:ar.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:ar.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT};function Om(r){let e=new Uint32Array(r);if(e[0]!==S4)throw new Error("Invalid DDS file magic word");let t=new Uint32Array(r,0,Mm/Uint32Array.BYTES_PER_ELEMENT),n=t[Rm.HEIGHT],i=t[Rm.WIDTH],s=t[Rm.MIPMAP_COUNT],o=new Uint32Array(r,Rm.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,D4/Uint32Array.BYTES_PER_ELEMENT),a=o[A4];if(a&R4){let l=o[I4.FOURCC];if(l!==B4){let _=j4[l],v=_b+Mm,x=new Uint8Array(r,v);return[new zi(x,{format:_,width:i,height:n,levels:s})]}let u=_b+Mm,c=new Uint32Array(e.buffer,u,hR/Uint32Array.BYTES_PER_ELEMENT),h=c[Pm.DXGI_FORMAT],d=c[Pm.RESOURCE_DIMENSION],f=c[Pm.MISC_FLAG],p=c[Pm.ARRAY_SIZE],m=V4[h];if(m===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${h}`);if(f===U4)throw new Error("DDSParser does not support cubemap textures");if(d===6)throw new Error("DDSParser does not supported 3D texture data");let g=new Array,y=_b+Mm+hR;if(p===1)g.push(new Uint8Array(r,y));else{let _=Bs[m],v=0,x=i,b=n;for(let E=0;E<s;E++){let w=Math.max(1,x+3&-4),T=Math.max(1,b+3&-4),k=w*T*_;v+=k,x=x>>>1,b=b>>>1}let C=y;for(let E=0;E<p;E++)g.push(new Uint8Array(r,C,v)),C+=v}return g.map(_=>new zi(_,{format:m,width:i,height:n,levels:s}))}throw a&P4?new Error("DDSParser does not support uncompressed texture data."):a&O4?new Error("DDSParser does not supported YUV uncompressed texture data."):a&N4?new Error("DDSParser does not support single-channel (lumninance) texture data!"):a&M4?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}var dR=[171,75,84,88,32,49,49,187,13,10,26,10],H4=67305985,Ln={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},xb=64,Nm={[$.UNSIGNED_BYTE]:1,[$.UNSIGNED_SHORT]:2,[$.INT]:4,[$.UNSIGNED_INT]:4,[$.FLOAT]:4,[$.HALF_FLOAT]:8},bb={[F.RGBA]:4,[F.RGB]:3,[F.RG]:2,[F.RED]:1,[F.LUMINANCE]:1,[F.LUMINANCE_ALPHA]:2,[F.ALPHA]:1},wb={[$.UNSIGNED_SHORT_4_4_4_4]:2,[$.UNSIGNED_SHORT_5_5_5_1]:2,[$.UNSIGNED_SHORT_5_6_5]:2};function Fm(r,e,t=!1){let n=new DataView(e);if(!G4(r,n))return null;let i=n.getUint32(Ln.ENDIANNESS,!0)===H4,s=n.getUint32(Ln.GL_TYPE,i),o=n.getUint32(Ln.GL_FORMAT,i),a=n.getUint32(Ln.GL_INTERNAL_FORMAT,i),l=n.getUint32(Ln.PIXEL_WIDTH,i),u=n.getUint32(Ln.PIXEL_HEIGHT,i)||1,c=n.getUint32(Ln.PIXEL_DEPTH,i)||1,h=n.getUint32(Ln.NUMBER_OF_ARRAY_ELEMENTS,i)||1,d=n.getUint32(Ln.NUMBER_OF_FACES,i),f=n.getUint32(Ln.NUMBER_OF_MIPMAP_LEVELS,i),p=n.getUint32(Ln.BYTES_OF_KEY_VALUE_DATA,i);if(u===0||c!==1)throw new Error("Only 2D textures are supported");if(d!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(h!==1)throw new Error("WebGL does not support array textures");let m=4,g=4,y=l+3&-4,_=u+3&-4,v=new Array(h),x=l*u;s===0&&(x=y*_);let b;if(s!==0?Nm[s]?b=Nm[s]*bb[o]:b=wb[s]:b=Bs[a],b===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");let C=t?z4(n,p,i):null,E=x*b,w=l,T=u,k=y,P=_,R=xb+p;for(let D=0;D<f;D++){let A=n.getUint32(R,i),X=R+4;for(let K=0;K<h;K++){let U=v[K];U||(U=v[K]=new Array(f)),U[D]={levelID:D,levelWidth:f>1||s!==0?w:k,levelHeight:f>1||s!==0?T:P,levelBuffer:new Uint8Array(e,X,E)},X+=E}R+=A+4,R=R%4!==0?R+4-R%4:R,w=w>>1||1,T=T>>1||1,k=w+m-1&~(m-1),P=T+g-1&~(g-1),E=k*P*b}return s!==0?{uncompressed:v.map(D=>{let A=D[0].levelBuffer,X=!1;return s===$.FLOAT?A=new Float32Array(D[0].levelBuffer.buffer,D[0].levelBuffer.byteOffset,D[0].levelBuffer.byteLength/4):s===$.UNSIGNED_INT?(X=!0,A=new Uint32Array(D[0].levelBuffer.buffer,D[0].levelBuffer.byteOffset,D[0].levelBuffer.byteLength/4)):s===$.INT&&(X=!0,A=new Int32Array(D[0].levelBuffer.buffer,D[0].levelBuffer.byteOffset,D[0].levelBuffer.byteLength/4)),{resource:new Rn(A,{width:D[0].levelWidth,height:D[0].levelHeight}),type:s,format:X?$4(o):o}}),kvData:C}:{compressed:v.map(D=>new zi(null,{format:a,width:l,height:u,levels:f,levelBuffers:D})),kvData:C}}function G4(r,e){for(let t=0;t<dR.length;t++)if(e.getUint8(t)!==dR[t])return console.error(`${r} is not a valid *.ktx file!`),!1;return!0}function $4(r){switch(r){case F.RGBA:return F.RGBA_INTEGER;case F.RGB:return F.RGB_INTEGER;case F.RG:return F.RG_INTEGER;case F.RED:return F.RED_INTEGER;default:return r}}function z4(r,e,t){let n=new Map,i=0;for(;i<e;){let s=r.getUint32(xb+i,t),o=xb+i+4,a=3-(s+3)%4;if(s===0||s>e-i){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let l=0;for(;l<s&&r.getUint8(o+l)!==0;l++);if(l===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}let u=new TextDecoder().decode(new Uint8Array(r.buffer,o,l)),c=new DataView(r.buffer,o+l+1,s-l-1);n.set(u,c),i+=4+s+a}return n}var Eb={extension:{type:S.LoadParser,priority:et.High},name:"loadDDS",test(r){return St(r,".dds")},load(r,e,t){return L(this,null,function*(){let n=yield(yield I.ADAPTER.fetch(r)).arrayBuffer(),i=Om(n).map(s=>{let o=new Y(s,O({mipmap:Rt.OFF,alphaMode:Ke.NO_PREMULTIPLIED_ALPHA,resolution:N.getResolutionOfUrl(r)},e.data));return nn(o,t,r)});return i.length===1?i[0]:i})},unload(r){Array.isArray(r)?r.forEach(e=>e.destroy(!0)):r.destroy(!0)}};M.add(Eb);var Tb={extension:{type:S.LoadParser,priority:et.High},name:"loadKTX",test(r){return St(r,".ktx")},load(r,e,t){return L(this,null,function*(){let n=yield(yield I.ADAPTER.fetch(r)).arrayBuffer(),{compressed:i,uncompressed:s,kvData:o}=Fm(r,n),a=i??s,l=O({mipmap:Rt.OFF,alphaMode:Ke.NO_PREMULTIPLIED_ALPHA,resolution:N.getResolutionOfUrl(r)},e.data),u=a.map(c=>{a===s&&Object.assign(l,{type:c.type,format:c.format});let h=c.resource??c,d=new Y(h,l);return d.ktxKeyValueData=o,nn(d,t,r)});return u.length===1?u[0]:u})},unload(r){Array.isArray(r)?r.forEach(e=>e.destroy(!0)):r.destroy(!0)}};M.add(Tb);var Cb={extension:S.ResolveParser,test:r=>{let e=N.path.extname(r).slice(1);return["basis","ktx","dds"].includes(e)},parse:r=>{let e=N.path.extname(r).slice(1);if(e==="ktx"){let t=[".s3tc.ktx",".s3tc_sRGB.ktx",".etc.ktx",".etc1.ktx",".pvrt.ktx",".atc.ktx",".astc.ktx"];if(t.some(n=>r.endsWith(n)))return{resolution:parseFloat(I.RETINA_PREFIX.exec(r)?.[1]??"1"),format:t.find(n=>r.endsWith(n)),src:r}}return{resolution:parseFloat(I.RETINA_PREFIX.exec(r)?.[1]??"1"),format:e,src:r}}};M.add(Cb);var Lm=new Z,W4=4,fR=class Sh{constructor(e){this.renderer=e,this._rendererPremultipliedAlpha=!1}contextChange(){let e=this.renderer?.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}image(e,t,n,i){return L(this,null,function*(){let s=new Image;return s.src=yield this.base64(e,t,n,i),s})}base64(e,t,n,i){return L(this,null,function*(){let s=this.canvas(e,i);if(s.toBlob!==void 0)return new Promise((o,a)=>{s.toBlob(l=>{if(!l){a(new Error("ICanvas.toBlob failed!"));return}let u=new FileReader;u.onload=()=>o(u.result),u.onerror=a,u.readAsDataURL(l)},t,n)});if(s.toDataURL!==void 0)return s.toDataURL(t,n);if(s.convertToBlob!==void 0){let o=yield s.convertToBlob({type:t,quality:n});return new Promise((a,l)=>{let u=new FileReader;u.onload=()=>a(u.result),u.onerror=l,u.readAsDataURL(o)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")})}canvas(e,t){let{pixels:n,width:i,height:s,flipY:o,premultipliedAlpha:a}=this._rawPixels(e,t);o&&Sh._flipY(n,i,s),a&&Sh._unpremultiplyAlpha(n);let l=new N.CanvasRenderTarget(i,s,1),u=new ImageData(new Uint8ClampedArray(n.buffer),i,s);return l.context.putImageData(u,0,0),l.canvas}pixels(e,t){let{pixels:n,width:i,height:s,flipY:o,premultipliedAlpha:a}=this._rawPixels(e,t);return o&&Sh._flipY(n,i,s),a&&Sh._unpremultiplyAlpha(n),n}_rawPixels(e,t){let n=this.renderer;if(!n)throw new Error("The Extract has already been destroyed");let i,s=!1,o=!1,a,l=!1;e&&(e instanceof rn?a=e:(a=n.generateTexture(e,{region:t,resolution:n.resolution,multisample:n.multisample}),l=!0,t&&(Lm.width=t.width,Lm.height=t.height,t=Lm)));let u=n.gl;if(a){if(i=a.baseTexture.resolution,t=t??a.frame,s=!1,o=a.baseTexture.alphaMode>0&&a.baseTexture.format===F.RGBA,!l){n.renderTexture.bind(a);let f=a.framebuffer.glFramebuffers[n.CONTEXT_UID];f.blitFramebuffer&&n.framebuffer.bind(f.blitFramebuffer)}}else i=n.resolution,t||(t=Lm,t.width=n.width/i,t.height=n.height/i),s=!0,o=this._rendererPremultipliedAlpha,n.renderTexture.bind();let c=Math.max(Math.round(t.width*i),1),h=Math.max(Math.round(t.height*i),1),d=new Uint8Array(W4*c*h);return u.readPixels(Math.round(t.x*i),Math.round(t.y*i),c,h,u.RGBA,u.UNSIGNED_BYTE,d),l&&a?.destroy(!0),{pixels:d,width:c,height:h,flipY:s,premultipliedAlpha:o}}destroy(){this.renderer=null}static _flipY(e,t,n){let i=t<<2,s=n>>1,o=new Uint8Array(i);for(let a=0;a<s;a++){let l=a*i,u=(n-a-1)*i;o.set(e.subarray(l,l+i)),e.copyWithin(l,u,u+i),e.set(o,u)}}static _unpremultiplyAlpha(e){e instanceof Uint8ClampedArray&&(e=new Uint8Array(e.buffer));let t=e.length;for(let n=0;n<t;n+=4){let i=e[n+3];if(i!==0){let s=255.001/i;e[n]=e[n]*s+.5,e[n+1]=e[n+1]*s+.5,e[n+2]=e[n+2]*s+.5}}}};fR.extension={name:"extract",type:S.RendererSystem};var pR=fR;M.add(pR);var Vo={build(r){let e=r.points,t,n,i,s,o,a;if(r.type===Le.CIRC){let p=r.shape;t=p.x,n=p.y,o=a=p.radius,i=s=0}else if(r.type===Le.ELIP){let p=r.shape;t=p.x,n=p.y,o=p.width,a=p.height,i=s=0}else{let p=r.shape,m=p.width/2,g=p.height/2;t=p.x+m,n=p.y+g,o=a=Math.max(0,Math.min(p.radius,Math.min(m,g))),i=m-o,s=g-a}if(!(o>=0&&a>=0&&i>=0&&s>=0)){e.length=0;return}let l=Math.ceil(2.3*Math.sqrt(o+a)),u=l*8+(i?4:0)+(s?4:0);if(e.length=u,u===0)return;if(l===0){e.length=8,e[0]=e[6]=t+i,e[1]=e[3]=n+s,e[2]=e[4]=t-i,e[5]=e[7]=n-s;return}let c=0,h=l*4+(i?2:0)+2,d=h,f=u;{let p=i+o,m=s,g=t+p,y=t-p,_=n+m;if(e[c++]=g,e[c++]=_,e[--h]=_,e[--h]=y,s){let v=n-m;e[d++]=y,e[d++]=v,e[--f]=v,e[--f]=g}}for(let p=1;p<l;p++){let m=Math.PI/2*(p/l),g=i+Math.cos(m)*o,y=s+Math.sin(m)*a,_=t+g,v=t-g,x=n+y,b=n-y;e[c++]=_,e[c++]=x,e[--h]=x,e[--h]=v,e[d++]=v,e[d++]=b,e[--f]=b,e[--f]=_}{let p=i,m=s+a,g=t+p,y=t-p,_=n+m,v=n-m;e[c++]=g,e[c++]=_,e[--f]=v,e[--f]=g,i&&(e[c++]=y,e[c++]=_,e[--f]=v,e[--f]=y)}},triangulate(r,e){let t=r.points,n=e.points,i=e.indices;if(t.length===0)return;let s=n.length/2,o=s,a,l;if(r.type!==Le.RREC){let c=r.shape;a=c.x,l=c.y}else{let c=r.shape;a=c.x+c.width/2,l=c.y+c.height/2}let u=r.matrix;n.push(r.matrix?u.a*a+u.c*l+u.tx:a,r.matrix?u.b*a+u.d*l+u.ty:l),s++,n.push(t[0],t[1]);for(let c=2;c<t.length;c+=2)n.push(t[c],t[c+1]),i.push(s++,o,s);i.push(o+1,o,s)}};function mR(r,e=!1){let t=r.length;if(t<6)return;let n=0;for(let i=0,s=r[t-2],o=r[t-1];i<t;i+=2){let a=r[i],l=r[i+1];n+=(a-s)*(l+o),s=a,o=l}if(!e&&n>0||e&&n<=0){let i=t/2;for(let s=i+i%2;s<t;s+=2){let o=t-s-2,a=t-s-1,l=s,u=s+1;[r[o],r[l]]=[r[l],r[o]],[r[a],r[u]]=[r[u],r[a]]}}}var Ih={build(r){r.points=r.shape.points.slice()},triangulate(r,e){let t=r.points,n=r.holes,i=e.points,s=e.indices;if(t.length>=6){mR(t,!1);let o=[];for(let u=0;u<n.length;u++){let c=n[u];mR(c.points,!0),o.push(t.length/2),t=t.concat(c.points)}let a=N.earcut(t,o,2);if(!a)return;let l=i.length/2;for(let u=0;u<a.length;u+=3)s.push(a[u]+l),s.push(a[u+1]+l),s.push(a[u+2]+l);for(let u=0;u<t.length;u++)i.push(t[u])}}};var Db={build(r){let e=r.shape,t=e.x,n=e.y,i=e.width,s=e.height,o=r.points;o.length=0,i>=0&&s>=0&&o.push(t,n,t+i,n,t+i,n+s,t,n+s)},triangulate(r,e){let t=r.points,n=e.points;if(t.length===0)return;let i=n.length/2;n.push(t[0],t[1],t[2],t[3],t[6],t[7],t[4],t[5]),e.indices.push(i,i+1,i+2,i+1,i+2,i+3)}};var Sb={build(r){Vo.build(r)},triangulate(r,e){Vo.triangulate(r,e)}};var zt=(r=>(r.MITER="miter",r.BEVEL="bevel",r.ROUND="round",r))(zt||{}),sn=(r=>(r.BUTT="butt",r.ROUND="round",r.SQUARE="square",r))(sn||{}),on={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(r,e=20){if(!this.adaptive||!r||isNaN(r))return e;let t=Math.ceil(r/this.maxLength);return t<this.minSegments?t=this.minSegments:t>this.maxSegments&&(t=this.maxSegments),t}};var Ho=class{static curveTo(e,t,n,i,s,o){let a=o[o.length-2],l=o[o.length-1]-t,u=a-e,c=i-t,h=n-e,d=Math.abs(l*h-u*c);if(d<1e-8||s===0)return(o[o.length-2]!==e||o[o.length-1]!==t)&&o.push(e,t),null;let f=l*l+u*u,p=c*c+h*h,m=l*c+u*h,g=s*Math.sqrt(f)/d,y=s*Math.sqrt(p)/d,_=g*m/f,v=y*m/p,x=g*h+y*u,b=g*c+y*l,C=u*(y+_),E=l*(y+_),w=h*(g+v),T=c*(g+v),k=Math.atan2(E-b,C-x),P=Math.atan2(T-b,w-x);return{cx:x+e,cy:b+t,radius:s,startAngle:k,endAngle:P,anticlockwise:u*c>h*l}}static arc(e,t,n,i,s,o,a,l,u){let c=a-o,h=on._segmentsCount(Math.abs(c)*s,Math.ceil(Math.abs(c)/Rs)*40),d=c/(h*2),f=d*2,p=Math.cos(d),m=Math.sin(d),g=h-1,y=g%1/g;for(let _=0;_<=g;++_){let v=_+y*_,x=d+o+f*v,b=Math.cos(x),C=-Math.sin(x);u.push((p*b+m*C)*s+n,(p*-C+m*b)*s+i)}}};var zl=class{constructor(){this.reset()}begin(e,t,n){this.reset(),this.style=e,this.start=t,this.attribStart=n}end(e,t){this.attribSize=t-this.attribStart,this.size=e-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}};var Wl=class r{static curveLength(e,t,n,i,s,o,a,l){let u=0,c=0,h=0,d=0,f=0,p=0,m=0,g=0,y=0,_=0,v=0,x=e,b=t;for(let C=1;C<=10;++C)c=C/10,h=c*c,d=h*c,f=1-c,p=f*f,m=p*f,g=m*e+3*p*c*n+3*f*h*s+d*a,y=m*t+3*p*c*i+3*f*h*o+d*l,_=x-g,v=b-y,x=g,b=y,u+=Math.sqrt(_*_+v*v);return u}static curveTo(e,t,n,i,s,o,a){let l=a[a.length-2],u=a[a.length-1];a.length-=2;let c=on._segmentsCount(r.curveLength(l,u,e,t,n,i,s,o)),h=0,d=0,f=0,p=0,m=0;a.push(l,u);for(let g=1,y=0;g<=c;++g)y=g/c,h=1-y,d=h*h,f=d*h,p=y*y,m=p*y,a.push(f*l+3*d*y*e+3*h*p*n+m*s,f*u+3*d*y*t+3*h*p*i+m*o)}};function gR(r,e,t,n,i,s,o,a){let l=r-t*i,u=e-n*i,c=r+t*s,h=e+n*s,d,f;o?(d=n,f=-t):(d=-n,f=t);let p=l+d,m=u+f,g=c+d,y=h+f;return a.push(p,m,g,y),2}function Go(r,e,t,n,i,s,o,a){let l=t-r,u=n-e,c=Math.atan2(l,u),h=Math.atan2(i-r,s-e);a&&c<h?c+=Math.PI*2:!a&&c>h&&(h+=Math.PI*2);let d=c,f=h-c,p=Math.abs(f),m=Math.sqrt(l*l+u*u),g=(15*p*Math.sqrt(m)/Math.PI>>0)+1,y=f/g;if(d+=y,a){o.push(r,e,t,n);for(let _=1,v=d;_<g;_++,v+=y)o.push(r,e,r+Math.sin(v)*m,e+Math.cos(v)*m);o.push(r,e,i,s)}else{o.push(t,n,r,e);for(let _=1,v=d;_<g;_++,v+=y)o.push(r+Math.sin(v)*m,e+Math.cos(v)*m,r,e);o.push(i,s,r,e)}return g*2}function X4(r,e){let t=r.shape,n=r.points||t.points.slice(),i=e.closePointEps;if(n.length===0)return;let s=r.lineStyle,o=new oe(n[0],n[1]),a=new oe(n[n.length-2],n[n.length-1]),l=t.type!==Le.POLY||t.closeStroke,u=Math.abs(o.x-a.x)<i&&Math.abs(o.y-a.y)<i;if(l){n=n.slice(),u&&(n.pop(),n.pop(),a.set(n[n.length-2],n[n.length-1]));let U=(o.x+a.x)*.5,B=(a.y+o.y)*.5;n.unshift(U,B),n.push(U,B)}let c=e.points,h=n.length/2,d=n.length,f=c.length/2,p=s.width/2,m=p*p,g=s.miterLimit*s.miterLimit,y=n[0],_=n[1],v=n[2],x=n[3],b=0,C=0,E=-(_-x),w=y-v,T=0,k=0,P=Math.sqrt(E*E+w*w);E/=P,w/=P,E*=p,w*=p;let R=s.alignment,D=(1-R)*2,A=R*2;l||(s.cap===sn.ROUND?d+=Go(y-E*(D-A)*.5,_-w*(D-A)*.5,y-E*D,_-w*D,y+E*A,_+w*A,c,!0)+2:s.cap===sn.SQUARE&&(d+=gR(y,_,E,w,D,A,!0,c))),c.push(y-E*D,_-w*D,y+E*A,_+w*A);for(let U=1;U<h-1;++U){y=n[(U-1)*2],_=n[(U-1)*2+1],v=n[U*2],x=n[U*2+1],b=n[(U+1)*2],C=n[(U+1)*2+1],E=-(_-x),w=y-v,P=Math.sqrt(E*E+w*w),E/=P,w/=P,E*=p,w*=p,T=-(x-C),k=v-b,P=Math.sqrt(T*T+k*k),T/=P,k/=P,T*=p,k*=p;let B=v-y,z=_-x,H=v-b,be=C-x,Ce=B*H+z*be,qe=z*H-be*B,Te=qe<0;if(Math.abs(qe)<.001*Math.abs(Ce)){c.push(v-E*D,x-w*D,v+E*A,x+w*A),Ce>=0&&(s.join===zt.ROUND?d+=Go(v,x,v-E*D,x-w*D,v-T*D,x-k*D,c,!1)+4:d+=2,c.push(v-T*A,x-k*A,v+T*D,x+k*D));continue}let $e=(-E+y)*(-w+x)-(-E+v)*(-w+_),cr=(-T+b)*(-k+x)-(-T+v)*(-k+C),Zt=(B*cr-H*$e)/qe,hr=(be*$e-z*cr)/qe,gt=(Zt-v)*(Zt-v)+(hr-x)*(hr-x),ht=v+(Zt-v)*D,yt=x+(hr-x)*D,kt=v-(Zt-v)*A,Kt=x-(hr-x)*A,fu=Math.min(B*B+z*z,H*H+be*be),Hw=Te?D:A,oO=fu+Hw*Hw*m,aO=gt<=oO,id=s.join;if(id===zt.MITER&&gt/m>g&&(id=zt.BEVEL),aO)switch(id){case zt.MITER:{c.push(ht,yt,kt,Kt);break}case zt.BEVEL:{Te?c.push(ht,yt,v+E*A,x+w*A,ht,yt,v+T*A,x+k*A):c.push(v-E*D,x-w*D,kt,Kt,v-T*D,x-k*D,kt,Kt),d+=2;break}case zt.ROUND:{Te?(c.push(ht,yt,v+E*A,x+w*A),d+=Go(v,x,v+E*A,x+w*A,v+T*A,x+k*A,c,!0)+4,c.push(ht,yt,v+T*A,x+k*A)):(c.push(v-E*D,x-w*D,kt,Kt),d+=Go(v,x,v-E*D,x-w*D,v-T*D,x-k*D,c,!1)+4,c.push(v-T*D,x-k*D,kt,Kt));break}}else{switch(c.push(v-E*D,x-w*D,v+E*A,x+w*A),id){case zt.MITER:{Te?c.push(kt,Kt,kt,Kt):c.push(ht,yt,ht,yt),d+=2;break}case zt.ROUND:{Te?d+=Go(v,x,v+E*A,x+w*A,v+T*A,x+k*A,c,!0)+2:d+=Go(v,x,v-E*D,x-w*D,v-T*D,x-k*D,c,!1)+2;break}}c.push(v-T*D,x-k*D,v+T*A,x+k*A),d+=2}}y=n[(h-2)*2],_=n[(h-2)*2+1],v=n[(h-1)*2],x=n[(h-1)*2+1],E=-(_-x),w=y-v,P=Math.sqrt(E*E+w*w),E/=P,w/=P,E*=p,w*=p,c.push(v-E*D,x-w*D,v+E*A,x+w*A),l||(s.cap===sn.ROUND?d+=Go(v-E*(D-A)*.5,x-w*(D-A)*.5,v-E*D,x-w*D,v+E*A,x+w*A,c,!1)+2:s.cap===sn.SQUARE&&(d+=gR(v,x,E,w,D,A,!1,c)));let X=e.indices,K=on.epsilon*on.epsilon;for(let U=f;U<d+f-2;++U)y=c[U*2],_=c[U*2+1],v=c[(U+1)*2],x=c[(U+1)*2+1],b=c[(U+2)*2],C=c[(U+2)*2+1],!(Math.abs(y*(x-C)+v*(C-_)+b*(_-x))<K)&&X.push(U,U+1,U+2)}function q4(r,e){let t=0,n=r.shape,i=r.points||n.points,s=n.type!==Le.POLY||n.closeStroke;if(i.length===0)return;let o=e.points,a=e.indices,l=i.length/2,u=o.length/2,c=u;for(o.push(i[0],i[1]),t=1;t<l;t++)o.push(i[t*2],i[t*2+1]),a.push(c,c+1),c++;s&&a.push(c,u)}function Ah(r,e){r.lineStyle.native?q4(r,e):X4(r,e)}var Xl=class r{static curveLength(e,t,n,i,s,o){let a=e-2*n+s,l=t-2*i+o,u=2*n-2*e,c=2*i-2*t,h=4*(a*a+l*l),d=4*(a*u+l*c),f=u*u+c*c,p=2*Math.sqrt(h+d+f),m=Math.sqrt(h),g=2*h*m,y=2*Math.sqrt(f),_=d/m;return(g*p+m*d*(p-y)+(4*f*h-d*d)*Math.log((2*m+_+p)/(_+y)))/(4*g)}static curveTo(e,t,n,i,s){let o=s[s.length-2],a=s[s.length-1],l=on._segmentsCount(r.curveLength(o,a,e,t,n,i)),u=0,c=0;for(let h=1;h<=l;++h){let d=h/l;u=o+(e-o)*d,c=a+(t-a)*d,s.push(u+(e+(n-e)*d-u)*d,c+(t+(i-t)*d-c)*d)}}};var Mh={[Le.POLY]:Ih,[Le.CIRC]:Vo,[Le.ELIP]:Vo,[Le.RECT]:Db,[Le.RREC]:Sb},km=[],ql=[];var Yl=class r{constructor(e,t=null,n=null,i=null){this.points=[],this.holes=[],this.shape=e,this.lineStyle=n,this.fillStyle=t,this.matrix=i,this.type=e.type}clone(){return new r(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}};var Zl=new oe,yR=class vR extends So{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new oi,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),ql.push(this.drawCalls[e]);this.drawCalls.length=0;for(let e=0;e<this.batches.length;e++){let t=this.batches[e];t.reset(),km.push(t)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(e,t=null,n=null,i=null){let s=new Yl(e,t,n,i);return this.graphicsData.push(s),this.dirty++,this}drawHole(e,t=null){if(!this.graphicsData.length)return null;let n=new Yl(e,null,null,t),i=this.graphicsData[this.graphicsData.length-1];return n.lineStyle=i.lineStyle,i.holes.push(n),this.dirty++,this}destroy(){super.destroy();for(let e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(e){let t=this.graphicsData;for(let n=0;n<t.length;++n){let i=t[n];if(i.fillStyle.visible&&i.shape&&(i.matrix?i.matrix.applyInverse(e,Zl):Zl.copyFrom(e),i.shape.contains(Zl.x,Zl.y))){let s=!1;if(i.holes){for(let o=0;o<i.holes.length;o++)if(i.holes[o].shape.contains(Zl.x,Zl.y)){s=!0;break}}if(!s)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;let e=this.uvs,t=this.graphicsData,n=null,i=null;this.batches.length>0&&(n=this.batches[this.batches.length-1],i=n.style);for(let l=this.shapeIndex;l<t.length;l++){this.shapeIndex++;let u=t[l],c=u.fillStyle,h=u.lineStyle;Mh[u.type].build(u),u.matrix&&this.transformPoints(u.points,u.matrix),(c.visible||h.visible)&&this.processHoles(u.holes);for(let d=0;d<2;d++){let f=d===0?c:h;if(!f.visible)continue;let p=f.texture.baseTexture,m=this.indices.length,g=this.points.length/2;p.wrapMode=Fr.REPEAT,d===0?this.processFill(u):this.processLine(u);let y=this.points.length/2-g;y!==0&&(n&&!this._compareStyles(i,f)&&(n.end(m,g),n=null),n||(n=km.pop()||new zl,n.begin(f,m,g),this.batches.push(n),i=f),this.addUvs(this.points,e,f.texture,g,y,f.matrix))}}let s=this.indices.length,o=this.points.length/2;if(n&&n.end(s,o),this.batches.length===0){this.batchable=!0;return}let a=o>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&a===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=a?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(e,t){return!(!e||!t||e.texture.baseTexture!==t.texture.baseTexture||e.color+e.alpha!==t.color+t.alpha||!!e.native!=!!t.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let e=0,t=this.graphicsData.length;e<t;e++){let n=this.graphicsData[e],i=n.fillStyle,s=n.lineStyle;if(i&&!i.texture.baseTexture.valid||s&&!s.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);let e=this.batches;for(let t=0,n=e.length;t<n;t++){let i=e[t];for(let s=0;s<i.size;s++){let o=i.start+s;this.indicesUint16[o]=this.indicesUint16[o]-i.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;let e=this.batches;for(let t=0;t<e.length;t++)if(e[t].style.native)return!1;return this.points.length<vR.BATCHABLE_SIZE*2}buildDrawCalls(){let e=++Y._globalBatch;for(let h=0;h<this.drawCalls.length;h++)this.drawCalls[h].texArray.clear(),ql.push(this.drawCalls[h]);this.drawCalls.length=0;let t=this.colors,n=this.textureIds,i=ql.pop();i||(i=new Ms,i.texArray=new Ps),i.texArray.count=0,i.start=0,i.size=0,i.type=yr.TRIANGLES;let s=0,o=null,a=0,l=!1,u=yr.TRIANGLES,c=0;this.drawCalls.push(i);for(let h=0;h<this.batches.length;h++){let d=this.batches[h],f=8,p=d.style,m=p.texture.baseTexture;l!==!!p.native&&(l=!!p.native,u=l?yr.LINES:yr.TRIANGLES,o=null,s=f,e++),o!==m&&(o=m,m._batchEnabled!==e&&(s===f&&(e++,s=0,i.size>0&&(i=ql.pop(),i||(i=new Ms,i.texArray=new Ps),this.drawCalls.push(i)),i.start=c,i.size=0,i.texArray.count=0,i.type=u),m.touched=1,m._batchEnabled=e,m._batchLocation=s,m.wrapMode=Fr.REPEAT,i.texArray.elements[i.texArray.count++]=m,s++)),i.size+=d.size,c+=d.size,a=m._batchLocation,this.addColors(t,p.color,p.alpha,d.attribSize,d.attribStart),this.addTextureIds(n,a,d.attribSize,d.attribStart)}Y._globalBatch=e,this.packAttributes()}packAttributes(){let e=this.points,t=this.uvs,n=this.colors,i=this.textureIds,s=new ArrayBuffer(e.length*3*4),o=new Float32Array(s),a=new Uint32Array(s),l=0;for(let u=0;u<e.length/2;u++)o[l++]=e[u*2],o[l++]=e[u*2+1],o[l++]=t[u*2],o[l++]=t[u*2+1],a[l++]=n[u],o[l++]=i[u];this._buffer.update(s),this._indexBuffer.update(this.indicesUint16)}processFill(e){e.holes.length?Ih.triangulate(e,this):Mh[e.type].triangulate(e,this)}processLine(e){Ah(e,this);for(let t=0;t<e.holes.length;t++)Ah(e.holes[t],this)}processHoles(e){for(let t=0;t<e.length;t++){let n=e[t];Mh[n.type].build(n),n.matrix&&this.transformPoints(n.points,n.matrix)}}calculateBounds(){let e=this._bounds;e.clear(),e.addVertexData(this.points,0,this.points.length),e.pad(this.boundsPadding,this.boundsPadding)}transformPoints(e,t){for(let n=0;n<e.length/2;n++){let i=e[n*2],s=e[n*2+1];e[n*2]=t.a*i+t.c*s+t.tx,e[n*2+1]=t.b*i+t.d*s+t.ty}}addColors(e,t,n,i,s=0){let o=ue.shared.setValue(t).toLittleEndianNumber(),a=ue.shared.setValue(o).toPremultiplied(n);e.length=Math.max(e.length,s+i);for(let l=0;l<i;l++)e[s+l]=a}addTextureIds(e,t,n,i=0){e.length=Math.max(e.length,i+n);for(let s=0;s<n;s++)e[i+s]=t}addUvs(e,t,n,i,s,o=null){let a=0,l=t.length,u=n.frame;for(;a<s;){let h=e[(i+a)*2],d=e[(i+a)*2+1];if(o){let f=o.a*h+o.c*d+o.tx;d=o.b*h+o.d*d+o.ty,h=f}a++,t.push(h/u.width,d/u.height)}let c=n.baseTexture;(u.width<c.width||u.height<c.height)&&this.adjustUvs(t,n,l,s)}adjustUvs(e,t,n,i){let s=t.baseTexture,o=1e-6,a=n+i*2,l=t.frame,u=l.width/s.width,c=l.height/s.height,h=l.x/l.width,d=l.y/l.height,f=Math.floor(e[n]+o),p=Math.floor(e[n+1]+o);for(let m=n+2;m<a;m+=2)f=Math.min(f,Math.floor(e[m]+o)),p=Math.min(p,Math.floor(e[m+1]+o));h-=f,d-=p;for(let m=n;m<a;m+=2)e[m]=(e[m]+h)*u,e[m+1]=(e[m+1]+d)*c}};yR.BATCHABLE_SIZE=100;var Ib=yR;var $o=class r{constructor(){this.color=16777215,this.alpha=1,this.texture=se.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){let e=new r;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e}reset(){this.color=16777215,this.alpha=1,this.texture=se.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}};var Rh=class r extends $o{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=sn.BUTT,this.join=zt.MITER,this.miterLimit=10}clone(){let e=new r;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1,this.cap=sn.BUTT,this.join=zt.MITER,this.miterLimit=10}};var Ab={},Mb=class Bm extends Je{constructor(e=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new $o,this._lineStyle=new Rh,this._matrix=null,this._holeMode=!1,this.state=Dt.for2d(),this._geometry=e||new Ib,this._geometry.refCount++,this._transformID=-1,this._tintColor=new ue(16777215),this.blendMode=re.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new Bm(this._geometry)}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(e=null,t=0,n,i=.5,s=!1){return typeof e=="number"&&(e={width:e,color:t,alpha:n,alignment:i,native:s}),this.lineTextureStyle(e)}lineTextureStyle(e){let t={width:0,texture:se.WHITE,color:e?.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:sn.BUTT,join:zt.MITER,miterLimit:10};e=Object.assign(t,e),this.normalizeColor(e),this.currentPath&&this.startPoly();let n=e.width>0&&e.alpha>0;return n?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:n},e)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){let e=this.currentPath.points,t=this.currentPath.points.length;t>2&&(this.drawShape(this.currentPath),this.currentPath=new ni,this.currentPath.closeStroke=!1,this.currentPath.points.push(e[t-2],e[t-1]))}else this.currentPath=new ni,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(e,t){return this.startPoly(),this.currentPath.points[0]=e,this.currentPath.points[1]=t,this}lineTo(e,t){this.currentPath||this.moveTo(0,0);let n=this.currentPath.points,i=n[n.length-2],s=n[n.length-1];return(i!==e||s!==t)&&n.push(e,t),this}_initCurve(e=0,t=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[e,t]):this.moveTo(e,t)}quadraticCurveTo(e,t,n,i){this._initCurve();let s=this.currentPath.points;return s.length===0&&this.moveTo(0,0),Xl.curveTo(e,t,n,i,s),this}bezierCurveTo(e,t,n,i,s,o){return this._initCurve(),Wl.curveTo(e,t,n,i,s,o,this.currentPath.points),this}arcTo(e,t,n,i,s){this._initCurve(e,t);let o=this.currentPath.points,a=Ho.curveTo(e,t,n,i,s,o);if(a){let{cx:l,cy:u,radius:c,startAngle:h,endAngle:d,anticlockwise:f}=a;this.arc(l,u,c,h,d,f)}return this}arc(e,t,n,i,s,o=!1){if(i===s)return this;if(!o&&s<=i?s+=Rs:o&&i<=s&&(i+=Rs),s-i===0)return this;let a=e+Math.cos(i)*n,l=t+Math.sin(i)*n,u=this._geometry.closePointEps,c=this.currentPath?this.currentPath.points:null;if(c){let h=Math.abs(c[c.length-2]-a),d=Math.abs(c[c.length-1]-l);h<u&&d<u||c.push(a,l)}else this.moveTo(a,l),c=this.currentPath.points;return Ho.arc(a,l,e,t,n,i,s,o,c),this}beginFill(e=0,t){return this.beginTextureFill({texture:se.WHITE,color:e,alpha:t})}normalizeColor(e){let t=ue.shared.setValue(e.color??0);e.color=t.toNumber(),e.alpha??(e.alpha=t.alpha)}beginTextureFill(e){let t={texture:se.WHITE,color:16777215,matrix:null};e=Object.assign(t,e),this.normalizeColor(e),this.currentPath&&this.startPoly();let n=e.alpha>0;return n?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._fillStyle,{visible:n},e)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(e,t,n,i){return this.drawShape(new Z(e,t,n,i))}drawRoundedRect(e,t,n,i,s){return this.drawShape(new El(e,t,n,i,s))}drawCircle(e,t,n){return this.drawShape(new bl(e,t,n))}drawEllipse(e,t,n,i){return this.drawShape(new wl(e,t,n,i))}drawPolygon(...e){let t,n=!0,i=e[0];i.points?(n=i.closeStroke,t=i.points):Array.isArray(e[0])?t=e[0]:t=e;let s=new ni(t);return s.closeStroke=n,this.drawShape(s),this}drawShape(e){return this._holeMode?this._geometry.drawHole(e,this._matrix):this._geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){let e=this._geometry.graphicsData;return e.length===1&&e[0].shape.type===Le.RECT&&!e[0].matrix&&!e[0].holes.length&&!(e[0].lineStyle.visible&&e[0].lineStyle.width)}_render(e){this.finishPoly();let t=this._geometry;t.updateBatches(),t.batchable?(this.batchDirty!==t.batchDirty&&this._populateBatches(),this._renderBatched(e)):(e.batch.flush(),this._renderDirect(e))}_populateBatches(){let e=this._geometry,t=this.blendMode,n=e.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=e.batchDirty,this.batches.length=n,this.vertexData=new Float32Array(e.points);for(let i=0;i<n;i++){let s=e.batches[i],o=s.style.color,a=new Float32Array(this.vertexData.buffer,s.attribStart*4*2,s.attribSize*2),l=new Float32Array(e.uvsFloat32.buffer,s.attribStart*4*2,s.attribSize*2),u=new Uint16Array(e.indicesUint16.buffer,s.start*2,s.size),c={vertexData:a,blendMode:t,indices:u,uvs:l,_batchRGB:ue.shared.setValue(o).toRgbArray(),_tintRGB:o,_texture:s.style.texture,alpha:s.style.alpha,worldAlpha:1};this.batches[i]=c}}_renderBatched(e){if(this.batches.length){e.batch.setObjectRenderer(e.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let t=0,n=this.batches.length;t<n;t++){let i=this.batches[t];i.worldAlpha=this.worldAlpha*i.alpha,e.plugins[this.pluginName].render(i)}}}_renderDirect(e){let t=this._resolveDirectShader(e),n=this._geometry,i=this.worldAlpha,s=t.uniforms,o=n.drawCalls;s.translationMatrix=this.transform.worldTransform,ue.shared.setValue(this._tintColor).premultiply(i).toArray(s.tint),e.shader.bind(t),e.geometry.bind(n,t),e.state.set(this.state);for(let a=0,l=o.length;a<l;a++)this._renderDrawCallDirect(e,n.drawCalls[a])}_renderDrawCallDirect(e,t){let{texArray:n,type:i,size:s,start:o}=t,a=n.count;for(let l=0;l<a;l++)e.texture.bind(n.elements[l],l);e.geometry.draw(i,s,o)}_resolveDirectShader(e){let t=this.shader,n=this.pluginName;if(!t){if(!Ab[n]){let{maxTextures:i}=e.plugins[n],s=new Int32Array(i);for(let l=0;l<i;l++)s[l]=l;let o={tint:new Float32Array([1,1,1,1]),translationMatrix:new me,default:or.from({uSamplers:s},!0)},a=e.plugins[n]._shader.program;Ab[n]=new Pt(a,o)}t=Ab[n]}return t}_calculateBounds(){this.finishPoly();let e=this._geometry;if(!e.graphicsData.length)return;let{minX:t,minY:n,maxX:i,maxY:s}=e.bounds;this._bounds.addFrame(this.transform,t,n,i,s)}containsPoint(e){return this.worldTransform.applyInverse(e,Bm._TEMP_POINT),this._geometry.containsPoint(Bm._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let e=0;e<this.batches.length;e++){let t=this.batches[e];t._tintRGB=ue.shared.setValue(this._tintColor).multiply(t._batchRGB).toLittleEndianNumber()}}}calculateVertices(){let e=this.transform._worldID;if(this._transformID===e)return;this._transformID=e;let t=this.transform.worldTransform,n=t.a,i=t.b,s=t.c,o=t.d,a=t.tx,l=t.ty,u=this._geometry.points,c=this.vertexData,h=0;for(let d=0;d<u.length;d+=2){let f=u[d],p=u[d+1];c[h++]=n*f+s*p+a,c[h++]=o*p+i*f+l}}closePath(){let e=this.currentPath;return e&&(e.closeStroke=!0,this.finishPoly()),this}setMatrix(e){return this._matrix=e,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(e){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(e)}};Mb.curves=on,Mb._TEMP_POINT=new oe;var Um=Mb;var Ph=class{constructor(e,t){this.uvBuffer=e,this.uvMatrix=t,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(e){if(!e&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;let t=this.uvBuffer.data;(!this.data||this.data.length!==t.length)&&(this.data=new Float32Array(t.length)),this.uvMatrix.multiplyUvs(t,this.data),this._updateID++}};var Rb=new oe,_R=new ni,xR=class bR extends Je{constructor(e,t,n,i=yr.TRIANGLES){super(),this.geometry=e,this.shader=t,this.state=n||Dt.for2d(),this.drawMode=i,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=I.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(e){this._geometry!==e&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=e,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(e){this.shader=e}get material(){return this.shader}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(e){this.shader.tint=e}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(e){this.shader.texture=e}_render(e){let t=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===yr.TRIANGLES&&t.length<bR.BATCHABLE_SIZE*2?this._renderToBatch(e):this._renderDefault(e)}_renderDefault(e){let t=this.shader;t.alpha=this.worldAlpha,t.update&&t.update(),e.batch.flush(),t.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),e.shader.bind(t),e.state.set(this.state),e.geometry.bind(this.geometry,t),e.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(e){let t=this.geometry,n=this.shader;n.uvMatrix&&(n.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=t.indexBuffer.data,this._tintRGB=n._tintRGB,this._texture=n.texture;let i=this.material.pluginName;e.batch.setObjectRenderer(e.plugins[i]),e.plugins[i].render(this)}calculateVertices(){let e=this.geometry.buffers[0],t=e.data,n=e._updateID;if(n===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==t.length&&(this.vertexData=new Float32Array(t.length));let i=this.transform.worldTransform,s=i.a,o=i.b,a=i.c,l=i.d,u=i.tx,c=i.ty,h=this.vertexData;for(let d=0;d<h.length/2;d++){let f=t[d*2],p=t[d*2+1];h[d*2]=s*f+a*p+u,h[d*2+1]=o*f+l*p+c}if(this._roundPixels){let d=I.RESOLUTION;for(let f=0;f<h.length;++f)h[f]=Math.round(h[f]*d)/d}this.vertexDirty=n}calculateUvs(){let e=this.geometry.buffers[1],t=this.shader;t.uvMatrix.isSimple?this.uvs=e.data:(this.batchUvs||(this.batchUvs=new Ph(e,t.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,Rb);let t=this.geometry.getBuffer("aVertexPosition").data,n=_R.points,i=this.geometry.getIndex().data,s=i.length,o=this.drawMode===4?3:1;for(let a=0;a+2<s;a+=o){let l=i[a]*2,u=i[a+1]*2,c=i[a+2]*2;if(n[0]=t[l],n[1]=t[l+1],n[2]=t[u],n[3]=t[u+1],n[4]=t[c],n[5]=t[c+1],_R.contains(Rb.x,Rb.y))return!0}return!1}destroy(e){super.destroy(e),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};xR.BATCHABLE_SIZE=100;var zo=xR;var Us=class extends Br{constructor(e,t,n){super();let i=new Oe(e),s=new Oe(t,!0),o=new Oe(n,!0,!0);this.addAttribute("aVertexPosition",i,2,!1,$.FLOAT).addAttribute("aTextureCoord",s,2,!1,$.FLOAT).addIndex(o),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}};var wR=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`;var ER=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;var Wi=class extends Pt{constructor(e,t){let n={uSampler:e,alpha:1,uTextureMatrix:me.IDENTITY,uColor:new Float32Array([1,1,1,1])};t=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},t),t.uniforms&&Object.assign(n,t.uniforms),super(t.program||Gt.from(ER,wR),n),this._colorDirty=!1,this.uvMatrix=new Ns(e),this.batchable=t.program===void 0,this.pluginName=t.pluginName,this._tintColor=new ue(t.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=t.alpha}get texture(){return this.uniforms.uSampler}set texture(e){this.uniforms.uSampler!==e&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!e.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=e,this.uvMatrix.texture=e)}set alpha(e){e!==this._alpha&&(this._alpha=e,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(e){e!==this.tint&&(this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;let e=this.texture.baseTexture.alphaMode;ue.shared.setValue(this._tintColor).premultiply(this._alpha,e).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}};var Oh=class{constructor(e,t,n){this.geometry=new Br,this.indexBuffer=null,this.size=n,this.dynamicProperties=[],this.staticProperties=[];for(let i=0;i<e.length;++i){let s=e[i];s={attributeName:s.attributeName,size:s.size,uploadFunction:s.uploadFunction,type:s.type||$.FLOAT,offset:s.offset},t[i]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){let e=this.geometry,t=0;this.indexBuffer=new Oe(N.createIndicesForQuads(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(let o=0;o<this.dynamicProperties.length;++o){let a=this.dynamicProperties[o];a.offset=t,t+=a.size,this.dynamicStride+=a.size}let n=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(n),this.dynamicDataUint32=new Uint32Array(n),this.dynamicBuffer=new Oe(this.dynamicData,!1,!1);let i=0;this.staticStride=0;for(let o=0;o<this.staticProperties.length;++o){let a=this.staticProperties[o];a.offset=i,i+=a.size,this.staticStride+=a.size}let s=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(s),this.staticDataUint32=new Uint32Array(s),this.staticBuffer=new Oe(this.staticData,!0,!1);for(let o=0;o<this.dynamicProperties.length;++o){let a=this.dynamicProperties[o];e.addAttribute(a.attributeName,this.dynamicBuffer,0,a.type===$.UNSIGNED_BYTE,a.type,this.dynamicStride*4,a.offset*4)}for(let o=0;o<this.staticProperties.length;++o){let a=this.staticProperties[o];e.addAttribute(a.attributeName,this.staticBuffer,0,a.type===$.UNSIGNED_BYTE,a.type,this.staticStride*4,a.offset*4)}}uploadDynamic(e,t,n){for(let i=0;i<this.dynamicProperties.length;i++){let s=this.dynamicProperties[i];s.uploadFunction(e,t,n,s.type===$.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,s.offset)}this.dynamicBuffer._updateID++}uploadStatic(e,t,n){for(let i=0;i<this.staticProperties.length;i++){let s=this.staticProperties[i];s.uploadFunction(e,t,n,s.type===$.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,s.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}};var TR=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`;var CR=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;var Nh=class extends Pn{constructor(e){super(e),this.shader=null,this.properties=null,this.tempMatrix=new me,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:$.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=Pt.from(CR,TR,{}),this.state=Dt.for2d()}render(e){let t=e.children,n=e._maxSize,i=e._batchSize,s=this.renderer,o=t.length;if(o===0)return;o>n&&!e.autoResize&&(o=n);let a=e._buffers;a||(a=e._buffers=this.generateBuffers(e));let l=t[0]._texture.baseTexture,u=l.alphaMode>0;this.state.blendMode=N.correctBlendMode(e.blendMode,u),s.state.set(this.state);let c=s.gl,h=e.worldTransform.copyTo(this.tempMatrix);h.prepend(s.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=h.toArray(!0),this.shader.uniforms.uColor=ue.shared.setValue(e.tintRgb).premultiply(e.worldAlpha,u).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=l,this.renderer.shader.bind(this.shader);let d=!1;for(let f=0,p=0;f<o;f+=i,p+=1){let m=o-f;m>i&&(m=i),p>=a.length&&a.push(this._generateOneMoreBuffer(e));let g=a[p];g.uploadDynamic(t,f,m);let y=e._bufferUpdateIDs[p]||0;d=d||g._updateID<y,d&&(g._updateID=e._updateID,g.uploadStatic(t,f,m)),s.geometry.bind(g.geometry),c.drawElements(c.TRIANGLES,m*6,c.UNSIGNED_SHORT,0)}}generateBuffers(e){let t=[],n=e._maxSize,i=e._batchSize,s=e._properties;for(let o=0;o<n;o+=i)t.push(new Oh(this.properties,s,i));return t}_generateOneMoreBuffer(e){let t=e._batchSize,n=e._properties;return new Oh(this.properties,n,t)}uploadVertices(e,t,n,i,s,o){let a=0,l=0,u=0,c=0;for(let h=0;h<n;++h){let d=e[t+h],f=d._texture,p=d.scale.x,m=d.scale.y,g=f.trim,y=f.orig;g?(l=g.x-d.anchor.x*y.width,a=l+g.width,c=g.y-d.anchor.y*y.height,u=c+g.height):(a=y.width*(1-d.anchor.x),l=y.width*-d.anchor.x,u=y.height*(1-d.anchor.y),c=y.height*-d.anchor.y),i[o]=l*p,i[o+1]=c*m,i[o+s]=a*p,i[o+s+1]=c*m,i[o+s*2]=a*p,i[o+s*2+1]=u*m,i[o+s*3]=l*p,i[o+s*3+1]=u*m,o+=s*4}}uploadPosition(e,t,n,i,s,o){for(let a=0;a<n;a++){let l=e[t+a].position;i[o]=l.x,i[o+1]=l.y,i[o+s]=l.x,i[o+s+1]=l.y,i[o+s*2]=l.x,i[o+s*2+1]=l.y,i[o+s*3]=l.x,i[o+s*3+1]=l.y,o+=s*4}}uploadRotation(e,t,n,i,s,o){for(let a=0;a<n;a++){let l=e[t+a].rotation;i[o]=l,i[o+s]=l,i[o+s*2]=l,i[o+s*3]=l,o+=s*4}}uploadUvs(e,t,n,i,s,o){for(let a=0;a<n;++a){let l=e[t+a]._texture._uvs;l?(i[o]=l.x0,i[o+1]=l.y0,i[o+s]=l.x1,i[o+s+1]=l.y1,i[o+s*2]=l.x2,i[o+s*2+1]=l.y2,i[o+s*3]=l.x3,i[o+s*3+1]=l.y3,o+=s*4):(i[o]=0,i[o+1]=0,i[o+s]=0,i[o+s+1]=0,i[o+s*2]=0,i[o+s*2+1]=0,i[o+s*3]=0,i[o+s*3+1]=0,o+=s*4)}}uploadTint(e,t,n,i,s,o){for(let a=0;a<n;++a){let l=e[t+a],u=ue.shared.setValue(l._tintRGB).toPremultiplied(l.alpha,l.texture.baseTexture.alphaMode>0);i[o]=u,i[o+s]=u,i[o+s*2]=u,i[o+s*3]=u,o+=s*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}};Nh.extension={name:"particle",type:S.RendererPlugin};M.add(Nh);var js=(r=>(r[r.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",r[r.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",r))(js||{});var jm={willReadFrequently:!0},ui=class Q{static get experimentalLetterSpacingSupported(){let e=Q._experimentalLetterSpacingSupported;if(e!==void 0){let t=I.ADAPTER.getCanvasRenderingContext2D().prototype;e=Q._experimentalLetterSpacingSupported="letterSpacing"in t||"textLetterSpacing"in t}return e}constructor(e,t,n,i,s,o,a,l,u){this.text=e,this.style=t,this.width=n,this.height=i,this.lines=s,this.lineWidths=o,this.lineHeight=a,this.maxLineWidth=l,this.fontProperties=u}static measureText(e,t,n,i=Q._canvas){n=n??t.wordWrap;let s=t.toFontString(),o=Q.measureFont(s);o.fontSize===0&&(o.fontSize=t.fontSize,o.ascent=t.fontSize);let a=i.getContext("2d",jm);a.font=s;let l=(n?Q.wordWrap(e,t,i):e).split(/(?:\r\n|\r|\n)/),u=new Array(l.length),c=0;for(let p=0;p<l.length;p++){let m=Q._measureText(l[p],t.letterSpacing,a);u[p]=m,c=Math.max(c,m)}let h=c+t.strokeThickness;t.dropShadow&&(h+=t.dropShadowDistance);let d=t.lineHeight||o.fontSize+t.strokeThickness,f=Math.max(d,o.fontSize+t.strokeThickness*2)+t.leading+(l.length-1)*(d+t.leading);return t.dropShadow&&(f+=t.dropShadowDistance),new Q(e,t,h,f,l,u,d+t.leading,c,o)}static _measureText(e,t,n){let i=!1;Q.experimentalLetterSpacingSupported&&(Q.experimentalLetterSpacing?(n.letterSpacing=`${t}px`,n.textLetterSpacing=`${t}px`,i=!0):(n.letterSpacing="0px",n.textLetterSpacing="0px"));let s=n.measureText(e).width;return s>0&&(i?s-=t:s+=(Q.graphemeSegmenter(e).length-1)*t),s}static wordWrap(e,t,n=Q._canvas){let i=n.getContext("2d",jm),s=0,o="",a="",l=Object.create(null),{letterSpacing:u,whiteSpace:c}=t,h=Q.collapseSpaces(c),d=Q.collapseNewlines(c),f=!h,p=t.wordWrapWidth+u,m=Q.tokenize(e);for(let g=0;g<m.length;g++){let y=m[g];if(Q.isNewline(y)){if(!d){a+=Q.addLine(o),f=!h,o="",s=0;continue}y=" "}if(h){let v=Q.isBreakingSpace(y),x=Q.isBreakingSpace(o[o.length-1]);if(v&&x)continue}let _=Q.getFromCache(y,u,l,i);if(_>p)if(o!==""&&(a+=Q.addLine(o),o="",s=0),Q.canBreakWords(y,t.breakWords)){let v=Q.wordWrapSplit(y);for(let x=0;x<v.length;x++){let b=v[x],C=b,E=1;for(;v[x+E];){let T=v[x+E];if(!Q.canBreakChars(C,T,y,x,t.breakWords))b+=T;else break;C=T,E++}x+=E-1;let w=Q.getFromCache(b,u,l,i);w+s>p&&(a+=Q.addLine(o),f=!1,o="",s=0),o+=b,s+=w}}else{o.length>0&&(a+=Q.addLine(o),o="",s=0);let v=g===m.length-1;a+=Q.addLine(y,!v),f=!1,o="",s=0}else _+s>p&&(f=!1,a+=Q.addLine(o),o="",s=0),(o.length>0||!Q.isBreakingSpace(y)||f)&&(o+=y,s+=_)}return a+=Q.addLine(o,!1),a}static addLine(e,t=!0){return e=Q.trimRight(e),e=t?`${e}
`:e,e}static getFromCache(e,t,n,i){let s=n[e];return typeof s!="number"&&(s=Q._measureText(e,t,i)+t,n[e]=s),s}static collapseSpaces(e){return e==="normal"||e==="pre-line"}static collapseNewlines(e){return e==="normal"}static trimRight(e){if(typeof e!="string")return"";for(let t=e.length-1;t>=0;t--){let n=e[t];if(!Q.isBreakingSpace(n))break;e=e.slice(0,-1)}return e}static isNewline(e){return typeof e!="string"?!1:Q._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,t){return typeof e!="string"?!1:Q._breakingSpaces.includes(e.charCodeAt(0))}static tokenize(e){let t=[],n="";if(typeof e!="string")return t;for(let i=0;i<e.length;i++){let s=e[i],o=e[i+1];if(Q.isBreakingSpace(s,o)||Q.isNewline(s)){n!==""&&(t.push(n),n=""),t.push(s);continue}n+=s}return n!==""&&t.push(n),t}static canBreakWords(e,t){return t}static canBreakChars(e,t,n,i,s){return!0}static wordWrapSplit(e){return Q.graphemeSegmenter(e)}static measureFont(e){if(Q._fonts[e])return Q._fonts[e];let t={ascent:0,descent:0,fontSize:0},n=Q._canvas,i=Q._context;i.font=e;let s=Q.METRICS_STRING+Q.BASELINE_SYMBOL,o=Math.ceil(i.measureText(s).width),a=Math.ceil(i.measureText(Q.BASELINE_SYMBOL).width),l=Math.ceil(Q.HEIGHT_MULTIPLIER*a);if(a=a*Q.BASELINE_MULTIPLIER|0,o===0||l===0)return Q._fonts[e]=t,t;n.width=o,n.height=l,i.fillStyle="#f00",i.fillRect(0,0,o,l),i.font=e,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(s,0,a);let u=i.getImageData(0,0,o,l).data,c=u.length,h=o*4,d=0,f=0,p=!1;for(d=0;d<a;++d){for(let m=0;m<h;m+=4)if(u[f+m]!==255){p=!0;break}if(!p)f+=h;else break}for(t.ascent=a-d,f=c-h,p=!1,d=l;d>a;--d){for(let m=0;m<h;m+=4)if(u[f+m]!==255){p=!0;break}if(!p)f-=h;else break}return t.descent=d-a,t.fontSize=t.ascent+t.descent,Q._fonts[e]=t,t}static clearMetrics(e=""){e?delete Q._fonts[e]:Q._fonts={}}static get _canvas(){if(!Q.__canvas){let e;try{let t=new OffscreenCanvas(0,0);if(t.getContext("2d",jm)?.measureText)return Q.__canvas=t,t;e=I.ADAPTER.createCanvas()}catch{e=I.ADAPTER.createCanvas()}e.width=e.height=10,Q.__canvas=e}return Q.__canvas}static get _context(){return Q.__context||(Q.__context=Q._canvas.getContext("2d",jm)),Q.__context}};ui.METRICS_STRING="|\xC9q\xC5",ui.BASELINE_SYMBOL="M",ui.BASELINE_MULTIPLIER=1.4,ui.HEIGHT_MULTIPLIER=2,ui.graphemeSegmenter=(()=>{if(typeof Intl?.Segmenter=="function"){let r=new Intl.Segmenter;return e=>[...r.segment(e)].map(t=>t.segment)}return r=>[...r]})(),ui.experimentalLetterSpacing=!1,ui._fonts={},ui._newlines=[10,13],ui._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var an=ui;var Q4=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],DR=class Fh{constructor(e){this.styleID=0,this.reset(),Ob(this,e,e)}clone(){let e={};return Ob(e,this,Fh.defaultStyle),new Fh(e)}reset(){Ob(this,Fh.defaultStyle,Fh.defaultStyle)}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(e){let t=Pb(e);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)}get fill(){return this._fill}set fill(e){let t=Pb(e);this._fill!==t&&(this._fill=t,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(e){J4(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.styleID++)}get stroke(){return this._stroke}set stroke(e){let t=Pb(e);this._stroke!==t&&(this._stroke=t,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)}toFontString(){let e=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize,t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(let n=t.length-1;n>=0;n--){let i=t[n].trim();!/([\"\'])[^\'\"]+\1/.test(i)&&!Q4.includes(i)&&(i=`"${i}"`),t[n]=i}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${e} ${t.join(",")}`}};DR.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:js.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};var Wt=DR;function Pb(r){let e=ue.shared,t=n=>{let i=e.setValue(n);return i.alpha===1?i.toHex():i.toRgbaString()};return Array.isArray(r)?r.map(t):t(r)}function J4(r,e){if(!Array.isArray(r)||!Array.isArray(e)||r.length!==e.length)return!1;for(let t=0;t<r.length;++t)if(r[t]!==e[t])return!1;return!0}function Ob(r,e,t){for(let n in t)Array.isArray(e[n])?r[n]=e[n].slice():r[n]=e[n]}var e8={texture:!0,children:!1,baseTexture:!0},SR=class Nb extends _r{constructor(e,t,n){let i=!1;n||(n=I.ADAPTER.createCanvas(),i=!0),n.width=3,n.height=3;let s=se.from(n);s.orig=new Z,s.trim=new Z,super(s),this._ownCanvas=i,this.canvas=n,this.context=n.getContext("2d",{willReadFrequently:!0}),this._resolution=Nb.defaultResolution??I.RESOLUTION,this._autoResolution=Nb.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=e,this.style=t,this.localStyleID=-1}static get experimentalLetterSpacing(){return an.experimentalLetterSpacing}static set experimentalLetterSpacing(e){N.deprecation("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),an.experimentalLetterSpacing=e}updateText(e){let t=this._style;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&e)return;this._font=this._style.toFontString();let n=this.context,i=an.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),s=i.width,o=i.height,a=i.lines,l=i.lineHeight,u=i.lineWidths,c=i.maxLineWidth,h=i.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,s)+t.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,o)+t.padding*2)*this._resolution),n.scale(this._resolution,this._resolution),n.clearRect(0,0,this.canvas.width,this.canvas.height),n.font=this._font,n.lineWidth=t.strokeThickness,n.textBaseline=t.textBaseline,n.lineJoin=t.lineJoin,n.miterLimit=t.miterLimit;let d,f,p=t.dropShadow?2:1;for(let m=0;m<p;++m){let g=t.dropShadow&&m===0,y=g?Math.ceil(Math.max(1,o)+t.padding*2):0,_=y*this._resolution;if(g){n.fillStyle="black",n.strokeStyle="black";let x=t.dropShadowColor,b=t.dropShadowBlur*this._resolution,C=t.dropShadowDistance*this._resolution;n.shadowColor=ue.shared.setValue(x).setAlpha(t.dropShadowAlpha).toRgbaString(),n.shadowBlur=b,n.shadowOffsetX=Math.cos(t.dropShadowAngle)*C,n.shadowOffsetY=Math.sin(t.dropShadowAngle)*C+_}else n.fillStyle=this._generateFillStyle(t,a,i),n.strokeStyle=t.stroke,n.shadowColor="black",n.shadowBlur=0,n.shadowOffsetX=0,n.shadowOffsetY=0;let v=(l-h.fontSize)/2;l-h.fontSize<0&&(v=0);for(let x=0;x<a.length;x++)d=t.strokeThickness/2,f=t.strokeThickness/2+x*l+h.ascent+v,t.align==="right"?d+=c-u[x]:t.align==="center"&&(d+=(c-u[x])/2),t.stroke&&t.strokeThickness&&this.drawLetterSpacing(a[x],d+t.padding,f+t.padding-y,!0),t.fill&&this.drawLetterSpacing(a[x],d+t.padding,f+t.padding-y)}this.updateTexture()}drawLetterSpacing(e,t,n,i=!1){let s=this._style.letterSpacing,o=!1;if(an.experimentalLetterSpacingSupported&&(an.experimentalLetterSpacing?(this.context.letterSpacing=`${s}px`,this.context.textLetterSpacing=`${s}px`,o=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),s===0||o){i?this.context.strokeText(e,t,n):this.context.fillText(e,t,n);return}let a=t,l=an.graphemeSegmenter(e),u=this.context.measureText(e).width,c=0;for(let h=0;h<l.length;++h){let d=l[h];i?this.context.strokeText(d,a,n):this.context.fillText(d,a,n);let f="";for(let p=h+1;p<l.length;++p)f+=l[p];c=this.context.measureText(f).width,a+=u-c+s,u=c}}updateTexture(){let e=this.canvas;if(this._style.trim){let o=N.trimCanvas(e);o.data&&(e.width=o.width,e.height=o.height,this.context.putImageData(o.data,0,0))}let t=this._texture,n=this._style,i=n.trim?0:n.padding,s=t.baseTexture;t.trim.width=t._frame.width=e.width/this._resolution,t.trim.height=t._frame.height=e.height/this._resolution,t.trim.x=-i,t.trim.y=-i,t.orig.width=t._frame.width-i*2,t.orig.height=t._frame.height-i*2,this._onTextureUpdate(),s.setRealSize(e.width,e.height,this._resolution),t.updateUvs(),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(e,t){return this.updateText(!0),this._textureID===-1&&(e=!1),super.getBounds(e,t)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds.call(this,e)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(e,t,n){let i=e.fill;if(Array.isArray(i)){if(i.length===1)return i[0]}else return i;let s,o=e.dropShadow?e.dropShadowDistance:0,a=e.padding||0,l=this.canvas.width/this._resolution-o-a*2,u=this.canvas.height/this._resolution-o-a*2,c=i.slice(),h=e.fillGradientStops.slice();if(!h.length){let d=c.length+1;for(let f=1;f<d;++f)h.push(f/d)}if(c.unshift(i[0]),h.unshift(0),c.push(i[i.length-1]),h.push(1),e.fillGradientType===js.LINEAR_VERTICAL){s=this.context.createLinearGradient(l/2,a,l/2,u+a);let d=n.fontProperties.fontSize+e.strokeThickness;for(let f=0;f<t.length;f++){let p=n.lineHeight*(f-1)+d,m=n.lineHeight*f,g=m;f>0&&p>m&&(g=(m+p)/2);let y=m+d,_=n.lineHeight*(f+1),v=y;f+1<t.length&&_<y&&(v=(y+_)/2);let x=(v-g)/u;for(let b=0;b<c.length;b++){let C=0;typeof h[b]=="number"?C=h[b]:C=b/c.length;let E=Math.min(1,Math.max(0,g/u+C*x));E=Number(E.toFixed(5)),s.addColorStop(E,c[b])}}}else{s=this.context.createLinearGradient(a,u/2,l+a,u/2);let d=c.length+1,f=1;for(let p=0;p<c.length;p++){let m;typeof h[p]=="number"?m=h[p]:m=f/d,s.addColorStop(m,c[p]),f++}}return s}destroy(e){typeof e=="boolean"&&(e={children:e}),e=Object.assign({},e8,e),super.destroy(e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this.updateText(!0);let t=N.sign(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this.updateText(!0);let t=N.sign(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}get style(){return this._style}set style(e){e=e||{},e instanceof Wt?this._style=e:this._style=new Wt(e),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}};SR.defaultAutoResolution=!0;var Kl=SR;var Lh=class{constructor(e){this.maxItemsPerFrame=e,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}};function t8(r,e){let t=!1;if(r?._textures?.length){for(let n=0;n<r._textures.length;n++)if(r._textures[n]instanceof se){let i=r._textures[n].baseTexture;e.includes(i)||(e.push(i),t=!0)}}return t}function r8(r,e){if(r.baseTexture instanceof Y){let t=r.baseTexture;return e.includes(t)||e.push(t),!0}return!1}function n8(r,e){if(r._texture&&r._texture instanceof se){let t=r._texture.baseTexture;return e.includes(t)||e.push(t),!0}return!1}function i8(r,e){return e instanceof Kl?(e.updateText(!0),!0):!1}function s8(r,e){if(e instanceof Wt){let t=e.toFontString();return an.measureFont(t),!0}return!1}function o8(r,e){if(r instanceof Kl){e.includes(r.style)||e.push(r.style),e.includes(r)||e.push(r);let t=r._texture.baseTexture;return e.includes(t)||e.push(t),!0}return!1}function a8(r,e){return r instanceof Wt?(e.includes(r)||e.push(r),!0):!1}var IR=class AR{constructor(e){this.limiter=new Lh(AR.uploadsPerFrame),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(o8),this.registerFindHook(a8),this.registerFindHook(t8),this.registerFindHook(r8),this.registerFindHook(n8),this.registerUploadHook(i8),this.registerUploadHook(s8)}upload(e){return new Promise(t=>{e&&this.add(e),this.queue.length?(this.completes.push(t),this.ticking||(this.ticking=!0,mt.system.addOnce(this.tick,this,jr.UTILITY))):t()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){let e=this.queue[0],t=!1;if(e&&!e._destroyed){for(let n=0,i=this.uploadHooks.length;n<i;n++)if(this.uploadHooks[n](this.uploadHookHelper,e)){this.queue.shift(),t=!0;break}}t||this.queue.shift()}if(this.queue.length)mt.system.addOnce(this.tick,this,jr.UTILITY);else{this.ticking=!1;let e=this.completes.slice(0);this.completes.length=0;for(let t=0,n=e.length;t<n;t++)e[t]()}}registerFindHook(e){return e&&this.addHooks.push(e),this}registerUploadHook(e){return e&&this.uploadHooks.push(e),this}add(e){for(let t=0,n=this.addHooks.length;t<n&&!this.addHooks[t](e,this.queue);t++);if(e instanceof Je)for(let t=e.children.length-1;t>=0;t--)this.add(e.children[t]);return this}destroy(){this.ticking&&mt.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};IR.uploadsPerFrame=4;var Ql=IR;Object.defineProperties(I,{UPLOADS_PER_FRAME:{get(){return Ql.uploadsPerFrame},set(r){N.deprecation("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),Ql.uploadsPerFrame=r}}});function MR(r,e){return e instanceof Y?(e._glTextures[r.CONTEXT_UID]||r.texture.bind(e),!0):!1}function l8(r,e){if(!(e instanceof Um))return!1;let{geometry:t}=e;e.finishPoly(),t.updateBatches();let{batches:n}=t;for(let i=0;i<n.length;i++){let{texture:s}=n[i].style;s&&MR(r,s.baseTexture)}return t.batchable||r.geometry.bind(t,e._resolveDirectShader(r)),!0}function u8(r,e){return r instanceof Um?(e.push(r),!0):!1}var kh=class extends Ql{constructor(e){super(e),this.uploadHookHelper=this.renderer,this.registerFindHook(u8),this.registerUploadHook(MR),this.registerUploadHook(l8)}};kh.extension={name:"prepare",type:S.RendererSystem};M.add(kh);var abe=new oe;var RR=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`;var PR=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`;var OR=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`;var Fb=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`;var NR=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;var Vm=new me,Bh=class extends Pn{constructor(e){super(e),e.runners.contextChange.add(this),this.quad=new Lo,this.state=Dt.for2d()}contextChange(){let e=this.renderer,t={globals:e.globalUniforms};this.simpleShader=Pt.from(Fb,NR,t),this.shader=e.context.webGLVersion>1?Pt.from(PR,RR,t):Pt.from(Fb,OR,t)}render(e){let t=this.renderer,n=this.quad,i=n.vertices;i[0]=i[6]=e._width*-e.anchor.x,i[1]=i[3]=e._height*-e.anchor.y,i[2]=i[4]=e._width*(1-e.anchor.x),i[5]=i[7]=e._height*(1-e.anchor.y);let s=e.uvRespectAnchor?e.anchor.x:0,o=e.uvRespectAnchor?e.anchor.y:0;i=n.uvs,i[0]=i[6]=-s,i[1]=i[3]=-o,i[2]=i[4]=1-s,i[5]=i[7]=1-o,n.invalidate();let a=e._texture,l=a.baseTexture,u=l.alphaMode>0,c=e.tileTransform.localTransform,h=e.uvMatrix,d=l.isPowerOfTwo&&a.frame.width===l.width&&a.frame.height===l.height;d&&(l._glTextures[t.CONTEXT_UID]?d=l.wrapMode!==Fr.CLAMP:l.wrapMode===Fr.CLAMP&&(l.wrapMode=Fr.REPEAT));let f=d?this.simpleShader:this.shader,p=a.width,m=a.height,g=e._width,y=e._height;Vm.set(c.a*p/g,c.b*p/y,c.c*m/g,c.d*m/y,c.tx/g,c.ty/y),Vm.invert(),d?Vm.prepend(h.mapCoord):(f.uniforms.uMapCoord=h.mapCoord.toArray(!0),f.uniforms.uClampFrame=h.uClampFrame,f.uniforms.uClampOffset=h.uClampOffset),f.uniforms.uTransform=Vm.toArray(!0),f.uniforms.uColor=ue.shared.setValue(e.tint).premultiply(e.worldAlpha,u).toArray(f.uniforms.uColor),f.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),f.uniforms.uSampler=a,t.shader.bind(f),t.geometry.bind(n),this.state.blendMode=N.correctBlendMode(e.blendMode,u),t.state.set(this.state),t.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}};Bh.extension={name:"tilingSprite",type:S.RendererPlugin};M.add(Bh);var FR=class Uh{constructor(e,t,n=null){this.linkedSheets=[],this._texture=e instanceof se?e:null,this.baseTexture=e instanceof Y?e:this._texture.baseTexture,this.textures={},this.animations={},this.data=t;let i=this.baseTexture.resource;this.resolution=this._updateResolution(n||(i?i.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(e=null){let{scale:t}=this.data.meta,n=N.getResolutionOfUrl(e,null);return n===null&&(n=parseFloat(t??"1")),n!==1&&this.baseTexture.setResolution(n),n}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=Uh.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let t=e,n=Uh.BATCH_SIZE;for(;t-e<n&&t<this._frameKeys.length;){let i=this._frameKeys[t],s=this._frames[i],o=s.frame;if(o){let a=null,l=null,u=s.trimmed!==!1&&s.sourceSize?s.sourceSize:s.frame,c=new Z(0,0,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution);s.rotated?a=new Z(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.h)/this.resolution,Math.floor(o.w)/this.resolution):a=new Z(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution),s.trimmed!==!1&&s.spriteSourceSize&&(l=new Z(Math.floor(s.spriteSourceSize.x)/this.resolution,Math.floor(s.spriteSourceSize.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution)),this.textures[i]=new se(this.baseTexture,a,c,l,s.rotated?2:0,s.anchor,s.borders),se.addToCache(this.textures[i],i.toString())}t++}}_processAnimations(){let e=this.data.animations||{};for(let t in e){this.animations[t]=[];for(let n=0;n<e[t].length;n++){let i=e[t][n];this.animations[t].push(this.textures[i])}}}_parseComplete(){let e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*Uh.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*Uh.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){for(let t in this.textures)this.textures[t].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&(this._texture?.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};FR.BATCH_SIZE=1e3;var Hm=FR;var c8=["jpg","png","jpeg","avif","webp"];function LR(r,e,t){let n={};if(r.forEach(i=>{n[i]=e}),Object.keys(e.textures).forEach(i=>{n[i]=e.textures[i]}),!t){let i=N.path.dirname(r[0]);e.linkedSheets.forEach((s,o)=>{let a=LR([`${i}/${e.data.meta.related_multi_packs[o]}`],s,!0);Object.assign(n,a)})}return n}var kR={extension:S.Asset,cache:{test:r=>r instanceof Hm,getCacheableAssets:(r,e)=>LR(r,e,!1)},resolver:{test:r=>{let e=r.split("?")[0].split("."),t=e.pop(),n=e.pop();return t==="json"&&c8.includes(n)},parse:r=>{let e=r.split(".");return{resolution:parseFloat(I.RETINA_PREFIX.exec(r)?.[1]??"1"),format:e[e.length-2],src:r}}},loader:{name:"spritesheetLoader",extension:{type:S.LoadParser,priority:et.Normal},testParse(r,e){return L(this,null,function*(){return N.path.extname(e.src).toLowerCase()===".json"&&!!r.frames})},parse(r,e,t){return L(this,null,function*(){let n=N.path.dirname(e.src);n&&n.lastIndexOf("/")!==n.length-1&&(n+="/");let i=n+r.meta.image;i=jo(i,e.src);let s=(yield t.load([i]))[i],o=new Hm(s.baseTexture,r,e.src);yield o.parse();let a=r?.meta?.related_multi_packs;if(Array.isArray(a)){let l=[];for(let c of a){if(typeof c!="string")continue;let h=n+c;e.data?.ignoreMultiPack||(h=jo(h,e.src),l.push(t.load({src:h,data:{ignoreMultiPack:!0}})))}let u=yield Promise.all(l);o.linkedSheets=u,u.forEach(c=>{c.linkedSheets=[o].concat(o.linkedSheets.filter(h=>h!==c))})}return o})},unload(r){r.destroy(!0)}}};M.add(kR);var ci=class{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}};var Xi=class{static test(e){return typeof e=="string"&&e.startsWith("info face=")}static parse(e){let t=e.match(/^[a-z]+\s+.+$/gm),n={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(let s in t){let o=t[s].match(/^[a-z]+/gm)[0],a=t[s].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),l={};for(let u in a){let c=a[u].split("="),h=c[0],d=c[1].replace(/"/gm,""),f=parseFloat(d),p=isNaN(f)?d:f;l[h]=p}n[o].push(l)}let i=new ci;return n.info.forEach(s=>i.info.push({face:s.face,size:parseInt(s.size,10)})),n.common.forEach(s=>i.common.push({lineHeight:parseInt(s.lineHeight,10)})),n.page.forEach(s=>i.page.push({id:parseInt(s.id,10),file:s.file})),n.char.forEach(s=>i.char.push({id:parseInt(s.id,10),page:parseInt(s.page,10),x:parseInt(s.x,10),y:parseInt(s.y,10),width:parseInt(s.width,10),height:parseInt(s.height,10),xoffset:parseInt(s.xoffset,10),yoffset:parseInt(s.yoffset,10),xadvance:parseInt(s.xadvance,10)})),n.kerning.forEach(s=>i.kerning.push({first:parseInt(s.first,10),second:parseInt(s.second,10),amount:parseInt(s.amount,10)})),n.distanceField.forEach(s=>i.distanceField.push({distanceRange:parseInt(s.distanceRange,10),fieldType:s.fieldType})),i}};var Vs=class{static test(e){let t=e;return typeof e!="string"&&"getElementsByTagName"in e&&t.getElementsByTagName("page").length&&t.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(e){let t=new ci,n=e.getElementsByTagName("info"),i=e.getElementsByTagName("common"),s=e.getElementsByTagName("page"),o=e.getElementsByTagName("char"),a=e.getElementsByTagName("kerning"),l=e.getElementsByTagName("distanceField");for(let u=0;u<n.length;u++)t.info.push({face:n[u].getAttribute("face"),size:parseInt(n[u].getAttribute("size"),10)});for(let u=0;u<i.length;u++)t.common.push({lineHeight:parseInt(i[u].getAttribute("lineHeight"),10)});for(let u=0;u<s.length;u++)t.page.push({id:parseInt(s[u].getAttribute("id"),10)||0,file:s[u].getAttribute("file")});for(let u=0;u<o.length;u++){let c=o[u];t.char.push({id:parseInt(c.getAttribute("id"),10),page:parseInt(c.getAttribute("page"),10)||0,x:parseInt(c.getAttribute("x"),10),y:parseInt(c.getAttribute("y"),10),width:parseInt(c.getAttribute("width"),10),height:parseInt(c.getAttribute("height"),10),xoffset:parseInt(c.getAttribute("xoffset"),10),yoffset:parseInt(c.getAttribute("yoffset"),10),xadvance:parseInt(c.getAttribute("xadvance"),10)})}for(let u=0;u<a.length;u++)t.kerning.push({first:parseInt(a[u].getAttribute("first"),10),second:parseInt(a[u].getAttribute("second"),10),amount:parseInt(a[u].getAttribute("amount"),10)});for(let u=0;u<l.length;u++)t.distanceField.push({fieldType:l[u].getAttribute("fieldType"),distanceRange:parseInt(l[u].getAttribute("distanceRange"),10)});return t}};var Hs=class{static test(e){return typeof e=="string"&&e.includes("<font>")?Vs.test(I.ADAPTER.parseXML(e)):!1}static parse(e){return Vs.parse(I.ADAPTER.parseXML(e))}};var Lb=[Xi,Vs,Hs];function kb(r){for(let e=0;e<Lb.length;e++)if(Lb[e].test(r))return Lb[e];return null}function Bb(r,e,t,n,i,s){let o=t.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;let a,l=t.dropShadow?t.dropShadowDistance:0,u=t.padding||0,c=r.width/n-l-u*2,h=r.height/n-l-u*2,d=o.slice(),f=t.fillGradientStops.slice();if(!f.length){let p=d.length+1;for(let m=1;m<p;++m)f.push(m/p)}if(d.unshift(o[0]),f.unshift(0),d.push(o[o.length-1]),f.push(1),t.fillGradientType===js.LINEAR_VERTICAL){a=e.createLinearGradient(c/2,u,c/2,h+u);let p=0,m=(s.fontProperties.fontSize+t.strokeThickness)/h;for(let g=0;g<i.length;g++){let y=s.lineHeight*g;for(let _=0;_<d.length;_++){let v=0;typeof f[_]=="number"?v=f[_]:v=_/d.length;let x=y/h+v*m,b=Math.max(p,x);b=Math.min(b,1),a.addColorStop(b,d[_]),p=b}}}else{a=e.createLinearGradient(u,h/2,c+u,h/2);let p=d.length+1,m=1;for(let g=0;g<d.length;g++){let y;typeof f[g]=="number"?y=f[g]:y=m/p,a.addColorStop(y,d[g]),m++}}return a}function Ub(r,e,t,n,i,s,o){let a=t.text,l=t.fontProperties;e.translate(n,i),e.scale(s,s);let u=o.strokeThickness/2,c=-(o.strokeThickness/2);if(e.font=o.toFontString(),e.lineWidth=o.strokeThickness,e.textBaseline=o.textBaseline,e.lineJoin=o.lineJoin,e.miterLimit=o.miterLimit,e.fillStyle=Bb(r,e,o,s,[a],t),e.strokeStyle=o.stroke,o.dropShadow){let h=o.dropShadowColor,d=o.dropShadowBlur*s,f=o.dropShadowDistance*s;e.shadowColor=ue.shared.setValue(h).setAlpha(o.dropShadowAlpha).toRgbaString(),e.shadowBlur=d,e.shadowOffsetX=Math.cos(o.dropShadowAngle)*f,e.shadowOffsetY=Math.sin(o.dropShadowAngle)*f}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;o.stroke&&o.strokeThickness&&e.strokeText(a,u,c+t.lineHeight-l.descent),o.fill&&e.fillText(a,u,c+t.lineHeight-l.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function Wo(r){return r.codePointAt?r.codePointAt(0):r.charCodeAt(0)}function jh(r){return Array.from?Array.from(r):r.split("")}function jb(r){typeof r=="string"&&(r=[r]);let e=[];for(let t=0,n=r.length;t<n;t++){let i=r[t];if(Array.isArray(i)){if(i.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${i.length}.`);let s=i[0].charCodeAt(0),o=i[1].charCodeAt(0);if(o<s)throw new Error("[BitmapFont]: Invalid character range.");for(let a=s,l=o;a<=l;a++)e.push(String.fromCharCode(a))}else e.push(...jh(i))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}var Gs=class hi{constructor(e,t,n){let[i]=e.info,[s]=e.common,[o]=e.page,[a]=e.distanceField,l=N.getResolutionOfUrl(o.file),u={};this._ownsTextures=n,this.font=i.face,this.size=i.size,this.lineHeight=s.lineHeight/l,this.chars={},this.pageTextures=u;for(let c=0;c<e.page.length;c++){let{id:h,file:d}=e.page[c];u[h]=t instanceof Array?t[c]:t[d],a?.fieldType&&a.fieldType!=="none"&&(u[h].baseTexture.alphaMode=Ke.NO_PREMULTIPLIED_ALPHA,u[h].baseTexture.mipmap=Rt.OFF)}for(let c=0;c<e.char.length;c++){let{id:h,page:d}=e.char[c],{x:f,y:p,width:m,height:g,xoffset:y,yoffset:_,xadvance:v}=e.char[c];f/=l,p/=l,m/=l,g/=l,y/=l,_/=l,v/=l;let x=new Z(f+u[d].frame.x/l,p+u[d].frame.y/l,m,g);this.chars[h]={xOffset:y,yOffset:_,xAdvance:v,kerning:{},texture:new se(u[d].baseTexture,x),page:d}}for(let c=0;c<e.kerning.length;c++){let{first:h,second:d,amount:f}=e.kerning[c];h/=l,d/=l,f/=l,this.chars[d]&&(this.chars[d].kerning[h]=f)}this.distanceFieldRange=a?.distanceRange,this.distanceFieldType=a?.fieldType?.toLowerCase()??"none"}destroy(){for(let e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(let e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null}static install(e,t,n){let i;if(e instanceof ci)i=e;else{let o=kb(e);if(!o)throw new Error("Unrecognized data format for font.");i=o.parse(e)}t instanceof se&&(t=[t]);let s=new hi(i,t,n);return hi.available[s.font]=s,s}static uninstall(e){let t=hi.available[e];if(!t)throw new Error(`No font found named '${e}'`);t.destroy(),delete hi.available[e]}static from(e,t,n){if(!e)throw new Error("[BitmapFont] Property `name` is required.");let E=Object.assign({},hi.defaultOptions,n),{chars:i,padding:s,resolution:o,textureWidth:a,textureHeight:l}=E,u=pu(E,["chars","padding","resolution","textureWidth","textureHeight"]),c=jb(i),h=t instanceof Wt?t:new Wt(t),d=a,f=new ci;f.info[0]={face:h.fontFamily,size:h.fontSize},f.common[0]={lineHeight:h.fontSize};let p=0,m=0,g,y,_,v=0,x=[],b=[];for(let w=0;w<c.length;w++){g||(g=I.ADAPTER.createCanvas(),g.width=a,g.height=l,y=g.getContext("2d"),_=new Y(g,O({resolution:o},u)),x.push(_),b.push(new se(_)),f.page.push({id:b.length-1,file:""}));let T=c[w],k=an.measureText(T,h,!1,g),P=k.width,R=Math.ceil(k.height),D=Math.ceil((h.fontStyle==="italic"?2:1)*P);if(m>=l-R*o){if(m===0)throw new Error(`[BitmapFont] textureHeight ${l}px is too small (fontFamily: '${h.fontFamily}', fontSize: ${h.fontSize}px, char: '${T}')`);--w,g=null,y=null,_=null,m=0,p=0,v=0;continue}if(v=Math.max(R+k.fontProperties.descent,v),D*o+p>=d){if(p===0)throw new Error(`[BitmapFont] textureWidth ${a}px is too small (fontFamily: '${h.fontFamily}', fontSize: ${h.fontSize}px, char: '${T}')`);--w,m+=v*o,m=Math.ceil(m),p=0,v=0;continue}Ub(g,y,k,p,m,o,h);let A=Wo(k.text);f.char.push({id:A,page:b.length-1,x:p/o,y:m/o,width:D,height:R,xoffset:0,yoffset:0,xadvance:P-(h.dropShadow?h.dropShadowDistance:0)-(h.stroke?h.strokeThickness:0)}),p+=(D+2*s)*o,p=Math.ceil(p)}if(!n?.skipKerning)for(let w=0,T=c.length;w<T;w++){let k=c[w];for(let P=0;P<T;P++){let R=c[P],D=y.measureText(k).width,A=y.measureText(R).width,X=y.measureText(k+R).width-(D+A);X&&f.kerning.push({first:Wo(k),second:Wo(R),amount:X})}}let C=new hi(f,b,!0);return hi.available[e]!==void 0&&hi.uninstall(e),hi.available[e]=C,C}};Gs.ALPHA=[["a","z"],["A","Z"]," "],Gs.NUMERIC=[["0","9"]],Gs.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],Gs.ASCII=[[" ","~"]],Gs.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:Gs.ALPHANUMERIC},Gs.available={};var kn=Gs;var BR=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`;var UR=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;var jR=[],VR=[],HR=[],h8=class GR extends Je{constructor(e,t={}){super();let{align:n,tint:i,maxWidth:s,letterSpacing:o,fontName:a,fontSize:l}=Object.assign({},GR.styleDefaults,t);if(!kn.available[a])throw new Error(`Missing BitmapFont "${a}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=n,this._tintColor=new ue(i),this._font=void 0,this._fontName=a,this._fontSize=l,this.text=e,this._maxWidth=s,this._maxLineHeight=0,this._letterSpacing=o,this._anchor=new Ur(()=>{this.dirty=!0},this,0,0),this._roundPixels=I.ROUND_PIXELS,this.dirty=!0,this._resolution=I.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){let e=kn.available[this._fontName],t=this.fontSize,n=t/e.size,i=new oe,s=[],o=[],a=[],l=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",u=jh(l),c=this._maxWidth*e.size/t,h=e.distanceFieldType==="none"?jR:VR,d=null,f=0,p=0,m=0,g=-1,y=0,_=0,v=0,x=0;for(let P=0;P<u.length;P++){let R=u[P],D=Wo(R);if(/(?:\s)/.test(R)&&(g=P,y=f,x++),R==="\r"||R===`
`){o.push(f),a.push(-1),p=Math.max(p,f),++m,++_,i.x=0,i.y+=e.lineHeight,d=null,x=0;continue}let A=e.chars[D];if(!A)continue;d&&A.kerning[d]&&(i.x+=A.kerning[d]);let X=HR.pop()||{texture:se.EMPTY,line:0,charCode:0,prevSpaces:0,position:new oe};X.texture=A.texture,X.line=m,X.charCode=D,X.position.x=Math.round(i.x+A.xOffset+this._letterSpacing/2),X.position.y=Math.round(i.y+A.yOffset),X.prevSpaces=x,s.push(X),f=X.position.x+Math.max(A.xAdvance-A.xOffset,A.texture.orig.width),i.x+=A.xAdvance+this._letterSpacing,v=Math.max(v,A.yOffset+A.texture.height),d=D,g!==-1&&c>0&&i.x>c&&(++_,N.removeItems(s,1+g-_,1+P-g),P=g,g=-1,o.push(y),a.push(s.length>0?s[s.length-1].prevSpaces:0),p=Math.max(p,y),m++,i.x=0,i.y+=e.lineHeight,d=null,x=0)}let b=u[u.length-1];b!=="\r"&&b!==`
`&&(/(?:\s)/.test(b)&&(f=y),o.push(f),p=Math.max(p,f),a.push(-1));let C=[];for(let P=0;P<=m;P++){let R=0;this._align==="right"?R=p-o[P]:this._align==="center"?R=(p-o[P])/2:this._align==="justify"&&(R=a[P]<0?0:(p-o[P])/a[P]),C.push(R)}let E=s.length,w={},T=[],k=this._activePagesMeshData;h.push(...k);for(let P=0;P<E;P++){let R=s[P].texture,D=R.baseTexture.uid;if(!w[D]){let A=h.pop();if(!A){let K=new Us,U,B;e.distanceFieldType==="none"?(U=new Wi(se.EMPTY),B=re.NORMAL):(U=new Wi(se.EMPTY,{program:Gt.from(UR,BR),uniforms:{uFWidth:0}}),B=re.NORMAL_NPM);let z=new zo(K,U);z.blendMode=B,A={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:z,vertices:null,uvs:null,indices:null}}A.index=0,A.indexCount=0,A.vertexCount=0,A.uvsCount=0,A.total=0;let{_textureCache:X}=this;X[D]=X[D]||new se(R.baseTexture),A.mesh.texture=X[D],A.mesh.tint=this._tintColor.value,T.push(A),w[D]=A}w[D].total++}for(let P=0;P<k.length;P++)T.includes(k[P])||this.removeChild(k[P].mesh);for(let P=0;P<T.length;P++)T[P].mesh.parent!==this&&this.addChild(T[P].mesh);this._activePagesMeshData=T;for(let P in w){let R=w[P],D=R.total;if(!(R.indices?.length>6*D)||R.vertices.length<zo.BATCHABLE_SIZE*2)R.vertices=new Float32Array(4*2*D),R.uvs=new Float32Array(4*2*D),R.indices=new Uint16Array(6*D);else{let A=R.total,X=R.vertices;for(let K=A*4*2;K<X.length;K++)X[K]=0}R.mesh.size=6*D}for(let P=0;P<E;P++){let R=s[P],D=R.position.x+C[R.line]*(this._align==="justify"?R.prevSpaces:1);this._roundPixels&&(D=Math.round(D));let A=D*n,X=R.position.y*n,K=R.texture,U=w[K.baseTexture.uid],B=K.frame,z=K._uvs,H=U.index++;U.indices[H*6+0]=0+H*4,U.indices[H*6+1]=1+H*4,U.indices[H*6+2]=2+H*4,U.indices[H*6+3]=0+H*4,U.indices[H*6+4]=2+H*4,U.indices[H*6+5]=3+H*4,U.vertices[H*8+0]=A,U.vertices[H*8+1]=X,U.vertices[H*8+2]=A+B.width*n,U.vertices[H*8+3]=X,U.vertices[H*8+4]=A+B.width*n,U.vertices[H*8+5]=X+B.height*n,U.vertices[H*8+6]=A,U.vertices[H*8+7]=X+B.height*n,U.uvs[H*8+0]=z.x0,U.uvs[H*8+1]=z.y0,U.uvs[H*8+2]=z.x1,U.uvs[H*8+3]=z.y1,U.uvs[H*8+4]=z.x2,U.uvs[H*8+5]=z.y2,U.uvs[H*8+6]=z.x3,U.uvs[H*8+7]=z.y3}this._textWidth=p*n,this._textHeight=(i.y+e.lineHeight)*n;for(let P in w){let R=w[P];if(this.anchor.x!==0||this.anchor.y!==0){let K=0,U=this._textWidth*this.anchor.x,B=this._textHeight*this.anchor.y;for(let z=0;z<R.total;z++)R.vertices[K++]-=U,R.vertices[K++]-=B,R.vertices[K++]-=U,R.vertices[K++]-=B,R.vertices[K++]-=U,R.vertices[K++]-=B,R.vertices[K++]-=U,R.vertices[K++]-=B}this._maxLineHeight=v*n;let D=R.mesh.geometry.getBuffer("aVertexPosition"),A=R.mesh.geometry.getBuffer("aTextureCoord"),X=R.mesh.geometry.getIndex();D.data=R.vertices,A.data=R.uvs,X.data=R.indices,D.update(),A.update(),X.update()}for(let P=0;P<s.length;P++)HR.push(s[P]);this._font=e,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0);let{distanceFieldRange:t,distanceFieldType:n,size:i}=kn.available[this._fontName];if(n!=="none"){let{a:s,b:o,c:a,d:l}=this.worldTransform,u=Math.sqrt(s*s+o*o),c=Math.sqrt(a*a+l*l),h=(Math.abs(u)+Math.abs(c))/2,d=this.fontSize/i,f=e._view.resolution;for(let p of this._activePagesMeshData)p.mesh.shader.uniforms.uFWidth=h*t*d*f}super._render(e)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){let e=kn.available[this._fontName];if(!e)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==e&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(e){if(this.tint!==e){this._tintColor.setValue(e);for(let t=0;t<this._activePagesMeshData.length;t++)this._activePagesMeshData[t].mesh.tint=e}}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.dirty=!0)}get fontName(){return this._fontName}set fontName(e){if(!kn.available[e])throw new Error(`Missing BitmapFont "${e}"`);this._fontName!==e&&(this._fontName=e,this.dirty=!0)}get fontSize(){return this._fontSize??kn.available[this._fontName].size}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.dirty=!0)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(e){e!==this._roundPixels&&(this._roundPixels=e,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}destroy(e){let{_textureCache:t}=this,n=kn.available[this._fontName].distanceFieldType==="none"?jR:VR;n.push(...this._activePagesMeshData);for(let i of this._activePagesMeshData)this.removeChild(i.mesh);this._activePagesMeshData=[],n.filter(i=>t[i.mesh.texture.baseTexture.uid]).forEach(i=>{i.mesh.texture=se.EMPTY});for(let i in t)t[i].destroy(),delete t[i];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(e)}};h8.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};var d8=[".xml",".fnt"],$R={extension:{type:S.LoadParser,priority:et.Normal},name:"loadBitmapFont",test(r){return d8.includes(N.path.extname(r).toLowerCase())},testParse(r){return L(this,null,function*(){return Xi.test(r)||Hs.test(r)})},parse(r,e,t){return L(this,null,function*(){let n=Xi.test(r)?Xi.parse(r):Hs.parse(r),{src:i}=e,{page:s}=n,o=[];for(let u=0;u<s.length;++u){let c=s[u].file,h=N.path.join(N.path.dirname(i),c);h=jo(h,i),o.push(h)}let a=yield t.load(o),l=o.map(u=>a[u]);return kn.install(n,l,!0)})},load(r,e){return L(this,null,function*(){return(yield I.ADAPTER.fetch(r)).text()})},unload(r){r.destroy()}};M.add($R);var Vb=class Jl extends Wt{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(e){return new Jl(Object.keys(Jl.defaultOptions).reduce((t,n)=>De(O({},t),{[n]:e[n]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(e=>{URL.revokeObjectURL(e.src),e.refs--,e.refs===0&&(e.fontFace&&document.fonts.delete(e.fontFace),delete Jl.availableFonts[e.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(e,t={}){let{availableFonts:n}=Jl;if(n[e]){let i=n[e];return this._fonts.push(i),i.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return I.ADAPTER.fetch(e).then(i=>i.blob()).then(i=>L(this,null,function*(){return new Promise((s,o)=>{let a=URL.createObjectURL(i),l=new FileReader;l.onload=()=>s([a,l.result]),l.onerror=o,l.readAsDataURL(i)})})).then(o=>L(this,[o],function*([i,s]){let a=Object.assign({family:N.path.basename(e,N.path.extname(e)),weight:"normal",style:"normal",display:"auto",src:i,dataSrc:s,refs:1,originalUrl:e,fontFace:null},t);n[e]=a,this._fonts.push(a),this.styleID++;let l=new FontFace(a.family,`url(${a.src})`,{weight:a.weight,style:a.style,display:a.display});a.fontFace=l,yield l.load(),document.fonts.add(l),yield document.fonts.ready,this.styleID++,this.fontsDirty=!0}))}addOverride(...e){let t=e.filter(n=>!this._overrides.includes(n));t.length>0&&(this._overrides.push(...t),this.styleID++)}removeOverride(...e){let t=e.filter(n=>this._overrides.includes(n));t.length>0&&(this._overrides=this._overrides.filter(n=>!t.includes(n)),this.styleID++)}toCSS(e){return[`transform: scale(${e})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((e,t)=>`${e}
            @font-face {
                font-family: "${t.family}";
                src: url('${t.dataSrc}');
                font-weight: ${t.weight};
                font-style: ${t.style};
                font-display: ${t.display};
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(e){this._stylesheet!==e&&(this._stylesheet=e,this.styleID++)}normalizeColor(e){return Array.isArray(e)&&(e=N.rgb2hex(e)),typeof e=="number"?N.hex2string(e):e}dropShadowToCSS(){let e=this.normalizeColor(this.dropShadowColor),t=this.dropShadowAlpha,n=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),i=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);e.startsWith("#")&&t<1&&(e+=(t*255|0).toString(16).padStart(2,"0"));let s=`${n}px ${i}px`;return this.dropShadowBlur>0?`text-shadow: ${s} ${this.dropShadowBlur}px ${e}`:`text-shadow: ${s} ${e}`}reset(){Object.assign(this,Jl.defaultOptions)}onBeforeDraw(){let{fontsDirty:e}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&e?new Promise(t=>setTimeout(t,100)):Promise.resolve()}get isSafari(){let{userAgent:e}=I.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(e)}set fillGradientStops(e){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(e){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(e){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(e){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(e){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(e){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(e){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};Vb.availableFonts={},Vb.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};var Vh=Vb;var Gm=class eu extends _r{constructor(e="",t={}){super(se.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this.localStyleID=-1,this.dirty=!1,this._updateID=0,this.ownsStyle=!1;let n=new Image,i=se.from(n,{scaleMode:I.SCALE_MODE,resourceOptions:{autoLoad:!1}});i.orig=new Z,i.trim=new Z,this.texture=i;let s="http://www.w3.org/2000/svg",o="http://www.w3.org/1999/xhtml",a=document.createElementNS(s,"svg"),l=document.createElementNS(s,"foreignObject"),u=document.createElementNS(o,"div"),c=document.createElementNS(o,"style");l.setAttribute("width","10000"),l.setAttribute("height","10000"),l.style.overflow="hidden",a.appendChild(l),this.maxWidth=eu.defaultMaxWidth,this.maxHeight=eu.defaultMaxHeight,this._domElement=u,this._styleElement=c,this._svgRoot=a,this._foreignObject=l,this._foreignObject.appendChild(c),this._foreignObject.appendChild(u),this._image=n,this._loadImage=new Image,this._autoResolution=eu.defaultAutoResolution,this._resolution=eu.defaultResolution??I.RESOLUTION,this.text=e,this.style=t}measureText(e){let{text:t,style:n,resolution:i}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},e);Object.assign(this._domElement,{innerHTML:t,style:n.toCSS(i)}),this._styleElement.textContent=n.toGlobalCSS(),document.body.appendChild(this._svgRoot);let s=this._domElement.getBoundingClientRect();this._svgRoot.remove();let{width:o,height:a}=s;(o>this.maxWidth||a>this.maxHeight)&&console.warn("[HTMLText] Large expanse of text, increase HTMLText.maxWidth or HTMLText.maxHeight property.");let l=Math.min(this.maxWidth,Math.ceil(o)),u=Math.min(this.maxHeight,Math.ceil(a));return this._svgRoot.setAttribute("width",l.toString()),this._svgRoot.setAttribute("height",u.toString()),t!==this._text&&(this._domElement.innerHTML=this._text),n!==this._style&&(Object.assign(this._domElement,{style:this._style?.toCSS(i)}),this._styleElement.textContent=this._style?.toGlobalCSS()),{width:l+n.padding*2,height:u+n.padding*2}}updateText(e=!0){return L(this,null,function*(){let{style:t,_image:n,_loadImage:i}=this;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&e)return;let{width:s,height:o}=this.measureText();n.width=i.width=Math.ceil(Math.max(1,s)),n.height=i.height=Math.ceil(Math.max(1,o)),this._updateID++;let a=this._updateID;yield new Promise(l=>{i.onload=()=>L(this,null,function*(){if(a<this._updateID){l();return}yield t.onBeforeDraw(),n.src=i.src,i.onload=null,i.src="",this.updateTexture(),l()});let u=new XMLSerializer().serializeToString(this._svgRoot);i.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(u)}`})})}get source(){return this._image}updateTexture(){let{style:e,texture:t,_image:n,resolution:i}=this,{padding:s}=e,{baseTexture:o}=t;t.trim.width=t._frame.width=n.width/i,t.trim.height=t._frame.height=n.height/i,t.trim.x=-s,t.trim.y=-s,t.orig.width=t._frame.width-s*2,t.orig.height=t._frame.height-s*2,this._onTextureUpdate(),o.setRealSize(n.width,n.height,i),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}_renderCanvas(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(e)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds(e)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(e){typeof e=="boolean"&&(e={children:e}),e=Object.assign({},eu.defaultDestroyOptions,e),super.destroy(e);let t=null;this.ownsStyle&&this._style?.cleanFonts(),this._style=t,this._svgRoot?.remove(),this._svgRoot=t,this._domElement?.remove(),this._domElement=t,this._foreignObject?.remove(),this._foreignObject=t,this._styleElement?.remove(),this._styleElement=t,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=t,this._image.src="",this._image=t}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(e){this.updateText(!0);let t=N.sign(this.scale.x)||1;this.scale.x=t*e/this._image.width/this.resolution,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(e){this.updateText(!0);let t=N.sign(this.scale.y)||1;this.scale.y=t*e/this._image.height/this.resolution,this._height=e}get style(){return this._style}set style(e){this._style!==e&&(e=e||{},e instanceof Vh?(this.ownsStyle=!1,this._style=e):e instanceof Wt?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=Vh.from(e)):(this.ownsStyle=!0,this._style=new Vh(e)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(e){e=String(e===""||e===null||e===void 0?" ":e),e=this.sanitiseText(e),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}sanitiseText(e){return e.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};Gm.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},Gm.defaultMaxWidth=2024,Gm.defaultMaxHeight=2024,Gm.defaultAutoResolution=!0;var zR=(()=>{let e=class e{static getInstance(){return e.instance||(e.instance=new e),e.instance}constructor(){this.loadPercents=0,this.loadSuccess$=new pn(1),this.loadPercent$=new pn(1),this.fonts={notoSerif:"Noto Serif"},this.assetsImg="/assets/img/",this.assetsAvatar=Ec.uploadAvatarUrl,this.assetsSound="/assets/sound/",this.loadPercent$.next(0),this.loadAssets().then(()=>{})}loadAssets(){return L(this,null,function*(){ks.addBundle("coinToss",{table:this.assetsImg+"sb-table.png",table2:this.assetsImg+"sb-table-02.png",dealer2:this.assetsImg+"sb-dealer.png",dealer:this.assetsImg+"sb-dealer-02.png",plate01:this.assetsImg+"sb-plate-01.png",plate02:this.assetsImg+"sb-plate-02.png",coin01:this.assetsImg+"sb-coin-01.png",coin02:this.assetsImg+"sb-coin-02.png",bettingSpot0101:this.assetsImg+"sb-betting-spot-01-01.png",bettingSpot0102:this.assetsImg+"sb-betting-spot-01-02.png",bettingSpot0103:this.assetsImg+"sb-betting-spot-01-03.png",bettingSpot0201:this.assetsImg+"sb-betting-spot-02-01.png",bettingSpot0202:this.assetsImg+"sb-betting-spot-02-02.png",bettingSpot0203:this.assetsImg+"sb-betting-spot-02-03.png",bettingSpot0301:this.assetsImg+"sb-betting-spot-03-01.png",bettingSpot0302:this.assetsImg+"sb-betting-spot-03-02.png",bettingSpot0303:this.assetsImg+"sb-betting-spot-03-03.png",bettingSpot0401:this.assetsImg+"sb-betting-spot-04-01.png",bettingSpot0402:this.assetsImg+"sb-betting-spot-04-02.png",bettingSpot0403:this.assetsImg+"sb-betting-spot-04-03.png",bettingSpot0501:this.assetsImg+"sb-betting-spot-05-01.png",bettingSpot0502:this.assetsImg+"sb-betting-spot-05-02.png",bettingSpot0503:this.assetsImg+"sb-betting-spot-05-03.png",spotWinBg:this.assetsImg+"sb-spot-win-bg.jpg",notoSerif:"/assets/fonts/NotoSerif-Regular.ttf",notoSerifBold:"/assets/fonts/NotoSerif-SemiBold.ttf",oddText:this.assetsImg+"sb-odd.png",evenText:this.assetsImg+"sb-even.png",oddText2:this.assetsImg+"sb-odd-2.png",evenText2:this.assetsImg+"sb-even-2.png",evenText3:this.assetsImg+"sb-even-3.png",denominations:this.assetsImg+"sb-denominations.png",denominationsActive:this.assetsImg+"sb-denominations-active.png",denominationLeftArrow:this.assetsImg+"denomination-left-arrow.png",denominationLeftArrowD:this.assetsImg+"denomination-left-arrow-d.png",denominationRightArrow:this.assetsImg+"denomination-right-arrow.png",denominationRightArrowD:this.assetsImg+"denomination-right-arrow-d.png",mess01:this.assetsImg+"sb-mess-01.png",mess02:this.assetsImg+"sb-mess-02.png",winBG:this.assetsImg+"sb-win-bg.png",winCoin:this.assetsImg+"sb-win-coin.png",winVI:this.assetsImg+"sb-win-vi.png",secondsBG:this.assetsImg+"sb-seconds-bg.png",notificationBG:this.assetsImg+"sb-notification-bg.png",helpBtn:this.assetsImg+"help-btn.png",historyBtn:this.assetsImg+"history-btn.png",homeBtn:this.assetsImg+"home-btn.png",muteBtn:this.assetsImg+"mute-btn.png",unMuteBtn:this.assetsImg+"unmute-btn.png",avatarBorder01:this.assetsImg+"sb-avatar-border-01.png",otherPlayer:this.assetsImg+"sb-other-player.png",avatarBorder02:this.assetsImg+"sb-avatar-border-02.png",balance01:this.assetsImg+"sb-balance-01.png",balance02:this.assetsImg+"sb-balance-02.png",soundtrack:this.assetsSound+"eee2b123-3c78-4b3a-9fb0-09d2b45e2d15.dcf1d.mp3",soundDenominationNext:this.assetsSound+"ccf42773-21fa-4248-9a52-f4a8c10cbe2d.6f5c0.mp3",soundPlateReveal:this.assetsSound+"ac71733b-cdab-4b61-9be9-37e26103ead7.96e6d.mp3",soundPlateReset:this.assetsSound+"cba4b003-7380-4beb-925e-71c6be9f5895.e8ea5.mp3",soundPlateShake:this.assetsSound+"e091e244-4739-4029-bca6-7a3e50d1fd92.36921.mp3",soundCoinBet:this.assetsSound+"ccf42773-21fa-4248-9a52-f4a8c10cbe2d.6f5c0.mp3",coin0red:this.assetsImg+"0-red.png",coin1red:this.assetsImg+"1-red.png",coin2red:this.assetsImg+"2-red.png",coin3red:this.assetsImg+"3-red.png",coin4red:this.assetsImg+"4-red.png"}),this.loadPercent$.next(1),this.gameAssets=yield ks.loadBundle(["coinToss"],n=>{this.loadPercents=Math.round(n*1e4)/100,this.loadPercent$.next(this.loadPercents),this.loadPercents===100&&this.loadSuccess$.next(!0)})})}};e.soundStatus=!0,e.denominations=[],e.userData=[],e.gameCode="";let r=e;return r})();var Xo=function(r){return r.Local="local_strategy",r.Session="session_strategy",r.InMemory="in_memory_strategy",r}(Xo||{}),Gb=class{static isStorageAvailable(e){let t=!0;try{typeof e=="object"?(e.setItem("test-storage","foobar"),e.removeItem("test-storage")):t=!1}catch{t=!1}return t}};function Hb(){}var f8="ngx-webstorage",p8="|",m8=!1,Hh=(()=>{let e=class e{static normalize(n){return n=e.isCaseSensitive?n:n.toLowerCase(),`${e.prefix}${e.separator}${n}`}static isNormalizedKey(n){return n.indexOf(e.prefix+e.separator)===0}static setPrefix(n){e.prefix=n}static setSeparator(n){e.separator=n}static setCaseSensitive(n){e.isCaseSensitive=n}static consumeConfiguration(n){"prefix"in n&&this.setPrefix(n.prefix),"separator"in n&&this.setSeparator(n.separator),"caseSensitive"in n&&this.setCaseSensitive(n.caseSensitive)}};e.prefix=f8,e.separator=p8,e.isCaseSensitive=m8;let r=e;return r})(),tu=class{constructor(e){this.strategy=e}retrieve(e){let t;return this.strategy.get(Hh.normalize(e)).subscribe(n=>t=typeof n>"u"?null:n),t}store(e,t){return this.strategy.set(Hh.normalize(e),t).subscribe(Hb),t}clear(e){e!==void 0?this.strategy.del(Hh.normalize(e)).subscribe(Hb):this.strategy.clear().subscribe(Hb)}getStrategyName(){return this.strategy.name}observe(e){return e=Hh.normalize(e),this.strategy.keyChanges.pipe(vt(t=>t===null||t===e),_t(()=>this.strategy.get(e)),Mg(),Fg({refCount:!0,bufferSize:1}))}};var qb=(()=>{let e=class e{constructor(){this.caches={}}get(n,i){return this.getCacheStore(n)[i]}set(n,i,s){this.getCacheStore(n)[i]=s}del(n,i){delete this.getCacheStore(n)[i]}clear(n){this.caches[n]={}}getCacheStore(n){return n in this.caches?this.caches[n]:this.caches[n]={}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})(),qR=new ne("window_local_storage");function g8(){return typeof window<"u"?window.localStorage:null}var y8={provide:qR,useFactory:g8},YR=new ne("window_session_storage");function v8(){return typeof window<"u"?window.sessionStorage:null}var _8={provide:YR,useFactory:v8},zm=class{constructor(e,t){this.storage=e,this.cache=t,this.keyChanges=new nt}get isAvailable(){return this._isAvailable===void 0&&(this._isAvailable=Gb.isStorageAvailable(this.storage)),this._isAvailable}get(e){let t=this.cache.get(this.name,e);if(t!==void 0)return q(t);try{let n=this.storage.getItem(e);n!==null&&(t=JSON.parse(n),this.cache.set(this.name,e,t))}catch(n){console.warn(n)}return q(t)}set(e,t){let n=JSON.stringify(t);return this.storage.setItem(e,n),this.cache.set(this.name,e,t),this.keyChanges.next(e),q(t)}del(e){return this.storage.removeItem(e),this.cache.del(this.name,e),this.keyChanges.next(e),q(null)}clear(){return this.storage.clear(),this.cache.clear(this.name),this.keyChanges.next(null),q(null)}},qi=class qi extends zm{constructor(e,t,n,i){super(e,t),this.storage=e,this.cache=t,this.platformId=n,this.zone=i,this.name=qi.strategyName,m_(this.platformId)&&this.listenExternalChanges()}listenExternalChanges(){window.addEventListener("storage",e=>this.zone.run(()=>{if(e.storageArea!==this.storage)return;let t=e.key;t!==null?this.cache.del(this.name,e.key):this.cache.clear(this.name),this.keyChanges.next(t)}))}};qi.strategyName=Xo.Local,qi.\u0275fac=function(t){return new(t||qi)(j(qR),j(qb),j(qr),j(Se))},qi.\u0275prov=W({token:qi,factory:qi.\u0275fac});var $b=qi,Yi=class Yi extends zm{constructor(e,t,n,i){super(e,t),this.storage=e,this.cache=t,this.platformId=n,this.zone=i,this.name=Yi.strategyName,m_(this.platformId)&&this.listenExternalChanges()}listenExternalChanges(){window.addEventListener("storage",e=>this.zone.run(()=>{if(e.storageArea!==this.storage)return;let t=e.key;e.key!==null?this.cache.del(this.name,e.key):this.cache.clear(this.name),this.keyChanges.next(t)}))}};Yi.strategyName=Xo.Session,Yi.\u0275fac=function(t){return new(t||Yi)(j(YR),j(qb),j(qr),j(Se))},Yi.\u0275prov=W({token:Yi,factory:Yi.\u0275fac});var zb=Yi,Zi=class Zi{constructor(e){this.cache=e,this.keyChanges=new nt,this.isAvailable=!0,this.name=Zi.strategyName}get(e){return q(this.cache.get(this.name,e))}set(e,t){return this.cache.set(this.name,e,t),this.keyChanges.next(e),q(t)}del(e){return this.cache.del(this.name,e),this.keyChanges.next(e),q(null)}clear(){return this.cache.clear(this.name),this.keyChanges.next(null),q(null)}};Zi.strategyName=Xo.InMemory,Zi.\u0275fac=function(t){return new(t||Zi)(j(qb))},Zi.\u0275prov=W({token:Zi,factory:Zi.\u0275fac});var Wb=Zi,$m=new ne("STORAGE_STRATEGIES"),x8=[{provide:$m,useClass:Wb,multi:!0},{provide:$m,useClass:$b,multi:!0},{provide:$m,useClass:zb,multi:!0}];var WR="invalid_strategy",Gh=(()=>{let e=class e{constructor(n){this.strategies=n,this.registration$=new nt,n||(n=[]),this.strategies=n.reverse().map((i,s,o)=>i.name).map((i,s,o)=>o.indexOf(i)===s?s:null).filter(i=>i!==null).map(i=>n[i])}static get(n){if(!this.isStrategyRegistered(n))throw Error(WR);let i=this.index[n];return i.isAvailable||(i=this.index[Xo.InMemory]),i}static set(n,i){this.index[n]=i}static clear(n){n!==void 0?delete this.index[n]:this.index={}}static isStrategyRegistered(n){return n in this.index}static hasRegistredStrategies(){return Object.keys(this.index).length>0}getStrategy(n){return e.get(n)}indexStrategies(){this.strategies.forEach(n=>this.register(n.name,n))}indexStrategy(n,i=!1){if(e.isStrategyRegistered(n)&&!i)return e.get(n);let s=this.strategies.find(o=>o.name===n);if(!s)throw new Error(WR);return this.register(n,s,i),s}register(n,i,s=!1){(!e.isStrategyRegistered(n)||s)&&(e.set(n,i),this.registration$.next(n))}};e.index={},e.\u0275fac=function(i){return new(i||e)(j($m,8))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})(),$h=class extends tu{};function b8(r){let e=r.indexStrategy(Xo.Local);return new tu(e)}var w8={provide:$h,useFactory:b8,deps:[Gh]},Xb=class extends tu{};function E8(r){let e=r.indexStrategy(Xo.Session);return new tu(e)}var T8={provide:Xb,useFactory:E8,deps:[Gh]};var C8=[w8,T8],XR=new ne("ngx_webstorage_config");function D8(r){return r.indexStrategies(),()=>Gh.index}var QEe=(()=>{let e=class e{constructor(n,i){i?Hh.consumeConfiguration(i):console.error("NgxWebstorage : Possible misconfiguration (The forRoot method usage is mandatory since the 3.0.0)")}static forRoot(n={}){return{ngModule:e,providers:[{provide:XR,useValue:n},y8,_8,...C8,...x8,{provide:Ha,useFactory:D8,deps:[Gh],multi:!0}]}}};e.\u0275fac=function(i){return new(i||e)(j(Gh),j(XR,8))},e.\u0275mod=Tn({type:e}),e.\u0275inj=En({});let r=e;return r})();var ZR={calHistory:{i:1e3,percent:{top:10,left:2106}},btnContainer:{i:3e3},table:{i:1},dealer:{i:1e3,n:"dealer"},notification:{i:2e3},plate:{i:200,a:2e3},bettingSpot:{i:100,n:"spotsContainer",spot:{n:r=>"spot"+r.toString()},spot1:{actionIndex:1},spot2:{actionIndex:2},spot3:{actionIndex:3},spot4:{actionIndex:7},spot5:{actionIndex:4},spot6:{actionIndex:5},spot7:{actionIndex:6},spotArea:{n:r=>"spotArea"+r.toString()}},tableHistory:{i:310},player:{i:1e3,n:"playerContainer",other:{n:"otherPlayer"},o:{avatar:{container:{n:"avatarContainer"},n:"avatar"},balance:{background:{n:"balanceBackground"}}}},denomination:{i:320,n:"denominationsContainer",mask:{n:"denominationsMaskWrapper",wrapper:{n:"denominationsWrapper"}},item:{n:r=>"denomination"+r.toString(),active:{n:"denominationActive"},icon:{n:"icon"}}},listCoinBet:{i:300},coinTossWinAnimation:{i:1e3,n:"winAnimationContainer"}};function Ki(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function iP(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.__proto__=e}var Tr={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},nu={duration:.5,overwrite:!1,delay:0},fw,Xt,ot,cn=1e8,Be=1/cn,rw=Math.PI*2,I8=rw/4,A8=0,sP=Math.sqrt,M8=Math.cos,R8=Math.sin,bt=function(e){return typeof e=="string"},at=function(e){return typeof e=="function"},Ji=function(e){return typeof e=="number"},tg=function(e){return typeof e>"u"},fi=function(e){return typeof e=="object"},Er=function(e){return e!==!1},pw=function(){return typeof window<"u"},Wm=function(e){return at(e)||bt(e)},oP=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},qt=Array.isArray,nw=/(?:-?\.?\d|\.)+/gi,mw=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Qo=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Yb=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,gw=/[+-]=-?[.\d]+/,aP=/[^,'"\[\]\s]+/gi,P8=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,tt,un,iw,yw,Gr={},Zm={},lP,uP=function(e){return(Zm=Ko(e,Gr))&&Yt},rg=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},Zh=function(e,t){return!t&&console.warn(e)},cP=function(e,t){return e&&(Gr[e]=t)&&Zm&&(Zm[e]=t)||Gr},Kh=function(){return 0},O8={suppressEvents:!0,isStart:!0,kill:!1},Xm={suppressEvents:!0,kill:!1},N8={suppressEvents:!0},vw={},zs=[],sw={},hP,br={},Zb={},KR=30,qm=[],_w="",xw=function(e){var t=e[0],n,i;if(fi(t)||at(t)||(e=[e]),!(n=(t._gsap||{}).harness)){for(i=qm.length;i--&&!qm[i].targetTest(t););n=qm[i]}for(i=e.length;i--;)e[i]&&(e[i]._gsap||(e[i]._gsap=new Ew(e[i],n)))||e.splice(i,1);return e},Ws=function(e){return e._gsap||xw(hn(e))[0]._gsap},bw=function(e,t,n){return(n=e[t])&&at(n)?e[t]():tg(n)&&e.getAttribute&&e.getAttribute(t)||n},lr=function(e,t){return(e=e.split(",")).forEach(t)||e},lt=function(e){return Math.round(e*1e5)/1e5||0},It=function(e){return Math.round(e*1e7)/1e7||0},Jo=function(e,t){var n=t.charAt(0),i=parseFloat(t.substr(2));return e=parseFloat(e),n==="+"?e+i:n==="-"?e-i:n==="*"?e*i:e/i},F8=function(e,t){for(var n=t.length,i=0;e.indexOf(t[i])<0&&++i<n;);return i<n},Km=function(){var e=zs.length,t=zs.slice(0),n,i;for(sw={},zs.length=0,n=0;n<e;n++)i=t[n],i&&i._lazy&&(i.render(i._lazy[0],i._lazy[1],!0)._lazy=0)},dP=function(e,t,n,i){zs.length&&!Xt&&Km(),e.render(t,n,i||Xt&&t<0&&(e._initted||e._startAt)),zs.length&&!Xt&&Km()},fP=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(aP).length<2?t:bt(e)?e.trim():e},pP=function(e){return e},dn=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},L8=function(e){return function(t,n){for(var i in n)i in t||i==="duration"&&e||i==="ease"||(t[i]=n[i])}},Ko=function(e,t){for(var n in t)e[n]=t[n];return e},QR=function r(e,t){for(var n in t)n!=="__proto__"&&n!=="constructor"&&n!=="prototype"&&(e[n]=fi(t[n])?r(e[n]||(e[n]={}),t[n]):t[n]);return e},Qm=function(e,t){var n={},i;for(i in e)i in t||(n[i]=e[i]);return n},Xh=function(e){var t=e.parent||tt,n=e.keyframes?L8(qt(e.keyframes)):dn;if(Er(e.inherit))for(;t;)n(e,t.vars.defaults),t=t.parent||t._dp;return e},k8=function(e,t){for(var n=e.length,i=n===t.length;i&&n--&&e[n]===t[n];);return n<0},mP=function(e,t,n,i,s){n===void 0&&(n="_first"),i===void 0&&(i="_last");var o=e[i],a;if(s)for(a=t[s];o&&o[s]>a;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=e[n],e[n]=t),t._next?t._next._prev=t:e[i]=t,t._prev=o,t.parent=t._dp=e,t},ng=function(e,t,n,i){n===void 0&&(n="_first"),i===void 0&&(i="_last");var s=t._prev,o=t._next;s?s._next=o:e[n]===t&&(e[n]=o),o?o._prev=s:e[i]===t&&(e[i]=s),t._next=t._prev=t.parent=null},Xs=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},qo=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var n=e;n;)n._dirty=1,n=n.parent;return e},B8=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},ow=function(e,t,n,i){return e._startAt&&(Xt?e._startAt.revert(Xm):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,i))},U8=function r(e){return!e||e._ts&&r(e.parent)},JR=function(e){return e._repeat?iu(e._tTime,e=e.duration()+e._rDelay)*e:0},iu=function(e,t){var n=Math.floor(e/=t);return e&&n===e?n-1:n},Jm=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},ig=function(e){return e._end=It(e._start+(e._tDur/Math.abs(e._ts||e._rts||Be)||0))},sg=function(e,t){var n=e._dp;return n&&n.smoothChildTiming&&e._ts&&(e._start=It(n._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),ig(e),n._dirty||qo(n,e)),e},gP=function(e,t){var n;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(n=Jm(e.rawTime(),t),(!t._dur||ed(0,t.totalDuration(),n)-t._tTime>Be)&&t.render(n,!0)),qo(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(n=e;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;e._zTime=-Be}},di=function(e,t,n,i){return t.parent&&Xs(t),t._start=It((Ji(n)?n:n||e!==tt?ln(e,n,t):e._time)+t._delay),t._end=It(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),mP(e,t,"_first","_last",e._sort?"_start":0),aw(t)||(e._recent=t),i||gP(e,t),e._ts<0&&sg(e,e._tTime),e},yP=function(e,t){return(Gr.ScrollTrigger||rg("scrollTrigger",t))&&Gr.ScrollTrigger.create(t,e)},vP=function(e,t,n,i,s){if(Dw(e,t,s),!e._initted)return 1;if(!n&&e._pt&&!Xt&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&hP!==wr.frame)return zs.push(e),e._lazy=[s,i],1},j8=function r(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||r(t))},aw=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},V8=function(e,t,n,i){var s=e.ratio,o=t<0||!t&&(!e._start&&j8(e)&&!(!e._initted&&aw(e))||(e._ts<0||e._dp._ts<0)&&!aw(e))?0:1,a=e._rDelay,l=0,u,c,h;if(a&&e._repeat&&(l=ed(0,e._tDur,t),c=iu(l,a),e._yoyo&&c&1&&(o=1-o),c!==iu(e._tTime,a)&&(s=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==s||Xt||i||e._zTime===Be||!t&&e._zTime){if(!e._initted&&vP(e,t,i,n,l))return;for(h=e._zTime,e._zTime=t||(n?Be:0),n||(n=t&&!h),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=l,u=e._pt;u;)u.r(o,u.d),u=u._next;t<0&&ow(e,t,n,!0),e._onUpdate&&!n&&Hr(e,"onUpdate"),l&&e._repeat&&!n&&e.parent&&Hr(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===o&&(o&&Xs(e,1),!n&&!Xt&&(Hr(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},H8=function(e,t,n){var i;if(n>t)for(i=e._first;i&&i._start<=n;){if(i.data==="isPause"&&i._start>t)return i;i=i._next}else for(i=e._last;i&&i._start>=n;){if(i.data==="isPause"&&i._start<t)return i;i=i._prev}},su=function(e,t,n,i){var s=e._repeat,o=It(t)||0,a=e._tTime/e._tDur;return a&&!i&&(e._time*=o/e._dur),e._dur=o,e._tDur=s?s<0?1e10:It(o*(s+1)+e._rDelay*s):o,a>0&&!i&&sg(e,e._tTime=e._tDur*a),e.parent&&ig(e),n||qo(e.parent,e),e},eP=function(e){return e instanceof Ft?qo(e):su(e,e._dur)},G8={_start:0,endTime:Kh,totalDuration:Kh},ln=function r(e,t,n){var i=e.labels,s=e._recent||G8,o=e.duration()>=cn?s.endTime(!1):e._dur,a,l,u;return bt(t)&&(isNaN(t)||t in i)?(l=t.charAt(0),u=t.substr(-1)==="%",a=t.indexOf("="),l==="<"||l===">"?(a>=0&&(t=t.replace(/=/,"")),(l==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(u?(a<0?s:n).totalDuration()/100:1)):a<0?(t in i||(i[t]=o),i[t]):(l=parseFloat(t.charAt(a-1)+t.substr(a+1)),u&&n&&(l=l/100*(qt(n)?n[0]:n).totalDuration()),a>1?r(e,t.substr(0,a-1),n)+l:o+l)):t==null?o:+t},qh=function(e,t,n){var i=Ji(t[1]),s=(i?2:1)+(e<2?0:1),o=t[s],a,l;if(i&&(o.duration=t[1]),o.parent=n,e){for(a=o,l=n;l&&!("immediateRender"in a);)a=l.vars.defaults||{},l=Er(l.vars.inherit)&&l.parent;o.immediateRender=Er(a.immediateRender),e<2?o.runBackwards=1:o.startAt=t[s-1]}return new ct(t[0],o,t[s+1])},qs=function(e,t){return e||e===0?t(e):t},ed=function(e,t,n){return n<e?e:n>t?t:n},Lt=function(e,t){return!bt(e)||!(t=P8.exec(e))?"":t[1]},$8=function(e,t,n){return qs(n,function(i){return ed(e,t,i)})},lw=[].slice,_P=function(e,t){return e&&fi(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&fi(e[0]))&&!e.nodeType&&e!==un},z8=function(e,t,n){return n===void 0&&(n=[]),e.forEach(function(i){var s;return bt(i)&&!t||_P(i,1)?(s=n).push.apply(s,hn(i)):n.push(i)})||n},hn=function(e,t,n){return ot&&!t&&ot.selector?ot.selector(e):bt(e)&&!n&&(iw||!ou())?lw.call((t||yw).querySelectorAll(e),0):qt(e)?z8(e,n):_P(e)?lw.call(e,0):e?[e]:[]},uw=function(e){return e=hn(e)[0]||Zh("Invalid scope")||{},function(t){var n=e.current||e.nativeElement||e;return hn(t,n.querySelectorAll?n:n===e?Zh("Invalid scope")||yw.createElement("div"):e)}},xP=function(e){return e.sort(function(){return .5-Math.random()})},bP=function(e){if(at(e))return e;var t=fi(e)?e:{each:e},n=Yo(t.ease),i=t.from||0,s=parseFloat(t.base)||0,o={},a=i>0&&i<1,l=isNaN(i)||a,u=t.axis,c=i,h=i;return bt(i)?c=h={center:.5,edges:.5,end:1}[i]||0:!a&&l&&(c=i[0],h=i[1]),function(d,f,p){var m=(p||t).length,g=o[m],y,_,v,x,b,C,E,w,T;if(!g){if(T=t.grid==="auto"?0:(t.grid||[1,cn])[1],!T){for(E=-cn;E<(E=p[T++].getBoundingClientRect().left)&&T<m;);T<m&&T--}for(g=o[m]=[],y=l?Math.min(T,m)*c-.5:i%T,_=T===cn?0:l?m*h/T-.5:i/T|0,E=0,w=cn,C=0;C<m;C++)v=C%T-y,x=_-(C/T|0),g[C]=b=u?Math.abs(u==="y"?x:v):sP(v*v+x*x),b>E&&(E=b),b<w&&(w=b);i==="random"&&xP(g),g.max=E-w,g.min=w,g.v=m=(parseFloat(t.amount)||parseFloat(t.each)*(T>m?m-1:u?u==="y"?m/T:T:Math.max(T,m/T))||0)*(i==="edges"?-1:1),g.b=m<0?s-m:s,g.u=Lt(t.amount||t.each)||0,n=n&&m<0?MP(n):n}return m=(g[d]-g.min)/g.max||0,It(g.b+(n?n(m):m)*g.v)+g.u}},cw=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(n){var i=It(Math.round(parseFloat(n)/e)*e*t);return(i-i%1)/t+(Ji(n)?0:Lt(n))}},wP=function(e,t){var n=qt(e),i,s;return!n&&fi(e)&&(i=n=e.radius||cn,e.values?(e=hn(e.values),(s=!Ji(e[0]))&&(i*=i)):e=cw(e.increment)),qs(t,n?at(e)?function(o){return s=e(o),Math.abs(s-o)<=i?s:o}:function(o){for(var a=parseFloat(s?o.x:o),l=parseFloat(s?o.y:0),u=cn,c=0,h=e.length,d,f;h--;)s?(d=e[h].x-a,f=e[h].y-l,d=d*d+f*f):d=Math.abs(e[h]-a),d<u&&(u=d,c=h);return c=!i||u<=i?e[c]:o,s||c===o||Ji(o)?c:c+Lt(o)}:cw(e))},EP=function(e,t,n,i){return qs(qt(e)?!t:n===!0?!!(n=0):!i,function(){return qt(e)?e[~~(Math.random()*e.length)]:(n=n||1e-5)&&(i=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((e-n/2+Math.random()*(t-e+n*.99))/n)*n*i)/i})},W8=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(i){return t.reduce(function(s,o){return o(s)},i)}},X8=function(e,t){return function(n){return e(parseFloat(n))+(t||Lt(n))}},q8=function(e,t,n){return CP(e,t,0,1,n)},TP=function(e,t,n){return qs(n,function(i){return e[~~t(i)]})},Y8=function r(e,t,n){var i=t-e;return qt(e)?TP(e,r(0,e.length),t):qs(n,function(s){return(i+(s-e)%i)%i+e})},Z8=function r(e,t,n){var i=t-e,s=i*2;return qt(e)?TP(e,r(0,e.length-1),t):qs(n,function(o){return o=(s+(o-e)%s)%s||0,e+(o>i?s-o:o)})},au=function(e){for(var t=0,n="",i,s,o,a;~(i=e.indexOf("random(",t));)o=e.indexOf(")",i),a=e.charAt(i+7)==="[",s=e.substr(i+7,o-i-7).match(a?aP:nw),n+=e.substr(t,i-t)+EP(a?s:+s[0],a?0:+s[1],+s[2]||1e-5),t=o+1;return n+e.substr(t,e.length-t)},CP=function(e,t,n,i,s){var o=t-e,a=i-n;return qs(s,function(l){return n+((l-e)/o*a||0)})},K8=function r(e,t,n,i){var s=isNaN(e+t)?0:function(f){return(1-f)*e+f*t};if(!s){var o=bt(e),a={},l,u,c,h,d;if(n===!0&&(i=1)&&(n=null),o)e={p:e},t={p:t};else if(qt(e)&&!qt(t)){for(c=[],h=e.length,d=h-2,u=1;u<h;u++)c.push(r(e[u-1],e[u]));h--,s=function(p){p*=h;var m=Math.min(d,~~p);return c[m](p-m)},n=t}else i||(e=Ko(qt(e)?[]:{},e));if(!c){for(l in t)Tw.call(a,e,l,"get",t[l]);s=function(p){return Aw(p,a)||(o?e.p:e)}}}return qs(n,s)},tP=function(e,t,n){var i=e.labels,s=cn,o,a,l;for(o in i)a=i[o]-t,a<0==!!n&&a&&s>(a=Math.abs(a))&&(l=o,s=a);return l},Hr=function(e,t,n){var i=e.vars,s=i[t],o=ot,a=e._ctx,l,u,c;if(s)return l=i[t+"Params"],u=i.callbackScope||e,n&&zs.length&&Km(),a&&(ot=a),c=l?s.apply(u,l):s.call(u),ot=o,c},zh=function(e){return Xs(e),e.scrollTrigger&&e.scrollTrigger.kill(!!Xt),e.progress()<1&&Hr(e,"onInterrupt"),e},ru,DP=[],SP=function(e){if(pw()&&e){e=!e.name&&e.default||e;var t=e.name,n=at(e),i=t&&!n&&e.init?function(){this._props=[]}:e,s={init:Kh,render:Aw,add:Tw,kill:f5,modifier:d5,rawVars:0},o={targetTest:0,get:0,getSetter:og,aliases:{},register:0};if(ou(),e!==i){if(br[t])return;dn(i,dn(Qm(e,s),o)),Ko(i.prototype,Ko(s,Qm(e,o))),br[i.prop=t]=i,e.targetTest&&(qm.push(i),vw[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}cP(t,i),e.register&&e.register(Yt,i,ur)}else e&&DP.push(e)},ke=255,Wh={aqua:[0,ke,ke],lime:[0,ke,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,ke],navy:[0,0,128],white:[ke,ke,ke],olive:[128,128,0],yellow:[ke,ke,0],orange:[ke,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[ke,0,0],pink:[ke,192,203],cyan:[0,ke,ke],transparent:[ke,ke,ke,0]},Kb=function(e,t,n){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(n-t)*e*6:e<.5?n:e*3<2?t+(n-t)*(2/3-e)*6:t)*ke+.5|0},IP=function(e,t,n){var i=e?Ji(e)?[e>>16,e>>8&ke,e&ke]:0:Wh.black,s,o,a,l,u,c,h,d,f,p;if(!i){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),Wh[e])i=Wh[e];else if(e.charAt(0)==="#"){if(e.length<6&&(s=e.charAt(1),o=e.charAt(2),a=e.charAt(3),e="#"+s+s+o+o+a+a+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return i=parseInt(e.substr(1,6),16),[i>>16,i>>8&ke,i&ke,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),i=[e>>16,e>>8&ke,e&ke]}else if(e.substr(0,3)==="hsl"){if(i=p=e.match(nw),!t)l=+i[0]%360/360,u=+i[1]/100,c=+i[2]/100,o=c<=.5?c*(u+1):c+u-c*u,s=c*2-o,i.length>3&&(i[3]*=1),i[0]=Kb(l+1/3,s,o),i[1]=Kb(l,s,o),i[2]=Kb(l-1/3,s,o);else if(~e.indexOf("="))return i=e.match(mw),n&&i.length<4&&(i[3]=1),i}else i=e.match(nw)||Wh.transparent;i=i.map(Number)}return t&&!p&&(s=i[0]/ke,o=i[1]/ke,a=i[2]/ke,h=Math.max(s,o,a),d=Math.min(s,o,a),c=(h+d)/2,h===d?l=u=0:(f=h-d,u=c>.5?f/(2-h-d):f/(h+d),l=h===s?(o-a)/f+(o<a?6:0):h===o?(a-s)/f+2:(s-o)/f+4,l*=60),i[0]=~~(l+.5),i[1]=~~(u*100+.5),i[2]=~~(c*100+.5)),n&&i.length<4&&(i[3]=1),i},AP=function(e){var t=[],n=[],i=-1;return e.split(Qi).forEach(function(s){var o=s.match(Qo)||[];t.push.apply(t,o),n.push(i+=o.length+1)}),t.c=n,t},rP=function(e,t,n){var i="",s=(e+i).match(Qi),o=t?"hsla(":"rgba(",a=0,l,u,c,h;if(!s)return e;if(s=s.map(function(d){return(d=IP(d,t,1))&&o+(t?d[0]+","+d[1]+"%,"+d[2]+"%,"+d[3]:d.join(","))+")"}),n&&(c=AP(e),l=n.c,l.join(i)!==c.c.join(i)))for(u=e.replace(Qi,"1").split(Qo),h=u.length-1;a<h;a++)i+=u[a]+(~l.indexOf(a)?s.shift()||o+"0,0,0,0)":(c.length?c:s.length?s:n).shift());if(!u)for(u=e.split(Qi),h=u.length-1;a<h;a++)i+=u[a]+s[a];return i+u[h]},Qi=function(){var r="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in Wh)r+="|"+e+"\\b";return new RegExp(r+")","gi")}(),Q8=/hsl[a]?\(/,ww=function(e){var t=e.join(" "),n;if(Qi.lastIndex=0,Qi.test(t))return n=Q8.test(t),e[1]=rP(e[1],n),e[0]=rP(e[0],n,AP(e[1])),!0},Qh,wr=function(){var r=Date.now,e=500,t=33,n=r(),i=n,s=1e3/240,o=s,a=[],l,u,c,h,d,f,p=function m(g){var y=r()-i,_=g===!0,v,x,b,C;if(y>e&&(n+=y-t),i+=y,b=i-n,v=b-o,(v>0||_)&&(C=++h.frame,d=b-h.time*1e3,h.time=b=b/1e3,o+=v+(v>=s?4:s-v),x=1),_||(l=u(m)),x)for(f=0;f<a.length;f++)a[f](b,d,C,g)};return h={time:0,frame:0,tick:function(){p(!0)},deltaRatio:function(g){return d/(1e3/(g||60))},wake:function(){lP&&(!iw&&pw()&&(un=iw=window,yw=un.document||{},Gr.gsap=Yt,(un.gsapVersions||(un.gsapVersions=[])).push(Yt.version),uP(Zm||un.GreenSockGlobals||!un.gsap&&un||{}),c=un.requestAnimationFrame,DP.forEach(SP)),l&&h.sleep(),u=c||function(g){return setTimeout(g,o-h.time*1e3+1|0)},Qh=1,p(2))},sleep:function(){(c?un.cancelAnimationFrame:clearTimeout)(l),Qh=0,u=Kh},lagSmoothing:function(g,y){e=g||1/0,t=Math.min(y||33,e)},fps:function(g){s=1e3/(g||240),o=h.time*1e3+s},add:function(g,y,_){var v=y?function(x,b,C,E){g(x,b,C,E),h.remove(v)}:g;return h.remove(g),a[_?"unshift":"push"](v),ou(),v},remove:function(g,y){~(y=a.indexOf(g))&&a.splice(y,1)&&f>=y&&f--},_listeners:a},h}(),ou=function(){return!Qh&&wr.wake()},Ee={},J8=/^[\d.\-M][\d.\-,\s]/,e5=/["']/g,t5=function(e){for(var t={},n=e.substr(1,e.length-3).split(":"),i=n[0],s=1,o=n.length,a,l,u;s<o;s++)l=n[s],a=s!==o-1?l.lastIndexOf(","):l.length,u=l.substr(0,a),t[i]=isNaN(u)?u.replace(e5,"").trim():+u,i=l.substr(a+1).trim();return t},r5=function(e){var t=e.indexOf("(")+1,n=e.indexOf(")"),i=e.indexOf("(",t);return e.substring(t,~i&&i<n?e.indexOf(")",n+1):n)},n5=function(e){var t=(e+"").split("("),n=Ee[t[0]];return n&&t.length>1&&n.config?n.config.apply(null,~e.indexOf("{")?[t5(t[1])]:r5(e).split(",").map(fP)):Ee._CE&&J8.test(e)?Ee._CE("",e):n},MP=function(e){return function(t){return 1-e(1-t)}},RP=function r(e,t){for(var n=e._first,i;n;)n instanceof Ft?r(n,t):n.vars.yoyoEase&&(!n._yoyo||!n._repeat)&&n._yoyo!==t&&(n.timeline?r(n.timeline,t):(i=n._ease,n._ease=n._yEase,n._yEase=i,n._yoyo=t)),n=n._next},Yo=function(e,t){return e&&(at(e)?e:Ee[e]||n5(e))||t},ea=function(e,t,n,i){n===void 0&&(n=function(l){return 1-t(1-l)}),i===void 0&&(i=function(l){return l<.5?t(l*2)/2:1-t((1-l)*2)/2});var s={easeIn:t,easeOut:n,easeInOut:i},o;return lr(e,function(a){Ee[a]=Gr[a]=s,Ee[o=a.toLowerCase()]=n;for(var l in s)Ee[o+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=Ee[a+"."+l]=s[l]}),s},PP=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},Qb=function r(e,t,n){var i=t>=1?t:1,s=(n||(e?.3:.45))/(t<1?t:1),o=s/rw*(Math.asin(1/i)||0),a=function(c){return c===1?1:i*Math.pow(2,-10*c)*R8((c-o)*s)+1},l=e==="out"?a:e==="in"?function(u){return 1-a(1-u)}:PP(a);return s=rw/s,l.config=function(u,c){return r(e,u,c)},l},Jb=function r(e,t){t===void 0&&(t=1.70158);var n=function(o){return o?--o*o*((t+1)*o+t)+1:0},i=e==="out"?n:e==="in"?function(s){return 1-n(1-s)}:PP(n);return i.config=function(s){return r(e,s)},i};lr("Linear,Quad,Cubic,Quart,Quint,Strong",function(r,e){var t=e<5?e+1:e;ea(r+",Power"+(t-1),e?function(n){return Math.pow(n,t)}:function(n){return n},function(n){return 1-Math.pow(1-n,t)},function(n){return n<.5?Math.pow(n*2,t)/2:1-Math.pow((1-n)*2,t)/2})});Ee.Linear.easeNone=Ee.none=Ee.Linear.easeIn;ea("Elastic",Qb("in"),Qb("out"),Qb());(function(r,e){var t=1/e,n=2*t,i=2.5*t,s=function(a){return a<t?r*a*a:a<n?r*Math.pow(a-1.5/e,2)+.75:a<i?r*(a-=2.25/e)*a+.9375:r*Math.pow(a-2.625/e,2)+.984375};ea("Bounce",function(o){return 1-s(1-o)},s)})(7.5625,2.75);ea("Expo",function(r){return r?Math.pow(2,10*(r-1)):0});ea("Circ",function(r){return-(sP(1-r*r)-1)});ea("Sine",function(r){return r===1?1:-M8(r*I8)+1});ea("Back",Jb("in"),Jb("out"),Jb());Ee.SteppedEase=Ee.steps=Gr.SteppedEase={config:function(e,t){e===void 0&&(e=1);var n=1/e,i=e+(t?0:1),s=t?1:0,o=1-Be;return function(a){return((i*ed(0,o,a)|0)+s)*n}}};nu.ease=Ee["quad.out"];lr("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(r){return _w+=r+","+r+"Params,"});var Ew=function(e,t){this.id=A8++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:bw,this.set=t?t.getSetter:og},Jh=function(){function r(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,su(this,+t.duration,1,1),this.data=t.data,ot&&(this._ctx=ot,ot.data.push(this)),Qh||wr.wake()}var e=r.prototype;return e.delay=function(n){return n||n===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+n-this._delay),this._delay=n,this):this._delay},e.duration=function(n){return arguments.length?this.totalDuration(this._repeat>0?n+(n+this._rDelay)*this._repeat:n):this.totalDuration()&&this._dur},e.totalDuration=function(n){return arguments.length?(this._dirty=0,su(this,this._repeat<0?n:(n-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(n,i){if(ou(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(sg(this,n),!s._dp||s.parent||gP(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&n<this._tDur||this._ts<0&&n>0||!this._tDur&&!n)&&di(this._dp,this,this._start-this._delay)}return(this._tTime!==n||!this._dur&&!i||this._initted&&Math.abs(this._zTime)===Be||!n&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=n),dP(this,n,i)),this},e.time=function(n,i){return arguments.length?this.totalTime(Math.min(this.totalDuration(),n+JR(this))%(this._dur+this._rDelay)||(n?this._dur:0),i):this._time},e.totalProgress=function(n,i){return arguments.length?this.totalTime(this.totalDuration()*n,i):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>0?1:0},e.progress=function(n,i){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-n:n)+JR(this),i):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(n,i){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(n-1)*s,i):this._repeat?iu(this._tTime,s)+1:1},e.timeScale=function(n,i){if(!arguments.length)return this._rts===-Be?0:this._rts;if(this._rts===n)return this;var s=this.parent&&this._ts?Jm(this.parent._time,this):this._tTime;return this._rts=+n||0,this._ts=this._ps||n===-Be?0:this._rts,this.totalTime(ed(-Math.abs(this._delay),this._tDur,s),i!==!1),ig(this),B8(this)},e.paused=function(n){return arguments.length?(this._ps!==n&&(this._ps=n,n?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(ou(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Be&&(this._tTime-=Be)))),this):this._ps},e.startTime=function(n){if(arguments.length){this._start=n;var i=this.parent||this._dp;return i&&(i._sort||!this.parent)&&di(i,this,n-this._delay),this}return this._start},e.endTime=function(n){return this._start+(Er(n)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(n){var i=this.parent||this._dp;return i?n&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Jm(i.rawTime(n),this):this._tTime:this._tTime},e.revert=function(n){n===void 0&&(n=N8);var i=Xt;return Xt=n,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(n),this.totalTime(-.01,n.suppressEvents)),this.data!=="nested"&&n.kill!==!1&&this.kill(),Xt=i,this},e.globalTime=function(n){for(var i=this,s=arguments.length?n:i.rawTime();i;)s=i._start+s/(Math.abs(i._ts)||1),i=i._dp;return!this.parent&&this._sat?this._sat.globalTime(n):s},e.repeat=function(n){return arguments.length?(this._repeat=n===1/0?-2:n,eP(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(n){if(arguments.length){var i=this._time;return this._rDelay=n,eP(this),i?this.time(i):this}return this._rDelay},e.yoyo=function(n){return arguments.length?(this._yoyo=n,this):this._yoyo},e.seek=function(n,i){return this.totalTime(ln(this,n),Er(i))},e.restart=function(n,i){return this.play().totalTime(n?-this._delay:0,Er(i))},e.play=function(n,i){return n!=null&&this.seek(n,i),this.reversed(!1).paused(!1)},e.reverse=function(n,i){return n!=null&&this.seek(n||this.totalDuration(),i),this.reversed(!0).paused(!1)},e.pause=function(n,i){return n!=null&&this.seek(n,i),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(n){return arguments.length?(!!n!==this.reversed()&&this.timeScale(-this._rts||(n?-Be:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-Be,this},e.isActive=function(){var n=this.parent||this._dp,i=this._start,s;return!!(!n||this._ts&&this._initted&&n.isActive()&&(s=n.rawTime(!0))>=i&&s<this.endTime(!0)-Be)},e.eventCallback=function(n,i,s){var o=this.vars;return arguments.length>1?(i?(o[n]=i,s&&(o[n+"Params"]=s),n==="onUpdate"&&(this._onUpdate=i)):delete o[n],this):o[n]},e.then=function(n){var i=this;return new Promise(function(s){var o=at(n)?n:pP,a=function(){var u=i.then;i.then=null,at(o)&&(o=o(i))&&(o.then||o===i)&&(i.then=u),s(o),i.then=u};i._initted&&i.totalProgress()===1&&i._ts>=0||!i._tTime&&i._ts<0?a():i._prom=a})},e.kill=function(){zh(this)},r}();dn(Jh.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Be,_prom:0,_ps:!1,_rts:1});var Ft=function(r){iP(e,r);function e(n,i){var s;return n===void 0&&(n={}),s=r.call(this,n)||this,s.labels={},s.smoothChildTiming=!!n.smoothChildTiming,s.autoRemoveChildren=!!n.autoRemoveChildren,s._sort=Er(n.sortChildren),tt&&di(n.parent||tt,Ki(s),i),n.reversed&&s.reverse(),n.paused&&s.paused(!0),n.scrollTrigger&&yP(Ki(s),n.scrollTrigger),s}var t=e.prototype;return t.to=function(i,s,o){return qh(0,arguments,this),this},t.from=function(i,s,o){return qh(1,arguments,this),this},t.fromTo=function(i,s,o,a){return qh(2,arguments,this),this},t.set=function(i,s,o){return s.duration=0,s.parent=this,Xh(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new ct(i,s,ln(this,o),1),this},t.call=function(i,s,o){return di(this,ct.delayedCall(0,i,s),o)},t.staggerTo=function(i,s,o,a,l,u,c){return o.duration=s,o.stagger=o.stagger||a,o.onComplete=u,o.onCompleteParams=c,o.parent=this,new ct(i,o,ln(this,l)),this},t.staggerFrom=function(i,s,o,a,l,u,c){return o.runBackwards=1,Xh(o).immediateRender=Er(o.immediateRender),this.staggerTo(i,s,o,a,l,u,c)},t.staggerFromTo=function(i,s,o,a,l,u,c,h){return a.startAt=o,Xh(a).immediateRender=Er(a.immediateRender),this.staggerTo(i,s,a,l,u,c,h)},t.render=function(i,s,o){var a=this._time,l=this._dirty?this.totalDuration():this._tDur,u=this._dur,c=i<=0?0:It(i),h=this._zTime<0!=i<0&&(this._initted||!u),d,f,p,m,g,y,_,v,x,b,C,E;if(this!==tt&&c>l&&i>=0&&(c=l),c!==this._tTime||o||h){if(a!==this._time&&u&&(c+=this._time-a,i+=this._time-a),d=c,x=this._start,v=this._ts,y=!v,h&&(u||(a=this._zTime),(i||!s)&&(this._zTime=i)),this._repeat){if(C=this._yoyo,g=u+this._rDelay,this._repeat<-1&&i<0)return this.totalTime(g*100+i,s,o);if(d=It(c%g),c===l?(m=this._repeat,d=u):(m=~~(c/g),m&&m===c/g&&(d=u,m--),d>u&&(d=u)),b=iu(this._tTime,g),!a&&this._tTime&&b!==m&&this._tTime-b*g-this._dur<=0&&(b=m),C&&m&1&&(d=u-d,E=1),m!==b&&!this._lock){var w=C&&b&1,T=w===(C&&m&1);if(m<b&&(w=!w),a=w?0:c%u?u:c,this._lock=1,this.render(a||(E?0:It(m*g)),s,!u)._lock=0,this._tTime=c,!s&&this.parent&&Hr(this,"onRepeat"),this.vars.repeatRefresh&&!E&&(this.invalidate()._lock=1),a&&a!==this._time||y!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(u=this._dur,l=this._tDur,T&&(this._lock=2,a=w?u:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!E&&this.invalidate()),this._lock=0,!this._ts&&!y)return this;RP(this,E)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(_=H8(this,It(a),It(d)),_&&(c-=d-(d=_._start))),this._tTime=c,this._time=d,this._act=!v,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=i,a=0),!a&&d&&!s&&!m&&(Hr(this,"onStart"),this._tTime!==c))return this;if(d>=a&&i>=0)for(f=this._first;f;){if(p=f._next,(f._act||d>=f._start)&&f._ts&&_!==f){if(f.parent!==this)return this.render(i,s,o);if(f.render(f._ts>0?(d-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+(d-f._start)*f._ts,s,o),d!==this._time||!this._ts&&!y){_=0,p&&(c+=this._zTime=-Be);break}}f=p}else{f=this._last;for(var k=i<0?i:d;f;){if(p=f._prev,(f._act||k<=f._end)&&f._ts&&_!==f){if(f.parent!==this)return this.render(i,s,o);if(f.render(f._ts>0?(k-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+(k-f._start)*f._ts,s,o||Xt&&(f._initted||f._startAt)),d!==this._time||!this._ts&&!y){_=0,p&&(c+=this._zTime=k?-Be:Be);break}}f=p}}if(_&&!s&&(this.pause(),_.render(d>=a?0:-Be)._zTime=d>=a?1:-1,this._ts))return this._start=x,ig(this),this.render(i,s,o);this._onUpdate&&!s&&Hr(this,"onUpdate",!0),(c===l&&this._tTime>=this.totalDuration()||!c&&a)&&(x===this._start||Math.abs(v)!==Math.abs(this._ts))&&(this._lock||((i||!u)&&(c===l&&this._ts>0||!c&&this._ts<0)&&Xs(this,1),!s&&!(i<0&&!a)&&(c||a||!l)&&(Hr(this,c===l&&i>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(c<l&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(i,s){var o=this;if(Ji(s)||(s=ln(this,s,i)),!(i instanceof Jh)){if(qt(i))return i.forEach(function(a){return o.add(a,s)}),this;if(bt(i))return this.addLabel(i,s);if(at(i))i=ct.delayedCall(0,i);else return this}return this!==i?di(this,i,s):this},t.getChildren=function(i,s,o,a){i===void 0&&(i=!0),s===void 0&&(s=!0),o===void 0&&(o=!0),a===void 0&&(a=-cn);for(var l=[],u=this._first;u;)u._start>=a&&(u instanceof ct?s&&l.push(u):(o&&l.push(u),i&&l.push.apply(l,u.getChildren(!0,s,o)))),u=u._next;return l},t.getById=function(i){for(var s=this.getChildren(1,1,1),o=s.length;o--;)if(s[o].vars.id===i)return s[o]},t.remove=function(i){return bt(i)?this.removeLabel(i):at(i)?this.killTweensOf(i):(ng(this,i),i===this._recent&&(this._recent=this._last),qo(this))},t.totalTime=function(i,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=It(wr.time-(this._ts>0?i/this._ts:(this.totalDuration()-i)/-this._ts))),r.prototype.totalTime.call(this,i,s),this._forcing=0,this):this._tTime},t.addLabel=function(i,s){return this.labels[i]=ln(this,s),this},t.removeLabel=function(i){return delete this.labels[i],this},t.addPause=function(i,s,o){var a=ct.delayedCall(0,s||Kh,o);return a.data="isPause",this._hasPause=1,di(this,a,ln(this,i))},t.removePause=function(i){var s=this._first;for(i=ln(this,i);s;)s._start===i&&s.data==="isPause"&&Xs(s),s=s._next},t.killTweensOf=function(i,s,o){for(var a=this.getTweensOf(i,o),l=a.length;l--;)$s!==a[l]&&a[l].kill(i,s);return this},t.getTweensOf=function(i,s){for(var o=[],a=hn(i),l=this._first,u=Ji(s),c;l;)l instanceof ct?F8(l._targets,a)&&(u?(!$s||l._initted&&l._ts)&&l.globalTime(0)<=s&&l.globalTime(l.totalDuration())>s:!s||l.isActive())&&o.push(l):(c=l.getTweensOf(a,s)).length&&o.push.apply(o,c),l=l._next;return o},t.tweenTo=function(i,s){s=s||{};var o=this,a=ln(o,i),l=s,u=l.startAt,c=l.onStart,h=l.onStartParams,d=l.immediateRender,f,p=ct.to(o,dn({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:s.duration||Math.abs((a-(u&&"time"in u?u.time:o._time))/o.timeScale())||Be,onStart:function(){if(o.pause(),!f){var g=s.duration||Math.abs((a-(u&&"time"in u?u.time:o._time))/o.timeScale());p._dur!==g&&su(p,g,0,1).render(p._time,!0,!0),f=1}c&&c.apply(p,h||[])}},s));return d?p.render(0):p},t.tweenFromTo=function(i,s,o){return this.tweenTo(s,dn({startAt:{time:ln(this,i)}},o))},t.recent=function(){return this._recent},t.nextLabel=function(i){return i===void 0&&(i=this._time),tP(this,ln(this,i))},t.previousLabel=function(i){return i===void 0&&(i=this._time),tP(this,ln(this,i),1)},t.currentLabel=function(i){return arguments.length?this.seek(i,!0):this.previousLabel(this._time+Be)},t.shiftChildren=function(i,s,o){o===void 0&&(o=0);for(var a=this._first,l=this.labels,u;a;)a._start>=o&&(a._start+=i,a._end+=i),a=a._next;if(s)for(u in l)l[u]>=o&&(l[u]+=i);return qo(this)},t.invalidate=function(i){var s=this._first;for(this._lock=0;s;)s.invalidate(i),s=s._next;return r.prototype.invalidate.call(this,i)},t.clear=function(i){i===void 0&&(i=!0);for(var s=this._first,o;s;)o=s._next,this.remove(s),s=o;return this._dp&&(this._time=this._tTime=this._pTime=0),i&&(this.labels={}),qo(this)},t.totalDuration=function(i){var s=0,o=this,a=o._last,l=cn,u,c,h;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-i:i));if(o._dirty){for(h=o.parent;a;)u=a._prev,a._dirty&&a.totalDuration(),c=a._start,c>l&&o._sort&&a._ts&&!o._lock?(o._lock=1,di(o,a,c-a._delay,1)._lock=0):l=c,c<0&&a._ts&&(s-=c,(!h&&!o._dp||h&&h.smoothChildTiming)&&(o._start+=c/o._ts,o._time-=c,o._tTime-=c),o.shiftChildren(-c,!1,-1/0),l=0),a._end>s&&a._ts&&(s=a._end),a=u;su(o,o===tt&&o._time>s?o._time:s,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(i){if(tt._ts&&(dP(tt,Jm(i,tt)),hP=wr.frame),wr.frame>=KR){KR+=Tr.autoSleep||120;var s=tt._first;if((!s||!s._ts)&&Tr.autoSleep&&wr._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||wr.sleep()}}},e}(Jh);dn(Ft.prototype,{_lock:0,_hasPause:0,_forcing:0});var i5=function(e,t,n,i,s,o,a){var l=new ur(this._pt,e,t,0,1,Iw,null,s),u=0,c=0,h,d,f,p,m,g,y,_;for(l.b=n,l.e=i,n+="",i+="",(y=~i.indexOf("random("))&&(i=au(i)),o&&(_=[n,i],o(_,e,t),n=_[0],i=_[1]),d=n.match(Yb)||[];h=Yb.exec(i);)p=h[0],m=i.substring(u,h.index),f?f=(f+1)%5:m.substr(-5)==="rgba("&&(f=1),p!==d[c++]&&(g=parseFloat(d[c-1])||0,l._pt={_next:l._pt,p:m||c===1?m:",",s:g,c:p.charAt(1)==="="?Jo(g,p)-g:parseFloat(p)-g,m:f&&f<4?Math.round:0},u=Yb.lastIndex);return l.c=u<i.length?i.substring(u,i.length):"",l.fp=a,(gw.test(i)||y)&&(l.e=0),this._pt=l,l},Tw=function(e,t,n,i,s,o,a,l,u,c){at(i)&&(i=i(s||0,e,o));var h=e[t],d=n!=="get"?n:at(h)?u?e[t.indexOf("set")||!at(e["get"+t.substr(3)])?t:"get"+t.substr(3)](u):e[t]():h,f=at(h)?u?u5:FP:Sw,p;if(bt(i)&&(~i.indexOf("random(")&&(i=au(i)),i.charAt(1)==="="&&(p=Jo(d,i)+(Lt(d)||0),(p||p===0)&&(i=p))),!c||d!==i||hw)return!isNaN(d*i)&&i!==""?(p=new ur(this._pt,e,t,+d||0,i-(d||0),typeof h=="boolean"?h5:LP,0,f),u&&(p.fp=u),a&&p.modifier(a,this,e),this._pt=p):(!h&&!(t in e)&&rg(t,i),i5.call(this,e,t,d,i,f,l||Tr.stringFilter,u))},s5=function(e,t,n,i,s){if(at(e)&&(e=Yh(e,s,t,n,i)),!fi(e)||e.style&&e.nodeType||qt(e)||oP(e))return bt(e)?Yh(e,s,t,n,i):e;var o={},a;for(a in e)o[a]=Yh(e[a],s,t,n,i);return o},Cw=function(e,t,n,i,s,o){var a,l,u,c;if(br[e]&&(a=new br[e]).init(s,a.rawVars?t[e]:s5(t[e],i,s,o,n),n,i,o)!==!1&&(n._pt=l=new ur(n._pt,s,e,0,1,a.render,a,0,a.priority),n!==ru))for(u=n._ptLookup[n._targets.indexOf(s)],c=a._props.length;c--;)u[a._props[c]]=l;return a},$s,hw,Dw=function r(e,t,n){var i=e.vars,s=i.ease,o=i.startAt,a=i.immediateRender,l=i.lazy,u=i.onUpdate,c=i.runBackwards,h=i.yoyoEase,d=i.keyframes,f=i.autoRevert,p=e._dur,m=e._startAt,g=e._targets,y=e.parent,_=y&&y.data==="nested"?y.vars.targets:g,v=e._overwrite==="auto"&&!fw,x=e.timeline,b,C,E,w,T,k,P,R,D,A,X,K,U;if(x&&(!d||!s)&&(s="none"),e._ease=Yo(s,nu.ease),e._yEase=h?MP(Yo(h===!0?s:h,nu.ease)):0,h&&e._yoyo&&!e._repeat&&(h=e._yEase,e._yEase=e._ease,e._ease=h),e._from=!x&&!!i.runBackwards,!x||d&&!i.stagger){if(R=g[0]?Ws(g[0]).harness:0,K=R&&i[R.prop],b=Qm(i,vw),m&&(m._zTime<0&&m.progress(1),t<0&&c&&a&&!f?m.render(-1,!0):m.revert(c&&p?Xm:O8),m._lazy=0),o){if(Xs(e._startAt=ct.set(g,dn({data:"isStart",overwrite:!1,parent:y,immediateRender:!0,lazy:!m&&Er(l),startAt:null,delay:0,onUpdate:u&&function(){return Hr(e,"onUpdate")},stagger:0},o))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Xt||!a&&!f)&&e._startAt.revert(Xm),a&&p&&t<=0&&n<=0){t&&(e._zTime=t);return}}else if(c&&p&&!m){if(t&&(a=!1),E=dn({overwrite:!1,data:"isFromStart",lazy:a&&!m&&Er(l),immediateRender:a,stagger:0,parent:y},b),K&&(E[R.prop]=K),Xs(e._startAt=ct.set(g,E)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Xt?e._startAt.revert(Xm):e._startAt.render(-1,!0)),e._zTime=t,!a)r(e._startAt,Be,Be);else if(!t)return}for(e._pt=e._ptCache=0,l=p&&Er(l)||l&&!p,C=0;C<g.length;C++){if(T=g[C],P=T._gsap||xw(g)[C]._gsap,e._ptLookup[C]=A={},sw[P.id]&&zs.length&&Km(),X=_===g?C:_.indexOf(T),R&&(D=new R).init(T,K||b,e,X,_)!==!1&&(e._pt=w=new ur(e._pt,T,D.name,0,1,D.render,D,0,D.priority),D._props.forEach(function(B){A[B]=w}),D.priority&&(k=1)),!R||K)for(E in b)br[E]&&(D=Cw(E,b,e,X,T,_))?D.priority&&(k=1):A[E]=w=Tw.call(e,T,E,"get",b[E],X,_,0,i.stringFilter);e._op&&e._op[C]&&e.kill(T,e._op[C]),v&&e._pt&&($s=e,tt.killTweensOf(T,A,e.globalTime(t)),U=!e.parent,$s=0),e._pt&&l&&(sw[P.id]=1)}k&&Mw(e),e._onInit&&e._onInit(e)}e._onUpdate=u,e._initted=(!e._op||e._pt)&&!U,d&&t<=0&&x.render(cn,!0,!0)},o5=function(e,t,n,i,s,o,a,l){var u=(e._pt&&e._ptCache||(e._ptCache={}))[t],c,h,d,f;if(!u)for(u=e._ptCache[t]=[],d=e._ptLookup,f=e._targets.length;f--;){if(c=d[f][t],c&&c.d&&c.d._pt)for(c=c.d._pt;c&&c.p!==t&&c.fp!==t;)c=c._next;if(!c)return hw=1,e.vars[t]="+=0",Dw(e,a),hw=0,l?Zh(t+" not eligible for reset"):1;u.push(c)}for(f=u.length;f--;)h=u[f],c=h._pt||h,c.s=(i||i===0)&&!s?i:c.s+(i||0)+o*c.c,c.c=n-c.s,h.e&&(h.e=lt(n)+Lt(h.e)),h.b&&(h.b=c.s+Lt(h.b))},a5=function(e,t){var n=e[0]?Ws(e[0]).harness:0,i=n&&n.aliases,s,o,a,l;if(!i)return t;s=Ko({},t);for(o in i)if(o in s)for(l=i[o].split(","),a=l.length;a--;)s[l[a]]=s[o];return s},l5=function(e,t,n,i){var s=t.ease||i||"power1.inOut",o,a;if(qt(t))a=n[e]||(n[e]=[]),t.forEach(function(l,u){return a.push({t:u/(t.length-1)*100,v:l,e:s})});else for(o in t)a=n[o]||(n[o]=[]),o==="ease"||a.push({t:parseFloat(e),v:t[o],e:s})},Yh=function(e,t,n,i,s){return at(e)?e.call(t,n,i,s):bt(e)&&~e.indexOf("random(")?au(e):e},OP=_w+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",NP={};lr(OP+",id,stagger,delay,duration,paused,scrollTrigger",function(r){return NP[r]=1});var ct=function(r){iP(e,r);function e(n,i,s,o){var a;typeof i=="number"&&(s.duration=i,i=s,s=null),a=r.call(this,o?i:Xh(i))||this;var l=a.vars,u=l.duration,c=l.delay,h=l.immediateRender,d=l.stagger,f=l.overwrite,p=l.keyframes,m=l.defaults,g=l.scrollTrigger,y=l.yoyoEase,_=i.parent||tt,v=(qt(n)||oP(n)?Ji(n[0]):"length"in i)?[n]:hn(n),x,b,C,E,w,T,k,P;if(a._targets=v.length?xw(v):Zh("GSAP target "+n+" not found. https://gsap.com",!Tr.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=f,p||d||Wm(u)||Wm(c)){if(i=a.vars,x=a.timeline=new Ft({data:"nested",defaults:m||{},targets:_&&_.data==="nested"?_.vars.targets:v}),x.kill(),x.parent=x._dp=Ki(a),x._start=0,d||Wm(u)||Wm(c)){if(E=v.length,k=d&&bP(d),fi(d))for(w in d)~OP.indexOf(w)&&(P||(P={}),P[w]=d[w]);for(b=0;b<E;b++)C=Qm(i,NP),C.stagger=0,y&&(C.yoyoEase=y),P&&Ko(C,P),T=v[b],C.duration=+Yh(u,Ki(a),b,T,v),C.delay=(+Yh(c,Ki(a),b,T,v)||0)-a._delay,!d&&E===1&&C.delay&&(a._delay=c=C.delay,a._start+=c,C.delay=0),x.to(T,C,k?k(b,T,v):0),x._ease=Ee.none;x.duration()?u=c=0:a.timeline=0}else if(p){Xh(dn(x.vars.defaults,{ease:"none"})),x._ease=Yo(p.ease||i.ease||"none");var R=0,D,A,X;if(qt(p))p.forEach(function(K){return x.to(v,K,">")}),x.duration();else{C={};for(w in p)w==="ease"||w==="easeEach"||l5(w,p[w],C,p.easeEach);for(w in C)for(D=C[w].sort(function(K,U){return K.t-U.t}),R=0,b=0;b<D.length;b++)A=D[b],X={ease:A.e,duration:(A.t-(b?D[b-1].t:0))/100*u},X[w]=A.v,x.to(v,X,R),R+=X.duration;x.duration()<u&&x.to({},{duration:u-x.duration()})}}u||a.duration(u=x.duration())}else a.timeline=0;return f===!0&&!fw&&($s=Ki(a),tt.killTweensOf(v),$s=0),di(_,Ki(a),s),i.reversed&&a.reverse(),i.paused&&a.paused(!0),(h||!u&&!p&&a._start===It(_._time)&&Er(h)&&U8(Ki(a))&&_.data!=="nested")&&(a._tTime=-Be,a.render(Math.max(0,-c)||0)),g&&yP(Ki(a),g),a}var t=e.prototype;return t.render=function(i,s,o){var a=this._time,l=this._tDur,u=this._dur,c=i<0,h=i>l-Be&&!c?l:i<Be?0:i,d,f,p,m,g,y,_,v,x;if(!u)V8(this,i,s,o);else if(h!==this._tTime||!i||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==c){if(d=h,v=this.timeline,this._repeat){if(m=u+this._rDelay,this._repeat<-1&&c)return this.totalTime(m*100+i,s,o);if(d=It(h%m),h===l?(p=this._repeat,d=u):(p=~~(h/m),p&&p===It(h/m)&&(d=u,p--),d>u&&(d=u)),y=this._yoyo&&p&1,y&&(x=this._yEase,d=u-d),g=iu(this._tTime,m),d===a&&!o&&this._initted&&p===g)return this._tTime=h,this;p!==g&&(v&&this._yEase&&RP(v,y),this.vars.repeatRefresh&&!y&&!this._lock&&this._time!==u&&this._initted&&(this._lock=o=1,this.render(It(m*p),!0).invalidate()._lock=0))}if(!this._initted){if(vP(this,c?i:d,o,s,h))return this._tTime=0,this;if(a!==this._time&&!(o&&this.vars.repeatRefresh&&p!==g))return this;if(u!==this._dur)return this.render(i,s,o)}if(this._tTime=h,this._time=d,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=_=(x||this._ease)(d/u),this._from&&(this.ratio=_=1-_),d&&!a&&!s&&!p&&(Hr(this,"onStart"),this._tTime!==h))return this;for(f=this._pt;f;)f.r(_,f.d),f=f._next;v&&v.render(i<0?i:!d&&y?-Be:v._dur*v._ease(d/this._dur),s,o)||this._startAt&&(this._zTime=i),this._onUpdate&&!s&&(c&&ow(this,i,s,o),Hr(this,"onUpdate")),this._repeat&&p!==g&&this.vars.onRepeat&&!s&&this.parent&&Hr(this,"onRepeat"),(h===this._tDur||!h)&&this._tTime===h&&(c&&!this._onUpdate&&ow(this,i,!0,!0),(i||!u)&&(h===this._tDur&&this._ts>0||!h&&this._ts<0)&&Xs(this,1),!s&&!(c&&!a)&&(h||a||y)&&(Hr(this,h===l?"onComplete":"onReverseComplete",!0),this._prom&&!(h<l&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(i){return(!i||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(i),r.prototype.invalidate.call(this,i)},t.resetTo=function(i,s,o,a,l){Qh||wr.wake(),this._ts||this.play();var u=Math.min(this._dur,(this._dp._time-this._start)*this._ts),c;return this._initted||Dw(this,u),c=this._ease(u/this._dur),o5(this,i,s,o,a,c,u,l)?this.resetTo(i,s,o,a,1):(sg(this,0),this.parent||mP(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(i,s){if(s===void 0&&(s="all"),!i&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?zh(this):this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(i,s,$s&&$s.vars.overwrite!==!0)._first||zh(this),this.parent&&o!==this.timeline.totalDuration()&&su(this,this._dur*this.timeline._tDur/o,0,1),this}var a=this._targets,l=i?hn(i):a,u=this._ptLookup,c=this._pt,h,d,f,p,m,g,y;if((!s||s==="all")&&k8(a,l))return s==="all"&&(this._pt=0),zh(this);for(h=this._op=this._op||[],s!=="all"&&(bt(s)&&(m={},lr(s,function(_){return m[_]=1}),s=m),s=a5(a,s)),y=a.length;y--;)if(~l.indexOf(a[y])){d=u[y],s==="all"?(h[y]=s,p=d,f={}):(f=h[y]=h[y]||{},p=s);for(m in p)g=d&&d[m],g&&((!("kill"in g.d)||g.d.kill(m)===!0)&&ng(this,g,"_pt"),delete d[m]),f!=="all"&&(f[m]=1)}return this._initted&&!this._pt&&c&&zh(this),this},e.to=function(i,s){return new e(i,s,arguments[2])},e.from=function(i,s){return qh(1,arguments)},e.delayedCall=function(i,s,o,a){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:i,onComplete:s,onReverseComplete:s,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},e.fromTo=function(i,s,o){return qh(2,arguments)},e.set=function(i,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(i,s)},e.killTweensOf=function(i,s,o){return tt.killTweensOf(i,s,o)},e}(Jh);dn(ct.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});lr("staggerTo,staggerFrom,staggerFromTo",function(r){ct[r]=function(){var e=new Ft,t=lw.call(arguments,0);return t.splice(r==="staggerFromTo"?5:4,0,0),e[r].apply(e,t)}});var Sw=function(e,t,n){return e[t]=n},FP=function(e,t,n){return e[t](n)},u5=function(e,t,n,i){return e[t](i.fp,n)},c5=function(e,t,n){return e.setAttribute(t,n)},og=function(e,t){return at(e[t])?FP:tg(e[t])&&e.setAttribute?c5:Sw},LP=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},h5=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},Iw=function(e,t){var n=t._pt,i="";if(!e&&t.b)i=t.b;else if(e===1&&t.e)i=t.e;else{for(;n;)i=n.p+(n.m?n.m(n.s+n.c*e):Math.round((n.s+n.c*e)*1e4)/1e4)+i,n=n._next;i+=t.c}t.set(t.t,t.p,i,t)},Aw=function(e,t){for(var n=t._pt;n;)n.r(e,n.d),n=n._next},d5=function(e,t,n,i){for(var s=this._pt,o;s;)o=s._next,s.p===i&&s.modifier(e,t,n),s=o},f5=function(e){for(var t=this._pt,n,i;t;)i=t._next,t.p===e&&!t.op||t.op===e?ng(this,t,"_pt"):t.dep||(n=1),t=i;return!n},p5=function(e,t,n,i){i.mSet(e,t,i.m.call(i.tween,n,i.mt),i)},Mw=function(e){for(var t=e._pt,n,i,s,o;t;){for(n=t._next,i=s;i&&i.pr>t.pr;)i=i._next;(t._prev=i?i._prev:o)?t._prev._next=t:s=t,(t._next=i)?i._prev=t:o=t,t=n}e._pt=s},ur=function(){function r(t,n,i,s,o,a,l,u,c){this.t=n,this.s=s,this.c=o,this.p=i,this.r=a||LP,this.d=l||this,this.set=u||Sw,this.pr=c||0,this._next=t,t&&(t._prev=this)}var e=r.prototype;return e.modifier=function(n,i,s){this.mSet=this.mSet||this.set,this.set=p5,this.m=n,this.mt=s,this.tween=i},r}();lr(_w+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(r){return vw[r]=1});Gr.TweenMax=Gr.TweenLite=ct;Gr.TimelineLite=Gr.TimelineMax=Ft;tt=new Ft({sortChildren:!1,defaults:nu,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Tr.stringFilter=ww;var Zo=[],Ym={},m5=[],nP=0,g5=0,ew=function(e){return(Ym[e]||m5).map(function(t){return t()})},dw=function(){var e=Date.now(),t=[];e-nP>2&&(ew("matchMediaInit"),Zo.forEach(function(n){var i=n.queries,s=n.conditions,o,a,l,u;for(a in i)o=un.matchMedia(i[a]).matches,o&&(l=1),o!==s[a]&&(s[a]=o,u=1);u&&(n.revert(),l&&t.push(n))}),ew("matchMediaRevert"),t.forEach(function(n){return n.onMatch(n,function(i){return n.add(null,i)})}),nP=e,ew("matchMedia"))},kP=function(){function r(t,n){this.selector=n&&uw(n),this.data=[],this._r=[],this.isReverted=!1,this.id=g5++,t&&this.add(t)}var e=r.prototype;return e.add=function(n,i,s){at(n)&&(s=i,i=n,n=at);var o=this,a=function(){var u=ot,c=o.selector,h;return u&&u!==o&&u.data.push(o),s&&(o.selector=uw(s)),ot=o,h=i.apply(o,arguments),at(h)&&o._r.push(h),ot=u,o.selector=c,o.isReverted=!1,h};return o.last=a,n===at?a(o,function(l){return o.add(null,l)}):n?o[n]=a:a},e.ignore=function(n){var i=ot;ot=null,n(this),ot=i},e.getTweens=function(){var n=[];return this.data.forEach(function(i){return i instanceof r?n.push.apply(n,i.getTweens()):i instanceof ct&&!(i.parent&&i.parent.data==="nested")&&n.push(i)}),n},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(n,i){var s=this;if(n?function(){for(var a=s.getTweens(),l=s.data.length,u;l--;)u=s.data[l],u.data==="isFlip"&&(u.revert(),u.getChildren(!0,!0,!1).forEach(function(c){return a.splice(a.indexOf(c),1)}));for(a.map(function(c){return{g:c._dur||c._delay||c._sat&&!c._sat.vars.immediateRender?c.globalTime(0):-1/0,t:c}}).sort(function(c,h){return h.g-c.g||-1/0}).forEach(function(c){return c.t.revert(n)}),l=s.data.length;l--;)u=s.data[l],u instanceof Ft?u.data!=="nested"&&(u.scrollTrigger&&u.scrollTrigger.revert(),u.kill()):!(u instanceof ct)&&u.revert&&u.revert(n);s._r.forEach(function(c){return c(n,s)}),s.isReverted=!0}():this.data.forEach(function(a){return a.kill&&a.kill()}),this.clear(),i)for(var o=Zo.length;o--;)Zo[o].id===this.id&&Zo.splice(o,1)},e.revert=function(n){this.kill(n||{})},r}(),y5=function(){function r(t){this.contexts=[],this.scope=t}var e=r.prototype;return e.add=function(n,i,s){fi(n)||(n={matches:n});var o=new kP(0,s||this.scope),a=o.conditions={},l,u,c;ot&&!o.selector&&(o.selector=ot.selector),this.contexts.push(o),i=o.add("onMatch",i),o.queries=n;for(u in n)u==="all"?c=1:(l=un.matchMedia(n[u]),l&&(Zo.indexOf(o)<0&&Zo.push(o),(a[u]=l.matches)&&(c=1),l.addListener?l.addListener(dw):l.addEventListener("change",dw)));return c&&i(o,function(h){return o.add(null,h)}),this},e.revert=function(n){this.kill(n||{})},e.kill=function(n){this.contexts.forEach(function(i){return i.kill(n,!0)})},r}(),eg={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach(function(i){return SP(i)})},timeline:function(e){return new Ft(e)},getTweensOf:function(e,t){return tt.getTweensOf(e,t)},getProperty:function(e,t,n,i){bt(e)&&(e=hn(e)[0]);var s=Ws(e||{}).get,o=n?pP:fP;return n==="native"&&(n=""),e&&(t?o((br[t]&&br[t].get||s)(e,t,n,i)):function(a,l,u){return o((br[a]&&br[a].get||s)(e,a,l,u))})},quickSetter:function(e,t,n){if(e=hn(e),e.length>1){var i=e.map(function(c){return Yt.quickSetter(c,t,n)}),s=i.length;return function(c){for(var h=s;h--;)i[h](c)}}e=e[0]||{};var o=br[t],a=Ws(e),l=a.harness&&(a.harness.aliases||{})[t]||t,u=o?function(c){var h=new o;ru._pt=0,h.init(e,n?c+n:c,ru,0,[e]),h.render(1,h),ru._pt&&Aw(1,ru)}:a.set(e,l);return o?u:function(c){return u(e,l,n?c+n:c,a,1)}},quickTo:function(e,t,n){var i,s=Yt.to(e,Ko((i={},i[t]="+=0.1",i.paused=!0,i),n||{})),o=function(l,u,c){return s.resetTo(t,l,u,c)};return o.tween=s,o},isTweening:function(e){return tt.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Yo(e.ease,nu.ease)),QR(nu,e||{})},config:function(e){return QR(Tr,e||{})},registerEffect:function(e){var t=e.name,n=e.effect,i=e.plugins,s=e.defaults,o=e.extendTimeline;(i||"").split(",").forEach(function(a){return a&&!br[a]&&!Gr[a]&&Zh(t+" effect requires "+a+" plugin.")}),Zb[t]=function(a,l,u){return n(hn(a),dn(l||{},s),u)},o&&(Ft.prototype[t]=function(a,l,u){return this.add(Zb[t](a,fi(l)?l:(u=l)&&{},this),u)})},registerEase:function(e,t){Ee[e]=Yo(t)},parseEase:function(e,t){return arguments.length?Yo(e,t):Ee},getById:function(e){return tt.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var n=new Ft(e),i,s;for(n.smoothChildTiming=Er(e.smoothChildTiming),tt.remove(n),n._dp=0,n._time=n._tTime=tt._time,i=tt._first;i;)s=i._next,(t||!(!i._dur&&i instanceof ct&&i.vars.onComplete===i._targets[0]))&&di(n,i,i._start-i._delay),i=s;return di(tt,n,0),n},context:function(e,t){return e?new kP(e,t):ot},matchMedia:function(e){return new y5(e)},matchMediaRefresh:function(){return Zo.forEach(function(e){var t=e.conditions,n,i;for(i in t)t[i]&&(t[i]=!1,n=1);n&&e.revert()})||dw()},addEventListener:function(e,t){var n=Ym[e]||(Ym[e]=[]);~n.indexOf(t)||n.push(t)},removeEventListener:function(e,t){var n=Ym[e],i=n&&n.indexOf(t);i>=0&&n.splice(i,1)},utils:{wrap:Y8,wrapYoyo:Z8,distribute:bP,random:EP,snap:wP,normalize:q8,getUnit:Lt,clamp:$8,splitColor:IP,toArray:hn,selector:uw,mapRange:CP,pipe:W8,unitize:X8,interpolate:K8,shuffle:xP},install:uP,effects:Zb,ticker:wr,updateRoot:Ft.updateRoot,plugins:br,globalTimeline:tt,core:{PropTween:ur,globals:cP,Tween:ct,Timeline:Ft,Animation:Jh,getCache:Ws,_removeLinkedListItem:ng,reverting:function(){return Xt},context:function(e){return e&&ot&&(ot.data.push(e),e._ctx=ot),ot},suppressOverwrites:function(e){return fw=e}}};lr("to,from,fromTo,delayedCall,set,killTweensOf",function(r){return eg[r]=ct[r]});wr.add(Ft.updateRoot);ru=eg.to({},{duration:0});var v5=function(e,t){for(var n=e._pt;n&&n.p!==t&&n.op!==t&&n.fp!==t;)n=n._next;return n},_5=function(e,t){var n=e._targets,i,s,o;for(i in t)for(s=n.length;s--;)o=e._ptLookup[s][i],o&&(o=o.d)&&(o._pt&&(o=v5(o,i)),o&&o.modifier&&o.modifier(t[i],e,n[s],i))},tw=function(e,t){return{name:e,rawVars:1,init:function(i,s,o){o._onInit=function(a){var l,u;if(bt(s)&&(l={},lr(s,function(c){return l[c]=1}),s=l),t){l={};for(u in s)l[u]=t(s[u]);s=l}_5(a,s)}}}},Yt=eg.registerPlugin({name:"attr",init:function(e,t,n,i,s){var o,a,l;this.tween=n;for(o in t)l=e.getAttribute(o)||"",a=this.add(e,"setAttribute",(l||0)+"",t[o],i,s,0,0,o),a.op=o,a.b=l,this._props.push(o)},render:function(e,t){for(var n=t._pt;n;)Xt?n.set(n.t,n.p,n.b,n):n.r(e,n.d),n=n._next}},{name:"endArray",init:function(e,t){for(var n=t.length;n--;)this.add(e,n,e[n]||0,t[n],0,0,0,0,0,1)}},tw("roundProps",cw),tw("modifiers"),tw("snap",wP))||eg;ct.version=Ft.version=Yt.version="3.12.4";lP=1;pw()&&ou();var x5=Ee.Power0,b5=Ee.Power1,w5=Ee.Power2,E5=Ee.Power3,T5=Ee.Power4,C5=Ee.Linear,D5=Ee.Quad,S5=Ee.Cubic,I5=Ee.Quart,A5=Ee.Quint,M5=Ee.Strong,R5=Ee.Elastic,P5=Ee.Back,O5=Ee.SteppedEase,N5=Ee.Bounce,F5=Ee.Sine,L5=Ee.Expo,k5=Ee.Circ;var BP,Ys,uu,kw,ia,B5,UP,Bw,U5=function(){return typeof window<"u"},ts={},na=180/Math.PI,cu=Math.PI/180,lu=Math.atan2,jP=1e8,Uw=/([A-Z])/g,j5=/(left|right|width|margin|padding|x)/i,V5=/[\s,\(]\S/,pi={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Ow=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},H5=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},G5=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},$5=function(e,t){var n=t.s+t.c*e;t.set(t.t,t.p,~~(n+(n<0?-.5:.5))+t.u,t)},XP=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},qP=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},z5=function(e,t,n){return e.style[t]=n},W5=function(e,t,n){return e.style.setProperty(t,n)},X5=function(e,t,n){return e._gsap[t]=n},q5=function(e,t,n){return e._gsap.scaleX=e._gsap.scaleY=n},Y5=function(e,t,n,i,s){var o=e._gsap;o.scaleX=o.scaleY=n,o.renderTransform(s,o)},Z5=function(e,t,n,i,s){var o=e._gsap;o[t]=n,o.renderTransform(s,o)},rt="transform",Cr=rt+"Origin",K5=function r(e,t){var n=this,i=this.target,s=i.style,o=i._gsap;if(e in ts&&s){if(this.tfm=this.tfm||{},e!=="transform")e=pi[e]||e,~e.indexOf(",")?e.split(",").forEach(function(a){return n.tfm[a]=es(i,a)}):this.tfm[e]=o.x?o[e]:es(i,e),e===Cr&&(this.tfm.zOrigin=o.zOrigin);else return pi.transform.split(",").forEach(function(a){return r.call(n,a,t)});if(this.props.indexOf(rt)>=0)return;o.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(Cr,t,"")),e=rt}(s||t)&&this.props.push(e,t,s[e])},YP=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},Q5=function(){var e=this.props,t=this.target,n=t.style,i=t._gsap,s,o;for(s=0;s<e.length;s+=3)e[s+1]?t[e[s]]=e[s+2]:e[s+2]?n[e[s]]=e[s+2]:n.removeProperty(e[s].substr(0,2)==="--"?e[s]:e[s].replace(Uw,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)i[o]=this.tfm[o];i.svg&&(i.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),s=Bw(),(!s||!s.isStart)&&!n[rt]&&(YP(n),i.zOrigin&&n[Cr]&&(n[Cr]+=" "+i.zOrigin+"px",i.zOrigin=0,i.renderTransform()),i.uncache=1)}},ZP=function(e,t){var n={target:e,props:[],revert:Q5,save:K5};return e._gsap||Yt.core.getCache(e),t&&t.split(",").forEach(function(i){return n.save(i)}),n},KP,Nw=function(e,t){var n=Ys.createElementNS?Ys.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Ys.createElement(e);return n&&n.style?n:Ys.createElement(e)},mi=function r(e,t,n){var i=getComputedStyle(e);return i[t]||i.getPropertyValue(t.replace(Uw,"-$1").toLowerCase())||i.getPropertyValue(t)||!n&&r(e,hu(t)||t,1)||""},VP="O,Moz,ms,Ms,Webkit".split(","),hu=function(e,t,n){var i=t||ia,s=i.style,o=5;if(e in s&&!n)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(VP[o]+e in s););return o<0?null:(o===3?"ms":o>=0?VP[o]:"")+e},Fw=function(){U5()&&window.document&&(BP=window,Ys=BP.document,uu=Ys.documentElement,ia=Nw("div")||{style:{}},B5=Nw("div"),rt=hu(rt),Cr=rt+"Origin",ia.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",KP=!!hu("perspective"),Bw=Yt.core.reverting,kw=1)},Rw=function r(e){var t=Nw("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=this.parentNode,i=this.nextSibling,s=this.style.cssText,o;if(uu.appendChild(t),t.appendChild(this),this.style.display="block",e)try{o=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=r}catch{}else this._gsapBBox&&(o=this._gsapBBox());return n&&(i?n.insertBefore(this,i):n.appendChild(this)),uu.removeChild(t),this.style.cssText=s,o},HP=function(e,t){for(var n=t.length;n--;)if(e.hasAttribute(t[n]))return e.getAttribute(t[n])},QP=function(e){var t;try{t=e.getBBox()}catch{t=Rw.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===Rw||(t=Rw.call(e,!0)),t&&!t.width&&!t.x&&!t.y?{x:+HP(e,["x","cx","x1"])||0,y:+HP(e,["y","cy","y1"])||0,width:0,height:0}:t},JP=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&QP(e))},sa=function(e,t){if(t){var n=e.style,i;t in ts&&t!==Cr&&(t=rt),n.removeProperty?(i=t.substr(0,2),(i==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),n.removeProperty(i==="--"?t:t.replace(Uw,"-$1").toLowerCase())):n.removeAttribute(t)}},Zs=function(e,t,n,i,s,o){var a=new ur(e._pt,t,n,0,1,o?qP:XP);return e._pt=a,a.b=i,a.e=s,e._props.push(n),a},GP={deg:1,rad:1,turn:1},J5={grid:1,flex:1},Ks=function r(e,t,n,i){var s=parseFloat(n)||0,o=(n+"").trim().substr((s+"").length)||"px",a=ia.style,l=j5.test(t),u=e.tagName.toLowerCase()==="svg",c=(u?"client":"offset")+(l?"Width":"Height"),h=100,d=i==="px",f=i==="%",p,m,g,y;if(i===o||!s||GP[i]||GP[o])return s;if(o!=="px"&&!d&&(s=r(e,t,n,"px")),y=e.getCTM&&JP(e),(f||o==="%")&&(ts[t]||~t.indexOf("adius")))return p=y?e.getBBox()[l?"width":"height"]:e[c],lt(f?s/p*h:s/100*p);if(a[l?"width":"height"]=h+(d?o:i),m=~t.indexOf("adius")||i==="em"&&e.appendChild&&!u?e:e.parentNode,y&&(m=(e.ownerSVGElement||{}).parentNode),(!m||m===Ys||!m.appendChild)&&(m=Ys.body),g=m._gsap,g&&f&&g.width&&l&&g.time===wr.time&&!g.uncache)return lt(s/g.width*h);if(f&&(t==="height"||t==="width")){var _=e.style[t];e.style[t]=h+i,p=e[c],_?e.style[t]=_:sa(e,t)}else(f||o==="%")&&!J5[mi(m,"display")]&&(a.position=mi(e,"position")),m===e&&(a.position="static"),m.appendChild(ia),p=ia[c],m.removeChild(ia),a.position="absolute";return l&&f&&(g=Ws(m),g.time=wr.time,g.width=m[c]),lt(d?p*s/h:p&&s?h/p*s:0)},es=function(e,t,n,i){var s;return kw||Fw(),t in pi&&t!=="transform"&&(t=pi[t],~t.indexOf(",")&&(t=t.split(",")[0])),ts[t]&&t!=="transform"?(s=nd(e,i),s=t!=="transformOrigin"?s[t]:s.svg?s.origin:lg(mi(e,Cr))+" "+s.zOrigin+"px"):(s=e.style[t],(!s||s==="auto"||i||~(s+"").indexOf("calc("))&&(s=ag[t]&&ag[t](e,t,n)||mi(e,t)||bw(e,t)||(t==="opacity"?1:0))),n&&!~(s+"").trim().indexOf(" ")?Ks(e,t,s,n)+n:s},ez=function(e,t,n,i){if(!n||n==="none"){var s=hu(t,e,1),o=s&&mi(e,s,1);o&&o!==n?(t=s,n=o):t==="borderColor"&&(n=mi(e,"borderTopColor"))}var a=new ur(this._pt,e.style,t,0,1,Iw),l=0,u=0,c,h,d,f,p,m,g,y,_,v,x,b;if(a.b=n,a.e=i,n+="",i+="",i==="auto"&&(m=e.style[t],e.style[t]=i,i=mi(e,t)||i,m?e.style[t]=m:sa(e,t)),c=[n,i],ww(c),n=c[0],i=c[1],d=n.match(Qo)||[],b=i.match(Qo)||[],b.length){for(;h=Qo.exec(i);)g=h[0],_=i.substring(l,h.index),p?p=(p+1)%5:(_.substr(-5)==="rgba("||_.substr(-5)==="hsla(")&&(p=1),g!==(m=d[u++]||"")&&(f=parseFloat(m)||0,x=m.substr((f+"").length),g.charAt(1)==="="&&(g=Jo(f,g)+x),y=parseFloat(g),v=g.substr((y+"").length),l=Qo.lastIndex-v.length,v||(v=v||Tr.units[t]||x,l===i.length&&(i+=v,a.e+=v)),x!==v&&(f=Ks(e,t,m,v)||0),a._pt={_next:a._pt,p:_||u===1?_:",",s:f,c:y-f,m:p&&p<4||t==="zIndex"?Math.round:0});a.c=l<i.length?i.substring(l,i.length):""}else a.r=t==="display"&&i==="none"?qP:XP;return gw.test(i)&&(a.e=0),this._pt=a,a},$P={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},tz=function(e){var t=e.split(" "),n=t[0],i=t[1]||"50%";return(n==="top"||n==="bottom"||i==="left"||i==="right")&&(e=n,n=i,i=e),t[0]=$P[n]||n,t[1]=$P[i]||i,t.join(" ")},rz=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var n=t.t,i=n.style,s=t.u,o=n._gsap,a,l,u;if(s==="all"||s===!0)i.cssText="",l=1;else for(s=s.split(","),u=s.length;--u>-1;)a=s[u],ts[a]&&(l=1,a=a==="transformOrigin"?Cr:rt),sa(n,a);l&&(sa(n,rt),o&&(o.svg&&n.removeAttribute("transform"),nd(n,1),o.uncache=1,YP(i)))}},ag={clearProps:function(e,t,n,i,s){if(s.data!=="isFromStart"){var o=e._pt=new ur(e._pt,t,n,0,0,rz);return o.u=i,o.pr=-10,o.tween=s,e._props.push(n),1}}},rd=[1,0,0,1,0,0],eO={},tO=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},zP=function(e){var t=mi(e,rt);return tO(t)?rd:t.substr(7).match(mw).map(lt)},jw=function(e,t){var n=e._gsap||Ws(e),i=e.style,s=zP(e),o,a,l,u;return n.svg&&e.getAttribute("transform")?(l=e.transform.baseVal.consolidate().matrix,s=[l.a,l.b,l.c,l.d,l.e,l.f],s.join(",")==="1,0,0,1,0,0"?rd:s):(s===rd&&!e.offsetParent&&e!==uu&&!n.svg&&(l=i.display,i.display="block",o=e.parentNode,(!o||!e.offsetParent)&&(u=1,a=e.nextElementSibling,uu.appendChild(e)),s=zP(e),l?i.display=l:sa(e,"display"),u&&(a?o.insertBefore(e,a):o?o.appendChild(e):uu.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},Lw=function(e,t,n,i,s,o){var a=e._gsap,l=s||jw(e,!0),u=a.xOrigin||0,c=a.yOrigin||0,h=a.xOffset||0,d=a.yOffset||0,f=l[0],p=l[1],m=l[2],g=l[3],y=l[4],_=l[5],v=t.split(" "),x=parseFloat(v[0])||0,b=parseFloat(v[1])||0,C,E,w,T;n?l!==rd&&(E=f*g-p*m)&&(w=x*(g/E)+b*(-m/E)+(m*_-g*y)/E,T=x*(-p/E)+b*(f/E)-(f*_-p*y)/E,x=w,b=T):(C=QP(e),x=C.x+(~v[0].indexOf("%")?x/100*C.width:x),b=C.y+(~(v[1]||v[0]).indexOf("%")?b/100*C.height:b)),i||i!==!1&&a.smooth?(y=x-u,_=b-c,a.xOffset=h+(y*f+_*m)-y,a.yOffset=d+(y*p+_*g)-_):a.xOffset=a.yOffset=0,a.xOrigin=x,a.yOrigin=b,a.smooth=!!i,a.origin=t,a.originIsAbsolute=!!n,e.style[Cr]="0px 0px",o&&(Zs(o,a,"xOrigin",u,x),Zs(o,a,"yOrigin",c,b),Zs(o,a,"xOffset",h,a.xOffset),Zs(o,a,"yOffset",d,a.yOffset)),e.setAttribute("data-svg-origin",x+" "+b)},nd=function(e,t){var n=e._gsap||new Ew(e);if("x"in n&&!t&&!n.uncache)return n;var i=e.style,s=n.scaleX<0,o="px",a="deg",l=getComputedStyle(e),u=mi(e,Cr)||"0",c,h,d,f,p,m,g,y,_,v,x,b,C,E,w,T,k,P,R,D,A,X,K,U,B,z,H,be,Ce,qe,Te,$e;return c=h=d=m=g=y=_=v=x=0,f=p=1,n.svg=!!(e.getCTM&&JP(e)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(i[rt]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[rt]!=="none"?l[rt]:"")),i.scale=i.rotate=i.translate="none"),E=jw(e,n.svg),n.svg&&(n.uncache?(B=e.getBBox(),u=n.xOrigin-B.x+"px "+(n.yOrigin-B.y)+"px",U=""):U=!t&&e.getAttribute("data-svg-origin"),Lw(e,U||u,!!U||n.originIsAbsolute,n.smooth!==!1,E)),b=n.xOrigin||0,C=n.yOrigin||0,E!==rd&&(P=E[0],R=E[1],D=E[2],A=E[3],c=X=E[4],h=K=E[5],E.length===6?(f=Math.sqrt(P*P+R*R),p=Math.sqrt(A*A+D*D),m=P||R?lu(R,P)*na:0,_=D||A?lu(D,A)*na+m:0,_&&(p*=Math.abs(Math.cos(_*cu))),n.svg&&(c-=b-(b*P+C*D),h-=C-(b*R+C*A))):($e=E[6],qe=E[7],H=E[8],be=E[9],Ce=E[10],Te=E[11],c=E[12],h=E[13],d=E[14],w=lu($e,Ce),g=w*na,w&&(T=Math.cos(-w),k=Math.sin(-w),U=X*T+H*k,B=K*T+be*k,z=$e*T+Ce*k,H=X*-k+H*T,be=K*-k+be*T,Ce=$e*-k+Ce*T,Te=qe*-k+Te*T,X=U,K=B,$e=z),w=lu(-D,Ce),y=w*na,w&&(T=Math.cos(-w),k=Math.sin(-w),U=P*T-H*k,B=R*T-be*k,z=D*T-Ce*k,Te=A*k+Te*T,P=U,R=B,D=z),w=lu(R,P),m=w*na,w&&(T=Math.cos(w),k=Math.sin(w),U=P*T+R*k,B=X*T+K*k,R=R*T-P*k,K=K*T-X*k,P=U,X=B),g&&Math.abs(g)+Math.abs(m)>359.9&&(g=m=0,y=180-y),f=lt(Math.sqrt(P*P+R*R+D*D)),p=lt(Math.sqrt(K*K+$e*$e)),w=lu(X,K),_=Math.abs(w)>2e-4?w*na:0,x=Te?1/(Te<0?-Te:Te):0),n.svg&&(U=e.getAttribute("transform"),n.forceCSS=e.setAttribute("transform","")||!tO(mi(e,rt)),U&&e.setAttribute("transform",U))),Math.abs(_)>90&&Math.abs(_)<270&&(s?(f*=-1,_+=m<=0?180:-180,m+=m<=0?180:-180):(p*=-1,_+=_<=0?180:-180)),t=t||n.uncache,n.x=c-((n.xPercent=c&&(!t&&n.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-c)?-50:0)))?e.offsetWidth*n.xPercent/100:0)+o,n.y=h-((n.yPercent=h&&(!t&&n.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-h)?-50:0)))?e.offsetHeight*n.yPercent/100:0)+o,n.z=d+o,n.scaleX=lt(f),n.scaleY=lt(p),n.rotation=lt(m)+a,n.rotationX=lt(g)+a,n.rotationY=lt(y)+a,n.skewX=_+a,n.skewY=v+a,n.transformPerspective=x+o,(n.zOrigin=parseFloat(u.split(" ")[2])||!t&&n.zOrigin||0)&&(i[Cr]=lg(u)),n.xOffset=n.yOffset=0,n.force3D=Tr.force3D,n.renderTransform=n.svg?iz:KP?rO:nz,n.uncache=0,n},lg=function(e){return(e=e.split(" "))[0]+" "+e[1]},Pw=function(e,t,n){var i=Lt(t);return lt(parseFloat(t)+parseFloat(Ks(e,"x",n+"px",i)))+i},nz=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,rO(e,t)},ta="0deg",td="0px",ra=") ",rO=function(e,t){var n=t||this,i=n.xPercent,s=n.yPercent,o=n.x,a=n.y,l=n.z,u=n.rotation,c=n.rotationY,h=n.rotationX,d=n.skewX,f=n.skewY,p=n.scaleX,m=n.scaleY,g=n.transformPerspective,y=n.force3D,_=n.target,v=n.zOrigin,x="",b=y==="auto"&&e&&e!==1||y===!0;if(v&&(h!==ta||c!==ta)){var C=parseFloat(c)*cu,E=Math.sin(C),w=Math.cos(C),T;C=parseFloat(h)*cu,T=Math.cos(C),o=Pw(_,o,E*T*-v),a=Pw(_,a,-Math.sin(C)*-v),l=Pw(_,l,w*T*-v+v)}g!==td&&(x+="perspective("+g+ra),(i||s)&&(x+="translate("+i+"%, "+s+"%) "),(b||o!==td||a!==td||l!==td)&&(x+=l!==td||b?"translate3d("+o+", "+a+", "+l+") ":"translate("+o+", "+a+ra),u!==ta&&(x+="rotate("+u+ra),c!==ta&&(x+="rotateY("+c+ra),h!==ta&&(x+="rotateX("+h+ra),(d!==ta||f!==ta)&&(x+="skew("+d+", "+f+ra),(p!==1||m!==1)&&(x+="scale("+p+", "+m+ra),_.style[rt]=x||"translate(0, 0)"},iz=function(e,t){var n=t||this,i=n.xPercent,s=n.yPercent,o=n.x,a=n.y,l=n.rotation,u=n.skewX,c=n.skewY,h=n.scaleX,d=n.scaleY,f=n.target,p=n.xOrigin,m=n.yOrigin,g=n.xOffset,y=n.yOffset,_=n.forceCSS,v=parseFloat(o),x=parseFloat(a),b,C,E,w,T;l=parseFloat(l),u=parseFloat(u),c=parseFloat(c),c&&(c=parseFloat(c),u+=c,l+=c),l||u?(l*=cu,u*=cu,b=Math.cos(l)*h,C=Math.sin(l)*h,E=Math.sin(l-u)*-d,w=Math.cos(l-u)*d,u&&(c*=cu,T=Math.tan(u-c),T=Math.sqrt(1+T*T),E*=T,w*=T,c&&(T=Math.tan(c),T=Math.sqrt(1+T*T),b*=T,C*=T)),b=lt(b),C=lt(C),E=lt(E),w=lt(w)):(b=h,w=d,C=E=0),(v&&!~(o+"").indexOf("px")||x&&!~(a+"").indexOf("px"))&&(v=Ks(f,"x",o,"px"),x=Ks(f,"y",a,"px")),(p||m||g||y)&&(v=lt(v+p-(p*b+m*E)+g),x=lt(x+m-(p*C+m*w)+y)),(i||s)&&(T=f.getBBox(),v=lt(v+i/100*T.width),x=lt(x+s/100*T.height)),T="matrix("+b+","+C+","+E+","+w+","+v+","+x+")",f.setAttribute("transform",T),_&&(f.style[rt]=T)},sz=function(e,t,n,i,s){var o=360,a=bt(s),l=parseFloat(s)*(a&&~s.indexOf("rad")?na:1),u=l-i,c=i+u+"deg",h,d;return a&&(h=s.split("_")[1],h==="short"&&(u%=o,u!==u%(o/2)&&(u+=u<0?o:-o)),h==="cw"&&u<0?u=(u+o*jP)%o-~~(u/o)*o:h==="ccw"&&u>0&&(u=(u-o*jP)%o-~~(u/o)*o)),e._pt=d=new ur(e._pt,t,n,i,u,H5),d.e=c,d.u="deg",e._props.push(n),d},WP=function(e,t){for(var n in t)e[n]=t[n];return e},oz=function(e,t,n){var i=WP({},n._gsap),s="perspective,force3D,transformOrigin,svgOrigin",o=n.style,a,l,u,c,h,d,f,p;i.svg?(u=n.getAttribute("transform"),n.setAttribute("transform",""),o[rt]=t,a=nd(n,1),sa(n,rt),n.setAttribute("transform",u)):(u=getComputedStyle(n)[rt],o[rt]=t,a=nd(n,1),o[rt]=u);for(l in ts)u=i[l],c=a[l],u!==c&&s.indexOf(l)<0&&(f=Lt(u),p=Lt(c),h=f!==p?Ks(n,l,u,p):parseFloat(u),d=parseFloat(c),e._pt=new ur(e._pt,a,l,h,d-h,Ow),e._pt.u=p||0,e._props.push(l));WP(a,i)};lr("padding,margin,Width,Radius",function(r,e){var t="Top",n="Right",i="Bottom",s="Left",o=(e<3?[t,n,i,s]:[t+s,t+n,i+n,i+s]).map(function(a){return e<2?r+a:"border"+a+r});ag[e>1?"border"+r:r]=function(a,l,u,c,h){var d,f;if(arguments.length<4)return d=o.map(function(p){return es(a,p,u)}),f=d.join(" "),f.split(d[0]).length===5?d[0]:f;d=(c+"").split(" "),f={},o.forEach(function(p,m){return f[p]=d[m]=d[m]||d[(m-1)/2|0]}),a.init(l,f,h)}});var Vw={name:"css",register:Fw,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,n,i,s){var o=this._props,a=e.style,l=n.vars.startAt,u,c,h,d,f,p,m,g,y,_,v,x,b,C,E,w;kw||Fw(),this.styles=this.styles||ZP(e),w=this.styles.props,this.tween=n;for(m in t)if(m!=="autoRound"&&(c=t[m],!(br[m]&&Cw(m,t,n,i,e,s)))){if(f=typeof c,p=ag[m],f==="function"&&(c=c.call(n,i,e,s),f=typeof c),f==="string"&&~c.indexOf("random(")&&(c=au(c)),p)p(this,e,m,c,n)&&(E=1);else if(m.substr(0,2)==="--")u=(getComputedStyle(e).getPropertyValue(m)+"").trim(),c+="",Qi.lastIndex=0,Qi.test(u)||(g=Lt(u),y=Lt(c)),y?g!==y&&(u=Ks(e,m,u,y)+y):g&&(c+=g),this.add(a,"setProperty",u,c,i,s,0,0,m),o.push(m),w.push(m,0,a[m]);else if(f!=="undefined"){if(l&&m in l?(u=typeof l[m]=="function"?l[m].call(n,i,e,s):l[m],bt(u)&&~u.indexOf("random(")&&(u=au(u)),Lt(u+"")||u==="auto"||(u+=Tr.units[m]||Lt(es(e,m))||""),(u+"").charAt(1)==="="&&(u=es(e,m))):u=es(e,m),d=parseFloat(u),_=f==="string"&&c.charAt(1)==="="&&c.substr(0,2),_&&(c=c.substr(2)),h=parseFloat(c),m in pi&&(m==="autoAlpha"&&(d===1&&es(e,"visibility")==="hidden"&&h&&(d=0),w.push("visibility",0,a.visibility),Zs(this,a,"visibility",d?"inherit":"hidden",h?"inherit":"hidden",!h)),m!=="scale"&&m!=="transform"&&(m=pi[m],~m.indexOf(",")&&(m=m.split(",")[0]))),v=m in ts,v){if(this.styles.save(m),x||(b=e._gsap,b.renderTransform&&!t.parseTransform||nd(e,t.parseTransform),C=t.smoothOrigin!==!1&&b.smooth,x=this._pt=new ur(this._pt,a,rt,0,1,b.renderTransform,b,0,-1),x.dep=1),m==="scale")this._pt=new ur(this._pt,b,"scaleY",b.scaleY,(_?Jo(b.scaleY,_+h):h)-b.scaleY||0,Ow),this._pt.u=0,o.push("scaleY",m),m+="X";else if(m==="transformOrigin"){w.push(Cr,0,a[Cr]),c=tz(c),b.svg?Lw(e,c,0,C,0,this):(y=parseFloat(c.split(" ")[2])||0,y!==b.zOrigin&&Zs(this,b,"zOrigin",b.zOrigin,y),Zs(this,a,m,lg(u),lg(c)));continue}else if(m==="svgOrigin"){Lw(e,c,1,C,0,this);continue}else if(m in eO){sz(this,b,m,d,_?Jo(d,_+c):c);continue}else if(m==="smoothOrigin"){Zs(this,b,"smooth",b.smooth,c);continue}else if(m==="force3D"){b[m]=c;continue}else if(m==="transform"){oz(this,c,e);continue}}else m in a||(m=hu(m)||m);if(v||(h||h===0)&&(d||d===0)&&!V5.test(c)&&m in a)g=(u+"").substr((d+"").length),h||(h=0),y=Lt(c)||(m in Tr.units?Tr.units[m]:g),g!==y&&(d=Ks(e,m,u,y)),this._pt=new ur(this._pt,v?b:a,m,d,(_?Jo(d,_+h):h)-d,!v&&(y==="px"||m==="zIndex")&&t.autoRound!==!1?$5:Ow),this._pt.u=y||0,g!==y&&y!=="%"&&(this._pt.b=u,this._pt.r=G5);else if(m in a)ez.call(this,e,m,u,_?_+c:c);else if(m in e)this.add(e,m,u||e[m],_?_+c:c,i,s);else if(m!=="parseTransform"){rg(m,c);continue}v||(m in a?w.push(m,0,a[m]):w.push(m,1,u||e[m])),o.push(m)}}E&&Mw(this)},render:function(e,t){if(t.tween._time||!Bw())for(var n=t._pt;n;)n.r(e,n.d),n=n._next;else t.styles.revert()},get:es,aliases:pi,getSetter:function(e,t,n){var i=pi[t];return i&&i.indexOf(",")<0&&(t=i),t in ts&&t!==Cr&&(e._gsap.x||es(e,"x"))?n&&UP===n?t==="scale"?q5:X5:(UP=n||{})&&(t==="scale"?Y5:Z5):e.style&&!tg(e.style[t])?z5:~t.indexOf("-")?W5:og(e,t)},core:{_removeProperty:sa,_getMatrix:jw}};Yt.utils.checkPrefix=hu;Yt.core.getStyleSaver=ZP;(function(r,e,t,n){var i=lr(r+","+e+","+t,function(s){ts[s]=1});lr(e,function(s){Tr.units[s]="deg",eO[s]=1}),pi[i[13]]=r+","+e,lr(n,function(s){var o=s.split(":");pi[o[1]]=i[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");lr("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(r){Tr.units[r]="px"});Yt.registerPlugin(Vw);var gi=Yt.registerPlugin(Vw)||Yt,aTe=gi.core.Tween;var ie=class ie{};ie.gameRESOLUTION=window.devicePixelRatio,ie.resize=()=>{ie._getGameSize={width:window.innerWidth,height:window.innerHeight},ie._getContainerScale=ie.iniContainerScale();let t=ie.getContainerScale().scale/ie.gameRESOLUTION;ie._gameScaleSize=t},ie._getGameSize={width:window.innerWidth,height:window.innerHeight},ie.d=Date,ie.getGameSize=()=>ie._getGameSize,ie.containerHeight=1898,ie.containerWidth=3538,ie.iniContainerScale=()=>{let e=ie.getGameSize(),t,n,i,s=0;return e.width<992&&e.width<e.height?(s=90,e.width/ie.containerHeight<e.height/ie.containerWidth?t=e.width/ie.containerHeight:t=e.height/ie.containerWidth,i=(ie.containerHeight*t-e.width)/2/ie.gameRESOLUTION,n=(e.height-ie.containerWidth*t)/2/ie.gameRESOLUTION):(e.width<ie.containerWidth||e.height<ie.containerHeight,e.width/ie.containerWidth<e.height/ie.containerHeight?t=e.width/ie.containerWidth:t=e.height/ie.containerHeight,i=(e.width-ie.containerWidth*t)/ie.gameRESOLUTION/2,n=(e.height-ie.containerHeight*t)/ie.gameRESOLUTION/2),{scale:t,rotation:s,x:i,y:n,windowSize:e,gameRESOLUTION:ie.gameRESOLUTION,width:ie.containerWidth*t,height:ie.containerHeight*t}},ie._getContainerScale=ie.iniContainerScale(),ie.getContainerScale=()=>{if(ie._getContainerScale)return ie._getContainerScale;{let e=ie.iniContainerScale();return ie._getContainerScale=e,e}},ie._gameScaleSize=0,ie.gameScaleSize=()=>{if(ie._gameScaleSize)return ie._gameScaleSize;let t=ie.getContainerScale().scale/ie.gameRESOLUTION;return ie._gameScaleSize=t,t};var du=ie;var iO="bGlvbmdhbWUuY",nO=class{constructor(e){this.container=e,this.assets=zR.getInstance(),this.background=new _r(this.assets.gameAssets.coinToss.notificationBG),this.textStyle=new Wt({fontFamily:this.assets.gameAssets.coinToss.notoSerifBold.family,fontSize:60,fill:["#FFFFFF"],dropShadow:!0,dropShadowColor:"#694805",dropShadowBlur:5,dropShadowAlpha:.8,dropShadowDistance:0,dropShadowAngle:0}),this.textErr=new Kl("",this.textStyle),this.containerX=1775,this.containerY=1400,this.containerWidth=1900,this.notificationContainer=new Je,this.notificationContainer.sortableChildren=!0,this.background.zIndex=1,this.textErr.zIndex=2,this.textErr.anchor.set(.5,0),this.notificationContainer.addChild(this.background),this.notificationContainer.addChild(this.textErr),this.notificationContainer.zIndex=ZR.notification.i,this.notificationContainer.visible=!1,this.notificationContainer.alpha=0,this.container.addChild(this.notificationContainer),this.iniSize()}iniSize(){let e=du.gameScaleSize();this.textErr.style.fontSize=60*e,this.textErr.x=this.containerWidth/2*e,this.textErr.y=50*e,this.background.width=this.containerWidth*e,this.background.height=170*e,this.notificationContainer.pivot.x=this.containerWidth/2*e,this.notificationContainer.x=this.containerX*e,this.notificationContainer.y=this.containerY*e}ZoomIn(e=.2,t,n){let i=du.gameScaleSize();if(this.notificationContainer.visible=!0,this.iniTimeout)try{clearTimeout(this.iniTimeout)}catch{}this.textErr.text=n,gi.fromTo(this.notificationContainer,{alpha:0},{alpha:1,duration:e}),gi.fromTo(this.notificationContainer.pivot,{x:this.containerWidth*i},{x:this.containerWidth/2*i,duration:e}),gi.fromTo(this.notificationContainer.scale,{x:2,y:2},{x:1,y:1,duration:e}),gi.fromTo(this.notificationContainer.position,{x:this.containerX*2*i,y:this.containerY*i},{x:this.containerX*i,y:this.containerY*i,duration:e}),this.iniTimeout=setTimeout(()=>{this.ZoomOut(e)},t)}ZoomOut(e=.2){let t=du.gameScaleSize();gi.fromTo(this.notificationContainer,{alpha:1},{alpha:0,duration:e}),gi.fromTo(this.notificationContainer.pivot,{x:this.containerWidth/2*t},{x:this.containerWidth*t,duration:e}),gi.fromTo(this.notificationContainer.scale,{x:1,y:1},{x:2,y:2,duration:e}),gi.fromTo(this.notificationContainer.position,{x:this.containerX*t,y:this.containerY*t},{x:this.containerX*2*t,y:this.containerY*t,duration:e}),setTimeout(()=>{this.notificationContainer.visible=!1},e*1e3)}};var sO=(()=>{let e=class e{constructor(n,i){this.http=n,this.router=i}loginUrl(n){return this.router.navigate(["/auth","login"],{queryParams:{retUrl:n}})}resetToken(n,i){return this.http.get(Ec.apiUrl+"auth",{headers:{Authorization:`Bearer ${n}`,token:i}})}loginRequest(n,i){return this.http.post(Ec.apiUrl+"auth",{username:n,password:i}).pipe(he(s=>s))}};e.\u0275fac=function(i){return new(i||e)(j(b_),j(In))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})();var xTe=(()=>{let e=class e{constructor(n,i){this.auth=n,this.localSt=i,this.token$=new pn(1),this.tokenId=null,this.memberId=null,this.userData=null,this.userData$=new pn(1)}loadToken(){return q(this.getLocalUserData()).pipe(_t(n=>n&&n.accessToken?this.auth.resetToken(n.refreshToken,n.token).pipe(it(i=>{this.setToken(i)}),gn(i=>(this.removeToken(),q(!1)))):(this.removeToken(),q(!1))))}getLocalUserData(){return this.localSt.retrieve("userData")}removeLocalUserData(){this.localSt.clear("userData")}setLocalUserData(n){this.localSt.store("userData",n)}removeToken(){this.token$.next(""),this.userData$.next(null),this.tokenId="",this.memberId="",this.removeLocalUserData()}setToken(n){window.location.hostname===atob(iO+"2x1Yg==")&&(this.tokenId=n.token,this.memberId=n.userId,this.token$.next(n.accessToken),this.userData=n,this.userData$.next(n),this.setLocalUserData(n))}getLocalAccessToken(){let n=this.getLocalUserData();return n?n.accessToken:null}getLocalRefreshToken(){let n=this.getLocalUserData();return n?n.refreshToken:null}checkLocalAccessToken(){return q(this.getLocalUserData()).pipe(Fd(this.token$),he(([n,i])=>n&&n.accessToken&&n.accessToken!==i?(this.tokenId=n.token,this.memberId=n.userId,this.token$.next(n.accessToken),!0):!1))}};e.\u0275fac=function(i){return new(i||e)(j(sO),j($h))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"platform"});let r=e;return r})();export{O as a,De as b,pu as c,pO as d,L as e,Ye as f,ve as g,ha as h,nt as i,Mt as j,pn as k,IO as l,AO as m,dr as n,hW as o,He as p,q,ga as r,Sg as s,he as t,vu as u,ze as v,ss as w,Pd as x,zO as y,Ig as z,ro as A,QO as B,vt as C,JO as D,gn as E,tN as F,rN as G,SE as H,Sr as I,_u as J,AE as K,Mg as L,xi as M,Un as N,sN as O,oN as P,Ng as Q,Fg as R,aN as S,Lg as T,_t as U,kg as V,lN as W,it as X,Fd as Y,vT as Z,J as _,W as $,En as aa,ne as ba,j as ca,V as da,OT as ea,Tn as fa,Wr as ga,Nu as ha,Fa as ia,lK as ja,uK as ka,cK as la,yv as ma,hK as na,dK as oa,Uu as pa,La as qa,BF as ra,Yn as sa,qr as ta,fK as ua,Cv as va,pK as wa,Cn as xa,mK as ya,GL as za,Rf as Aa,Zn as Ba,Au as Ca,Ba as Da,Pf as Ea,Wn as Fa,gK as Ga,we as Ha,sD as Ia,Hu as Ja,$r as Ka,Se as La,uB as Ma,zv as Na,Wv as Oa,DB as Pa,AD as Qa,SB as Ra,yK as Sa,Dn as Ta,YB as Ua,kD as Va,BD as Wa,Xv as Xa,UD as Ya,jD as Za,t2 as _a,xK as $a,n2 as ab,i2 as bb,Va as cb,Yv as db,c2 as eb,bK as fb,wK as gb,EK as hb,f2 as ib,TK as jb,CK as kb,g2 as lb,$D as mb,y2 as nb,DK as ob,WD as pb,SK as qb,IK as rb,AK as sb,MK as tb,RK as ub,PK as vb,OK as wb,NK as xb,FK as yb,Ky as zb,Ti as Ab,N2 as Bb,kK as Cb,F2 as Db,L2 as Eb,BK as Fb,yo as Gb,UK as Hb,Wu as Ib,_o as Jb,xt as Kb,$a as Lb,iQ as Mb,sQ as Nb,oQ as Ob,aQ as Pb,xS as Qb,lQ as Rb,uQ as Sb,cQ as Tb,hQ as Ub,dQ as Vb,fQ as Wb,pQ as Xb,mQ as Yb,bS as Zb,m_ as _b,sp as $b,b_ as ac,QU as bc,IQ as cc,NS as dc,VQ as ec,HQ as fc,F3 as gc,Qn as hc,xs as ic,hj as jc,In as kc,oJ as lc,aJ as mc,lJ as nc,Qr as oc,I as pc,N as qc,S as rc,M as sc,Y as tc,oe as uc,se as vc,mt as wc,Je as xc,_r as yc,sR as zc,et as Ac,Um as Bc,Wt as Cc,Kl as Dc,Ec,zR as Fc,ZR as Gc,du as Hc,nO as Ic,sO as Jc,$h as Kc,QEe as Lc,xTe as Mc};

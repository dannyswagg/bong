var g=(e,t,r=[])=>{let o=Object.getOwnPropertyDescriptors(t);for(let n of r)delete o[n];Object.defineProperties(e,o)},u=(e,t=[e])=>{let r=Object.getPrototypeOf(e);return r===null?t:u(r,[...t,r])},D=(...e)=>{if(e.length===0)return;let t,r=e.map(o=>u(o));for(;r.every(o=>o.length>0);){let o=r.map(s=>s.pop()),n=o[0];if(o.every(s=>s===n))t=n;else break}return t},m=(e,t,r=[])=>{var o;let n=(o=D(...e))!==null&&o!==void 0?o:Object.prototype,s=Object.create(n),i=u(n);for(let a of e){let l=u(a);for(let c=l.length-1;c>=0;c--){let p=l[c];i.indexOf(p)===-1&&(g(s,p,["constructor",...r]),i.push(p))}}return s.constructor=t,s},y=e=>e.filter((t,r)=>e.indexOf(t)==r),v=(e,t)=>{let r=t.map(s=>u(s)),o=0,n=!0;for(;n;){n=!1;for(let s=t.length-1;s>=0;s--){let i=r[s][o];if(i!=null&&(n=!0,Object.getOwnPropertyDescriptor(i,e)!=null))return r[s][0]}o++}},C=(e,t=Object.prototype)=>new Proxy({},{getPrototypeOf(){return t},setPrototypeOf(){throw Error("Cannot set prototype of Proxies created by ts-mixer")},getOwnPropertyDescriptor(r,o){return Object.getOwnPropertyDescriptor(v(o,e)||{},o)},defineProperty(){throw new Error("Cannot define new properties on Proxies created by ts-mixer")},has(r,o){return v(o,e)!==void 0||t[o]!==void 0},get(r,o){return(v(o,e)||t)[o]},set(r,o,n){let s=v(o,e);if(s===void 0)throw new Error("Cannot set new properties on Proxies created by ts-mixer");return s[o]=n,!0},deleteProperty(){throw new Error("Cannot delete properties on Proxies created by ts-mixer")},ownKeys(){return e.map(Object.getOwnPropertyNames).reduce((r,o)=>o.concat(r.filter(n=>o.indexOf(n)<0)))}}),F=(e,t)=>C([...e,{constructor:t}]),f={initFunction:null,staticsStrategy:"copy",prototypeStrategy:"copy",decoratorInheritance:"deep"},x=new Map,M=e=>x.get(e),S=(e,t)=>x.set(e,t);var w=(e,t)=>{var r,o;let n=y([...Object.getOwnPropertyNames(e),...Object.getOwnPropertyNames(t)]),s={};for(let i of n)s[i]=y([...(r=e?.[i])!==null&&r!==void 0?r:[],...(o=t?.[i])!==null&&o!==void 0?o:[]]);return s},P=(e,t)=>{var r,o,n,s;return{property:w((r=e?.property)!==null&&r!==void 0?r:{},(o=t?.property)!==null&&o!==void 0?o:{}),method:w((n=e?.method)!==null&&n!==void 0?n:{},(s=t?.method)!==null&&s!==void 0?s:{})}},_=(e,t)=>{var r,o,n,s,i,a;return{class:y([...(r=e?.class)!==null&&r!==void 0?r:[],...(o=t?.class)!==null&&o!==void 0?o:[]]),static:P((n=e?.static)!==null&&n!==void 0?n:{},(s=t?.static)!==null&&s!==void 0?s:{}),instance:P((i=e?.instance)!==null&&i!==void 0?i:{},(a=t?.instance)!==null&&a!==void 0?a:{})}},h=new Map,j=(...e)=>{var t;let r=new Set,o=new Set([...e]);for(;o.size>0;)for(let n of o){let s=u(n.prototype).map(c=>c.constructor),i=(t=M(n))!==null&&t!==void 0?t:[],l=[...s,...i].filter(c=>!r.has(c));for(let c of l)o.add(c);r.add(n),o.delete(n)}return[...r]},T=(...e)=>{let t=j(...e).map(r=>h.get(r)).filter(r=>!!r);return t.length==0?{}:t.length==1?t[0]:t.reduce((r,o)=>_(r,o))},E=(...e)=>{let t=e.map(r=>N(r));return t.length===0?{}:t.length===1?t[0]:t.reduce((r,o)=>_(r,o))},N=e=>{let t=h.get(e);return t||(t={},h.set(e,t)),t};function I(...e){var t,r,o;let n=e.map(l=>l.prototype),s=f.initFunction;if(s!==null){let l=n.map(d=>d[s]).filter(d=>typeof d=="function"),c=function(...d){for(let b of l)b.apply(this,d)},p={[s]:c};n.push(p)}function i(...l){for(let c of e)g(this,new c(...l));s!==null&&typeof this[s]=="function"&&this[s].apply(this,l)}i.prototype=f.prototypeStrategy==="copy"?m(n,i):F(n,i),Object.setPrototypeOf(i,f.staticsStrategy==="copy"?m(e,null,["prototype"]):C(e,Function.prototype));let a=i;if(f.decoratorInheritance!=="none"){let l=f.decoratorInheritance==="deep"?T(...e):E(...e);for(let c of(t=l?.class)!==null&&t!==void 0?t:[]){let p=c(a);p&&(a=p)}O((r=l?.static)!==null&&r!==void 0?r:{},a),O((o=l?.instance)!==null&&o!==void 0?o:{},a.prototype)}return S(a,e),a}var O=(e,t)=>{let r=e.property,o=e.method;if(r)for(let n in r)for(let s of r[n])s(t,n);if(o)for(let n in o)for(let s of o[n])s(t,n,Object.getOwnPropertyDescriptor(t,n))};export{I as a};
